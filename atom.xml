<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>bkysの客栈</title>
  
  
  <link href="http://bkystop.github.io/atom.xml" rel="self"/>
  
  <link href="http://bkystop.github.io/"/>
  <updated>2023-04-09T09:16:41.323Z</updated>
  <id>http://bkystop.github.io/</id>
  
  <author>
    <name>bkys</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>Python爬取斗图网</title>
    <link href="http://bkystop.github.io/2023/04/09/Python%E7%88%AC%E5%8F%96%E6%96%97%E5%9B%BE%E7%BD%91/"/>
    <id>http://bkystop.github.io/2023/04/09/Python%E7%88%AC%E5%8F%96%E6%96%97%E5%9B%BE%E7%BD%91/</id>
    <published>2023-04-09T09:14:16.000Z</published>
    <updated>2023-04-09T09:16:41.323Z</updated>
    
    <content type="html"><![CDATA[<h2 id="爬取斗图网案例"><a href="#爬取斗图网案例" class="headerlink" title="爬取斗图网案例"></a>爬取斗图网案例</h2><p>本篇以爬取斗图网为案例，分别有单线程爬取斗图网（耗时142秒），多线程爬取斗图网（耗时8秒），以及异步爬取斗图网（不足3秒）。</p><h2 id="单线程爬取斗图王"><a href="#单线程爬取斗图王" class="headerlink" title="单线程爬取斗图王"></a>单线程爬取斗图王</h2><ul><li>单线程版本</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">from</span> lxml <span class="keyword">import</span> etree</span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">get_img_urls</span>():</span><br><span class="line">    headers = &#123;</span><br><span class="line">        <span class="string">&#x27;User-Agent&#x27;</span>: <span class="string">&#x27;Mozilla/5.0 (Linux; Android 6.0; Nexus 5 Build/MRA58N) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/97.0.4692.71 Mobile Safari/537.36&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    res = requests.get(<span class="string">&quot;https://www.pkdoutu.com/photo/list/&quot;</span>, headers=headers, verify=<span class="literal">False</span>)</span><br><span class="line"></span><br><span class="line">    selector = etree.HTML(res.text)</span><br><span class="line">    img_urls = selector.xpath(<span class="string">&#x27;//*[@id=&quot;pic-detail&quot;]/div/div[2]/div[2]/ul/li/div/div/a/img[@data-backup]/@data-backup&#x27;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> img_urls</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 根据img_urls下载</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">download_img</span>(<span class="params">url</span>):</span><br><span class="line">    res = requests.get(url)</span><br><span class="line">    <span class="comment"># img_name = url.split(&quot;/&quot;)[-1]</span></span><br><span class="line">    img_name = os.path.basename(url)</span><br><span class="line">    path = os.path.join(<span class="string">&quot;imgs&quot;</span>, img_name)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> os.path.exists(<span class="string">&quot;imgs&quot;</span>):</span><br><span class="line">        os.mkdir(<span class="string">&quot;imgs&quot;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">with</span> <span class="built_in">open</span>(path, <span class="string">&quot;wb&quot;</span>) <span class="keyword">as</span> f:</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> res.iter_content():</span><br><span class="line">            f.write(i)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&quot;<span class="subst">&#123;img_name&#125;</span>下载完成&quot;</span>)</span><br><span class="line"></span><br><span class="line">start = time.time()</span><br><span class="line"></span><br><span class="line">img_urls = get_img_urls()</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> img_url <span class="keyword">in</span> img_urls:</span><br><span class="line">    download_img(img_url)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&quot;整体耗时<span class="subst">&#123;time.time() - start&#125;</span>秒&quot;</span>)</span><br></pre></td></tr></table></figure><blockquote><p>会有一个警告，这个警告对于后面的代码逻辑没有影响</p><p>requests.get(“<a href="https://www.pkdoutu.com/photo/list/&quot;">https://www.pkdoutu.com/photo/list/&quot;</a>, headers=headers, verify=False)</p><p>这是因为verify关键字设置了False，参数这是因为我们没有配值数字证书，会提示通信不安全</p></blockquote><ul><li>加入如下代码可以忽略警告</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> urllib3</span><br><span class="line">urllib3.disable_warnings() </span><br></pre></td></tr></table></figure><img src="/2023/04/09/Python%E7%88%AC%E5%8F%96%E6%96%97%E5%9B%BE%E7%BD%91/image-20230406203846922.png" class title="耗时142秒"><h2 id="多线程版本"><a href="#多线程版本" class="headerlink" title="多线程版本"></a>多线程版本</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">from</span> lxml <span class="keyword">import</span> etree</span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> threading</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">get_img_urls</span>():</span><br><span class="line">    headers = &#123;</span><br><span class="line">        <span class="string">&#x27;User-Agent&#x27;</span>: <span class="string">&#x27;Mozilla/5.0 (Linux; Android 6.0; Nexus 5 Build/MRA58N) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/97.0.4692.71 Mobile Safari/537.36&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    res = requests.get(<span class="string">&quot;https://www.pkdoutu.com/photo/list/&quot;</span>, headers=headers)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># print(res.text)</span></span><br><span class="line"></span><br><span class="line">    selector = etree.HTML(res.text)</span><br><span class="line">    img_urls = selector.xpath(<span class="string">&#x27;//*[@id=&quot;pic-detail&quot;]/div/div[2]/div[2]/ul/li/div/div/a/img[@data-backup]/@data-backup&#x27;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> img_urls</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 根据img_urls下载</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">download_img</span>(<span class="params">url</span>):</span><br><span class="line">    res = requests.get(url)</span><br><span class="line">    <span class="comment"># img_name = url.split(&quot;/&quot;)[-1]</span></span><br><span class="line">    img_name = os.path.basename(url)</span><br><span class="line">    path = os.path.join(<span class="string">&quot;imgs&quot;</span>, img_name)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> os.path.exists(<span class="string">&quot;imgs&quot;</span>):</span><br><span class="line">        os.mkdir(<span class="string">&quot;imgs&quot;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">with</span> <span class="built_in">open</span>(path, <span class="string">&quot;wb&quot;</span>) <span class="keyword">as</span> f:</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> res.iter_content():</span><br><span class="line">            f.write(i)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&quot;<span class="subst">&#123;img_name&#125;</span>下载完成&quot;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">start = time.time()</span><br><span class="line"></span><br><span class="line">img_urls = get_img_urls()</span><br><span class="line"></span><br><span class="line">t_list = []</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> img_url <span class="keyword">in</span> img_urls:</span><br><span class="line">    t = threading.Thread(target=download_img, args=(img_url,))</span><br><span class="line">    t.start()</span><br><span class="line">    t_list.append(t)</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> t <span class="keyword">in</span> t_list:</span><br><span class="line">    t.join()</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&quot;整体耗时<span class="subst">&#123;time.time() - start&#125;</span>秒&quot;</span>)</span><br></pre></td></tr></table></figure><img src="/2023/04/09/Python%E7%88%AC%E5%8F%96%E6%96%97%E5%9B%BE%E7%BD%91/image-20230406204116619.png" class title="耗时8秒"><h2 id="异步版本"><a href="#异步版本" class="headerlink" title="异步版本"></a>异步版本</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">from</span> lxml <span class="keyword">import</span> etree</span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="keyword">import</span> asyncio</span><br><span class="line"><span class="keyword">import</span> aiohttp</span><br><span class="line"></span><br><span class="line">headers = &#123;</span><br><span class="line">    <span class="string">&#x27;User-Agent&#x27;</span>: <span class="string">&#x27;Mozilla/5.0 (Linux; Android 6.0; Nexus 5 Build/MRA58N) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/97.0.4692.71 Mobile Safari/537.36&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">async</span> <span class="keyword">def</span> <span class="title function_">get_img_urls</span>():</span><br><span class="line"></span><br><span class="line">    <span class="keyword">async</span> <span class="keyword">with</span> aiohttp.ClientSession() <span class="keyword">as</span> session:</span><br><span class="line">        <span class="keyword">async</span> <span class="keyword">with</span> session.get(<span class="string">&quot;https://www.pkdoutu.com/photo/list/&quot;</span>, headers=headers, ssl=<span class="literal">False</span>) <span class="keyword">as</span> response:</span><br><span class="line">            selector = etree.HTML(<span class="keyword">await</span> response.text())</span><br><span class="line">            img_urls = selector.xpath(<span class="string">&#x27;//*[@id=&quot;pic-detail&quot;]/div/div[2]/div[2]/ul/li/div/div/a/img[@data-backup]/@data-backup&#x27;</span>)</span><br><span class="line"></span><br><span class="line">            <span class="keyword">return</span> img_urls</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 根据img_urls下载</span></span><br><span class="line"><span class="keyword">async</span> <span class="keyword">def</span> <span class="title function_">download_img</span>(<span class="params">url</span>):</span><br><span class="line"></span><br><span class="line">    <span class="keyword">async</span> <span class="keyword">with</span> aiohttp.ClientSession() <span class="keyword">as</span> session:</span><br><span class="line">        <span class="keyword">async</span> <span class="keyword">with</span> session.get(url, ssl=<span class="literal">False</span>) <span class="keyword">as</span> response:</span><br><span class="line">            img_name = os.path.basename(url)</span><br><span class="line">            path = os.path.join(<span class="string">&quot;imgs&quot;</span>, img_name)</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> <span class="keyword">not</span> os.path.exists(<span class="string">&quot;imgs&quot;</span>):</span><br><span class="line">                os.mkdir(<span class="string">&quot;imgs&quot;</span>)</span><br><span class="line"></span><br><span class="line">            <span class="keyword">with</span> <span class="built_in">open</span>(path, <span class="string">&quot;wb&quot;</span>) <span class="keyword">as</span> f:</span><br><span class="line">                f.write(<span class="keyword">await</span> response.content.read())</span><br><span class="line"></span><br><span class="line">            <span class="built_in">print</span>(<span class="string">f&quot;<span class="subst">&#123;img_name&#125;</span>下载完成&quot;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">async</span> <span class="keyword">def</span> <span class="title function_">main</span>():</span><br><span class="line">    <span class="comment"># 爬取所有img_url</span></span><br><span class="line">    img_urls = <span class="keyword">await</span> get_img_urls()</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 根据url下载所有图片</span></span><br><span class="line">    tasks = [asyncio.create_task(download_img(url)) <span class="keyword">for</span> url <span class="keyword">in</span> img_urls]</span><br><span class="line"></span><br><span class="line">    <span class="keyword">await</span> asyncio.wait(tasks)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># for img_url in img_urls:</span></span><br><span class="line">    <span class="comment">#     download_img(img_url)</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 主逻辑</span></span><br><span class="line">start = time.time()</span><br><span class="line"></span><br><span class="line">asyncio.run(main())</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&quot;整体耗时<span class="subst">&#123;time.time() - start&#125;</span>秒&quot;</span>)</span><br></pre></td></tr></table></figure><img src="/2023/04/09/Python%E7%88%AC%E5%8F%96%E6%96%97%E5%9B%BE%E7%BD%91/image-20230406204239962.png" class title="耗时不到3秒">]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;爬取斗图网案例&quot;&gt;&lt;a href=&quot;#爬取斗图网案例&quot; class=&quot;headerlink&quot; title=&quot;爬取斗图网案例&quot;&gt;&lt;/a&gt;爬取斗图网案例&lt;/h2&gt;&lt;p&gt;本篇以爬取斗图网为案例，分别有单线程爬取斗图网（耗时142秒），多线程爬取斗图网（耗时8秒），以及异</summary>
      
    
    
    
    <category term="Python篇" scheme="http://bkystop.github.io/categories/Python%E7%AF%87/"/>
    
    
    <category term="Python" scheme="http://bkystop.github.io/tags/Python/"/>
    
    <category term="Python爬虫" scheme="http://bkystop.github.io/tags/Python%E7%88%AC%E8%99%AB/"/>
    
  </entry>
  
  <entry>
    <title>并发爬虫</title>
    <link href="http://bkystop.github.io/2023/03/22/%E5%B9%B6%E5%8F%91%E7%88%AC%E8%99%AB/"/>
    <id>http://bkystop.github.io/2023/03/22/%E5%B9%B6%E5%8F%91%E7%88%AC%E8%99%AB/</id>
    <published>2023-03-22T07:48:04.000Z</published>
    <updated>2023-04-09T09:11:44.052Z</updated>
    
    <content type="html"><![CDATA[<h1 id="并发爬虫"><a href="#并发爬虫" class="headerlink" title="并发爬虫"></a>并发爬虫</h1><p>并发是指在一台处理器上“同时”处理多个任务。并发是在同一实体上的多个事件<strong>。强调多个事件在同一时间间隔发生。</strong></p><h2 id="进程、线程以及协程"><a href="#进程、线程以及协程" class="headerlink" title="进程、线程以及协程"></a>进程、线程以及协程</h2><h3 id="进程概念"><a href="#进程概念" class="headerlink" title="进程概念"></a>进程概念</h3><p>计算机的核心是CPU，承担了所有的计算任务；而操作系统是计算机的管理者，它负责任务的调度、资源的分配和管理，安排所有计算机硬件；应用程序则是具有某种功能的程序，程序是运行于操作系统之上的。</p><blockquote><p>进程是一个具有一定独立功能的程序在一个数据集上的一次动态执行的<strong>过程</strong>，是操作系统进行资源分配和调度的一个独立单位，是应用程序运行的载体。</p></blockquote><p>多道技术：空间复用+时间复用，于是有了进程！</p><p><a href="https://baike.baidu.com/item/%E8%BF%9B%E7%A8%8B/382503?fromModule=lemma_inlink">进程</a>状态反映进程执行过程的变化。这些状态随着进程的执行和外界条件的变化而转换。在三态模型中，进程状态分为三个基本状态，即运行态，就绪态，阻塞态。在五态模型中，进程分为<a href="https://baike.baidu.com/item/%E6%96%B0%E5%BB%BA/6015276?fromModule=lemma_inlink">新建</a>态、终止态，运行态，就绪态，阻塞态。</p><img src="/2023/03/22/%E5%B9%B6%E5%8F%91%E7%88%AC%E8%99%AB/u=3524969454,1048049783&fm=253&fmt=auto&app=138&f=JPEG-8788665.jpeg" class title="img"><h3 id="线程的概念"><a href="#线程的概念" class="headerlink" title="线程的概念"></a>线程的概念</h3><p>早期的操作系统中并没有线程的概念，进程是<strong>能拥有资源和独立运行的最小单位</strong>，也是程序执行的最小单位。任务调度采用的是时间片轮转的抢占式调度方式，而进程是任务调度的最小单位，每个进程有各自独立的一块内存，使得各个进程之间内存地址相互隔离。后来，随着计算机的发展，对CPU的要求越来越高，进程之间的切换开销较大，已经无法满足越来越复杂的程序的要求了。于是就发明了线程。</p><p>线程是程序执行中一个单一的顺序控制流程，是<strong>程序执行流的最小单元</strong>，是处理器调度和分派的基本单位。</p><p>一个进程可以有一个或多个线程，各个线程之间共享程序的内存空间(也就是所在进程的内存空间)。一个标准的线程由线程ID、当前指令指针(PC)、寄存器和堆栈组成。而进程由内存空间(代码、数据、进程空间、打开的文件)和一个或多个线程组成。</p><ul><li> 线程的生命周期</li></ul><p>当线程的数量小于处理器的数量时，线程的并发是真正的并发，不同的线程运行在不同的处理器上。但当线程的数量大于处理器的数量时，线程的并发会受到一些阻碍，此时并不是真正的并发，因为此时至少有一个处理器会运行多个线程。</p><p>在单个处理器运行多个线程时，并发是一种模拟出来的状态。操作系统采用时间片轮转的方式轮流执行每一个线程。现在，几乎所有的现代操作系统采用的都是时间片轮转的抢占式调度方式，如我们熟悉的Unix、Linux、Windows及macOS等流行的操作系统。</p><p>我们知道线程是程序执行的最小单位，也是任务执行的最小单位。在早期只有进程的操作系统中，进程有五种状态，创建、就绪、运行、阻塞(等待)、退出。早期的进程相当于现在的只有单个线程的进程，那么现在的多线程也有五种状态，现在的多线程的生命周期与早期进程的生命周期类似。</p><img src="/2023/03/22/%E5%B9%B6%E5%8F%91%E7%88%AC%E8%99%AB/%E5%B9%B6%E5%8F%917.png" class><blockquote><p>线程的生命周期</p><p>创建：一个新的线程被创建，等待该线程被调用执行；</p><p>就绪：时间片已用完，此线程被强制暂停，等待下一个属于它的时间片到来；</p><p>运行：此线程正在执行，正在占用时间片；</p><p>阻塞：也叫等待状态，等待某一事件(如IO或另一个线程)执行完；</p><p>退出：一个线程完成任务或者其他终止条件发生，该线程终止进入退出状态，退出状态释放该线程所分配的资源。</p></blockquote><ul><li>进程与线程的区别</li></ul><blockquote><ol><li>线程是程序执行的最小单位，而进程是操作系统分配资源的最小单位；</li><li>一个进程由一个或多个线程组成，线程是一个进程中代码的不同执行路线；</li><li>进程之间相互独立，但同一进程下的各个线程之间共享程序的内存空间(包括代码段、数据集、堆等)及一些进程级的资源(如打开文件和信号)，某进程内的线程在其它进程不可见；</li><li>调度和切换：线程上下文切换比进程上下文切换要快得多。</li></ol></blockquote><h3 id="协程"><a href="#协程" class="headerlink" title="协程"></a>协程</h3><p><a href="https://so.csdn.net/so/search?q=%E5%8D%8F%E7%A8%8B&spm=1001.2101.3001.7020">协程</a>（Co-routine），也可称为微线程，或非抢占式的多任务子例程，一种用户态的上下文切换技术（通过一个线程实现代码块间的相互切换执行）。这种由程序员自己写程序来管理的轻量级线程叫做<strong>用户空间线程</strong>，具有对内核来说不可见的特性。正如一个进程可以拥有多个线程一样，一个线程也可以拥有多个协程。</p><blockquote><p>协程解决的是线程的切换和内存开销的问题</p><ul><li>用户空间 首先是在用户空间, 避免内核态和用户态的切换导致的成本。</li><li>由语言或者框架层调度</li><li>更小的栈空间允许创建大量实例（百万级别）</li></ul></blockquote><h2 id="多线程"><a href="#多线程" class="headerlink" title="多线程"></a>多线程</h2><h3 id="threading模块"><a href="#threading模块" class="headerlink" title="threading模块"></a>threading模块</h3><ul><li>Python提供两个模块进行多线程的操作，分别是<code>thread</code>和<code>threading</code>，前者是比较低级的模块，用于更底层的操作，一般应用级别的开发不常用。</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> time</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">foo</span>():</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;foo start...&quot;</span>)</span><br><span class="line">    time.sleep(<span class="number">5</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;foo end...&quot;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">bar</span>():</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;bar start...&quot;</span>)</span><br><span class="line">    time.sleep(<span class="number">3</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;bar end...&quot;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 串行版本</span></span><br><span class="line"><span class="comment"># start = time.time()</span></span><br><span class="line"><span class="comment"># foo()</span></span><br><span class="line"><span class="comment"># bar()</span></span><br><span class="line"><span class="comment"># end = time.time()</span></span><br><span class="line"><span class="comment"># print(&quot;cost timer:&quot;, end - start)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 多线程并发版本</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> threading</span><br><span class="line"></span><br><span class="line">start = time.time()</span><br><span class="line">t1 = threading.Thread(target=foo, args=())</span><br><span class="line">t1.start()</span><br><span class="line">t2 = threading.Thread(target=bar, args=())</span><br><span class="line">t2.start()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 等待所有子线程结束</span></span><br><span class="line"><span class="comment"># t1.join()  # 等待子线程t1</span></span><br><span class="line"><span class="comment"># t2.join()  # 等待子线程t2</span></span><br><span class="line">end = time.time()</span><br><span class="line"><span class="built_in">print</span>(end - start)</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="互斥锁"><a href="#互斥锁" class="headerlink" title="互斥锁"></a>互斥锁</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="keyword">import</span> threading</span><br><span class="line"></span><br><span class="line">Lock = threading.Lock()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">addNum</span>():</span><br><span class="line">    <span class="keyword">global</span> num  <span class="comment"># 在每个线程中都获取这个全局变量</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># 上锁</span></span><br><span class="line">    Lock.acquire()</span><br><span class="line">    t = num - <span class="number">1</span></span><br><span class="line">    time.sleep(<span class="number">0.0001</span>)</span><br><span class="line">    num = t</span><br><span class="line">    Lock.release()</span><br><span class="line">    <span class="comment"># 放锁</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">num = <span class="number">100</span>  <span class="comment"># 设定一个共享变量</span></span><br><span class="line"></span><br><span class="line">thread_list = []</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">100</span>):</span><br><span class="line">    t = threading.Thread(target=addNum)</span><br><span class="line">    t.start()</span><br><span class="line">    thread_list.append(t)</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> t <span class="keyword">in</span> thread_list:  <span class="comment"># 等待所有线程执行完毕</span></span><br><span class="line">    t.join()</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;Result: &#x27;</span>, num)</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="线程池"><a href="#线程池" class="headerlink" title="线程池"></a>线程池</h3><p>系统启动一个新线程的成本是比较高的，因为它涉及与操作系统的交互。在这种情形下，使用线程池可以很好地提升性能，尤其是当程序中需要创建大量生存期很短暂的线程时，更应该考虑使用线程池。</p><p>线程池在系统启动时即创建大量空闲的线程，程序只要将一个函数提交给线程池，线程池就会启动一个空闲的线程来执行它。当该函数执行结束后，该线程并不会死亡，而是再次返回到线程池中变成空闲状态，等待执行下一个函数。</p><p>此外，使用线程池可以有效地控制系统中并发线程的数量。当系统中包含有大量的并发线程时，会导致系统性能急剧下降，甚至导致解释器崩溃，而线程池的最大线程数参数可以控制系统中并发线程的数量不超过此数。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="keyword">from</span> concurrent.futures <span class="keyword">import</span> ThreadPoolExecutor</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">task</span>(<span class="params">i</span>):</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&#x27;任务<span class="subst">&#123;i&#125;</span>开始！&#x27;</span>)</span><br><span class="line">    time.sleep(i)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&#x27;任务<span class="subst">&#123;i&#125;</span>结束！&#x27;</span>)</span><br><span class="line">    <span class="keyword">return</span> i</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">start = time.time()</span><br><span class="line">pool = ThreadPoolExecutor(<span class="number">3</span>)</span><br><span class="line"></span><br><span class="line">future01 = pool.submit(task, <span class="number">1</span>)</span><br><span class="line"><span class="comment"># print(&quot;future01是否结束&quot;, future01.done())</span></span><br><span class="line"><span class="comment"># 当程序使用 Future 的 result() 方法来获取结果时，该方法会阻塞当前线程，如果没有指定 timeout 参数，当前线程将一直处于阻塞状态，直到 Future 代表的任务返回。</span></span><br><span class="line"><span class="comment"># print(&quot;future01的结果&quot;, future01.result())  # 同步等待</span></span><br><span class="line">future02 = pool.submit(task, <span class="number">2</span>)</span><br><span class="line">future03 = pool.submit(task, <span class="number">3</span>)</span><br><span class="line">pool.shutdown()  <span class="comment"># 阻塞等待</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&quot;程序耗时<span class="subst">&#123;time.time() - start&#125;</span>秒钟&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;future01的结果&quot;</span>, future01.result())</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;future02的结果&quot;</span>, future02.result())</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;future03的结果&quot;</span>, future03.result())</span><br></pre></td></tr></table></figure><blockquote><p>使用线程池来执行线程任务的步骤如下：</p><ol><li>调用 ThreadPoolExecutor 类的构造器创建一个线程池。</li><li>定义一个普通函数作为线程任务。</li><li>调用 ThreadPoolExecutor 对象的 submit() 方法来提交线程任务。</li><li>当不想提交任何任务时，调用 ThreadPoolExecutor 对象的 shutdown() 方法来关闭线程池。</li></ol></blockquote><h3 id="线程应用"><a href="#线程应用" class="headerlink" title="线程应用"></a>线程应用</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">from</span> lxml <span class="keyword">import</span> etree</span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">import</span> asyncio</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="keyword">import</span> threading</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">get_img_urls</span>():</span><br><span class="line">    res = requests.get(<span class="string">&quot;https://www.pkdoutu.com/photo/list/&quot;</span>, headers=&#123;</span><br><span class="line">        <span class="string">&quot;User-Agent&quot;</span>: <span class="string">&quot;Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/110.0.0.0 Safari/537.36&quot;</span></span><br><span class="line">    &#125;)</span><br><span class="line">    </span><br><span class="line">    selector = etree.HTML(res.text)</span><br><span class="line">    img_urls = selector.xpath(<span class="string">&#x27;//li[@class=&quot;list-group-item&quot;]/div/div/a/img[@data-backup]/@data-backup&#x27;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="built_in">print</span>(img_urls)</span><br><span class="line">    <span class="keyword">return</span> img_urls</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">save_img</span>(<span class="params">url</span>):</span><br><span class="line">    res = requests.get(url)</span><br><span class="line">    name = os.path.basename(url)</span><br><span class="line">    <span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&quot;imgs/&quot;</span> + name, <span class="string">&quot;wb&quot;</span>) <span class="keyword">as</span> f:</span><br><span class="line">        f.write(res.content)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&quot;<span class="subst">&#123;name&#125;</span>下载完成！&quot;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">main</span>():</span><br><span class="line">    img_urls = get_img_urls()</span><br><span class="line">    <span class="comment"># 串行</span></span><br><span class="line">    [save_img(url) <span class="keyword">for</span> url <span class="keyword">in</span> img_urls]</span><br><span class="line">    <span class="comment"># 协程并发</span></span><br><span class="line">    t_list = []</span><br><span class="line">    <span class="keyword">for</span> url <span class="keyword">in</span> img_urls:</span><br><span class="line">        t = threading.Thread(target=save_img, args=(url,))</span><br><span class="line">        t.start()</span><br><span class="line">        t_list.append(t)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> t <span class="keyword">in</span> t_list:</span><br><span class="line">        t.join()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    start = time.time()</span><br><span class="line">    main()</span><br><span class="line">    end = time.time()</span><br><span class="line">    <span class="built_in">print</span>(end - start)</span><br><span class="line"></span><br></pre></td></tr></table></figure><blockquote><p>针对IO密集型任务，Python多线程可以发挥出不错的并发作用</p></blockquote><h2 id="多进程"><a href="#多进程" class="headerlink" title="多进程"></a>多进程</h2><p>由于GIL的存在，python中的多线程其实并不是真正的多线程，如果想要充分地使用多核CPU的资源，在python中大部分情况需要使用多进程。</p><p>multiprocessing包是Python中的多进程管理包。与threading.Thread类似，它可以利用multiprocessing.Process对象来创建一个进程。该进程可以运行在Python程序内部编写的函数。该Process对象与Thread对象的用法相同，也有start(), run(), join()的方法。此外multiprocessing包中也有Lock/Event/Semaphore/Condition类 (这些对象可以像多线程那样，通过参数传递给各个进程)，用以同步进程，其用法与threading包中的同名类一致。所以，multiprocessing的很大一部份与threading使用同一套API，只不过换到了多进程的情境。</p><p>python的进程调用:</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> multiprocessing</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">foo</span>():</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;foo start...&quot;</span>)</span><br><span class="line">    time.sleep(<span class="number">5</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;foo end...&quot;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">bar</span>():</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;bar start...&quot;</span>)</span><br><span class="line">    time.sleep(<span class="number">3</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;bar end...&quot;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">  </span><br><span class="line">    start = time.time()</span><br><span class="line">    t1 = multiprocessing.Process(target=foo, args=())</span><br><span class="line">    t1.start()</span><br><span class="line">    t2 = multiprocessing.Process(target=bar, args=())</span><br><span class="line">    t2.start()</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 等待所有子线程结束</span></span><br><span class="line">    t1.join()  <span class="comment"># 等待子线程t1</span></span><br><span class="line">    t2.join()  <span class="comment"># 等待子线程t2</span></span><br><span class="line">    end = time.time()</span><br><span class="line">    <span class="built_in">print</span>(end - start)</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="协程-1"><a href="#协程-1" class="headerlink" title="协程"></a>协程</h2><p>协程，又称微线程。英文名Coroutine。协程是一种用户态的轻量级线程。</p><p>协程拥有自己的寄存器上下文和栈。协程调度切换时，将寄存器上下文和栈保存到其他地方，在切回来的时候，恢复先前保存的寄存器上下文和栈。因此：</p><p>协程能保留上一次调用时的状态（即所有局部状态的一个特定组合），每次过程序重新进入时，就相当于进入上一次调用的状态，换种说法：进入上一次离开时所处逻辑流的位置。</p><ul><li>yield与协程</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">foo</span>():</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;OK1&quot;</span>)</span><br><span class="line">    <span class="keyword">yield</span> <span class="number">100</span>  <span class="comment"># 切换: 保存/恢复的功能</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;OK2&quot;</span>)</span><br><span class="line">    <span class="keyword">yield</span> <span class="number">1000</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">bar</span>():</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;OK3&quot;</span>)</span><br><span class="line">    <span class="keyword">yield</span> <span class="number">200</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;OK4&quot;</span>)</span><br><span class="line">    <span class="keyword">yield</span> <span class="number">2000</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">gen = foo()</span><br><span class="line">ret = <span class="built_in">next</span>(gen)    <span class="comment"># gen.__next__()</span></span><br><span class="line"><span class="built_in">print</span>(ret)</span><br><span class="line"></span><br><span class="line">gen2 = bar()</span><br><span class="line">ret2 = <span class="built_in">next</span>(gen2)  <span class="comment"># gen.__next__()</span></span><br><span class="line"><span class="built_in">print</span>(ret2)</span><br><span class="line"></span><br><span class="line">ret = <span class="built_in">next</span>(gen)    <span class="comment"># gen.__next__()</span></span><br><span class="line"><span class="built_in">print</span>(ret)</span><br><span class="line"></span><br><span class="line">ret2 = <span class="built_in">next</span>(gen2)  <span class="comment"># gen.__next__()</span></span><br><span class="line"><span class="built_in">print</span>(ret2)</span><br></pre></td></tr></table></figure><ul><li>asyncio模块</li></ul><p>asyncio即Asynchronous I/O是python一个用来处理并发(concurrent)事件的包，是很多python异步架构的基础，多用于处理高并发网络请求方面的问题。</p><p>为了简化并更好地标识异步IO，从<a href="http://www.zzvips.com/article/123934.html">Python</a> 3.5开始引入了新的语法<a href="http://www.zzvips.com/article/98814.html">async</a>和<a href="http://www.zzvips.com/article/120838.html">await</a>，可以让coroutine的代码更简洁易读。</p><p>asyncio 被用作多个提供高性能 Python 异步框架的基础，包括网络和网站服务，数据库连接库，分布式任务队列等等。</p><p>asyncio 往往是构建 IO 密集型和高层级 <strong>结构化</strong> 网络代码的最佳选择。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> asyncio</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">async</span> <span class="keyword">def</span> <span class="title function_">task</span>(<span class="params">i</span>):</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&quot;task <span class="subst">&#123;i&#125;</span> start&quot;</span>)</span><br><span class="line">    <span class="keyword">await</span> asyncio.sleep(<span class="number">1</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&quot;task <span class="subst">&#123;i&#125;</span> end&quot;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建事件循环对象</span></span><br><span class="line">loop = asyncio.get_event_loop()</span><br><span class="line"><span class="comment"># 直接将协程对象加入时间循环中</span></span><br><span class="line">tasks = [task(<span class="number">1</span>), task(<span class="number">2</span>)]</span><br><span class="line"><span class="comment"># asyncio.wait:将协程任务进行收集，功能类似后面的asyncio.gather</span></span><br><span class="line"><span class="comment"># run_until_complete阻塞调用，直到协程全部运行结束才返回</span></span><br><span class="line">loop.run_until_complete(asyncio.wait(tasks))</span><br><span class="line">loop.close()</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><code>task</code>: 任务,对<strong>协程对象</strong>的进一步封装,包含任务的各个状态;asyncio.Task是Future的一个子类，用于实现协作式多任务的库，且Task对象不能用户手动实例化，通过下面2个函数<code>loop.create_task() 或 asyncio.ensure_future()</code>创建。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> asyncio, time</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">async</span> <span class="keyword">def</span> <span class="title function_">work</span>(<span class="params">i, n</span>):  <span class="comment"># 使用async关键字定义异步函数</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;任务&#123;&#125;等待: &#123;&#125;秒&#x27;</span>.<span class="built_in">format</span>(i, n))</span><br><span class="line">    <span class="keyword">await</span> asyncio.sleep(n)  <span class="comment"># 休眠一段时间</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;任务&#123;&#125;在&#123;&#125;秒后返回结束运行&#x27;</span>.<span class="built_in">format</span>(i, n))</span><br><span class="line">    <span class="keyword">return</span> i + n</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">start_time = time.time()  <span class="comment"># 开始时间</span></span><br><span class="line"></span><br><span class="line">tasks = [asyncio.ensure_future(work(<span class="number">1</span>, <span class="number">1</span>)),</span><br><span class="line">         asyncio.ensure_future(work(<span class="number">2</span>, <span class="number">2</span>)),</span><br><span class="line">         asyncio.ensure_future(work(<span class="number">3</span>, <span class="number">3</span>))]</span><br><span class="line"></span><br><span class="line">loop = asyncio.get_event_loop()</span><br><span class="line">loop.run_until_complete(asyncio.wait(tasks))</span><br><span class="line">loop.close()</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;运行时间: &#x27;</span>, time.time() - start_time)</span><br><span class="line"><span class="keyword">for</span> task <span class="keyword">in</span> tasks:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;任务执行结果: &#x27;</span>, task.result())</span><br></pre></td></tr></table></figure><blockquote><p>3.8版本之后</p><p><code>async.run()</code> 运行协程<br><code>async.create_task()</code>创建task<br><code>async.gather()</code>获取返回值</p></blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> asyncio, time</span><br><span class="line"></span><br><span class="line"><span class="keyword">async</span> <span class="keyword">def</span> <span class="title function_">work</span>(<span class="params">i, n</span>):  <span class="comment"># 使用async关键字定义异步函数</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;任务&#123;&#125;等待: &#123;&#125;秒&#x27;</span>.<span class="built_in">format</span>(i, n))</span><br><span class="line">    <span class="keyword">await</span> asyncio.sleep(n)  <span class="comment"># 休眠一段时间</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;任务&#123;&#125;在&#123;&#125;秒后返回结束运行&#x27;</span>.<span class="built_in">format</span>(i, n))</span><br><span class="line">    <span class="keyword">return</span> i + n</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">tasks = []</span><br><span class="line"><span class="keyword">async</span> <span class="keyword">def</span> <span class="title function_">main</span>():</span><br><span class="line">    <span class="keyword">global</span> tasks</span><br><span class="line">    tasks = [asyncio.create_task(work(<span class="number">1</span>, <span class="number">1</span>)),</span><br><span class="line">             asyncio.create_task(work(<span class="number">2</span>, <span class="number">2</span>)),</span><br><span class="line">             asyncio.create_task(work(<span class="number">3</span>, <span class="number">3</span>))]</span><br><span class="line"></span><br><span class="line">    <span class="keyword">await</span> asyncio.wait(tasks) <span class="comment"># 阻塞</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">start_time = time.time()  <span class="comment"># 开始时间</span></span><br><span class="line">asyncio.run(main())</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;运行时间: &#x27;</span>, time.time() - start_time)</span><br><span class="line"><span class="keyword">for</span> task <span class="keyword">in</span> tasks:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;任务执行结果: &#x27;</span>, task.result())</span><br><span class="line"></span><br></pre></td></tr></table></figure><blockquote><p>asyncio.create_task() 函数在 Python 3.7 中被加入。</p></blockquote><p><code>asyncio.gather</code>方法</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 用gather()收集返回值</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> asyncio, time</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">async</span> <span class="keyword">def</span> <span class="title function_">work</span>(<span class="params">i, n</span>):  <span class="comment"># 使用async关键字定义异步函数</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;任务&#123;&#125;等待: &#123;&#125;秒&#x27;</span>.<span class="built_in">format</span>(i, n))</span><br><span class="line">    <span class="keyword">await</span> asyncio.sleep(n)  <span class="comment"># 休眠一段时间</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;任务&#123;&#125;在&#123;&#125;秒后返回结束运行&#x27;</span>.<span class="built_in">format</span>(i, n))</span><br><span class="line">    <span class="keyword">return</span> i + n</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">async</span> <span class="keyword">def</span> <span class="title function_">main</span>():</span><br><span class="line">    tasks = [asyncio.create_task(work(<span class="number">1</span>, <span class="number">1</span>)),</span><br><span class="line">             asyncio.create_task(work(<span class="number">2</span>, <span class="number">2</span>)),</span><br><span class="line">             asyncio.create_task(work(<span class="number">3</span>, <span class="number">3</span>))]</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 将task作为参数传入gather，等异步任务都结束后返回结果列表</span></span><br><span class="line">    response = <span class="keyword">await</span> asyncio.gather(tasks[<span class="number">0</span>], tasks[<span class="number">1</span>], tasks[<span class="number">2</span>])</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;异步任务结果：&quot;</span>, response)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">start_time = time.time()  <span class="comment"># 开始时间</span></span><br><span class="line"></span><br><span class="line">asyncio.run(main())</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;运行时间: &#x27;</span>, time.time() - start_time)</span><br></pre></td></tr></table></figure><h3 id="aiohttp"><a href="#aiohttp" class="headerlink" title="aiohttp"></a>aiohttp</h3><p>爬虫的requests模块，它是阻塞式的发起请求，每次请求发起后需阻塞等待其返回响应，不能做其他的事情。aiohttp模块可以理解成是和requests对应Python异步网络请求库，它是基于 asyncio 的异步模块，可用于实现异步爬虫，有点就是更快于 requests 的同步爬虫。</p><ul><li>安装方式<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install aiohttp</span><br></pre></td></tr></table></figure></li></ul><p>aiohttp是一个为Python提供异步HTTP 客户端/服务端编程，基于<code>asyncio</code>的异步库。asyncio可以实现单线程并发IO操作，其实现了TCP、UDP、SSL等协议，aiohttp就是基于asyncio实现的http框架。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> aiohttp</span><br><span class="line"><span class="keyword">import</span> asyncio</span><br><span class="line"></span><br><span class="line"><span class="keyword">async</span> <span class="keyword">def</span> <span class="title function_">main</span>():</span><br><span class="line">    <span class="keyword">async</span> <span class="keyword">with</span> aiohttp.ClientSession() <span class="keyword">as</span> session:</span><br><span class="line">        <span class="keyword">async</span> <span class="keyword">with</span> session.get(<span class="string">&quot;http://httpbin.org/headers&quot;</span>) <span class="keyword">as</span> response:</span><br><span class="line">            <span class="built_in">print</span>(<span class="keyword">await</span> response.text())</span><br><span class="line"></span><br><span class="line">asyncio.run(main())</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;并发爬虫&quot;&gt;&lt;a href=&quot;#并发爬虫&quot; class=&quot;headerlink&quot; title=&quot;并发爬虫&quot;&gt;&lt;/a&gt;并发爬虫&lt;/h1&gt;&lt;p&gt;并发是指在一台处理器上“同时”处理多个任务。并发是在同一实体上的多个事件&lt;strong&gt;。强调多个事件在同一时间间隔发生。&lt;</summary>
      
    
    
    
    <category term="Python篇" scheme="http://bkystop.github.io/categories/Python%E7%AF%87/"/>
    
    
    <category term="Python" scheme="http://bkystop.github.io/tags/Python/"/>
    
    <category term="Python爬虫" scheme="http://bkystop.github.io/tags/Python%E7%88%AC%E8%99%AB/"/>
    
  </entry>
  
  <entry>
    <title>MySQL常用指令</title>
    <link href="http://bkystop.github.io/2023/02/17/MySQL%E5%B8%B8%E7%94%A8%E6%8C%87%E4%BB%A4/"/>
    <id>http://bkystop.github.io/2023/02/17/MySQL%E5%B8%B8%E7%94%A8%E6%8C%87%E4%BB%A4/</id>
    <published>2023-02-17T11:57:39.000Z</published>
    <updated>2023-04-09T09:09:37.952Z</updated>
    
    <content type="html"><![CDATA[<h2 id="MYSQL指令"><a href="#MYSQL指令" class="headerlink" title="MYSQL指令"></a>MYSQL指令</h2><h3 id="下载及安装"><a href="#下载及安装" class="headerlink" title="下载及安装"></a>下载及安装</h3><p>打开官网，<a href="https://www.mysql.com,点击`downloads`,进行下载(enterprise企业版,和/">https://www.mysql.com，点击`DOWNLOADS`,进行下载（Enterprise企业版，和</a> Community社区版）我们选择社区版，安装成功后记得配置<strong>环境变量</strong></p><h3 id="创建配置文件"><a href="#创建配置文件" class="headerlink" title="创建配置文件"></a>创建配置文件</h3><ul><li>mysql在windows下的配置文件，叫 mysql.ini（MySQL安装目录即可），默认是没有的，我们需要手动创建。</li></ul><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">[mysqld]</span></span><br><span class="line"><span class="comment">; 设置3306端口</span></span><br><span class="line"><span class="attr">port</span>=<span class="number">3306</span></span><br><span class="line"><span class="comment">; 设置mysql的安装目录</span></span><br><span class="line"><span class="attr">basedir</span>=<span class="string">&quot;D:mysql&quot;</span></span><br><span class="line"><span class="comment">; 设置mysql数据库的数据的存放目录，就是前面手动创建的data目录</span></span><br><span class="line"><span class="attr">datadir</span>=<span class="string">&quot;D:/mysql&quot;</span></span><br><span class="line"><span class="comment">; 允许最大连接数</span></span><br><span class="line"><span class="attr">max_connections</span>=<span class="number">200</span></span><br><span class="line"><span class="comment">; 允许连接失败的次数。</span></span><br><span class="line"><span class="attr">max_connect_errors</span>=<span class="number">10</span></span><br><span class="line"><span class="comment">; 服务端使用的字符集默认为utf8mb4</span></span><br><span class="line"><span class="attr">character-set-server</span>=utf8mb4</span><br><span class="line"><span class="comment">; 创建新表时将使用的默认存储引擎</span></span><br><span class="line"><span class="attr">default-storage-engine</span>=INNODB</span><br><span class="line"><span class="comment">; 默认使用“mysql_native_password”插件认证, mysql_native_password</span></span><br><span class="line"><span class="attr">default_authentication_plugin</span>=mysql_native_password</span><br><span class="line"><span class="section">[mysql]</span></span><br><span class="line"><span class="comment">; 设置mysql网络通信的默认字符集</span></span><br><span class="line"><span class="attr">default-character-set</span>=utf8mb4</span><br><span class="line"><span class="section">[client]</span></span><br><span class="line"><span class="comment">; 设置mysql客户端连接服务端时默认使用的端口</span></span><br><span class="line"><span class="attr">port</span>=<span class="number">3306</span></span><br><span class="line"><span class="comment">; 设置mysql客户端的默认字符集</span></span><br><span class="line"><span class="attr">default-character-set</span>=utf8mb4</span><br></pre></td></tr></table></figure><blockquote><p>每次修改配置文件后，都需要重启MySQL服务才有用</p></blockquote><ul><li>初始化数据库</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysqld --initialize --console</span><br></pre></td></tr></table></figure><ul><li>注册系统服务</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">mysqld --install mysql80 # mysql80就是自己取的服务名</span><br><span class="line"><span class="meta prompt_"> </span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">注销服务，用于卸载mysql的</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">mysqld --remove mysql80</span></span><br></pre></td></tr></table></figure><ul><li>启动&amp;停止&amp;重启</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">net start mysql80  # 启动</span><br><span class="line">net stop mysql80  # 停止</span><br><span class="line">net start mysql80  # 重启</span><br></pre></td></tr></table></figure><ul><li>登录</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">启动本地MySQL，回车后输入初始密码</span></span><br><span class="line">mysql -u root -p</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">使用远程MySQL，-h参数后加主机名</span></span><br><span class="line">mysql -u root -h 81.68.239.40 -p</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">退出</span></span><br><span class="line">exit</span><br></pre></td></tr></table></figure><h3 id="进入MySQL"><a href="#进入MySQL" class="headerlink" title="进入MySQL"></a>进入MySQL</h3><blockquote><p> 类比理解数据库：数据库（文件夹），数据表（excel文件）</p><p>MySQL是关系型数据库，我们操作MySQL就要使用SQL（结构化查询语言）。</p></blockquote><ul><li>以下命令都是在MySQL下完成</li></ul><blockquote><p>SQL规范</p><ol><li>在数据库管理系统中，SQL语句关键字不区分大小写(建议用大写) ，参数区分大小写。建议命令大写，数据库名、数据表名、字段名统一小写，如数据库名、数据表名、字段名与关键字同名，使用反引号圈起来，避免冲突。</li><li>SQL语句可单行或多行书写，默认以英文分号（;）结尾，关键词不能跨多行或简写。</li><li>字符串跟日期类型的值都要以 单引号括起来，单词之间需要使用半角的空格隔开。</li><li>用空格和缩进来提高SQL语句的可读性。</li></ol></blockquote><ul><li> 注释</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">第一种：</span><br><span class="line"><span class="comment">-- 单行注释</span></span><br><span class="line"></span><br><span class="line">第二种：</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">   多行注释</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line">第三种：</span><br><span class="line"># mysql支持单行注释</span><br></pre></td></tr></table></figure><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">alter</span> <span class="keyword">user</span> <span class="string">&#x27;root&#x27;</span>@<span class="string">&#x27;localhost&#x27;</span> identified <span class="keyword">by</span> <span class="string">&#x27;123456&#x27;</span>;</span><br><span class="line"># <span class="string">&#x27;root&#x27;</span> 就是要修改密码的用户名</span><br><span class="line"># <span class="string">&#x27;localhost&#x27;</span> 表示允许用户在什么地址下可以使用密码登陆到数据库服务器，localhost表示本地登陆</span><br><span class="line"># <span class="string">&#x27;123456&#x27;</span>  新的密码了</span><br></pre></td></tr></table></figure><h3 id="数据库管理"><a href="#数据库管理" class="headerlink" title="数据库管理"></a>数据库管理</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">show</span> databases;  # 查看已有的数据库</span><br><span class="line"><span class="keyword">create</span> database <span class="operator">&lt;</span>数据库名字<span class="operator">&gt;</span>; # 创建数据库</span><br><span class="line"># 存在就不重复创建，编码类型utf8</span><br><span class="line"> <span class="keyword">create</span> database [if <span class="keyword">not</span> <span class="keyword">exists</span>] <span class="operator">&lt;</span>数据库名字<span class="operator">&gt;</span> [<span class="type">character</span> <span class="keyword">set</span> utf8]  </span><br><span class="line"><span class="keyword">drop</span> database <span class="operator">&lt;</span>数据库名字<span class="operator">&gt;</span>; # 删除数据库</span><br><span class="line">use <span class="operator">&lt;</span>数据库名字<span class="operator">&gt;</span>; # 进入数据库</span><br><span class="line"><span class="keyword">alter</span> database  <span class="operator">&lt;</span>数据库名字<span class="operator">&gt;</span> [<span class="type">character</span> <span class="keyword">set</span> xxx] # 修改当前使用数据库</span><br><span class="line"><span class="keyword">select</span> database(); # 查看当前使用的数据库</span><br><span class="line"><span class="keyword">show</span> tables; # 查看数据库下的数据表</span><br></pre></td></tr></table></figure><h3 id="数据表管理"><a href="#数据表管理" class="headerlink" title="数据表管理"></a>数据表管理</h3><ul><li><p>数据表中的一条记录就相当于excel的一行内容。</p></li><li><p>查看表</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">use <span class="operator">&lt;</span>数据库名字<span class="operator">&gt;</span>; # 进入数据库</span><br><span class="line"><span class="keyword">show</span> tables; # 查看数据库下的数据表</span><br></pre></td></tr></table></figure></li><li><p>创建表（字段名就是列名词）</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> [if <span class="keyword">not</span> <span class="keyword">exists</span>] <span class="operator">&lt;</span>表名称号<span class="operator">&gt;</span>(</span><br><span class="line">字段名，数据类型[ ( 存储空间 )    字段约束 ],</span><br><span class="line">字段名，数据类型[ ( 存储空间 )    字段约束 ],</span><br><span class="line">字段名，数据类型[ ( 存储空间 )    字段约束 ]，</span><br><span class="line">)<span class="keyword">default</span> charset<span class="operator">=</span>utf8</span><br></pre></td></tr></table></figure><p>注意：</p></li></ul><blockquote><ol><li>上面SQL语句中，小括号中的定义字段语句后面必须以英文逗号结尾，而最后一个字段的定义语句不能有英文逗号出现，否则报错。</li><li>在同一张数据表中，字段名是不能相同，否则报错！</li><li>创建数据表的SQL语句中，存储空间和字段约束是选填的，而字段名和数据类型则是必须填写的。</li></ol></blockquote><ul><li>可以写一行</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> tb1(id <span class="type">int</span>, name <span class="type">varchar</span>(<span class="number">16</span>), age <span class="type">int</span>)<span class="keyword">default</span> charset<span class="operator">=</span>utf8;</span><br></pre></td></tr></table></figure><ul><li><p>也可以分开写（直到分号才结束）</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> tb2(</span><br><span class="line">id <span class="type">int</span>, </span><br><span class="line">name <span class="type">varchar</span>(<span class="number">16</span>), </span><br><span class="line">age <span class="type">int</span></span><br><span class="line">)<span class="keyword">default</span> charset<span class="operator">=</span>utf8;</span><br></pre></td></tr></table></figure></li><li><p>两种创建方式均可</p><img src="/2023/02/17/MySQL%E5%B8%B8%E7%94%A8%E6%8C%87%E4%BB%A4/image-20230407203149778.png" class title="image-20230407203149778"></li><li><p>此时show tables就可以看到创建的两张表了</p><img src="/2023/02/17/MySQL%E5%B8%B8%E7%94%A8%E6%8C%87%E4%BB%A4/image-20230407203208994.png" class title="image-20230407203208994"></li><li><p>不允许为空</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> tb2(</span><br><span class="line">id <span class="type">int</span>,</span><br><span class="line">name <span class="type">varchar</span>(<span class="number">16</span>) <span class="keyword">not</span> <span class="keyword">null</span>,  # 不允许此列为空 </span><br><span class="line">age <span class="type">int</span>  <span class="keyword">null</span> # 允许此列为空（默认）</span><br><span class="line">)<span class="keyword">default</span> charset<span class="operator">=</span>utf8;</span><br></pre></td></tr></table></figure></li><li><p>插入时，写默认值</p></li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> tb2(</span><br><span class="line">id <span class="type">int</span>, </span><br><span class="line">name <span class="type">varchar</span>(<span class="number">16</span>), </span><br><span class="line">age <span class="type">int</span> <span class="keyword">default</span> <span class="number">18</span>  # 插入数据时，age列的值默认为<span class="number">18</span></span><br><span class="line">)<span class="keyword">default</span> charset<span class="operator">=</span>utf8;</span><br></pre></td></tr></table></figure><ul><li><p>主键一般表示当前行的数据的编码</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> tb2(</span><br><span class="line">id <span class="type">int</span> <span class="keyword">primary</span> key,  # 主键，不允许为空，不能重复 </span><br><span class="line">name <span class="type">varchar</span>(<span class="number">16</span>), </span><br><span class="line">age <span class="type">int</span></span><br><span class="line">)<span class="keyword">default</span> charset<span class="operator">=</span>utf8;</span><br></pre></td></tr></table></figure></li><li><p>内部维护，自增 </p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> tb2(</span><br><span class="line">id <span class="type">int</span> auto_increment <span class="keyword">primary</span> key,  # 内部维护，自增 </span><br><span class="line">name <span class="type">varchar</span>(<span class="number">16</span>), </span><br><span class="line">age <span class="type">int</span></span><br><span class="line">)<span class="keyword">default</span> charset<span class="operator">=</span>utf8;</span><br></pre></td></tr></table></figure></li><li><p>一般创建不允许id为空</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> tb2(</span><br><span class="line">id <span class="type">int</span> <span class="keyword">not</span> <span class="keyword">null</span> auto_increment <span class="keyword">primary</span> key,  </span><br><span class="line">name <span class="type">varchar</span>(<span class="number">16</span>), </span><br><span class="line">age <span class="type">int</span></span><br><span class="line">)<span class="keyword">default</span> charset<span class="operator">=</span>utf8;</span><br></pre></td></tr></table></figure></li><li><p>删除表</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">drop</span> <span class="keyword">table</span> <span class="operator">&lt;</span>表名称<span class="operator">&gt;</span>;</span><br></pre></td></tr></table></figure></li><li><p>展示表格的属性</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">desc</span> <span class="operator">&lt;</span>表名称<span class="operator">&gt;</span>;</span><br></pre></td></tr></table></figure><img src="/2023/02/17/MySQL%E5%B8%B8%E7%94%A8%E6%8C%87%E4%BB%A4/image-20230407203240780.png" class title="image-20230407203240780"></li></ul><h3 id="数据类型"><a href="#数据类型" class="headerlink" title="数据类型"></a>数据类型</h3><p>以下列举常用的数据类型，更多参考官方文档</p><ul><li><p>tinyint</p><blockquote><p>有符号：取值范围：-128<del>127（有正负）默认<br>无符号：取值范围：0</del>255（只有正）</p></blockquote></li><li><p>以下就是创建无符号的表</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> tb2(</span><br><span class="line">id <span class="type">int</span> <span class="keyword">not</span> <span class="keyword">null</span> auto_increment <span class="keyword">primary</span> key,  </span><br><span class="line">age tinyint unsigned</span><br><span class="line">)<span class="keyword">default</span> charset<span class="operator">=</span>utf8;</span><br></pre></td></tr></table></figure></li><li><p>int</p><blockquote><p>int                有符号：取值范围：-2147483648<del>2147483647（有正负）默认<br>int unsigned无符号：取值范围：0</del>4294967296（只有正）</p></blockquote></li><li><p>bigint</p><blockquote><p>这个的范围比int还大的多</p></blockquote></li><li><p>float</p></li><li><p>double</p></li><li><p>decimal</p><blockquote><p>准确的小数值，m是数字总个数（负号不算），d是小数点后放两位，m最大值为65，d最大值为30</p></blockquote></li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> tb3(</span><br><span class="line">id <span class="type">int</span> <span class="keyword">not</span> <span class="keyword">null</span> auto_increment <span class="keyword">primary</span> key,  </span><br><span class="line">salary <span class="type">decimal</span>(m,d)</span><br><span class="line">)<span class="keyword">default</span> charset<span class="operator">=</span>utf8;</span><br></pre></td></tr></table></figure><ul><li><p>char，速度快</p><blockquote><p>定长字符串(固定用11个字符存储) ，最多可容纳255个字符</p></blockquote><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> tb4(</span><br><span class="line">id <span class="type">int</span> <span class="keyword">not</span> <span class="keyword">null</span> auto_increment <span class="keyword">primary</span> key,  </span><br><span class="line">moble <span class="type">char</span>(<span class="number">11</span>)</span><br><span class="line">)<span class="keyword">default</span> charset<span class="operator">=</span>utf8;</span><br></pre></td></tr></table></figure></li><li><p>varchar ，节省时间 </p><blockquote><p>变长字符串，真实数据多长，就按照多长存储。最大根据编码最大字节/3</p></blockquote><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> tb5(</span><br><span class="line">id <span class="type">int</span> <span class="keyword">not</span> <span class="keyword">null</span> auto_increment <span class="keyword">primary</span> key,  </span><br><span class="line">moble <span class="type">varchar</span>(<span class="number">11</span>)</span><br><span class="line">)<span class="keyword">default</span> charset<span class="operator">=</span>utf8;</span><br></pre></td></tr></table></figure></li><li><p>text</p><blockquote><p>text数据类型用于保存变长的最大字符串，则可以多达六万多字符，mediumtext， longtext更多<br>一般，长文本用text，</p></blockquote></li><li><p>mediumtext</p></li><li><p>longtext</p></li><li><p>datatime</p><blockquote><p>YYYY-MM-DD HH:MM:SS</p></blockquote></li><li><p>data</p><blockquote><p>YYYY-MM-DD</p></blockquote></li></ul><h3 id="数据行操作"><a href="#数据行操作" class="headerlink" title="数据行操作"></a>数据行操作</h3><ul><li>新增数据<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> 表名(<span class="operator">&lt;</span>字段名<span class="operator">&gt;</span>,<span class="operator">&lt;</span>字段名<span class="operator">&gt;</span>) <span class="keyword">values</span>(值,值);</span><br></pre></td></tr></table></figure></li><li>删除数据</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">delete</span> <span class="keyword">from</span> 表名;</span><br><span class="line"><span class="keyword">delete</span> <span class="keyword">from</span> 表名 <span class="keyword">where</span> 条件;</span><br></pre></td></tr></table></figure><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">delete</span> <span class="keyword">from</span> usertable <span class="keyword">where</span> id <span class="operator">=</span> <span class="number">3</span>;</span><br><span class="line"><span class="keyword">delete</span> <span class="keyword">from</span> usertable <span class="keyword">where</span> id <span class="operator">=</span> <span class="number">3</span> <span class="keyword">and</span> name <span class="operator">=</span> &quot;王&quot;;</span><br><span class="line"><span class="keyword">delete</span> <span class="keyword">from</span> usertable <span class="keyword">where</span> id <span class="operator">!=</span> <span class="number">3</span>;</span><br><span class="line"><span class="keyword">delete</span> <span class="keyword">from</span> usertable <span class="keyword">where</span> id <span class="operator">&gt;</span> <span class="number">3</span>;</span><br><span class="line"><span class="keyword">delete</span> <span class="keyword">from</span> usertable <span class="keyword">where</span> id <span class="keyword">in</span> (<span class="number">3</span>,<span class="number">5</span>); # 产出<span class="number">3</span>和<span class="number">4</span></span><br></pre></td></tr></table></figure><ul><li><p>修改数据</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">update</span> 表名 <span class="keyword">set</span> 列<span class="operator">=</span>值;</span><br><span class="line"><span class="keyword">update</span> 表名 <span class="keyword">set</span> 列<span class="operator">=</span>值,列<span class="operator">=</span>值;</span><br><span class="line"><span class="keyword">update</span> 表名 <span class="keyword">set</span> 列<span class="operator">=</span>值 wherr 条件;</span><br></pre></td></tr></table></figure></li><li><p>查询数据</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> 表名称;</span><br><span class="line"><span class="keyword">select</span> 列名称 <span class="keyword">from</span> 表名称;</span><br><span class="line"><span class="keyword">select</span> 列名称 <span class="keyword">from</span> 表名称 <span class="keyword">where</span> 条件;</span><br></pre></td></tr></table></figure></li><li><p>创建用户表（练习）</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> usertable(</span><br><span class="line">id <span class="type">int</span> <span class="keyword">not</span> <span class="keyword">null</span> auto_increment <span class="keyword">primary</span> key,  </span><br><span class="line">name <span class="type">varchar</span>(<span class="number">64</span>) <span class="keyword">not</span> <span class="keyword">null</span>,</span><br><span class="line">password <span class="type">char</span>(<span class="number">64</span>) <span class="keyword">not</span> <span class="keyword">null</span>,</span><br><span class="line">email <span class="type">varchar</span>(<span class="number">64</span>) <span class="keyword">not</span> <span class="keyword">null</span>,</span><br><span class="line">age tinyint,</span><br><span class="line">salary <span class="type">decimal</span>(<span class="number">10</span>,<span class="number">2</span>),</span><br><span class="line">ctime datetime</span><br><span class="line">)<span class="keyword">default</span> charset<span class="operator">=</span>utf8;</span><br></pre></td></tr></table></figure></li></ul><h3 id="查询数据"><a href="#查询数据" class="headerlink" title="查询数据"></a>查询数据</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span><span class="operator">|</span><span class="operator">&lt;</span>字段名<span class="operator">&gt;</span>,<span class="operator">&lt;</span>字段名<span class="operator">&gt;</span> ...   <span class="keyword">FROM</span> <span class="operator">&lt;</span>数据表名<span class="operator">&gt;</span></span><br><span class="line">                 <span class="keyword">WHERE</span> 条件</span><br><span class="line">                 <span class="keyword">GROUP</span> <span class="keyword">BY</span> field</span><br><span class="line">                 <span class="keyword">HAVING</span> 筛选</span><br><span class="line">                 <span class="keyword">ORDER</span> <span class="keyword">BY</span> field</span><br><span class="line">                 LIMIT 限制条数</span><br></pre></td></tr></table></figure><ul><li>where</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"># 比较运算符：</span><br><span class="line"><span class="operator">&gt;</span> <span class="operator">&lt;</span> <span class="operator">&gt;=</span> <span class="operator">&lt;=</span> <span class="operator">&lt;&gt;</span> <span class="operator">!=</span></span><br><span class="line"><span class="keyword">between</span> <span class="number">80</span> <span class="keyword">and</span> <span class="number">100</span> 值在<span class="number">10</span>到<span class="number">20</span>之间</span><br><span class="line"><span class="keyword">in</span>(<span class="number">80</span>,<span class="number">90</span>,<span class="number">100</span>) 值是<span class="number">10</span>或<span class="number">20</span>或<span class="number">30</span></span><br><span class="line"><span class="keyword">like</span> <span class="string">&#x27;a%&#x27;</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">pattern可以是%或者_，</span></span><br><span class="line"><span class="comment">如果是%则表示任意多字符</span></span><br><span class="line"><span class="comment">如果是_则表示一个字符_，两个_则表示两个字符：__</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"># 逻辑运算符</span><br><span class="line">在多个条件直接可以使用逻辑运算符 <span class="keyword">and</span> <span class="keyword">or</span> <span class="keyword">not</span></span><br><span class="line"></span><br><span class="line"># 正则 </span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> emp <span class="keyword">WHERE</span> emp_name REGEXP <span class="string">&#x27;^yu&#x27;</span>;</span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> emp <span class="keyword">WHERE</span> name REGEXP <span class="string">&#x27;n$&#x27;</span>;</span><br></pre></td></tr></table></figure><ul><li>orde</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="operator">*</span><span class="operator">|</span><span class="operator">&lt;</span>字段名<span class="operator">&gt;</span>,<span class="operator">&lt;</span>字段名<span class="operator">&gt;</span>... <span class="keyword">from</span> tab_name <span class="keyword">order</span> <span class="keyword">by</span> field [<span class="keyword">Asc</span><span class="operator">|</span><span class="keyword">Desc</span>]</span><br><span class="line"># <span class="keyword">Asc</span> 升序、<span class="keyword">Desc</span> 降序，其中<span class="keyword">asc</span>为默认值 <span class="keyword">ORDER</span> <span class="keyword">BY</span> 子句应位于<span class="keyword">SELECT</span>语句的结尾。</span><br></pre></td></tr></table></figure><ul><li>group by：分组查询</li></ul><p>GROUP BY 语句根据某个列对结果集进行分组。分组一般配合着聚合函数完成查询。</p><p><strong>常用聚合(统计)函数</strong></p><blockquote><ul><li><code>max()</code>：最大值。</li><li><code>min()</code>：最小值。</li><li><code>avg()</code>：平均值。</li><li><code>sum()</code>：总和。</li><li><code>count()</code>：个数。</li></ul></blockquote><p>在MySQL的SQL执行逻辑中，where条件必须放在group by前面,也就是先通过where条件将结果查询出来，再交给group by去分组进行统计，统计之后的查询用having。</p><ul><li>limit：记录条数限制</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">from</span> <span class="operator">&lt;</span>数据表名<span class="operator">&gt;</span> limit <span class="number">1</span>;</span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">from</span> <span class="operator">&lt;</span>数据表名<span class="operator">&gt;</span> limit <span class="number">2</span>,<span class="number">5</span>; # 跳过前两条显示接下来的五条纪录</span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">from</span> <span class="operator">&lt;</span>数据表名<span class="operator">&gt;</span> limit <span class="number">2</span>,<span class="number">2</span>;</span><br></pre></td></tr></table></figure><ul><li>distinct：查询去重</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="keyword">distinct</span> salary <span class="keyword">from</span> <span class="operator">&lt;</span>数据表名<span class="operator">&gt;</span> <span class="keyword">order</span> <span class="keyword">by</span> salary;</span><br></pre></td></tr></table></figure><ul><li>更新记录</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">UPDATE</span> <span class="operator">&lt;</span>表名<span class="operator">&gt;</span> <span class="keyword">SET</span> 字段 <span class="number">1</span><span class="operator">=</span>值 <span class="number">1</span> [,字段 <span class="number">2</span><span class="operator">=</span>值 <span class="number">2</span>… ] [<span class="keyword">WHERE</span> 子句 ]</span><br></pre></td></tr></table></figure><ul><li>删除记录</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">DELETE</span> <span class="keyword">FROM</span> <span class="operator">&lt;</span>表名<span class="operator">&gt;</span> [<span class="keyword">WHERE</span> 子句] [<span class="keyword">ORDER</span> <span class="keyword">BY</span> 子句] [LIMIT 子句]</span><br></pre></td></tr></table></figure><h3 id="关联表"><a href="#关联表" class="headerlink" title="关联表"></a>关联表</h3><blockquote><p>创建两张表，第二个表的单行/多行与第一张表的一行相关，但第二个表中的一个行只可以与第一个表中的一个行相关。这是为了节约数据库存储空间。</p></blockquote>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;MYSQL指令&quot;&gt;&lt;a href=&quot;#MYSQL指令&quot; class=&quot;headerlink&quot; title=&quot;MYSQL指令&quot;&gt;&lt;/a&gt;MYSQL指令&lt;/h2&gt;&lt;h3 id=&quot;下载及安装&quot;&gt;&lt;a href=&quot;#下载及安装&quot; class=&quot;headerlink&quot; ti</summary>
      
    
    
    
    <category term="数据库篇" scheme="http://bkystop.github.io/categories/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%AF%87/"/>
    
    
    <category term="MySQL" scheme="http://bkystop.github.io/tags/MySQL/"/>
    
  </entry>
  
  <entry>
    <title>Python爬虫基础</title>
    <link href="http://bkystop.github.io/2023/02/06/Python%E7%88%AC%E8%99%AB%E5%9F%BA%E7%A1%80/"/>
    <id>http://bkystop.github.io/2023/02/06/Python%E7%88%AC%E8%99%AB%E5%9F%BA%E7%A1%80/</id>
    <published>2023-02-06T06:23:42.000Z</published>
    <updated>2023-04-09T09:10:25.981Z</updated>
    
    <content type="html"><![CDATA[<h2 id="爬虫是什么"><a href="#爬虫是什么" class="headerlink" title="爬虫是什么"></a>爬虫是什么</h2><ul><li>爬虫的本质：模拟浏览器打开网页，捕获网页中我们想要的那部分数据。</li><li>入门：爬虫是一种自动抓取互联网信息的程序或脚本。主要用于搜索引擎，对一些网站的数据进行大量解析和收集。简单的爬虫程序通过request模块几行就可以对收据进行批量收集，，</li><li>进阶学习：想要学习好并没有那么简单。它关系到了计算机网络，前端开发，后端编程。对于爬取到的数据进行存储还需要学习数据库，对于有反爬措施的网站还需要进行反反爬，逆向等。为了能快速准确的采集到我们需要的数据，爬虫的核心在于并发和逆向，这将大大提高我们的效率。在人工智能时代，模型的训练是需要大量数据的，爬虫与机器学习，数据分析更是有密不可分的关系。</li></ul><h2 id="网络基础"><a href="#网络基础" class="headerlink" title="网络基础"></a>网络基础</h2><h3 id="http协议"><a href="#http协议" class="headerlink" title="http协议"></a>http协议</h3><ol><li>简介</li></ol><p> HTTP协议是Hyper Text Transfer Protocol（超文本传输协议）的缩写,是用于万维网（WWW:World Wide Web ）服务器与本地浏览器之间传输超文本的传送协议。HTTP是一个属于应用层的面向对象的协议，由于其简捷、快速的方式，适用于分布式超媒体信息系统。它于1990年提出，经过几年的使用与发展，得到不断地完善和扩展。HTTP协议工作于客户端-服务端架构为上。浏览器作为HTTP客户端通过URL向HTTP服务端即WEB服务器发送所有请求。Web服务器根据接收到的请求后，向客户端发送响应信息。</p><ol start="2"><li>http协议的特性</li></ol><blockquote><ol><li>基于TCP/IP协议</li></ol><p>http协议是基于TCP/IP协议之上的应用层协议。</p><ol start="2"><li> 基于请求－响应模式</li></ol><p>HTTP协议规定,请求从客户端发出,最后服务器端响应该请求并返回。换句话说,肯定是先从客户端开始建立通信的,服务器端在没有接收到请求之前不会发送响应</p><ol start="3"><li>无状态保存</li></ol><p>HTTP是一种不保存状态,即无状态(stateless)协议。HTTP协议自身不对请求和响应之间的通信状态进行保存。也就是说在HTTP这个级别,协议对于发送过的请求或响应都不做持久化处理。</p><p>使用HTTP协议,每当有新的请求发送时,就会有对应的新响应产生。协议本身并不保留之前一切的请求或响应报文的信息。这是为了更快地处理大量事务,确保协议的可伸缩性,而特意把HTTP协议设计成如此简单的。</p><ol start="4"><li> 短连接和长连接</li></ol><p>HTTP1.0默认使用的是短连接。浏览器和服务器每进行一次HTTP操作，就建立一次连接，任务结束就中断连接。<br>HTTP/1.1起，默认使用长连接。要使用长连接，客户端和服务器的HTTP首部的Connection都要设置为keep-alive，才能支持长连接。<br>HTTP长连接，指的是复用TCP连接。多个HTTP请求可以复用同一个TCP连接，这就节省了TCP连接建立和断开的消耗。</p></blockquote><ol start="3"><li>http请求协议与响应协议</li></ol><img src="/2023/02/06/Python%E7%88%AC%E8%99%AB%E5%9F%BA%E7%A1%80/image-20230406143839579.png" class><blockquote><p>http协议包含由浏览器发送数据到服务器需要遵循的请求协议与服务器发送数据到浏览器需要遵循的请求协议。用于HTTP协议交互的信被为HTTP报文。请求端(客户端)的HTTP报文 做请求报文,响应端(服务器端)的 做响应报文。HTTP报文本身是由多行数据构成的字文本。</p></blockquote><img src="/2023/02/06/Python%E7%88%AC%E8%99%AB%E5%9F%BA%E7%A1%80/image-20230406143917589.png" class><p>一个完整的URL包括：协议、ip、端口、路径、参数  </p><p>例如： <a href="https://www.baidu.com/s?wd=yuan">https://www.baidu.com/s?wd=yuan</a>     其中https是协议，<a href="http://www.baidu.com/">www.baidu.com</a> 是IP，端口默认80，/s是路径，参数是wd=yuan</p><p>请求方式: get与post请求</p><ul><li>GET提交的数据会放在URL之后，以?分割URL和传输数据，参数之间以&amp;相连，如EditBook?name=test1&amp;id=123456. POST方法是把提交的数据放在HTTP包的请求体中.</li><li>GET提交的数据大小有限制（因为浏览器对URL的长度有限制），而POST方法提交的数据没有限制</li></ul><p>响应状态码：状态码的职 是当客户端向服务器端发送请求时, 返回的请求 结果。借助状态码,用户可以知道服务器端是正常 理了请求,还是出 现了 。状态码如200 OK,以3位数字和原因组成。</p><ol start="4"><li>浏览器开发者工具</li></ol><p>在网页时通过F12即可进入开发者模式。</p><h2 id="前端基础"><a href="#前端基础" class="headerlink" title="前端基础"></a>前端基础</h2><h3 id="html基础-HTML基础-bkys的客栈-bkystop-github-io"><a href="#html基础-HTML基础-bkys的客栈-bkystop-github-io" class="headerlink" title="html基础(HTML基础 | bkys的客栈 (bkystop.github.io))"></a>html基础(<a href="https://bkystop.github.io/2022/05/07/HTML%E5%9F%BA%E7%A1%80/">HTML基础 | bkys的客栈 (bkystop.github.io)</a>)</h3><h3 id="css基础-CSS基础-bkys的客栈-bkystop-github-io"><a href="#css基础-CSS基础-bkys的客栈-bkystop-github-io" class="headerlink" title="css基础(CSS基础 | bkys的客栈 (bkystop.github.io))"></a>css基础(<a href="https://bkystop.github.io/2022/05/07/CSS%E5%9F%BA%E7%A1%80/">CSS基础 | bkys的客栈 (bkystop.github.io)</a>)</h3><h3 id="JavaScript基础-JavaScript基础-bkys的客栈-bkystop-github-io"><a href="#JavaScript基础-JavaScript基础-bkys的客栈-bkystop-github-io" class="headerlink" title="JavaScript基础(JavaScript基础 | bkys的客栈 (bkystop.github.io))"></a>JavaScript基础(<a href="https://bkystop.github.io/2022/05/30/JavaScript%E5%9F%BA%E7%A1%80/">JavaScript基础 | bkys的客栈 (bkystop.github.io)</a>)</h3><h2 id="数据解析"><a href="#数据解析" class="headerlink" title="数据解析"></a>数据解析</h2><h3 id="正则表达式"><a href="#正则表达式" class="headerlink" title="正则表达式"></a>正则表达式</h3><p>Regular Expression，译作正则表达式或正规表示法，表示有规则的表达式，正则表达式就是描述一段文本排列规则的表达式。</p><p>正则表达式是用于处理复杂文本信息的强大的高级文本操作工具。正则表达式拥有自己独特的规则语法以及一个独立的正则处理引擎，我们根据正则语法编写好规则（模式）以后，引擎不仅能够根据规则进行模糊文本查找，还可以进行模糊分割，替换等复杂的文本操作，能让开发者随心所欲地处理文本信息。正则引擎一般由编程语言提供操作，像python就提供了re模块或regex模块来调用正则处理引擎。</p><p>这是一套独立的编程语言，我们学习python的正则以后，也可以在java，php，go，javascript，sql等编程语言中使用。</p><p>正则对字符串或文本的操作，无非是分割、匹配、查找和替换。</p><p>在线测试工具  <a href="http://tool.chinaz.com/regex/">http://tool.chinaz.com/regex/</a></p><ol><li>元字符(Metacharacters)</li></ol><p>元字符是具有特殊含义的字符。</p><table><thead><tr><th>元字符</th><th align="left">描述</th></tr></thead><tbody><tr><td><strong>.</strong></td><td align="left">叫通配符、万能通配符或通配元字符，匹配1个除了换行符\n以外任何原子</td></tr><tr><td><strong>[]</strong></td><td align="left">匹配一个中括号中出现的任意原子</td></tr><tr><td><strong>[^原子]</strong></td><td align="left">匹配一个没有在中括号出现的任意原子</td></tr><tr><td><strong>+</strong></td><td align="left">叫加号贪婪符，指定左边原子出现1次或多次</td></tr><tr><td>*****</td><td align="left">叫星号贪婪符，指定左边原子出现0次或多次</td></tr><tr><td><strong>?</strong></td><td align="left">叫非贪婪符，指定左边原子出现0次或1次</td></tr><tr><td><strong>{n,m}</strong></td><td align="left">叫数量范围贪婪符，指定左边原子的数量范围，有{n}，{n, }, {,m}, {n,m}四种写法，其中n与m必须是非负整数。</td></tr><tr><td><strong>^</strong></td><td align="left">叫开始边界符或开始锚点符，匹配一行的开头位置</td></tr><tr><td><strong>$</strong></td><td align="left">叫结束边界符或结束锚点符，匹配一行的结束位置</td></tr><tr><td><strong>|</strong></td><td align="left">指定原子或正则模式进行二选一或多选一</td></tr><tr><td><strong>()</strong></td><td align="left">对原子或正则模式进行捕获提取和分组划分整体操作，</td></tr><tr><td>*<em>\*</em></td><td align="left">转义字符，可以把原子转换特殊元字符，也可以把特殊元字符转成原子。</td></tr></tbody></table><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> re</span><br><span class="line"><span class="string">&quot;&quot;&quot;re.findall(正则模式, 文本)  基于正则模式查找所有匹配的文本内容&quot;&quot;&quot;</span></span><br><span class="line"><span class="comment"># part1: 通配符-&gt;.  字符集-&gt; []</span></span><br><span class="line">ret1 = re.findall(<span class="string">&quot;a&quot;</span>, <span class="string">&quot;a,b,c,d,e&quot;</span>)</span><br><span class="line">ret1 = re.findall(<span class="string">&quot;.&quot;</span>, <span class="string">&quot;a,b,c,d,e&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># part2:重复元字符-&gt; + * &#123;&#125; ?</span></span><br><span class="line">ret2 = re.findall(<span class="string">&quot;[0-9a-zA-Z]&quot;</span>, <span class="string">&quot;apple,banana,orange,melon&quot;</span>)</span><br><span class="line">ret2 = re.findall(<span class="string">&quot;\w&quot;</span>, <span class="string">&quot;apple,banana,orange,melon&quot;</span>)</span><br><span class="line">ret2 = re.findall(<span class="string">&quot;\w+&quot;</span>, <span class="string">&quot;apple,banana,orange,melon&quot;</span>)</span><br><span class="line">ret2 = re.findall(<span class="string">&quot;\w+?&quot;</span>, <span class="string">&quot;apple,banana,orange,melon&quot;</span>)  <span class="comment"># 取消贪婪匹配</span></span><br><span class="line">ret2 = re.findall(<span class="string">&quot;\w*&quot;</span>, <span class="string">&quot;apple,banana,orange,melon&quot;</span>)</span><br><span class="line">ret2 = re.findall(<span class="string">&quot;\w&#123;6&#125;&quot;</span>, <span class="string">&quot;apple,banana,orange,melon&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># part3: 位置元字符-&gt; ^ $</span></span><br><span class="line">ret3 = re.findall(<span class="string">&quot;^\w&#123;5&#125;&quot;</span>, <span class="string">&quot;apple,banana,peach,orange,melon&quot;</span>)</span><br><span class="line">ret3 = re.findall(<span class="string">&quot;\w&#123;5&#125;$&quot;</span>, <span class="string">&quot;apple,banana,peach,orange,melon&quot;</span>)</span><br><span class="line">ret3 = re.findall(<span class="string">&quot;^\w&#123;5&#125;$&quot;</span>, <span class="string">&quot;apple,banana,peach,orange,melon&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(ret3)</span><br><span class="line"></span><br><span class="line"><span class="comment"># part4:</span></span><br><span class="line"><span class="comment"># | 指定原子或正则模式进行二选一或多选一</span></span><br><span class="line"><span class="comment"># () 具备模式捕获的能力，也就是优先提取数据的能力，通过(?:) 可以取消模式捕获</span></span><br><span class="line">ret4 = re.findall(<span class="string">&quot;,\w&#123;5&#125;,&quot;</span>, <span class="string">&quot;,apple,banana,peach,orange,melon,&quot;</span>)  <span class="comment"># 筛选出5个字符的单词</span></span><br><span class="line">ret4 = re.findall(<span class="string">&quot;,(\w&#123;5&#125;),&quot;</span>, <span class="string">&quot;,apple,banana,peach,orange,melon,&quot;</span>)  <span class="comment"># 筛选出5个字符的单词</span></span><br><span class="line">ret4 = re.findall(<span class="string">&quot;\w+@\w+\.com&quot;</span>, <span class="string">&quot;123abc@163.com,....234xyz@qq.com,....&quot;</span>)  <span class="comment"># 筛选出5个字符的单词</span></span><br><span class="line">ret4 = re.findall(<span class="string">&quot;(\w+)@qq\.com&quot;</span>, <span class="string">&quot;123abc@163.com,....234xyz@qq.com,....&quot;</span>)  <span class="comment"># 筛选出5个字符的单词</span></span><br><span class="line">ret4 = re.findall(<span class="string">&quot;(?:\w+)@(?:qq|163)\.com&quot;</span>, <span class="string">&quot;123abc@163.com,....234xyz@qq.com,....&quot;</span>)  <span class="comment"># 筛选出5个字符的单词</span></span><br><span class="line"><span class="built_in">print</span>(ret4)</span><br><span class="line"></span><br><span class="line"><span class="comment"># part5:  转义符-&gt; \d \D  \w \W      \n    \s \S  \b \B</span></span><br><span class="line"><span class="string">&quot;&quot;&quot; \b 1个单词边界原子 &quot;&quot;&quot;</span></span><br><span class="line">txt = <span class="string">&quot;my name is nana. nihao,nana&quot;</span></span><br><span class="line">ret = re.findall(<span class="string">r&quot;na&quot;</span>, txt)</span><br><span class="line">ret = re.findall(<span class="string">r&quot;\bna&quot;</span>, txt)</span><br><span class="line">ret = re.findall(<span class="string">r&quot;\bna\w&#123;2&#125;&quot;</span>, txt)</span><br><span class="line"><span class="built_in">print</span>(ret)  <span class="comment"># [&#x27;na&#x27;, &#x27;na&#x27;, &#x27;na&#x27;]</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>转义元字符是<code>\</code>开头的元字符，由于某些正则模式会在开发中反复被用到，所以正则语法预定义了一些特殊正则模式以方便我们简写。</p><table><thead><tr><th>元字符</th><th>描述</th><th>示例</th></tr></thead><tbody><tr><td><strong>\d</strong></td><td>匹配一个数字原子，等价于<code>[0-9]</code>。</td><td>\d</td></tr><tr><td>\D</td><td>匹配一个非数字原子。等价于<code>[^0-9]</code>或<code>[^\d]</code>。</td><td>“\D”</td></tr><tr><td>\b</td><td>匹配一个单词边界原子，也就是指单词和空格间的位置。</td><td>er\b</td></tr><tr><td>\B</td><td>匹配一个非单词边界原子，等价于 <code>[^\b]</code></td><td>r”\Bain”r”ain\B”</td></tr><tr><td><strong>\n</strong></td><td>匹配一个换行符</td><td></td></tr><tr><td>\t</td><td>匹配一个制表符，tab键</td><td></td></tr><tr><td><strong>\s</strong></td><td>匹配一个任何空白字符原子，包括空格、制表符、换页符等等。等价于<code>[ \f\n\r\t\v]</code>。</td><td>“\s”</td></tr><tr><td>\S</td><td>匹配一个任何非空白字符原子。等价于<code>[^ \f\n\r\t\v]</code>或 <code>[^\s]</code>。</td><td>“\S”</td></tr><tr><td><strong>\w</strong></td><td>匹配一个包括下划线的单词原子。等价于<code>[A-Za-z0-9_]</code>。</td><td>“\w”</td></tr><tr><td>\W</td><td>匹配任何非单词字符。等价于<code>[^A-Za-z0-9_]</code> 或 <code>[^\w]</code>。</td><td>“\W”</td></tr></tbody></table><blockquote><p>注意：python本身没有内置正则处理的，python中的正则就是一段字符串，我们需要使用python模块中提供的函数把字符串发送给正则引擎，正则引擎会把字符串转换成真正的正则表达式来处理文本内容。</p></blockquote><h4 id="re模块中的常用函数"><a href="#re模块中的常用函数" class="headerlink" title="re模块中的常用函数"></a>re模块中的常用函数</h4><p><code>re</code>模块提供了一组正则处理函数，使我们可以在字符串中搜索匹配项：</p><table><thead><tr><th>函数</th><th>描述</th></tr></thead><tbody><tr><td><strong>findall</strong></td><td>按指定的正则模式查找文本中所有符合正则模式的匹配项，以列表格式返回结果。</td></tr><tr><td><strong>search</strong></td><td>在字符串中<strong>任何位置</strong>查找首个符合正则模式的匹配项，存在则返回re.Match对象，不存在返回None</td></tr><tr><td><strong>match</strong></td><td>判定字符串<strong>开始位置</strong>是否匹配正则模式的规则，匹配则返回re.Match对象，不匹配返回None</td></tr><tr><td><strong>split</strong></td><td>按指定的正则模式来分割字符串，返回一个分割后的列表</td></tr><tr><td><strong>sub</strong></td><td>把字符串按指定的正则模式来查找符合正则模式的匹配项，并可以替换一个或多个匹配项成其他内容。</td></tr></tbody></table><ul><li>如果一个正则表达式要使用几千遍，每一次都会编译，出于效率的考虑进行正则表达式的编译，就不需要每次都编译了，节省了编译的时间，从而提升效率</li><li>对于多次使用正则表达式，每一次编译都会浪费时间，为了提高效率，使用compile,不用每次都编译</li></ul><p><code>compile()</code></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> re</span><br><span class="line"></span><br><span class="line">re_email = re.<span class="built_in">compile</span>(<span class="string">r&quot;(?:\+86)?1[3-9]\d&#123;9&#125;&quot;</span>)</span><br><span class="line">ret = re_email.findall(<span class="string">&quot;15100649928,123@qq.com,13653287791,666@163.com&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(ret)</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>如果一个正则表达式要使用几千遍，每一次都会编译，出于效率的考虑进行正则表达式的编译，就不需要每次都编译了，节省了编译的时间，从而提升效率</p><h4 id="正则进阶"><a href="#正则进阶" class="headerlink" title="正则进阶"></a>正则进阶</h4><h4 id><a href="#" class="headerlink" title=".*?"></a><code>.*?</code></h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> re</span><br><span class="line"></span><br><span class="line">text = <span class="string">&#x27;&lt;12&gt; &lt;xyz&gt; &lt;!@#$%&gt; &lt;1a!#e2&gt; &lt;&gt;&#x27;</span></span><br><span class="line"></span><br><span class="line">ret = re.findall(<span class="string">&quot;&lt;\d+&gt;&quot;</span>, text)</span><br><span class="line">ret = re.findall(<span class="string">&quot;&lt;\w+&gt;&quot;</span>, text)</span><br><span class="line">ret = re.findall(<span class="string">&quot;&lt;.+&gt;&quot;</span>, text)</span><br><span class="line">ret = re.findall(<span class="string">&quot;&lt;.+?&gt;&quot;</span>, text)</span><br><span class="line">ret = re.findall(<span class="string">&quot;&lt;.*?&gt;&quot;</span>, text)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(ret)</span><br></pre></td></tr></table></figure><ul><li>模式修正符</li></ul><p>模式修正符，也叫正则修饰符，模式修正符就是给正则模式增强或增加功能的。</p><p><strong>通用flags（修正符）</strong></p><table><thead><tr><th align="left">值</th><th align="left">说明</th></tr></thead><tbody><tr><td align="left">re.I</td><td align="left">是匹配对大小写不敏感</td></tr><tr><td align="left">re.L</td><td align="left">做本地化识别匹配</td></tr><tr><td align="left">re.M</td><td align="left">多行匹配，影响到^和$</td></tr><tr><td align="left">re.S</td><td align="left">使.匹配包括换行符在内的所有字符</td></tr><tr><td align="left">re.U</td><td align="left">根据Unicode字符集解析字符，影响\w、\W、\b、\B</td></tr><tr><td align="left">re.X</td><td align="left">通过给予我们功能灵活的格式以便更好的理解正则表达式</td></tr></tbody></table><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> re</span><br><span class="line"></span><br><span class="line">text = <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">&lt;12</span></span><br><span class="line"><span class="string">&gt;</span></span><br><span class="line"><span class="string"> </span></span><br><span class="line"><span class="string"> &lt;x</span></span><br><span class="line"><span class="string"> yz&gt; </span></span><br><span class="line"><span class="string"> </span></span><br><span class="line"><span class="string"> &lt;!@#$%&gt; </span></span><br><span class="line"><span class="string"> </span></span><br><span class="line"><span class="string"> &lt;1a!#</span></span><br><span class="line"><span class="string"> e2&gt; </span></span><br><span class="line"><span class="string"> </span></span><br><span class="line"><span class="string"> &lt;&gt;</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line">ret = re.findall(<span class="string">&quot;&lt;.*?&gt;&quot;</span>, text)</span><br><span class="line">ret = re.findall(<span class="string">&quot;&lt;.*?&gt;&quot;</span>, text, re.S)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(ret)</span><br></pre></td></tr></table></figure><ul><li>常用的正则表达式</li></ul><table><thead><tr><th align="left">场景</th><th>正则表达式</th></tr></thead><tbody><tr><td align="left">用户名</td><td><code>^[a-z0-9_-]&#123;3,16&#125;$</code></td></tr><tr><td align="left">密码</td><td><code>^[a-z0-9_-]&#123;6,18&#125;$</code></td></tr><tr><td align="left">手机号码</td><td><code>^(?:\+86)?1[3-9]\d&#123;9&#125;$</code></td></tr><tr><td align="left">颜色的十六进制值</td><td>`^#?([a-f0-9]{6}</td></tr><tr><td align="left">电子邮箱</td><td><code>^[a-z\d]+(\.[a-z\d]+)*@([\da-z](-[\da-z])?)+\.[a-z]+$</code></td></tr><tr><td align="left">URL</td><td>`^(?:https://</td></tr><tr><td align="left">IP 地址</td><td>`((2[0-4]\d</td></tr><tr><td align="left"><strong>HTML 标签</strong></td><td><code>^&lt;([a-z]+)([^&lt;]+)*(?:&gt;(.*)&lt;\/\1&gt;</code></td></tr><tr><td align="left">utf-8编码下的汉字范围</td><td><code>^[\u2E80-\u9FFF]+$</code></td></tr></tbody></table><h3 id="BS4"><a href="#BS4" class="headerlink" title="BS4"></a>BS4</h3><h4 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h4><p>简单来说，Beautiful Soup是python的一个库，最主要的功能是从网页抓取数据。官方解释如下：</p><blockquote><p>Beautiful Soup提供一些简单的、python式的函数用来处理导航、搜索、修改分析树等功能。<br>它是一个工具箱，通过解析文档为用户提供需要抓取的数据，因为简单，所以不需要多少代码就可以写出一个完整的应用程序。</p></blockquote><p>Beautiful Soup 是一个可以从HTML或XML文件中提取数据的Python库.它能够通过你喜欢的转换器实现惯用的文档导航,查找,修改文档的方式.Beautiful Soup会帮你节省数小时甚至数天的工作时间.你可能在寻找 Beautiful Soup3 的文档,Beautiful Soup 3 目前已经停止开发,官网推荐在现在的项目中使用Beautiful Soup 4。</p><blockquote><p>官方文档: <a href="https://beautifulsoup.readthedocs.io/zh_CN/v4.4.0/">https://beautifulsoup.readthedocs.io/zh_CN/v4.4.0/</a></p></blockquote><p>导入模块</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># pip install bs4 安装</span></span><br><span class="line"> </span><br><span class="line"><span class="keyword">from</span> bs4 <span class="keyword">import</span> BeautifulSoup</span><br></pre></td></tr></table></figure><p>Beautiful Soup支持Python标准库中的HTML解析器,还支持一些第三方的解析器，如果我们不安装它，则 Python 会使用 Python默认的解析器，lxml 解析器更加强大，速度更快，推荐安装。</p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip3 install lxml</span><br></pre></td></tr></table></figure><p>另一个可供选择的解析器是纯Python实现的 html5lib , html5lib的解析方式与浏览器相同,可以选择下列方法来安装html5lib:</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip3 install html5lib</span><br></pre></td></tr></table></figure><p>解析器对比：</p><img src="/2023/02/06/Python%E7%88%AC%E8%99%AB%E5%9F%BA%E7%A1%80/877318-20180816151649680-1825192992.png" class><p>简单使用：</p><ul><li>从一个<code>soup</code>对象开始，以下两种方式生成一个soup对象</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> bs4 <span class="keyword">import</span> BeautifulSoup</span><br><span class="line">soup = BeautifulSoup(<span class="built_in">open</span>(<span class="string">&quot;index.html&quot;</span>))    <span class="comment">##传入文件</span></span><br><span class="line">soup = BeautifulSoup(<span class="string">&quot;&lt;html&gt;data&lt;/html&gt;&quot;</span>)   <span class="comment">##文本</span></span><br></pre></td></tr></table></figure><blockquote><p>构造soup对象时，可以传入解析器参数，如果不传入的话，会以最好的方式去解析</p></blockquote><p>下面的一段HTML代码将作为例子被多次用到.这是 <em>爱丽丝梦游仙境的</em> 的一段内容(以后内容中简称为 <em>爱丽丝</em> 的文档):</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">html_doc = <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">&lt;html&gt;&lt;head&gt;&lt;title&gt;The Dormouse&#x27;s story&lt;/title&gt;&lt;/head&gt;</span></span><br><span class="line"><span class="string">&lt;body&gt;</span></span><br><span class="line"><span class="string">&lt;p class=&quot;title&quot;&gt;&lt;b&gt;The Dormouse&#x27;s story&lt;/b&gt;&lt;/p&gt;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">&lt;p class=&quot;story&quot;&gt;Once upon a time there were three little sisters; and their names were</span></span><br><span class="line"><span class="string">&lt;a href=&quot;http://example.com/elsie&quot; class=&quot;sister&quot; id=&quot;link1&quot;&gt;Elsie&lt;/a&gt;,</span></span><br><span class="line"><span class="string">&lt;a href=&quot;http://example.com/lacie&quot; class=&quot;sister&quot; id=&quot;link2&quot;&gt;Lacie&lt;/a&gt; and</span></span><br><span class="line"><span class="string">&lt;a href=&quot;http://example.com/tillie&quot; class=&quot;sister&quot; id=&quot;link3&quot;&gt;Tillie&lt;/a&gt;;</span></span><br><span class="line"><span class="string">and they lived at the bottom of a well.&lt;/p&gt;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">&lt;p class=&quot;story&quot;&gt;...&lt;/p&gt;</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br></pre></td></tr></table></figure><p>使用BeautifulSoup解析这段代码,能够得到一个 <code>BeautifulSoup</code> 的对象</p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> bs4 <span class="keyword">import</span> BeautifulSoup</span><br><span class="line">soup = BeautifulSoup(html_doc, <span class="string">&#x27;html.parser&#x27;</span>)</span><br></pre></td></tr></table></figure><p>从文档中找到所有<a>标签的链接:</a></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> link <span class="keyword">in</span> soup.find_all(<span class="string">&#x27;a&#x27;</span>):</span><br><span class="line">    <span class="built_in">print</span>(link.get(<span class="string">&#x27;href&#x27;</span>))</span><br></pre></td></tr></table></figure><p>从文档中获取所有文字内容:</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(soup.get_text())</span><br></pre></td></tr></table></figure><h4 id="四种对象"><a href="#四种对象" class="headerlink" title="四种对象"></a>四种对象</h4><p>Beautiful Soup将复杂HTML文档转换成一个复杂的树形结构,每个节点都是Python对象,所有对象可以归纳为4种<code>BeautifulSoup</code>， <code>Tag</code> , <code>NavigableString</code> ,   <code>Comment</code></p><p>tag对象，同网页中的<strong>标签</strong>的意思</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> bs4 <span class="keyword">import</span> BeautifulSoup</span><br><span class="line"></span><br><span class="line">html_doc = <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">&lt;html&gt;&lt;head&gt;&lt;title&gt;The Dormouse&#x27;s story&lt;/title&gt;&lt;/head&gt;</span></span><br><span class="line"><span class="string">&lt;body&gt;</span></span><br><span class="line"><span class="string">&lt;p class=&quot;title&quot;&gt;&lt;b&gt;The Dormouse&#x27;s story&lt;/b&gt;&lt;/p&gt;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">&lt;p class=&quot;story&quot;&gt;Once upon a time there were three little sisters; and their names were</span></span><br><span class="line"><span class="string">&lt;a href=&quot;http://example.com/elsie&quot; class=&quot;sister&quot; id=&quot;link1&quot;&gt;Elsie&lt;/a&gt;,</span></span><br><span class="line"><span class="string">&lt;a href=&quot;http://example.com/lacie&quot; class=&quot;sister&quot; id=&quot;link2&quot;&gt;Lacie&lt;/a&gt; and</span></span><br><span class="line"><span class="string">&lt;a href=&quot;http://example.com/tillie&quot; class=&quot;sister&quot; id=&quot;link3&quot;&gt;Tillie&lt;/a&gt;;</span></span><br><span class="line"><span class="string">and they lived at the bottom of a well.&lt;/p&gt;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">&lt;p class=&quot;story&quot;&gt;...&lt;/p&gt;</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 一、查找tag对象</span></span><br><span class="line">soup = BeautifulSoup(html_doc, <span class="string">&#x27;html.parser&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(soup.head, <span class="built_in">type</span>(soup.head))</span><br><span class="line"><span class="built_in">print</span>(soup.title, <span class="built_in">type</span>(soup.title))</span><br><span class="line"><span class="built_in">print</span>(soup.a, <span class="built_in">type</span>(soup.a))  <span class="comment"># 第一个a标签，如果想获取所有a标签要用到soup.find_all(&#x27;a&#x27;)</span></span><br><span class="line"><span class="built_in">print</span>(soup.p.b)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 二、查找tag对象的标签名和属性</span></span><br><span class="line"><span class="built_in">print</span>(soup.a.name)  <span class="comment"># a</span></span><br><span class="line"><span class="built_in">print</span>(soup.p.b.name)  <span class="comment"># b</span></span><br><span class="line"><span class="built_in">print</span>(soup.a[<span class="string">&quot;href&quot;</span>])</span><br><span class="line"><span class="built_in">print</span>(soup.a.attrs)</span><br><span class="line"></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">三、</span></span><br><span class="line"><span class="string">HTML 4定义了一系列可以包含多个值的属性.在HTML5中移除了一些,却增加更多.</span></span><br><span class="line"><span class="string">最常见的多值的属性是 class (一个tag可以有多个CSS的class). </span></span><br><span class="line"><span class="string">还有一些属性 rel , rev , accept-charset , headers , accesskey . </span></span><br><span class="line"><span class="string">在Beautiful Soup中多值属性的返回类型是list</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(soup.a[<span class="string">&quot;class&quot;</span>])  <span class="comment"># 返回列表</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 四、tag的属性可以被添加,删除或修改(tag的属性操作方法与字典一样)</span></span><br><span class="line"><span class="comment"># soup.a[&quot;class&quot;] = [&quot;sister c1&quot;]</span></span><br><span class="line"><span class="comment"># del soup.a[&quot;id&quot;]</span></span><br><span class="line"><span class="comment"># print(soup)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 五、获取标签对象的文本内容</span></span><br><span class="line"><span class="built_in">print</span>(soup.p.string)  <span class="comment"># p下的文本只有一个时，取到，否则为None</span></span><br><span class="line"><span class="built_in">print</span>(soup.p.strings)  <span class="comment"># 拿到一个生成器对象, 取到p下所有的文本内容</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> soup.p.strings:</span><br><span class="line">    <span class="built_in">print</span>(i)</span><br><span class="line"><span class="comment"># 如果tag包含了多个子节点,tag就无法确定 .string 方法应该调用哪个子节点的内容, .string 的输出结果是 None，如果只有一个子节点那么就输出该子节点的文本，比如下面的这种结构，soup.p.string 返回为None,但soup.p.strings就可以找到所有文本</span></span><br><span class="line">p2 = soup.find_all(<span class="string">&quot;p&quot;</span>)[<span class="number">1</span>]</span><br><span class="line"><span class="built_in">print</span>(p2.string)</span><br><span class="line"><span class="built_in">print</span>(p2.strings)</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> p2.strings:</span><br><span class="line">    <span class="built_in">print</span>(i)</span><br><span class="line"><span class="comment"># text 和 string</span></span><br><span class="line"><span class="built_in">print</span>(soup.p.string)</span><br><span class="line"><span class="built_in">print</span>(soup.p.text)  <span class="comment"># 取到p下所有的文本内容,text属性更常用，并且它可以直接过滤掉注释</span></span><br><span class="line"><span class="built_in">print</span>(p2.text)</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>这种情况下，会产生Comment对象</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">markup = &quot;<span class="tag">&lt;<span class="name">b</span>&gt;</span><span class="comment">&lt;!--Hey, buddy. Want to buy a used parser?--&gt;</span><span class="tag">&lt;/<span class="name">b</span>&gt;</span>&quot;</span><br><span class="line">soup = BeautifulSoup(markup,&quot;html.parser&quot;)</span><br><span class="line">comment = soup.b.string</span><br><span class="line">print(comment)</span><br><span class="line">print(type(comment))</span><br></pre></td></tr></table></figure><p><strong>结果为：</strong></p><figure class="highlight vbnet"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Hey, buddy. Want <span class="keyword">to</span> buy a used parser?</span><br><span class="line">&lt;<span class="keyword">class</span> <span class="comment">&#x27;bs4.element.Comment&#x27;&gt;</span></span><br></pre></td></tr></table></figure><p>我们可以看到这时候.string返回的对象不再是<code>bs4.element.NavigableString</code>，而是<code>Comment</code></p><h4 id="遍历文档树（导航文档树）"><a href="#遍历文档树（导航文档树）" class="headerlink" title="遍历文档树（导航文档树）"></a>遍历文档树（导航文档树）</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> bs4 <span class="keyword">import</span> BeautifulSoup</span><br><span class="line"></span><br><span class="line">html_doc = <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">&lt;html&gt;&lt;head&gt;&lt;title&gt;The Dormouse&#x27;s story&lt;/title&gt;&lt;/head&gt;</span></span><br><span class="line"><span class="string">&lt;body&gt;</span></span><br><span class="line"><span class="string">&lt;p class=&quot;title&quot;&gt;&lt;b&gt;The Dormouse&#x27;s story&lt;/b&gt;&lt;/p&gt;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">&lt;p class=&quot;story&quot;&gt;Once upon a time there were three little sisters; and their names were</span></span><br><span class="line"><span class="string">&lt;a href=&quot;http://example.com/elsie&quot; class=&quot;sister&quot; id=&quot;link1&quot;&gt;Elsie&lt;/a&gt;,</span></span><br><span class="line"><span class="string">&lt;a href=&quot;http://example.com/lacie&quot; class=&quot;sister&quot; id=&quot;link2&quot;&gt;Lacie&lt;/a&gt; and</span></span><br><span class="line"><span class="string">&lt;a href=&quot;http://example.com/tillie&quot; class=&quot;sister&quot; id=&quot;link3&quot;&gt;Tillie&lt;/a&gt;;</span></span><br><span class="line"><span class="string">and they lived at the bottom of a well.&lt;/p&gt;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">&lt;p class=&quot;story&quot;&gt;...&lt;/p&gt;</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line">soup = BeautifulSoup(html_doc, <span class="string">&#x27;html.parser&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 1、嵌套选择</span></span><br><span class="line"><span class="built_in">print</span>(soup.head.title.text)</span><br><span class="line"><span class="built_in">print</span>(soup.body.a.text)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 2、子节点、子孙节点</span></span><br><span class="line"><span class="built_in">print</span>(soup.p.contents)  <span class="comment"># p下所有子节点</span></span><br><span class="line"><span class="built_in">print</span>(soup.p.children)  <span class="comment"># 得到一个迭代器,包含p下所有子节点</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i, child <span class="keyword">in</span> <span class="built_in">enumerate</span>(soup.p.children, <span class="number">1</span>):</span><br><span class="line">    <span class="built_in">print</span>(i, child)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(soup.p.descendants)  <span class="comment"># 获取子孙节点,p下所有的标签都会选择出来</span></span><br><span class="line"><span class="keyword">for</span> i, child <span class="keyword">in</span> <span class="built_in">enumerate</span>(soup.p.descendants, <span class="number">1</span>):</span><br><span class="line">    <span class="built_in">print</span>(i, child)</span><br><span class="line"><span class="keyword">for</span> i, child <span class="keyword">in</span> <span class="built_in">enumerate</span>(soup.find_all(<span class="string">&quot;p&quot;</span>)[<span class="number">1</span>].descendants, <span class="number">1</span>):</span><br><span class="line">    <span class="built_in">print</span>(i, child)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 3、父节点、祖先节点</span></span><br><span class="line"><span class="built_in">print</span>(soup.a.parent)  <span class="comment"># 获取a标签的父节点</span></span><br><span class="line"><span class="built_in">print</span>(soup.a.parent.text)  <span class="comment"># 获取a标签的父节点</span></span><br><span class="line"><span class="built_in">print</span>(soup.a.parents)  <span class="comment"># 找到a标签所有的祖先节点，父亲的父亲，父亲的父亲的父亲...</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 4、兄弟节点</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;===&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(soup.a.next_sibling)  <span class="comment"># 下一个兄弟,类型：&lt;class &#x27;bs4.element.NavigableString&#x27;&gt;</span></span><br><span class="line"><span class="built_in">print</span>(soup.a.next_sibling.next_sibling)</span><br><span class="line"><span class="built_in">print</span>(soup.a.previous_sibling.previous_sibling)</span><br><span class="line"><span class="built_in">print</span>(soup.a.previous_siblings)  <span class="comment"># 上面的兄弟们=&gt;生成器对象</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="搜索文档树"><a href="#搜索文档树" class="headerlink" title="搜索文档树"></a>搜索文档树</h4><ul><li>recursive 是否从当前位置递归往下查询，如果不递归，只会查询当前<code>soup</code>文档的子元素</li><li>string 这里是通过tag的内容来搜索，并且<strong>返回的是类容，而不是tag类型的元素</strong></li><li><code>**kwargs</code> 自动拆包接受属性值，所以才会有<code>soup.find_all(&#39;a&#39;,id=&#39;title&#39;)</code> ，id=’title’为<code>**kwargs</code>自动拆包掺入</li></ul><p>BeautifulSoup定义了很多搜索方法,这里着重介绍2个: find() 和 find_all() .其它方法的参数和用法类似</p><p>参数列表解读</p><ul><li> <code>find_all</code></li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find_all( name , attrs , recursive , string , **kwargs )</span><br></pre></td></tr></table></figure><ul><li><strong>name参数</strong></li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">soup = BeautifulSoup(html_doc, <span class="string">&#x27;lxml&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 一、 name 四种过滤器: 字符串、正则表达式、列表、方法</span></span><br><span class="line"><span class="comment"># 1、字符串：即标签名</span></span><br><span class="line"><span class="built_in">print</span>(soup.find_all(name=<span class="string">&#x27;a&#x27;</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment"># 2、正则表达式</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(soup.find_all(name=re.<span class="built_in">compile</span>(<span class="string">&#x27;^b&#x27;</span>)))  <span class="comment"># 找出b开头的标签，结果有body和b标签</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 3、列表：如果传入列表参数,Beautiful Soup会将与列表中任一元素匹配的内容返回.下面代码找到文档中所有&lt;a&gt;标签和&lt;b&gt;标签:</span></span><br><span class="line"><span class="built_in">print</span>(soup.find_all(name=[<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>]))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 4、方法:如果没有合适过滤器,那么还可以定义一个方法,方法只接受一个元素参数 ,如果这个方法返回 True 表示当前元素匹配并且被找到,如果不是则反回 False</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">has_class_but_no_id</span>(<span class="params">tag</span>):</span><br><span class="line">    <span class="keyword">return</span> tag.has_attr(<span class="string">&#x27;class&#x27;</span>) <span class="keyword">and</span> tag.has_attr(<span class="string">&#x27;id&#x27;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(soup.find_all(name=has_class_but_no_id))</span><br><span class="line"></span><br></pre></td></tr></table></figure><ul><li><strong>keyword 参数</strong></li></ul><p>如果一个指定名字的参数不是搜索内置的参数名,搜索时会把该参数当作指定名字tag的属性来搜索,如果包含一个名字为 <code>id</code> 的参数,Beautiful Soup会搜索每个tag的”id”属性.</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(soup.find_all(href=<span class="string">&quot;http://example.com/tillie&quot;</span>))</span><br><span class="line"><span class="built_in">print</span>(soup.find_all(href=re.<span class="built_in">compile</span>(<span class="string">&quot;^http://&quot;</span>)))</span><br><span class="line"><span class="built_in">print</span>(soup.find_all(<span class="built_in">id</span>=<span class="literal">True</span>)) <span class="comment"># 拥有id属性的tag</span></span><br><span class="line"><span class="built_in">print</span>(soup.find_all(href=re.<span class="built_in">compile</span>(<span class="string">&quot;http://&quot;</span>), <span class="built_in">id</span>=<span class="string">&#x27;link1&#x27;</span>) <span class="comment"># 多个属性</span></span><br><span class="line"><span class="built_in">print</span>(soup.find_all(<span class="string">&quot;a&quot;</span>, class_=<span class="string">&quot;sister&quot;</span>)) <span class="comment"># 注意，class是Python的关键字，所以class属性用class_</span></span><br><span class="line"><span class="built_in">print</span>(soup.find_all(<span class="string">&quot;a&quot;</span>,attrs=&#123;<span class="string">&quot;href&quot;</span>: re.<span class="built_in">compile</span>(<span class="string">&quot;^http://&quot;</span>), <span class="string">&quot;id&quot;</span>: re.<span class="built_in">compile</span>(<span class="string">&quot;^link[12]&quot;</span>)&#125;))      </span><br><span class="line"><span class="comment"># 通过 find_all() 方法的 attrs 参数定义一个字典参数来搜索包含特殊属性的tag:</span></span><br><span class="line">data_soup.find_all(attrs=&#123;<span class="string">&quot;data-foo&quot;</span>: <span class="string">&quot;value&quot;</span>&#125;)    </span><br></pre></td></tr></table></figure><ul><li><strong>text参数</strong></li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> re</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(soup.find_all(text=<span class="string">&quot;Elsie&quot;</span>))</span><br><span class="line"><span class="comment"># [&#x27;Elsie&#x27;]</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(soup.find_all(text=[<span class="string">&quot;Tillie&quot;</span>, <span class="string">&quot;Elsie&quot;</span>, <span class="string">&quot;Lacie&quot;</span>]))</span><br><span class="line"><span class="comment"># [&#x27;Elsie&#x27;, &#x27;Lacie&#x27;, &#x27;Tillie&#x27;]</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 只要包含Dormouse就可以</span></span><br><span class="line"><span class="built_in">print</span>(soup.find_all(text=re.<span class="built_in">compile</span>(<span class="string">&quot;Dormouse&quot;</span>)))</span><br><span class="line"><span class="comment"># [&quot;The Dormouse&#x27;s story&quot;, &quot;The Dormouse&#x27;s story&quot;]</span></span><br></pre></td></tr></table></figure><ul><li><strong>limit参数</strong></li></ul><p><code>find_all()</code> 方法返回全部的搜索结构,如果文档树很大那么搜索会很慢.如果我们不需要全部结果,可以使用 <code>limit</code> 参数限制返回结果的数量.效果与SQL中的limit关键字类似,当搜索到的结果数量达到 <code>limit</code> 的限制时,就停止搜索返回结果.</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(soup.find_all(<span class="string">&quot;a&quot;</span>,limit=<span class="number">2</span>))</span><br></pre></td></tr></table></figure><ul><li><strong>recursive 参数</strong></li></ul><p>调用tag的 <code>find_all()</code> 方法时,Beautiful Soup会检索当前tag的所有子孙节点,如果只想搜索tag的直接子节点,可以使用参数 <code>recursive=False</code> </p><ul><li><code>find</code></li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find( name , attrs , recursive , string , **kwargs )</span><br></pre></td></tr></table></figure><p><code>find_all()</code> 方法将返回文档中符合条件的所有tag,尽管有时候我们只想得到一个结果.比如文档中只有一个<body>标签,那么使用 <code>find_all()</code> 方法来查找<body>标签就不太合适, 使用 <code>find_all</code> 方法并设置 <code>limit=1</code> 参数不如直接使用 <code>find()</code> 方法.下面两行代码是等价的:</body></body></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">soup.find_all(<span class="string">&#x27;title&#x27;</span>, limit=<span class="number">1</span>)</span><br><span class="line"><span class="comment"># [&lt;title&gt;The Dormouse&#x27;s story&lt;/title&gt;]</span></span><br><span class="line"></span><br><span class="line">soup.find(<span class="string">&#x27;title&#x27;</span>)</span><br><span class="line"><span class="comment"># &lt;title&gt;The Dormouse&#x27;s story&lt;/title&gt;</span></span><br></pre></td></tr></table></figure><p><strong>唯一的区别是 <code>find_all()</code> 方法的返回结果是值包含一个元素的列表,而 <code>find()</code> 方法直接返回结果.<code>find_all()</code> 方法没有找到目标是返回空列表, <code>find()</code> 方法找不到目标时,返回 <code>None</code> .</strong></p><p><code>soup.head.title</code> 是 tag的名字 方法的简写.这个简写的原理就是多次调用当前tag的 <code>find()</code> 方法:</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">soup.head.title</span><br><span class="line"><span class="comment"># &lt;title&gt;The Dormouse&#x27;s story&lt;/title&gt;</span></span><br><span class="line"></span><br><span class="line">soup.find(<span class="string">&quot;head&quot;</span>).find(<span class="string">&quot;title&quot;</span>)</span><br><span class="line"><span class="comment"># &lt;title&gt;The Dormouse&#x27;s story&lt;/title&gt;</span></span><br></pre></td></tr></table></figure><ul><li><code>其它方法</code></li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#（1） find_parents() 和 find_parent()</span></span><br><span class="line">a_string = soup.find(text=<span class="string">&quot;Lacie&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(a_string)  <span class="comment"># Lacie</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(a_string.find_parent())</span><br><span class="line"><span class="comment"># &lt;a class=&quot;sister&quot; href=&quot;http://example.com/lacie&quot; id=&quot;link2&quot;&gt;Lacie&lt;/a&gt;</span></span><br><span class="line"><span class="built_in">print</span>(a_string.find_parents())</span><br><span class="line"><span class="built_in">print</span>(a_string.find_parent(<span class="string">&quot;p&quot;</span>))</span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">&lt;p class=&quot;story&quot;&gt;</span></span><br><span class="line"><span class="string">    Once upon a time there were three little sisters; and their names were</span></span><br><span class="line"><span class="string">    &lt;a class=&quot;sister&quot; href=&quot;http://example.com/elsie&quot; id=&quot;link1&quot;&gt;Elsie&lt;/a&gt;,</span></span><br><span class="line"><span class="string">    &lt;a class=&quot;sister&quot; href=&quot;http://example.com/lacie&quot; id=&quot;link2&quot;&gt;Lacie&lt;/a&gt; and</span></span><br><span class="line"><span class="string">    &lt;a class=&quot;sister&quot; href=&quot;http://example.com/tillie&quot; id=&quot;link3&quot;&gt;Tillie&lt;/a&gt;;</span></span><br><span class="line"><span class="string">    and they lived at the bottom of a well.</span></span><br><span class="line"><span class="string">&lt;/p&gt;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># （2）find_next_siblings() 和 find_next_sibling()</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">这2个方法通过 .next_siblings 属性对当tag的所有后面解析的兄弟tag节点进行迭代, find_next_siblings() 方法返回所有符合条件的后面的兄弟节点, find_next_sibling() 只返回符合条件的后面的第一个tag节点.</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"></span><br><span class="line">first_link = soup.a</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(first_link.find_next_sibling(<span class="string">&quot;a&quot;</span>))</span><br><span class="line"><span class="comment"># &lt;a class=&quot;sister&quot; href=&quot;http://example.com/lacie&quot; id=&quot;link2&quot;&gt;Lacie&lt;/a&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(first_link.find_next_siblings(<span class="string">&quot;a&quot;</span>))</span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">[&lt;a class=&quot;sister&quot; href=&quot;http://example.com/lacie&quot; id=&quot;link2&quot;&gt;Lacie&lt;/a&gt;,</span></span><br><span class="line"><span class="string">&lt;a class=&quot;sister&quot; href=&quot;http://example.com/tillie&quot; id=&quot;link3&quot;&gt;Tillie&lt;/a&gt;</span></span><br><span class="line"><span class="string">]</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="comment"># find_previous_siblings() 和 find_previous_sibling()的使用类似于find_next_sibling和find_next_siblings。</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># （3）find_all_next() 和 find_next()</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">这2个方法通过 .next_elements 属性对当前tag的之后的tag和字符串进行迭代, find_all_next() 方法返回所有符合条件的节点, find_next() 方法返回第一个符合条件的节点:　</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line">first_link = soup.a</span><br><span class="line"><span class="built_in">print</span>(first_link.find_all_next(string=<span class="literal">True</span>))</span><br><span class="line"><span class="comment"># [&#x27;Elsie&#x27;, &#x27;,\n&#x27;, &#x27;Lacie&#x27;, &#x27; and\n&#x27;, &#x27;Tillie&#x27;, &#x27;;\nand they lived at the bottom of a well.&#x27;, &#x27;\n&#x27;, &#x27;...&#x27;, &#x27;\n&#x27;]</span></span><br><span class="line"><span class="built_in">print</span>(first_link.find_next(string=<span class="literal">True</span>)) <span class="comment"># Elsie</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># find_all_previous() 和 find_previous()的使用类似于find_all_next() 和 find_next()。</span></span><br></pre></td></tr></table></figure><h4 id="Css选择器"><a href="#Css选择器" class="headerlink" title="Css选择器"></a>Css选择器</h4><ul><li>select</li></ul><p>css选择器的方法为select(css_selector)<br>目前支持的选择器如下案例，css选择器可以参考<a href="https://www.w3school.com.cn/cssref/css_selectors.ASP">https://www.w3school.com.cn/cssref/css_selectors.ASP</a></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br></pre></td><td class="code"><pre><span class="line">soup.select(&quot;title&quot;)</span><br><span class="line"># [<span class="tag">&lt;<span class="name">title</span>&gt;</span>The Dormouse&#x27;s story<span class="tag">&lt;/<span class="name">title</span>&gt;</span>]</span><br><span class="line"></span><br><span class="line">soup.select(&quot;p nth-of-type(3)&quot;)</span><br><span class="line"># [<span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">&quot;story&quot;</span>&gt;</span>...<span class="tag">&lt;/<span class="name">p</span>&gt;</span>]</span><br><span class="line"></span><br><span class="line">soup.select(&quot;body a&quot;)</span><br><span class="line"># [<span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">&quot;sister&quot;</span> <span class="attr">href</span>=<span class="string">&quot;http://example.com/elsie&quot;</span> <span class="attr">id</span>=<span class="string">&quot;link1&quot;</span>&gt;</span>Elsie<span class="tag">&lt;/<span class="name">a</span>&gt;</span>,</span><br><span class="line">#  <span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">&quot;sister&quot;</span> <span class="attr">href</span>=<span class="string">&quot;http://example.com/lacie&quot;</span>  <span class="attr">id</span>=<span class="string">&quot;link2&quot;</span>&gt;</span>Lacie<span class="tag">&lt;/<span class="name">a</span>&gt;</span>,</span><br><span class="line">#  <span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">&quot;sister&quot;</span> <span class="attr">href</span>=<span class="string">&quot;http://example.com/tillie&quot;</span> <span class="attr">id</span>=<span class="string">&quot;link3&quot;</span>&gt;</span>Tillie<span class="tag">&lt;/<span class="name">a</span>&gt;</span>]</span><br><span class="line"></span><br><span class="line">soup.select(&quot;html head title&quot;)</span><br><span class="line"># [<span class="tag">&lt;<span class="name">title</span>&gt;</span>The Dormouse&#x27;s story<span class="tag">&lt;/<span class="name">title</span>&gt;</span>]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">soup.select(&quot;head &gt; title&quot;)</span><br><span class="line"># [<span class="tag">&lt;<span class="name">title</span>&gt;</span>The Dormouse&#x27;s story<span class="tag">&lt;/<span class="name">title</span>&gt;</span>]</span><br><span class="line"></span><br><span class="line">soup.select(&quot;p &gt; a&quot;)</span><br><span class="line"># [<span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">&quot;sister&quot;</span> <span class="attr">href</span>=<span class="string">&quot;http://example.com/elsie&quot;</span> <span class="attr">id</span>=<span class="string">&quot;link1&quot;</span>&gt;</span>Elsie<span class="tag">&lt;/<span class="name">a</span>&gt;</span>,</span><br><span class="line">#  <span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">&quot;sister&quot;</span> <span class="attr">href</span>=<span class="string">&quot;http://example.com/lacie&quot;</span>  <span class="attr">id</span>=<span class="string">&quot;link2&quot;</span>&gt;</span>Lacie<span class="tag">&lt;/<span class="name">a</span>&gt;</span>,</span><br><span class="line">#  <span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">&quot;sister&quot;</span> <span class="attr">href</span>=<span class="string">&quot;http://example.com/tillie&quot;</span> <span class="attr">id</span>=<span class="string">&quot;link3&quot;</span>&gt;</span>Tillie<span class="tag">&lt;/<span class="name">a</span>&gt;</span>]</span><br><span class="line"></span><br><span class="line">soup.select(&quot;p &gt; a:nth-of-type(2)&quot;)</span><br><span class="line"># [<span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">&quot;sister&quot;</span> <span class="attr">href</span>=<span class="string">&quot;http://example.com/lacie&quot;</span> <span class="attr">id</span>=<span class="string">&quot;link2&quot;</span>&gt;</span>Lacie<span class="tag">&lt;/<span class="name">a</span>&gt;</span>]</span><br><span class="line"></span><br><span class="line">soup.select(&quot;p &gt; #link1&quot;)</span><br><span class="line"># [<span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">&quot;sister&quot;</span> <span class="attr">href</span>=<span class="string">&quot;http://example.com/elsie&quot;</span> <span class="attr">id</span>=<span class="string">&quot;link1&quot;</span>&gt;</span>Elsie<span class="tag">&lt;/<span class="name">a</span>&gt;</span>]</span><br><span class="line"></span><br><span class="line">soup.select(&quot;body &gt; a&quot;)</span><br><span class="line"></span><br><span class="line">soup.select(&quot;#link1 ~ .sister&quot;)</span><br><span class="line"># [<span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">&quot;sister&quot;</span> <span class="attr">href</span>=<span class="string">&quot;http://example.com/lacie&quot;</span> <span class="attr">id</span>=<span class="string">&quot;link2&quot;</span>&gt;</span>Lacie<span class="tag">&lt;/<span class="name">a</span>&gt;</span>,</span><br><span class="line">#  <span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">&quot;sister&quot;</span> <span class="attr">href</span>=<span class="string">&quot;http://example.com/tillie&quot;</span>  <span class="attr">id</span>=<span class="string">&quot;link3&quot;</span>&gt;</span>Tillie<span class="tag">&lt;/<span class="name">a</span>&gt;</span>]</span><br><span class="line"></span><br><span class="line">soup.select(&quot;#link1 + .sister&quot;)</span><br><span class="line"># [<span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">&quot;sister&quot;</span> <span class="attr">href</span>=<span class="string">&quot;http://example.com/lacie&quot;</span> <span class="attr">id</span>=<span class="string">&quot;link2&quot;</span>&gt;</span>Lacie<span class="tag">&lt;/<span class="name">a</span>&gt;</span>]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">soup.select(&quot;.sister&quot;)</span><br><span class="line"># [<span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">&quot;sister&quot;</span> <span class="attr">href</span>=<span class="string">&quot;http://example.com/elsie&quot;</span> <span class="attr">id</span>=<span class="string">&quot;link1&quot;</span>&gt;</span>Elsie<span class="tag">&lt;/<span class="name">a</span>&gt;</span>,</span><br><span class="line">#  <span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">&quot;sister&quot;</span> <span class="attr">href</span>=<span class="string">&quot;http://example.com/lacie&quot;</span> <span class="attr">id</span>=<span class="string">&quot;link2&quot;</span>&gt;</span>Lacie<span class="tag">&lt;/<span class="name">a</span>&gt;</span>,</span><br><span class="line">#  <span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">&quot;sister&quot;</span> <span class="attr">href</span>=<span class="string">&quot;http://example.com/tillie&quot;</span> <span class="attr">id</span>=<span class="string">&quot;link3&quot;</span>&gt;</span>Tillie<span class="tag">&lt;/<span class="name">a</span>&gt;</span>]</span><br><span class="line"></span><br><span class="line">soup.select(&quot;[class~=sister]&quot;)</span><br><span class="line"># [<span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">&quot;sister&quot;</span> <span class="attr">href</span>=<span class="string">&quot;http://example.com/elsie&quot;</span> <span class="attr">id</span>=<span class="string">&quot;link1&quot;</span>&gt;</span>Elsie<span class="tag">&lt;/<span class="name">a</span>&gt;</span>,</span><br><span class="line">#  <span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">&quot;sister&quot;</span> <span class="attr">href</span>=<span class="string">&quot;http://example.com/lacie&quot;</span> <span class="attr">id</span>=<span class="string">&quot;link2&quot;</span>&gt;</span>Lacie<span class="tag">&lt;/<span class="name">a</span>&gt;</span>,</span><br><span class="line">#  <span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">&quot;sister&quot;</span> <span class="attr">href</span>=<span class="string">&quot;http://example.com/tillie&quot;</span> <span class="attr">id</span>=<span class="string">&quot;link3&quot;</span>&gt;</span>Tillie<span class="tag">&lt;/<span class="name">a</span>&gt;</span>]</span><br><span class="line"></span><br><span class="line">soup.select(&quot;#link1&quot;)</span><br><span class="line"># [<span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">&quot;sister&quot;</span> <span class="attr">href</span>=<span class="string">&quot;http://example.com/elsie&quot;</span> <span class="attr">id</span>=<span class="string">&quot;link1&quot;</span>&gt;</span>Elsie<span class="tag">&lt;/<span class="name">a</span>&gt;</span>]</span><br><span class="line"></span><br><span class="line">soup.select(&quot;a#link2&quot;)</span><br><span class="line"># [<span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">&quot;sister&quot;</span> <span class="attr">href</span>=<span class="string">&quot;http://example.com/lacie&quot;</span> <span class="attr">id</span>=<span class="string">&quot;link2&quot;</span>&gt;</span>Lacie<span class="tag">&lt;/<span class="name">a</span>&gt;</span>]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">soup.select(&quot;#link1,#link2&quot;)</span><br><span class="line"># [<span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">&quot;sister&quot;</span> <span class="attr">href</span>=<span class="string">&quot;http://example.com/elsie&quot;</span> <span class="attr">id</span>=<span class="string">&quot;link1&quot;</span>&gt;</span>Elsie<span class="tag">&lt;/<span class="name">a</span>&gt;</span>,</span><br><span class="line">#  <span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">&quot;sister&quot;</span> <span class="attr">href</span>=<span class="string">&quot;http://example.com/lacie&quot;</span> <span class="attr">id</span>=<span class="string">&quot;link2&quot;</span>&gt;</span>Lacie<span class="tag">&lt;/<span class="name">a</span>&gt;</span>]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">soup.select(&#x27;a[href]&#x27;)</span><br><span class="line"># [<span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">&quot;sister&quot;</span> <span class="attr">href</span>=<span class="string">&quot;http://example.com/elsie&quot;</span> <span class="attr">id</span>=<span class="string">&quot;link1&quot;</span>&gt;</span>Elsie<span class="tag">&lt;/<span class="name">a</span>&gt;</span>,</span><br><span class="line">#  <span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">&quot;sister&quot;</span> <span class="attr">href</span>=<span class="string">&quot;http://example.com/lacie&quot;</span> <span class="attr">id</span>=<span class="string">&quot;link2&quot;</span>&gt;</span>Lacie<span class="tag">&lt;/<span class="name">a</span>&gt;</span>,</span><br><span class="line">#  <span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">&quot;sister&quot;</span> <span class="attr">href</span>=<span class="string">&quot;http://example.com/tillie&quot;</span> <span class="attr">id</span>=<span class="string">&quot;link3&quot;</span>&gt;</span>Tillie<span class="tag">&lt;/<span class="name">a</span>&gt;</span>]</span><br><span class="line"></span><br><span class="line">soup.select(&#x27;a[href=&quot;http://example.com/elsie&quot;]&#x27;)</span><br><span class="line"># [<span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">&quot;sister&quot;</span> <span class="attr">href</span>=<span class="string">&quot;http://example.com/elsie&quot;</span> <span class="attr">id</span>=<span class="string">&quot;link1&quot;</span>&gt;</span>Elsie<span class="tag">&lt;/<span class="name">a</span>&gt;</span>]</span><br><span class="line"></span><br><span class="line">soup.select(&#x27;a[href^=&quot;http://example.com/&quot;]&#x27;)</span><br><span class="line"># [<span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">&quot;sister&quot;</span> <span class="attr">href</span>=<span class="string">&quot;http://example.com/elsie&quot;</span> <span class="attr">id</span>=<span class="string">&quot;link1&quot;</span>&gt;</span>Elsie<span class="tag">&lt;/<span class="name">a</span>&gt;</span>,</span><br><span class="line">#  <span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">&quot;sister&quot;</span> <span class="attr">href</span>=<span class="string">&quot;http://example.com/lacie&quot;</span> <span class="attr">id</span>=<span class="string">&quot;link2&quot;</span>&gt;</span>Lacie<span class="tag">&lt;/<span class="name">a</span>&gt;</span>,</span><br><span class="line">#  <span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">&quot;sister&quot;</span> <span class="attr">href</span>=<span class="string">&quot;http://example.com/tillie&quot;</span> <span class="attr">id</span>=<span class="string">&quot;link3&quot;</span>&gt;</span>Tillie<span class="tag">&lt;/<span class="name">a</span>&gt;</span>]</span><br><span class="line"></span><br><span class="line">soup.select(&#x27;a[href$=&quot;tillie&quot;]&#x27;)</span><br><span class="line"># [<span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">&quot;sister&quot;</span> <span class="attr">href</span>=<span class="string">&quot;http://example.com/tillie&quot;</span> <span class="attr">id</span>=<span class="string">&quot;link3&quot;</span>&gt;</span>Tillie<span class="tag">&lt;/<span class="name">a</span>&gt;</span>]</span><br><span class="line"></span><br><span class="line">soup.select(&#x27;a[href*=&quot;.com/el&quot;]&#x27;)</span><br><span class="line"># [<span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">&quot;sister&quot;</span> <span class="attr">href</span>=<span class="string">&quot;http://example.com/elsie&quot;</span> <span class="attr">id</span>=<span class="string">&quot;link1&quot;</span>&gt;</span>Elsie<span class="tag">&lt;/<span class="name">a</span>&gt;</span>]</span><br><span class="line">multilingual_markup = &quot;&quot;&quot;</span><br><span class="line"> <span class="tag">&lt;<span class="name">p</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span>Hello<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">p</span> <span class="attr">lang</span>=<span class="string">&quot;en-us&quot;</span>&gt;</span>Howdy, y&#x27;all<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">p</span> <span class="attr">lang</span>=<span class="string">&quot;en-gb&quot;</span>&gt;</span>Pip-pip, old fruit<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">p</span> <span class="attr">lang</span>=<span class="string">&quot;fr&quot;</span>&gt;</span>Bonjour mes amis<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">&quot;&quot;&quot;</span><br><span class="line">multilingual_soup = BeautifulSoup(multilingual_markup)</span><br><span class="line">multilingual_soup.select(&#x27;p[lang|=en]&#x27;)</span><br><span class="line"># [<span class="tag">&lt;<span class="name">p</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span>Hello<span class="tag">&lt;/<span class="name">p</span>&gt;</span>,</span><br><span class="line">#  <span class="tag">&lt;<span class="name">p</span> <span class="attr">lang</span>=<span class="string">&quot;en-us&quot;</span>&gt;</span>Howdy, y&#x27;all<span class="tag">&lt;/<span class="name">p</span>&gt;</span>,</span><br><span class="line">#  <span class="tag">&lt;<span class="name">p</span> <span class="attr">lang</span>=<span class="string">&quot;en-gb&quot;</span>&gt;</span>Pip-pip, old fruit<span class="tag">&lt;/<span class="name">p</span>&gt;</span>]</span><br></pre></td></tr></table></figure><ul><li>select_one</li></ul><p><strong>返回查找到的元素的第一个</strong></p><ul><li>练习</li></ul><p>使用bs4爬取豆瓣电影排行榜信息</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> bs4 <span class="keyword">import</span> BeautifulSoup</span><br><span class="line">soup = BeautifulSoup(s, <span class="string">&#x27;html.parser&#x27;</span>)</span><br><span class="line"></span><br><span class="line">s=soup.find_all(class_=<span class="string">&quot;item&quot;</span>)</span><br><span class="line"><span class="keyword">for</span> item <span class="keyword">in</span> s:</span><br><span class="line">  <span class="built_in">print</span>(item.find(class_=<span class="string">&quot;pic&quot;</span>).a.get(<span class="string">&quot;href&quot;</span>))</span><br><span class="line">  <span class="built_in">print</span>(item.find(class_=<span class="string">&quot;pic&quot;</span>).em.string)</span><br><span class="line">  <span class="built_in">print</span>(item.find(class_=<span class="string">&quot;info&quot;</span>).contents[<span class="number">1</span>].a.span.string)</span><br><span class="line">        <span class="built_in">print</span>(item.find(class_=<span class="string">&quot;info&quot;</span>).contents[<span class="number">3</span>].contents[<span class="number">3</span>].contents[<span class="number">3</span>].string)</span><br><span class="line">        <span class="built_in">print</span>(item.find(class_=<span class="string">&quot;info&quot;</span>).contents[<span class="number">3</span>].contents[<span class="number">3</span>].contents[<span class="number">7</span>].string)</span><br></pre></td></tr></table></figure><h3 id="3-3、xpath"><a href="#3-3、xpath" class="headerlink" title="3.3、xpath"></a><strong>3.3、xpath</strong></h3><p>xpath在Python的爬虫学习中，起着举足轻重的地位，对比正则表达式 re两者可以完成同样的工作，实现的功能也差不多，但xpath明显比re具有优势，在网页分析上使re退居二线。</p><p>xpath 全称为<strong>XML Path Language</strong> 一种小型的<strong>查询语言</strong><br>xpath的优点： </p><ul><li>可在XML中查找信息 </li><li>支持HTML的查找 </li><li>通过元素和属性进行导航</li></ul><p><strong>python开发使用XPath条件：</strong> 由于XPath属于lxml库模块，所以首先要安装库lxml。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> lxml <span class="keyword">import</span> etree</span><br><span class="line">selector=etree.HTML(源码) <span class="comment">#将源码转化为能被XPath匹配的格式</span></span><br><span class="line">selector.xpath(表达式) <span class="comment">#返回为一列表</span></span><br></pre></td></tr></table></figure><h4 id="路径表达式"><a href="#路径表达式" class="headerlink" title="路径表达式"></a><strong>路径表达式</strong></h4><table><thead><tr><th align="left">表达式</th><th align="left">描述</th><th>实例</th><th>解析</th></tr></thead><tbody><tr><td align="left">/</td><td align="left">从根节点选取</td><td><code>/body/div[1]</code></td><td>选取根结点下的body下的第一个div标签</td></tr><tr><td align="left">//</td><td align="left">从匹配选择的当前节点选择文档中的节点，而不考虑它们的位置</td><td><code>//a</code></td><td>选取文档中所有的a标签</td></tr><tr><td align="left">./</td><td align="left">当前节点再次进行xpath</td><td><code>./a</code></td><td>选取当前节点下的所有a标签</td></tr><tr><td align="left">@</td><td align="left">选取属性</td><td><code>//@calss</code></td><td>选取所有的class属性</td></tr></tbody></table><h4 id="谓语（Predicates）"><a href="#谓语（Predicates）" class="headerlink" title="** 谓语（Predicates）**"></a>** 谓语（Predicates）**</h4><p>谓语用来查找某个特定的节点或者包含某个指定的值的节点。</p><p>谓语被嵌在方括号中。</p><p>在下面的表格中，我们列出了带有谓语的一些路径表达式，以及表达式的结果：</p><table><thead><tr><th align="left">路径表达式</th><th align="left">结果</th></tr></thead><tbody><tr><td align="left">/ul/li[1]</td><td align="left">选取属于 ul子元素的第一个 li元素。</td></tr><tr><td align="left">/ul/li[last()]</td><td align="left">选取属于 ul子元素的最后一个 li元素。</td></tr><tr><td align="left">/ul/li[last()-1]</td><td align="left">选取属于 ul子元素的倒数第二个 li元素。</td></tr><tr><td align="left">//ul/li[position()&lt;3]</td><td align="left">选取最前面的两个属于 ul元素的子元素的 li元素。</td></tr><tr><td align="left">//a[@title]</td><td align="left">选取所有拥有名为 title的属性的 a元素。</td></tr><tr><td align="left">//a[@title=’xx’]</td><td align="left">选取所有 a元素，且这些元素拥有值为 xx的 title属性。</td></tr><tr><td align="left">//a[@title&gt;10] <code>&gt; &lt; &gt;= &lt;= !=</code></td><td align="left">选取 a元素的所有 title元素，且其中的 title元素的值须大于 10。</td></tr><tr><td align="left">/body/div[@price&gt;35.00]</td><td align="left">选取body下price元素值大于35的div节点</td></tr></tbody></table><h4 id="选取未知节点"><a href="#选取未知节点" class="headerlink" title="选取未知节点"></a><strong>选取未知节点</strong></h4><p>XPath 通配符可用来选取未知的 XML 元素。</p><table><thead><tr><th align="left">通配符</th><th align="left">描述</th></tr></thead><tbody><tr><td align="left">*</td><td align="left">匹配任何元素节点。</td></tr><tr><td align="left">@*</td><td align="left">匹配任何属性节点。</td></tr><tr><td align="left">node()</td><td align="left">匹配任何类型的节点。</td></tr></tbody></table><p><strong>实例</strong></p><p>在下面的表格中，我们列出了一些路径表达式，以及这些表达式的结果：</p><table><thead><tr><th align="left">路径表达式</th><th align="left">结果</th></tr></thead><tbody><tr><td align="left">/ul/*</td><td align="left">选取 bookstore 元素的所有子元素。</td></tr><tr><td align="left">//*</td><td align="left">选取文档中的所有元素。</td></tr><tr><td align="left">//title[@*]</td><td align="left">选取所有带有属性的 title 元素。</td></tr><tr><td align="left">//node()</td><td align="left">获取所有节点</td></tr></tbody></table><h4 id="选取若干路径"><a href="#选取若干路径" class="headerlink" title="选取若干路径"></a><strong>选取若干路径</strong></h4><p>通过在路径表达式中使用“|”运算符，您可以选取若干个路径。</p><p><strong>实例</strong></p><p>在下面的表格中，我们列出了一些路径表达式，以及这些表达式的结果：</p><table><thead><tr><th align="left">路径表达式</th><th align="left">结果</th></tr></thead><tbody><tr><td align="left">//book/title | //book/price</td><td align="left">选取 book 元素的所有 title 和 price 元素。</td></tr><tr><td align="left">//title | //price</td><td align="left">选取文档中的所有 title 和 price 元素。</td></tr><tr><td align="left">/bookstore/book/title | //price</td><td align="left">选取属于 bookstore 元素的 book 元素的所有 title 元素，以及文档中所有的 price 元素。</td></tr></tbody></table><ul><li><p>逻辑运算</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">//div[@<span class="built_in">id</span>=<span class="string">&quot;head&quot;</span> <span class="keyword">and</span> @<span class="keyword">class</span>=<span class="string">&quot;s_down&quot;</span>] <span class="comment"># 查找所有id属性等于head并且class属性等于s_down的div标签</span></span><br><span class="line">//title | //price <span class="comment"># 选取文档中的所有 title 和 price 元素,“|”两边必须是完整的xpath路径</span></span><br></pre></td></tr></table></figure></li><li><p>属性查询</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">//div[@<span class="built_in">id</span>] <span class="comment"># 找所有包含id属性的div节点</span></span><br><span class="line">//div[@<span class="built_in">id</span>=<span class="string">&quot;maincontent&quot;</span>]  <span class="comment"># 查找所有id属性等于maincontent的div标签</span></span><br><span class="line">//@<span class="keyword">class</span></span><br><span class="line">//li[@name=<span class="string">&quot;xx&quot;</span>]//text()  <span class="comment"># 获取li标签name为xx的里面的文本内容</span></span><br></pre></td></tr></table></figure></li><li><p>获取第几个标签 索引从1开始</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">tree.xpath(<span class="string">&#x27;//li[1]/a/text()&#x27;</span>)  <span class="comment"># 获取第一个</span></span><br><span class="line">tree.xpath(<span class="string">&#x27;//li[last()]/a/text()&#x27;</span>)  <span class="comment"># 获取最后一个</span></span><br><span class="line">tree.xpath(<span class="string">&#x27;//li[last()-1]/a/text()&#x27;</span>)  <span class="comment"># 获取倒数第二个</span></span><br></pre></td></tr></table></figure></li><li><p>模糊查询</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">//div[contains(@<span class="built_in">id</span>, <span class="string">&quot;he&quot;</span>)]  <span class="comment"># 查询所有id属性中包含he的div标签</span></span><br><span class="line">//div[starts-<span class="keyword">with</span>(@<span class="built_in">id</span>, <span class="string">&quot;he&quot;</span>)] <span class="comment"># 查询所有id属性中包以he开头的div标签</span></span><br><span class="line">//div/h1/text()  <span class="comment"># 查找所有div标签下的直接子节点h1的内容</span></span><br><span class="line">//div/a/@href   <span class="comment"># 获取a里面的href属性值 </span></span><br><span class="line">//*  <span class="comment">#获取所有</span></span><br><span class="line">//*[@<span class="keyword">class</span>=<span class="string">&quot;xx&quot;</span>]  <span class="comment">#获取所有class为xx的标签</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 获取节点内容转换成字符串</span></span><br><span class="line">c = tree.xpath(<span class="string">&#x27;//li/a&#x27;</span>)[<span class="number">0</span>]</span><br><span class="line">result=etree.tostring(c, encoding=<span class="string">&#x27;utf-8&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(result.decode(<span class="string">&#x27;UTF-8&#x27;</span>))</span><br></pre></td></tr></table></figure></li></ul><h4 id="案例"><a href="#案例" class="headerlink" title="案例"></a>案例</h4><p>豆瓣Top250基于xpath解析：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">from</span> lxml <span class="keyword">import</span> etree</span><br><span class="line"></span><br><span class="line">url = <span class="string">&quot;https://movie.douban.com/top250?start=0&quot;</span></span><br><span class="line">headers = &#123;</span><br><span class="line">    <span class="string">&quot;User-Agent&quot;</span>: <span class="string">&quot;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/99.0.4844.82 Safari/537.36&quot;</span></span><br><span class="line">&#125;</span><br><span class="line">resp = requests.get(url, headers=headers)</span><br><span class="line"></span><br><span class="line">tree = etree.HTML(resp.text)  <span class="comment"># 加载页面源代码</span></span><br><span class="line"></span><br><span class="line">items = tree.xpath(<span class="string">&#x27;//li/div[@class=&quot;item&quot;]/div[@class=&quot;info&quot;]&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> item <span class="keyword">in</span> items:</span><br><span class="line">    title = item.xpath(<span class="string">&#x27;./div[@class=&quot;hd&quot;]/a/span[1]/text()&#x27;</span>)[<span class="number">0</span>]</span><br><span class="line">    rating_num = item.xpath(<span class="string">&#x27;./div[@class=&quot;bd&quot;]/div[@class=&quot;star&quot;]/span[@class=&quot;rating_num&quot;]/text()&#x27;</span>)[<span class="number">0</span>]</span><br><span class="line">    comment_num = item.xpath(<span class="string">&#x27;./div[@class=&quot;bd&quot;]/div[@class=&quot;star&quot;]/span[4]/text()&#x27;</span>)[<span class="number">0</span>]</span><br><span class="line">    <span class="built_in">print</span>(title, rating_num, comment_num)</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;爬虫是什么&quot;&gt;&lt;a href=&quot;#爬虫是什么&quot; class=&quot;headerlink&quot; title=&quot;爬虫是什么&quot;&gt;&lt;/a&gt;爬虫是什么&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;爬虫的本质：模拟浏览器打开网页，捕获网页中我们想要的那部分数据。&lt;/li&gt;
&lt;li&gt;入门：爬虫是一种自动</summary>
      
    
    
    
    <category term="Python篇" scheme="http://bkystop.github.io/categories/Python%E7%AF%87/"/>
    
    
    <category term="Python" scheme="http://bkystop.github.io/tags/Python/"/>
    
    <category term="Python爬虫" scheme="http://bkystop.github.io/tags/Python%E7%88%AC%E8%99%AB/"/>
    
  </entry>
  
  <entry>
    <title>Windows搭建DVWA靶场</title>
    <link href="http://bkystop.github.io/2022/11/07/Windows%E6%90%AD%E5%BB%BADVWA%E9%9D%B6%E5%9C%BA/"/>
    <id>http://bkystop.github.io/2022/11/07/Windows%E6%90%AD%E5%BB%BADVWA%E9%9D%B6%E5%9C%BA/</id>
    <published>2022-11-07T14:23:44.000Z</published>
    <updated>2023-04-09T09:11:30.389Z</updated>
    
    <content type="html"><![CDATA[<h2 id="DVWA靶场"><a href="#DVWA靶场" class="headerlink" title="DVWA靶场"></a>DVWA靶场</h2><h3 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h3><ul><li>DVWA（Damn Vulnerable Web Application）是一个用来进行安全脆弱性鉴定的PHP/MySQL Web应用，旨在为安全专业人员测试自己的专业技能和工具提供合法的环境，帮助web开发者更好的理解web应用安全防范的过程。 </li><li>模块<ul><li>暴力（破解）</li><li>命令行注入</li><li>跨站请求伪造</li><li>文件包含</li><li>文件上传</li><li>不安全的验证码</li><li>SQL注入</li><li>SQL盲注</li><li>弱会话ID</li><li>XSS漏洞（DOM型跨站脚本、反射型跨站脚本、 存储型跨站脚本） </li></ul></li></ul><h3 id="搭建"><a href="#搭建" class="headerlink" title="搭建"></a>搭建</h3><ul><li><p>官网下载<a href="http://www.dvwa.co.uk/">DVWA</a></p></li><li><p>下载、安装、启动<a href="https://www.xp.cn/">phpstudy</a> </p></li></ul><ul><li><p>将下载的DVWA解压到phpstudy网站根目录下</p></li><li><p>将 config.inc.php.dist 复制一份或重命令为 config.inc.php</p></li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">phpStudy\WWW\DVWA-master\config</span><br></pre></td></tr></table></figure><ul><li>修改 config.inc.php</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$</span><span class="language-bash">_DVWA[ <span class="string">&#x27;db_server&#x27;</span> ]  = <span class="string">&#x27;127.0.0.1&#x27;</span>; <span class="comment">#数据库地址</span></span> </span><br><span class="line"><span class="meta prompt_">$</span><span class="language-bash">_DVWA[ <span class="string">&#x27;db_database&#x27;</span> ] = <span class="string">&#x27;dvwa&#x27;</span>; <span class="comment">#数据库名称</span></span> </span><br><span class="line"><span class="meta prompt_">$</span><span class="language-bash">_DVWA[ <span class="string">&#x27;db_user&#x27;</span> ]   = <span class="string">&#x27;root&#x27;</span>; <span class="comment">#数据库用户名</span></span> </span><br><span class="line"><span class="meta prompt_">$</span><span class="language-bash">_DVWA[ <span class="string">&#x27;db_password&#x27;</span> ] = <span class="string">&#x27;root&#x27;</span>; <span class="comment">#数据库密码</span></span></span><br></pre></td></tr></table></figure><ul><li>编辑 dvwa/config/config.inc.php <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$</span><span class="language-bash">_DVWA[ <span class="string">&#x27;recaptcha_public_key&#x27;</span> ] = <span class="string">&#x27;&#x27;</span>;</span> </span><br><span class="line"><span class="meta prompt_">$</span><span class="language-bash">_DVWA[ <span class="string">&#x27;recaptcha_private_key&#x27;</span> ] = <span class="string">&#x27;&#x27;</span>;</span></span><br></pre></td></tr></table></figure></li></ul><ol><li>设置数据库</li></ol><ul><li>浏览器打开<a href="http://127.0.0.1/DVWA-master/setup.php">http://127.0.0.1/DVWA-master/setup.php</a> ,点击Setup/Reset DB，点击Create/Reset Database。会看到创建成功提示 </li></ul><ol><li>登录</li></ol><ul><li>浏览器打开<a href="http://127.0.0.1/DVWA-master/login.php">http://127.0.0.1/DVWA-master/login.php</a></li><li>默认用户名：admin，默认密码：password</li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;DVWA靶场&quot;&gt;&lt;a href=&quot;#DVWA靶场&quot; class=&quot;headerlink&quot; title=&quot;DVWA靶场&quot;&gt;&lt;/a&gt;DVWA靶场&lt;/h2&gt;&lt;h3 id=&quot;简介&quot;&gt;&lt;a href=&quot;#简介&quot; class=&quot;headerlink&quot; title=&quot;简介&quot;&gt;&lt;</summary>
      
    
    
    
    <category term="安全篇" scheme="http://bkystop.github.io/categories/%E5%AE%89%E5%85%A8%E7%AF%87/"/>
    
    
    <category term="Windows" scheme="http://bkystop.github.io/tags/Windows/"/>
    
  </entry>
  
  <entry>
    <title>Kail搭建vulhub靶场</title>
    <link href="http://bkystop.github.io/2022/11/02/Kali%E6%90%AD%E5%BB%BAvulhub%E9%9D%B6%E5%9C%BA/"/>
    <id>http://bkystop.github.io/2022/11/02/Kali%E6%90%AD%E5%BB%BAvulhub%E9%9D%B6%E5%9C%BA/</id>
    <published>2022-11-02T13:17:51.000Z</published>
    <updated>2023-04-09T09:08:58.634Z</updated>
    
    <content type="html"><![CDATA[<h2 id="vulhub靶场"><a href="#vulhub靶场" class="headerlink" title="vulhub靶场"></a>vulhub靶场</h2><h3 id="搭建靶场"><a href="#搭建靶场" class="headerlink" title="搭建靶场"></a>搭建靶场</h3><ul><li>kali下搭建vulhub靶场</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">apt-get update</span><br><span class="line">apt-get install -y apt-transport-https ca-certificates</span><br><span class="line"># 安装https，ca证书</span><br><span class="line">apt install docker.io # 安装docker</span><br><span class="line">docker -v </span><br><span class="line">systemctl start docker</span><br><span class="line">docker ps -a</span><br><span class="line">apt-get install python3-pip  # 安装pip</span><br><span class="line">pip3 install docker-compose  # 安装docker-compose</span><br><span class="line">docker-compose -v</span><br><span class="line">git clone https://github.com/vulhub/vulhub.git # 下载vulhub</span><br><span class="line">cd spring/CVE-2018-1273  # 任意进入一个目录，启动靶场</span><br><span class="line">docker-compose build   # 对靶场进行编译</span><br><span class="line">docker-compose up -d   # 启动环境（查看端口，http://localhost:8080/users）</span><br><span class="line">docker-compose down    # 移除环境</span><br><span class="line"></span><br></pre></td></tr></table></figure><ul><li><p>vulhub下载慢</p><ul><li><p>官网下载vulhub .zip<a href="https://vulhub.org/#/docs/download-vulhub/">https://vulhub.org/#/docs/download-vulhub/</a></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">unzip vulhub-master.zip # 解压</span><br></pre></td></tr></table></figure></li><li><p>使用gitee拉取</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git clone https://gitee.com/puier/vulhub.git</span><br><span class="line"></span><br></pre></td></tr></table></figure></li></ul></li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;vulhub靶场&quot;&gt;&lt;a href=&quot;#vulhub靶场&quot; class=&quot;headerlink&quot; title=&quot;vulhub靶场&quot;&gt;&lt;/a&gt;vulhub靶场&lt;/h2&gt;&lt;h3 id=&quot;搭建靶场&quot;&gt;&lt;a href=&quot;#搭建靶场&quot; class=&quot;headerlink&quot; </summary>
      
    
    
    
    <category term="安全篇" scheme="http://bkystop.github.io/categories/%E5%AE%89%E5%85%A8%E7%AF%87/"/>
    
    
    <category term="kali" scheme="http://bkystop.github.io/tags/kali/"/>
    
    <category term="Linux" scheme="http://bkystop.github.io/tags/Linux/"/>
    
  </entry>
  
  <entry>
    <title>Kail基础</title>
    <link href="http://bkystop.github.io/2022/10/30/Kali%E5%9F%BA%E7%A1%80/"/>
    <id>http://bkystop.github.io/2022/10/30/Kali%E5%9F%BA%E7%A1%80/</id>
    <published>2022-10-30T14:28:10.000Z</published>
    <updated>2023-04-09T09:09:17.735Z</updated>
    
    <content type="html"><![CDATA[<h2 id="kali的安装与介绍"><a href="#kali的安装与介绍" class="headerlink" title="kali的安装与介绍"></a>kali的安装与介绍</h2><h3 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h3><ul><li>VMware是运行虚拟机（虚拟机是指通过 软件 模拟的具有完整硬件系统功能的、运行在一个完全隔离环境中的完整计算机系统 ）的软件，通过VMware创建虚拟机，让我们在系统中安装系统。<ul><li>bridged（桥接模式）：同一网络环境下的两台电脑。</li><li>NAT（网络地址转换模式）：虚拟机通过主机进行联网。</li><li>Host-Only（主机）:主机将虚拟机与外网隔开，只能让虚拟机和虚拟机之间联网。</li></ul></li><li>系统镜像：文件版的光盘</li><li>kali：Kali Linux是专业的渗透测试系统，安装预装了许多渗透测试软件。</li><li>数据包：包(Packet)是TCP/IP协议通信传输中的数据单位，一般也称“数据包”。</li><li>端口：端口可分为虚拟端口和物理端口，其中虚拟端口指计算机内部或交换机路由器内的端口，不可见</li><li>抓包：抓取数据包</li><li>kali的源：源配置(软件源)概念：源就是来，。可以把他称为软件仓库。安装软件时，就是从仓库里面调取数据放在你的机器上。</li><li>更新源：相当于windows打补丁，软件更新。</li><li>Linux下载软件方式<ul><li>从源配置（软件源）所在服务器上通过特定命令获取JDK,Tomcat之类的软件包. </li><li>从源配置（软件源）所在服务器上通过特定命令获取JDK,Tomcat之类的软件包. </li></ul></li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">sudo dpkg --get-selections | more</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">查看当前系统中所有软件包的状态</span></span><br><span class="line">sudo apt-mark hold metasploit-framework </span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">metasploit-framework锁定当前版本不更新</span></span><br><span class="line">sudo dpkg --get-selections | grep hold</span><br><span class="line">查看当前已锁定的软件包</span><br><span class="line">sudo apt-mark unhold metasploit-framework </span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">取消当前已锁定软件</span></span><br></pre></td></tr></table></figure><ul><li><p>kali更新后出现问题</p><ul><li>进入/usr/share/metasploit-framework目录下</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">gem install bundler </span><br><span class="line">gem update --system </span><br></pre></td></tr></table></figure></li></ul><h3 id="配置kali系统源"><a href="#配置kali系统源" class="headerlink" title="配置kali系统源"></a>配置kali系统源</h3><ol><li><p>使用bianjiqi打开系统源文本</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/apt/sources.list</span><br></pre></td></tr></table></figure></li><li><p>填写成阿里源</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">阿里云<span class="comment">#</span></span></span><br><span class="line">deb http://mirrors.aliyun.com/kali kali-rolling main non-free contrib</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">deb-src http://mirrors.aliyun.com/kali kali-rolling main non-free contrib</span></span><br></pre></td></tr></table></figure></li><li><p>更新</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">软件版本更新 &amp;&amp; 进行一次升级 &amp;&amp; 软件源清单更新</span><br><span class="line">apt-get update &amp;&amp; apt-get upgrade -y &amp;&amp; apt-get dist-upgrade -y</span><br><span class="line">apt-get clean # 删除已经下载的安装包</span><br><span class="line">reboot  #重启</span><br></pre></td></tr></table></figure></li></ol><h3 id="ssh服务"><a href="#ssh服务" class="headerlink" title="ssh服务"></a>ssh服务</h3><ul><li><p>使用编辑器打开ssh配置</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/ssh/sshd_config</span><br></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">PasswordAuthentication <span class="built_in">yes</span> (去掉注释)</span></span><br><span class="line"><span class="meta prompt_"> #</span><span class="language-bash">PermitRootLogin prohibit-password (去掉注释后面的并删除改为<span class="built_in">yes</span>)</span> </span><br></pre></td></tr></table></figure></li><li><p>开启ssh服务</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">service ssh start </span><br></pre></td></tr></table></figure></li><li><p>kali下查看服务开启状态</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">service ssh status </span><br></pre></td></tr></table></figure></li><li><p>使用putty/xshell进行连接</p></li></ul><h3 id="用户组"><a href="#用户组" class="headerlink" title="用户组"></a>用户组</h3><ul><li>linux中，每个文件都是属于一个用户组。</li><li>在linux中，可以同时拥有N个用户，和用户组</li></ul><h4 id="用户信息"><a href="#用户信息" class="headerlink" title="用户信息"></a>用户信息</h4><ul><li><p>查看用户信息</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">cat /etc/passwd</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">用户名：密码（x）:UID:GID:用户名全称：用户的家目录所在的位置：用户所用的SHELL的类型</span></span><br><span class="line">useradd -m key # 自动在home文件下创建key目录</span><br><span class="line">useradd -g 组名 用户名  # 指定添加到某个组织里面</span><br><span class="line">passwd 用户名 # 修改key的新密码</span><br><span class="line">userdel -r 用户名 # 删除目录及用户名</span><br></pre></td></tr></table></figure></li><li><p>用户划分</p><ul><li>系统用户：root</li><li>普通用户：用户所创建的用户</li><li>虚拟用户：指软件所创建的虚拟用户</li></ul></li></ul><h4 id="用户组信息"><a href="#用户组信息" class="headerlink" title="用户组信息"></a>用户组信息</h4><ul><li><p>查看用户组信息</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">cat /etc/group # 查看用户组信息</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">组名：密码：UID：组成员，key（第二个组成员）</span></span><br><span class="line">id key # 查看组信息</span><br><span class="line">groups 用户名 # 查看用户组归属</span><br><span class="line">usermod -G 组名 用户名 # 直接添加组用户从原来组删除</span><br><span class="line">usermod -a -G 组名 用户名 # 追加到新的组</span><br><span class="line">groupdel 组名 # 删除组</span><br></pre></td></tr></table></figure></li><li><p>用户组划分</p><ul><li>文件所拥有者：文件创建者</li><li>用户所在组：当linux当前用户创建了一个文件后，这个文件所属于的的组</li><li>其他组：除了文件所有者以及所在组的用户外</li></ul></li></ul><h3 id="权限管理"><a href="#权限管理" class="headerlink" title="权限管理"></a>权限管理</h3><ul><li>权限划分<ul><li>r可读：4</li><li>w可写：2</li><li>x可执行：1</li></ul></li><li>当前目录下ls</li></ul><img src="/2022/10/30/Kali%E5%9F%BA%E7%A1%80/image-20230405222850722.png" class title="image-20230405222850722"><ul><li>设置权限</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">chmod 777 文件名 # 给当前文件设置777权限</span><br><span class="line">chmod -R 777 目录名 # 给当前目录递归设置777权限 </span><br></pre></td></tr></table></figure><h3 id="软件安装管理"><a href="#软件安装管理" class="headerlink" title="软件安装管理"></a>软件安装管理</h3><ul><li>dbkg是一个debian的命令行工具，可以用来安装，删除，构建和管理debian的软件包</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">dpkg -i xxx.deb #   安装软件</span><br><span class="line">dpkg -r xxx。deb # 删除软件包</span><br><span class="line">dpkg -r -purge xxx.deb # 连同配置文件一起删除</span><br></pre></td></tr></table></figure><ul><li>gdebi是一个轻量级的deb暗转工具，他替代吊臃肿的ubuntu软件中心安装deb</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get update </span><br><span class="line">sudo apt-get install gdebi # 安装gdebi</span><br><span class="line">sudo gdebi sougoupinyin.deb</span><br></pre></td></tr></table></figure><ul><li>linux下常用压缩文件格式</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">.zip</span><br><span class="line">.gz</span><br><span class="line">.bz2</span><br><span class="line">.tar.gz</span><br><span class="line">.tar.bz2</span><br></pre></td></tr></table></figure><ul><li>tar命令</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">tar -cvfz 打包后的文件名 源文件名 # 打包文件</span><br><span class="line">tar -xzfv # 解包命令</span><br></pre></td></tr></table></figure><ul><li>打包选项<ul><li>-c 打包</li><li>-v 打包时显示出详细信息</li><li>-f 指定文件名</li><li>-z 打包时同时进行压缩</li></ul></li><li>解包选项<ul><li>-x 解包</li><li>-v 解包时显示出详细信息</li><li>-f 指定文件名</li><li>-z 解包时同时进行解压</li></ul></li></ul><h3 id="查找命令"><a href="#查找命令" class="headerlink" title="查找命令"></a>查找命令</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">find ./kali/ -print # 指定目录查找并输出</span><br><span class="line">find ./kali/ -etc ls &#123;&#125; \: #  etc 指定目录以shell脚本运行并输出</span><br></pre></td></tr></table></figure><h2 id="kali的常用命令"><a href="#kali的常用命令" class="headerlink" title="kali的常用命令"></a>kali的常用命令</h2><h3 id="1-常用命令"><a href="#1-常用命令" class="headerlink" title="1.常用命令"></a>1.常用命令</h3><blockquote><p>passwd 修改密码</p><p>passwd root 修改root用户密码</p><p>date 显示系统日期</p><p>sudo 后面加命令 就可以调用管理权限</p><p>apt-get update 更新软件列表</p><p>这个命令，会访问源列表里的每个网址，并读取软件列表，然后保存在本地电脑。我们在新立得软件包管理器里看到的软件列表，都是通过update命令更新的。</p><p>apt-get upgrade 更新软件</p><p>这个命令，会把本地已安装的软件，与刚下载的软件列表里对应软件进行对比，如果发现已安装的软件版本太低，就会提示你更新。如果你的软件都是最新版本，会提示： 升级了 0 个软件包，新安装了 0 个软件包，要卸载 0 个软件包，有 0 个软件包未被升级。</p><p>apt-get dist-upgrade 更新软件  </p><p>apt-get upgrade 与 apt-get dist-upgrade 的区别</p><p>upgrade:系统将现有的Package升级,如果有相依性的问题,而此相依性需要安装其它新的Package或影响到其它Package的相依性时,此Package就不会被升级,会保留下来.</p><p>dist-upgrade:可以聪明的解决相依性的问题,如果有相依性问题,需要安装/移除新的Package,就会试着去安装/移除它.<br>(所以通常这个会被认为是有点风险的升级)</p><p>apt-get upgrade 和 apt-get dist-upgrade 本质上是没有什么不同的。</p><p>只不过，dist-upgrade<br>会识别出当依赖关系改变的情形并作出处理，而upgrade对此情形不处理。</p><p>例如软件包 a 原先依赖 b c d，但是在源里面可能已经升级了，现在是 a 依赖 b c e。这种情况下，dist-upgrade 会删除 d 安装 e，并把 a 软件包升级，而 upgrade 会认为依赖关系改变而拒绝升级 a<br>软件包。</p><p>clear 清屏</p><p>sudo gpedit 特权调用gpedit编辑器</p><p>reboot 重启</p><p>apt-get install XXXXX 安装缺少的依赖包，（XXX）里面输入缺少依赖包的名字</p><p>apt-get autoremove –purge 软件名 删除包及其依赖的软件包+配置文件等</p><p>apt-get install +模块名 这种方法也可以安装模块,或者apt-get install python-模块名</p><p>firefox 浏览器打开</p><p>shutdown -h now 关闭系统(1)</p><p>init 0 关闭系统(2)</p><p>telinit 0 关闭系统(3)</p><p>shutdown -h hours:minutes &amp; 按预定时间关闭系统</p><p>shutdown -c 取消按预定时间关闭系统</p><p>shutdown -r now 重启(1)</p><p>reboot 重启(2)</p><p>su -l 切换登陆用户</p><p>logout 注销用户登陆</p><p>pwd 当前路径</p></blockquote><h3 id="2-文件夹或文本操作"><a href="#2-文件夹或文本操作" class="headerlink" title="2.文件夹或文本操作"></a>2.文件夹或文本操作</h3><blockquote><p>cd .. 返回上一级目录</p><p>cd ../.. 返回上级两级目录</p><p>cd - 返回上次所在的目录</p><p>cd 文件夹名  进去文件夹</p><p>cd ~ 进去当前用户主目录</p><p>pwd 显示当前工作路径</p><p>touch 文件名  常见文件</p><p>cat 文件名 读取文档内容</p><p>mkdir 文件名 创建文件夹</p><p>mkdir -p 文件夹 递归创建文件夹</p><p>cp 复制命令</p><p>cp -r moon moons 复制moon 文件夹到当前 moons 如果有里面有文件 使用-r </p><p>mv 移动命令</p><p>mv moon moon 也可以说是改名</p><p>mkdir 文件名 文件名 创建多个文件夹</p><p>ls 显示文件和文件夹名</p><p>ls -a 显示所有的文件和文件夹 包含隐藏文件</p><p>ls -l 显示文件和目录的详细资料</p><p>删除</p><p>rm -f 文件  删除文件</p><p>rm 文件夹名 删除文件夹</p><p>rm -rf  文件/文件夹  删除文件夹 及其目录下的文件</p><p>压缩和解压<br>bzip2 file1 压缩一个叫做 ‘file1’ 的文件</p><p>gunzip file1.gz 解压一个叫做 ‘file1.gz’的文件</p><p>gzip file1 压缩一个叫做 ‘file1’的文件</p><p>gzip -9 file1 最大程度压缩</p><p>rar a file1.rar test_file 创建一个叫做 ‘file1.rar’ 的包</p><p>rar x file1.rar 解压rar包</p><p>unrar x file1.rar 解压rar包</p><p>DEB 包 (Debian, Ubuntu 以及类似系统)<br>dpkg -i package.deb 安装/更新一个 deb 包</p><p>dpkg -r package_name 从系统删除一个 deb 包</p><p>dpkg -l 显示系统中所有已经安装的 deb 包</p><p>dpkg -l | grep httpd 显示所有名称中包含 “httpd” 字样的deb包</p><p>dpkg -s package_name 获得已经安装在系统中一个特殊包的信息</p><p>dpkg -L package_name 显示系统中已经安装的一个deb包所提供的文件列表</p><p>dpkg –contents package.deb 显示尚未安装的一个包所提供的文件列表</p><p>tar zcvf +压缩文件名 压缩文件</p><p>tar zxvf +解压包名 解压文件</p><p>tar -jcvf renwolesshel.tar.bz2 打包</p><p>tar jxvf renwolesshel.tar.bz2 解压</p><p>压缩成zip格式</p><p>zip -q -r renwolesshel.zip renwolesshel/<br>解压zip格式的压缩包</p><p>unzip renwolesshel.zip</p><p>which 加软件名 可以查出软件目录在哪</p><p>./+文件名或者apt-get +文件名 安装文件</p></blockquote><h3 id="3-系统信息"><a href="#3-系统信息" class="headerlink" title="3.系统信息"></a>3.系统信息</h3><blockquote><p>arch 显示机器的处理器架构(1)</p><p>uname -m 显示机器的处理器架构(2)</p><p>uname -r 显示正在使用的内核版本</p><p>cat /proc/version 显示内核的版本</p><p>cat /proc/net/dev 显示网络适配器及统计</p><p>cat /proc/cpuinfo 显示CPU info的信息</p><p>cat /proc/mounts 显示已加载的文件系统</p></blockquote><h3 id="4-文件搜索"><a href="#4-文件搜索" class="headerlink" title="4.文件搜索"></a>4.文件搜索</h3><blockquote><p>find / -name file1 从 ‘/’ 开始进入根文件系统搜索文件和目录</p><p>find / -user user1 搜索属于用户 ‘user1’ 的文件和目录<br>find /home/user1 -name *.bin 在目录 ‘/ home/user1’ 中搜索带有’.bin’ 结尾的文件<br>find /usr/bin -type f -atime +100 搜索在过去100天内未被使用过的执行文件<br>find /usr/bin -type f -mtime -10 搜索在10天内被创建或者修改过的文件</p><p>find . -name ‘<em>.php’ -mmin -30  查找最近30分钟修改的当前目录下的.php文件<br>find . -name ‘</em>.php’ -mtime 0<br>查找最近24小时修改的当前目录下的.php文件</p><p>find . -name ‘*.inc’ -mtime 0 -ls<br>查找最近24小时修改的当前目录下的.php文件，并列出详细信息</p><p>find . -type f -mtime 1</p><p>查找当前目录下，最近24-48小时修改过的常规文件。<br>find . -type f -mtime +1<br>查找当前目录下，最近1天前修改过的常规文件。</p><p>-atime 文件访问时间</p><p>-ctime 文件常见时间</p><p>-mtime文件修改时间</p><p>-mtime n : n为数字，意思为在n天之前的“一天之内”被更改过内容的文件<br>-mtime +n : 列出在n天之前（不含n天本身）被更改过内容的文件名<br>-mtime -n : 列出在n天之内（含n天本身）被更改过内容的文件名</p><p>-type f 代表一个普通格式的文件 二进制文件</p><p>-type d 代表文件夹</p><p>find / -name *.rpm -exec chmod 755 ‘{}’ ; 搜索以 ‘.rpm’ 结尾的文件并定义其权限<br>find / -xdev -name *.rpm 搜索以 ‘.rpm’ 结尾的文件，忽略光驱、捷盘等可移动设备<br>locate *.ps 寻找以 ‘.ps’ 结尾的文件 - 先运行 ‘updatedb’ 命令<br>whereis halt 显示一个二进制文件、源码或man的位置<br>which halt 显示一个二进制文件或可执行文件的完整路径</p><p>grep kali /etc/passwd grep关键词搜索</p><p>find / -name moonsec 2&gt;/dev/null   搜索某个文件/文件夹 屏蔽出错信息</p></blockquote><h3 id="6-用户和群组"><a href="#6-用户和群组" class="headerlink" title="6.用户和群组"></a>6.用户和群组</h3><blockquote><p>groupadd group_name 创建一个新用户组<br>groupdel group_name 删除一个用户组</p><p>cat /etc/group | grep group_name </p><p>usermod -a -G moontea k1把用户k1附加其他用户组</p></blockquote><ul><li>创建目录</li></ul><blockquote><p>useradd 目录</p><p>passwd 目录</p></blockquote><ul><li>创建用户以及分配目录</li></ul><blockquote><p> useradd -r -m -s /bin/bash moonsec</p></blockquote><p>参数的意思：<br>-r 建立系统账号<br>-m 自动建立用户的登入目录<br>-s /bin/bash 指定用户登入后所使用的shell</p><ul><li>切换用户</li></ul><blockquote><p>su - root 切换到root用户</p><p>su 用户名 切换到普通用户</p></blockquote><h3 id="7-系统管理top-查看正在指向的程序信息"><a href="#7-系统管理top-查看正在指向的程序信息" class="headerlink" title="7.系统管理top # 查看正在指向的程序信息"></a>7.系统管理top # 查看正在指向的程序信息</h3><blockquote><p>top # 查看正在指向的程序信息</p><p>ps -ef 查看所有进程信息</p><p>ps -ef | grep tomcat 查找指定进程</p><p>kill -9 id 强制杀死进程</p><p>env 当前的变量</p><p>查看系统变量</p><p>echo $PATH</p><p>hostname 查看主机名</p><p>history 查看历史命令</p></blockquote><h3 id="8-查看磁盘信息"><a href="#8-查看磁盘信息" class="headerlink" title="8.查看磁盘信息"></a>8.查看磁盘信息</h3><blockquote><p>df   默认不带单位，挂载点、总容量、已用、可用</p><p>df  -h   友好显示（带单位），很多命令的友好显示都是-h</p></blockquote><h3 id="9-查看内存信息"><a href="#9-查看内存信息" class="headerlink" title="9.查看内存信息"></a>9.查看内存信息</h3><blockquote><p>free   默认以KB为单位，总容量、已用、可用、缓存大小</p><p>free  -m   默认以MB为单位</p><p>free  -h   上面2种都不带单位、只显示数值，这种是友好显示的，会带单位G、M等</p></blockquote><h3 id="10-查看环境变量"><a href="#10-查看环境变量" class="headerlink" title="10.查看环境变量"></a>10.查看环境变量</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">echo  $JAVA_HOME</span><br><span class="line">echo $PATH | grep jdk</span><br></pre></td></tr></table></figure><h3 id="11-linux常用网络命令"><a href="#11-linux常用网络命令" class="headerlink" title="11.linux常用网络命令"></a><strong>11.linux常用网络命令</strong></h3><p>网络和监控命令类似于这些： hostname, ping, ifconfig, iwconfig, netstat, nslookup, traceroute, finger, telnet, ethtool 用于查看 linux 服务器 ip 地址，管理服务器网络配置，通过 telnet 和 ethernet 建立与 linux 之间的网络链接，查看 linux 的服务器信息等。下面让我们看看在 Linux 下的网络和监控命令的使用。</p><blockquote><p>hostname 查看本机名</p><p>ping  一般用于测试网络是否通 内网icmp</p><p>ping <a href="http://www.baidu.com/">www.baidu.com</a> -c 3 执行3次</p><p>ifconfig 网卡信息</p><p>iwconfig 用于配置或获取无线网络设备信息</p></blockquote><ul><li>netstat </li></ul><blockquote><p>-a (all)显示所有选项，默认不显示LISTEN相关<br>-t (tcp)仅显示tcp相关选项<br>-u (udp)仅显示udp相关选项<br>-n 拒绝显示别名，能显示数字的全部转化成数字。<br>-l 仅列出有在 Listen (监听) 的服務状态</p><p>-p 显示建立相关链接的程序名<br>-r 显示路由信息，路由表<br>-e 显示扩展信息，例如uid等<br>-s 按各个协议进行统计<br>-c 每隔一个固定时间，执行该netstat命令。</p></blockquote><p>提示：LISTEN和LISTENING的状态只有用-a或者-l才能看到</p><p>常用命令</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">netstat -ano</span><br><span class="line"></span><br><span class="line">-an 查看当前所有已连接端口</span><br><span class="line">-nlpt 查看当前所有tcp端口</span><br><span class="line">-nlpu 查看当前所有udp端口</span><br><span class="line">-nlpt | grep 80 查看所有80端口使用情况</span><br><span class="line"></span><br><span class="line">netstat -lntup 查看所有的tcp和upd端口</span><br></pre></td></tr></table></figure><ul><li>nslookup 查询其他记录</li></ul><blockquote><p>直接查询返回的是A记录，我们可以指定参数，查询其他记录，比如AAAA、MX等。</p><p>nslookup -qt=type domain [dns-server]其中，type可以是以下这些类型：</p></blockquote><p>A 地址记录<br>AAAA 地址记录<br>AFSDB Andrew文件系统数据库服务器记录<br>ATMA ATM地址记录<br>CNAME 别名记录<br>HINFO 硬件配置记录，包括CPU、操作系统信息<br>ISDN 域名对应的ISDN号码<br>MB 存放指定邮箱的服务器<br>MG 邮件组记录<br>MINFO 邮件组和邮箱的信息记录<br>MR 改名的邮箱记录<br>MX 邮件服务器记录<br>NS 名字服务器记录<br>PTR 反向记录<br>RP 负责人记录<br>RT 路由穿透记录<br>SRV TCP服务器信息记录<br>TXT 域名对应的文本信息<br>X25 域名对应的X.25地址记录</p><ul><li><p>http协议</p></li><li><p>curl</p></li><li><p>wget</p></li><li><p>traceroute</p></li></ul><p>traceroute是用来检测发出数据包的主机到目标主机之间所经过的网关数量的工具。traceroute的原理是试图以最小的TTL（存活时间）发出探测包来跟踪数据包到达目标主机所经过的网关，然后监听一个来自网关ICMP的应答。发送数据包的大小默认为38个字节。</p><blockquote><p>-d 使用Socket层级的排错功能。<br>-f 设置第一个检测数据包的存活数值TTL的大小。<br>-F 设置勿离断位。<br>-g 设置来源路由网关，最多可设置8个。<br>-i 使用指定的网络界面送出数据包。<br>-I 使用ICMP回应取代UDP资料信息。<br>-m 设置检测数据包的最大存活数值TTL的大小。<br>-n 直接使用IP地址而非主机名称。<br>-p 设置UDP传输协议的通信端口。<br>-r 忽略普通的Routing Table，直接将数据包送到远端主机上。<br>-s 设置本地主机送出数据包的IP地址。<br>-t 设置检测数据包的TOS数值。<br>-v 详细显示指令的执行过程。<br>-w 设置等待远端主机回报的时间。</p><p>-x 开启或关闭数据包的正确性检验。</p></blockquote><ul><li>telnet</li></ul><p>Linux telnet命令用于远端登入。</p><p>执行telnet指令开启终端机阶段作业，并登入远端主机。</p><p>现在多数用于检测某个端口是否开放</p><h3 id="12-防火墙iptables"><a href="#12-防火墙iptables" class="headerlink" title="12.防火墙iptables"></a>12.防火墙iptables</h3><p>查看防火墙规则</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">iptalbes -L</span><br></pre></td></tr></table></figure><p>清除规则</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">iptables -F</span><br></pre></td></tr></table></figure><p>关闭防火墙 </p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">/etc/init.d/iptables stop</span><br><span class="line"></span><br><span class="line">service iptables stop</span><br></pre></td></tr></table></figure><blockquote><p>安装：apt-get install ufw</p><p>关闭：ufw disable # To disable the firewall</p><p>开启：ufw enable # To enable the firewall</p></blockquote>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;kali的安装与介绍&quot;&gt;&lt;a href=&quot;#kali的安装与介绍&quot; class=&quot;headerlink&quot; title=&quot;kali的安装与介绍&quot;&gt;&lt;/a&gt;kali的安装与介绍&lt;/h2&gt;&lt;h3 id=&quot;简介&quot;&gt;&lt;a href=&quot;#简介&quot; class=&quot;headerli</summary>
      
    
    
    
    <category term="安全篇" scheme="http://bkystop.github.io/categories/%E5%AE%89%E5%85%A8%E7%AF%87/"/>
    
    
    <category term="kali" scheme="http://bkystop.github.io/tags/kali/"/>
    
    <category term="Linux" scheme="http://bkystop.github.io/tags/Linux/"/>
    
  </entry>
  
  <entry>
    <title>渗透测试基础知识</title>
    <link href="http://bkystop.github.io/2022/10/08/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/"/>
    <id>http://bkystop.github.io/2022/10/08/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/</id>
    <published>2022-10-08T14:21:33.000Z</published>
    <updated>2023-04-09T13:30:24.580Z</updated>
    
    <content type="html"><![CDATA[<h1 id="渗透测试"><a href="#渗透测试" class="headerlink" title="渗透测试"></a>渗透测试</h1><h2 id="基础"><a href="#基础" class="headerlink" title="基础"></a>基础</h2><h3 id="基础名词解释"><a href="#基础名词解释" class="headerlink" title="基础名词解释"></a>基础名词解释</h3><ul><li>肉鸡：傀儡机（可以随意被我们控制），被远程控制的机器。</li><li>木马：表面伪装成了正常程序，运行后，可以获取系统控制权限。（灰鸽子，黑洞）<ul><li>网页木马：表面伪装成普通的网页文件，或者将自己的代码直接插入到正常的网页中去，网页被访问时，浏览器就会将木马自动下载。</li><li>一句话木马：一端很小的网页代码后门，对网站进行控制。一句话木马主要配合菜刀试用</li></ul></li><li>菜刀：文件管理，虚拟终端，数据库管理 </li><li>挂马：将木马放入网站文件，使浏览者中马。</li><li>大马：功能强大的网页后门，能执行命令，操作文件，连接数据库。</li><li>小马：功能比较单一的网页。上传保存文件，用小马上传大马。</li><li>黑页：入侵者对网页进行改写，公布自己的存在。</li><li>后门：成功攻击后，攻击者系统植入特定程序或修改某些配置，方便下次控制。</li><li>拖库：从数据库中导出数据。</li><li>社工库：黑客与大数据结合的产物，黑客将泄露的用户信息进行整合，集中归档。</li><li>撞库：黑客通过手机互联网已经泄露的用户和密码信息，生成对应字典表，尝试批量登录其他网站，得到一系列账号密码。 </li><li>提权：提升自己在服务器中的权限。</li><li>网络钓鱼：利用欺骗性的电子邮件或者web站点来进行诈骗，受骗者就会泄露自己的个人信息，账号密码。</li><li>社会工程学攻击：一种通过对被攻击者心理弱点，好奇心，信任，贪婪等心理陷阱所采取的诈骗。将人性弱点与黑客攻击进行结合。</li><li>rootkit：攻击者隐藏自己行踪，保留root权限的工具。达到长久控制的目的。</li><li>IPS$：共享“命令管道”的资源。</li><li>弱口令：强度不够，容易被猜解的密码。</li><li>shell：命令行运行环境。</li><li>webshell：以asp，php，jsp或cgi等网页文件形式存在的一个命令行运行环境，也可以称作为网页后门。</li><li>溢出：缓冲区溢出。程序对接受的输入数据没有执行有效的检测而导致错误，造成程序崩溃或者执行攻击者的命令。</li><li>注入：用户可以提交一段数据库查询代码，根据程序返回的结果，可以得知一些想要的数据。 </li><li>注入点：可以实行注入的地方，通常是一个访问数据库的连接。注入点运行用户的权限不同，获得的权限也不同。</li><li>旁站入侵：同一个服务器有多个站点，通过其中一个站点访问其他站点。</li><li>C段入侵：从一个网段拿下一个服务器，通过这台服务器嗅探目标服务器上传输的数据。</li><li>内网：局域网。</li><li>外网：互联网。</li><li>端口：一种数据传输的通道。</li><li>免杀：通过各种方式（加壳，加密，修改特征码，加花指令）绕过杀毒软件拦截<ul><li>加壳：利用特殊的算法，将exe可执行程序或dll动态连接数据库文件的编码进行改变（压缩，加密等），达到缩小文件体积或者加密程序编码，甚至躲过杀毒软件查杀。</li><li>花指令：几句汇编指令，让汇编语句进行一些跳转，使杀毒软件不能正常的判断病毒文件的构造。</li></ul></li><li>TCP/IP：网络通信协议，规范了网络上所有的通信设备。（主机之间数据来往的格式和传送方式，数据打包和寻址的标准方法）</li><li>路由器：路由选择，将ip数据包正确的送到目的地。</li><li>蜜罐：情报收集系统。故意让人攻击，引诱黑客来攻击，了解其攻击方法，所用工具，掌握其社交网络。</li><li>DOS：拒绝服务攻击，目的是是计算机或网络无法正常服务。</li><li>cc攻击：攻击者借助代理服务器生成指向受害主机的合法请求，实现DDOS和伪装。</li><li>脚本注入攻击：把sql命令插入到web表单的输入域或者页面请求的查询字符串，欺骗服务器。</li><li>加密技术：利用技术手段将数据变为乱码传送（加密），到达目的地后再用技术手段还原（解密）。</li><li>欺骗攻击：IP欺骗,ARP欺骗,DNS欺骗,WEB欺骗，电子邮件欺骗，路由欺骗（通过指定路由器，以假冒身份与其他主机进行合法通信或发送假报文，是攻击主机出现错误动作），地址欺骗。</li><li>嗅探：嗅探计算机网络的共享通讯隧道，共享以为着计算机能够接受到发送给其他计算机的信息，捕获在网络中传输的数据信息就称为嗅探。</li><li>跳板：一个具有辅助作用的及其，利用这个主机作为一个间接工具，控制其他主机，一般和肉鸡连用。</li><li>RARP反向地址解析协议：将硬件地址映射到网络地址</li><li>UDP用户数据报协议：无连接的传输层协议，提供面向事务的简单不可靠信息传输服务。</li><li>TCP协议：面向连接的，可靠的，基于字节流的传输层通信协议。</li><li>FTP文件传输协议：用于文件的增删改查。</li><li>SMTP简单邮件传输协议：传输电子邮件</li><li>TELNET终端协议：允许用户以终端方式远程访问主机。</li><li>HTTP超文本传输协议：简单的请求-响应协议，通常允许在TCP上。</li><li>HTTPS安全超文本传输协议：通过在安全套接字层（SSL）协议上允许http来将安全添加到万维网中。</li><li>TFTP：简单文件传输协议。</li><li>ICMP（inter控制消息协议）：用于在ip，主机，路由器之间传输控制消息。（ping）</li><li>DNS协议：将域名转换成IP地址的一种协议，也可以将ip地址转换成域名的一种协议。（nslookup）</li><li>EXP/Exploit：漏洞利用代码，允许之后对目标进行攻击。</li><li>POC/proof of Concept：漏洞验证代码，检测目标是否存在对应漏洞。</li><li>Payload：成功允许EXP后，真正在目标系统执行的命令或代码。</li><li>Shellcode：建立正向/反向shell而得名。</li><li>Lan：局域网</li><li>Peoxy：代理。一类程序或系统，接受来自客户机的浏览，并代表客户与服务器交互。代理能用于过滤应用级别的指定类型的浏览或缓存信息以提高性能。（过滤防火墙）</li><li>CMS：内容管理系统。</li><li>cve：漏洞披露。</li><li>CNVD：国家信息安全漏洞共享平台。</li><li>0day：负责应用程序的程序员或供应商所未知的软件缺陷。漏洞未知，没有可用的补丁程序。</li><li>1day：刚发布，但已被官方发布补丁网络但还大量存在。</li><li>Nday：已经被公布的0day。</li><li>APT攻击：高级可持续攻击。</li><li>渗透测试：黑盒测试，白盒测试，灰盒测试。</li></ul><h3 id="windows常用cmd命令"><a href="#windows常用cmd命令" class="headerlink" title="windows常用cmd命令"></a>windows常用cmd命令</h3><ul><li>echo </li><li>dir</li><li>d: 和 cd</li><li>tree</li><li>md 创建目录 </li><li>rd 删除目录</li><li>ipconfig</li><li>cls</li><li>copy 复制、拼接文件</li><li>move移动文件</li><li>ren重命名</li><li>del删除文件</li><li>ping</li><li>type显示文本文件的内容</li><li>reg</li></ul><h3 id="linux目录"><a href="#linux目录" class="headerlink" title="linux目录"></a>linux目录</h3><ul><li>/bin 二进制可执行命令</li><li>/etc 系统管理和配置文件</li><li>/etc/rc.d 启动的配置文件和脚本</li><li>/home 用户主目录的基点/lib 标准程序设计库，又叫动态链接共享库</li><li>/sbin 超级管理命令，这里存放的是系统管理员使用的管理程序</li><li>/tmp 公共的临时文件存储点</li><li>/root 系统管理员的主目录</li><li>/mnt 系统提供这个目录是让用户临时挂载其他的文件系统</li><li>/lost+found这个目录平时是空的，系统非正常关机而留下“无家可归”的文件就在这里</li><li>/proc 虚拟的目录，是系统内存的映射。可直接访问这个目录来获取系统信息。</li><li>/var 某些大文件的溢出区，比方说各种服务的日志文件</li><li>/usr 最庞大的目录，要用到的应用程序和文件几乎都在这个目录</li><li>/usr/bin 众多的应用程序/usr/sbin 超级用户的一些管理程序</li></ul><h3 id="网络基础"><a href="#网络基础" class="headerlink" title="网络基础"></a>网络基础</h3><ul><li><p>url</p><p>协议://域名:端口/虚拟目录/文件名?参数#锚点</p></li><li><p>http协议</p><p>HTTP协议是Hyper Text Transfer Protocol（超文本传输协议）的缩写,是用于从万维网（WWW:World Wide Web ）服务器传输超文本到本地浏览器的传送协议。</p></li><li><p>http协议请求方法</p><p>GET：向指定资源发出显示请求</p><p>HEAD：和GET一样，但是不传回所有资源内容</p><p>POST：向指定资源提交数据，数据被包含在请求中</p><p>PUT：向指定位置上传</p><p>DELETE：删除所标识的资源</p><p>OPTIONS：这个方法可使服务器传回该资源所支持的所有</p><p>HTTP请求方法。用’*’来代替资源名称，向Web服务器发送OPTIONS请求，可以测试服务器功能是否正常运作</p></li><li><p>请求信息</p><p>请求信息发出的请求信息（message request）包括</p><p>请求行（例如GET /images/logo.gif HTTP/1.1，表示从/images目录下请求logo.gif这个文件）</p><p>请求头（例如Accept-Language: en）</p><p>空行</p><p>其他消息体</p></li><li><p>合同谈判协议状态码</p><p>1xx：指示信息–表示请求已接收，继续处理</p><p>2xx：成功–表示请求已被成功接收、理解、接受</p><p>3xx：重定向–要完成请求必须进行更进一步的操作</p><p>4xx：客户端错误–请求有语法错误或请求无法实现</p><p>5xx：服务器端错误–服务器未能实现合法的请求</p><p>200 OK //客户端请求成功</p><p>400 Bad Request //客户端请求有语法错误，不能被服务器所理解 </p><p>401 Unauthorized //请求未经授权，这个状态代码必须和WWW-Authenticate报头域一起使用 </p><p>403 Forbidden //服务器收到请求，但是拒绝提供服务</p><p> 404 Not Found //请求资源不存在，eg：输入了错误的URL </p><p>500 Internal Server Error //服务器发生不可预期的错误</p><p>503 Server Unavailable //服务器当前不能处理客户端的请求，一段时间后可能恢复正常</p></li></ul><h2 id="渗透测试流程"><a href="#渗透测试流程" class="headerlink" title="渗透测试流程"></a>渗透测试流程</h2><h4 id="信息搜集"><a href="#信息搜集" class="headerlink" title="信息搜集"></a>信息搜集</h4><ol><li>域名信息whois（社工，弱口令）</li><li>ip，端口（nmap，msf）</li><li>找后台（弱口令）</li><li>子域名（旁站）</li><li>web服务器指纹（寻找相应漏洞）</li><li>信息泄露（phpinfo，物理路径 ）</li></ol><h4 id="漏洞挖掘"><a href="#漏洞挖掘" class="headerlink" title="漏洞挖掘"></a>漏洞挖掘</h4><p>Web应用层面</p><ul><li>文件包含</li><li>文件上传</li><li>文件下载</li><li>sql下载</li><li>xss</li><li>csrf</li><li>越权</li><li>弱口令</li><li>逻辑漏洞</li></ul><p>服务器</p><ul><li>弱口令</li><li>shift后门</li><li>msf </li></ul><h4 id="权限提升"><a href="#权限提升" class="headerlink" title="权限提升"></a>权限提升</h4><h4 id="权限维持"><a href="#权限维持" class="headerlink" title="权限维持"></a>权限维持</h4><ul><li>隐蔽杀软，周期查看，免杀，多种留后门</li></ul><h4 id="日志清扫"><a href="#日志清扫" class="headerlink" title="日志清扫"></a>日志清扫</h4><ul><li>严谨，伪装隐藏，避免机警</li></ul><h3 id="常见端口"><a href="#常见端口" class="headerlink" title="常见端口"></a>常见端口</h3><ul><li>21 ftp</li><li>23 telnet</li><li>80 web</li><li>445 SMB</li><li>1433 MSSQL</li><li>3306 MYSQL</li><li>3389 远程桌面</li><li>8080 tomcat</li><li>8888 宝塔</li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;渗透测试&quot;&gt;&lt;a href=&quot;#渗透测试&quot; class=&quot;headerlink&quot; title=&quot;渗透测试&quot;&gt;&lt;/a&gt;渗透测试&lt;/h1&gt;&lt;h2 id=&quot;基础&quot;&gt;&lt;a href=&quot;#基础&quot; class=&quot;headerlink&quot; title=&quot;基础&quot;&gt;&lt;/a&gt;基础&lt;/h</summary>
      
    
    
    
    <category term="安全篇" scheme="http://bkystop.github.io/categories/%E5%AE%89%E5%85%A8%E7%AF%87/"/>
    
    
    <category term="Windows" scheme="http://bkystop.github.io/tags/Windows/"/>
    
  </entry>
  
  <entry>
    <title>基于Django的管理系统</title>
    <link href="http://bkystop.github.io/2022/09/19/%E5%9F%BA%E4%BA%8EDjango%E7%9A%84%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F/"/>
    <id>http://bkystop.github.io/2022/09/19/%E5%9F%BA%E4%BA%8EDjango%E7%9A%84%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F/</id>
    <published>2022-09-19T12:35:02.000Z</published>
    <updated>2023-04-09T13:24:19.842Z</updated>
    
    <content type="html"><![CDATA[<h2 id="案例：员工管理系统"><a href="#案例：员工管理系统" class="headerlink" title="案例：员工管理系统"></a>案例：员工管理系统</h2><h3 id="创建项目"><a href="#创建项目" class="headerlink" title="创建项目"></a>创建项目</h3><img src="/2022/09/19/%E5%9F%BA%E4%BA%8EDjango%E7%9A%84%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F/image-20230409203628386.png" class><ul><li>删除pycharm自动增加的</li></ul><img src="/2022/09/19/%E5%9F%BA%E4%BA%8EDjango%E7%9A%84%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F/image-20230409203642826.png" class><ul><li>删除templates文件</li></ul><img src="/2022/09/19/%E5%9F%BA%E4%BA%8EDjango%E7%9A%84%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F/image-20230409203653774.png" class><h3 id="创建app"><a href="#创建app" class="headerlink" title="创建app"></a>创建app</h3><p>两种方式创建app，可以在pycharm的终端输入，也可以先pycharm帮助执行一个manage.py</p><ol><li>终端输入<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python manage.py startapp app01</span><br></pre></td></tr></table></figure></li><li>使用pycharm</li></ol><img src="/2022/09/19/%E5%9F%BA%E4%BA%8EDjango%E7%9A%84%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F/image-20230409203708667.png" class><ul><li>相当于pycharm帮助执行了一个manage.py</li></ul><img src="/2022/09/19/%E5%9F%BA%E4%BA%8EDjango%E7%9A%84%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F/image-20230409203742679.png" class><ul><li>直接输入<code>startapp &lt;文件名&gt;</code>即可创建</li></ul><img src="/2022/09/19/%E5%9F%BA%E4%BA%8EDjango%E7%9A%84%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F/image-20230409203800524.png" class><h3 id="注册app"><a href="#注册app" class="headerlink" title="注册app"></a>注册app</h3><ul><li>在<code>settings.py</code>中注册app</li></ul><img src="/2022/09/19/%E5%9F%BA%E4%BA%8EDjango%E7%9A%84%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F/image-20230409203815085.png" class><h3 id="设计表结构"><a href="#设计表结构" class="headerlink" title="设计表结构"></a>设计表结构</h3><ul><li>新建用户表</li><li>新建部门表</li><li>将用户表和部门表进行关联<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> django.db <span class="keyword">import</span> models</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Department</span>(models.Model):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;部门表&quot;&quot;&quot;</span></span><br><span class="line">    <span class="comment"># id = models.BigAutoField(verbose_name=&quot;ID&quot;, primary_key=True)</span></span><br><span class="line">    title = models.CharField(verbose_name=<span class="string">&#x27;标题&#x27;</span>, max_length=<span class="number">32</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">UserInfo</span>(models.Model):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;员工表&quot;&quot;&quot;</span></span><br><span class="line">    name = models.CharField(verbose_name=<span class="string">&quot;姓名&quot;</span>, max_length=<span class="number">16</span>)</span><br><span class="line">    password = models.CharField(verbose_name=<span class="string">&quot;密码&quot;</span>, max_length=<span class="number">64</span>)</span><br><span class="line">    age = models.IntegerField(verbose_name=<span class="string">&quot;年龄&quot;</span>)</span><br><span class="line">    account = models.DecimalField(verbose_name=<span class="string">&quot;账户余额&quot;</span>, max_digits=<span class="number">10</span>, decimal_places=<span class="number">2</span>, default=<span class="number">0</span>)</span><br><span class="line">    create_time = models.DateTimeField(verbose_name=<span class="string">&quot;入职时间&quot;</span>)</span><br><span class="line">    <span class="comment"># 无约束</span></span><br><span class="line">    <span class="comment"># depart_id = models.BigIntegerField(verbose_name=&quot;部门ID&quot;)</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># 部门删除，部门id列置空</span></span><br><span class="line">    <span class="comment"># depart_id = models.ForeignKey(to=&quot;Department&quot;, to_fields=&quot;id&quot;,null=True, blank=True, on_delete=models.SET_NULL)</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># （对部门id进行约束） to 与那张表关联 to_fields 表中哪一列有关联, 级联删除此行</span></span><br><span class="line">    depart_id = models.ForeignKey(to=<span class="string">&quot;Department&quot;</span>, to_fields=<span class="string">&quot;id&quot;</span>, on_delete=models.CASCADE)</span><br><span class="line">    gender_choices = (</span><br><span class="line">        (<span class="number">1</span>, <span class="string">&quot;男&quot;</span>),</span><br><span class="line">        (<span class="number">2</span>, <span class="string">&quot;女&quot;</span>)</span><br><span class="line">    )</span><br><span class="line">    gender = models.SmallIntegerField(verbose_name=<span class="string">&quot;性别&quot;</span>,choices=gender_choices)</span><br></pre></td></tr></table></figure></li></ul><h3 id="在MySQL中生成表"><a href="#在MySQL中生成表" class="headerlink" title="在MySQL中生成表"></a>在MySQL中生成表</h3><ul><li>工具连接MySQL生成数据库<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> database djtest; </span><br></pre></td></tr></table></figure></li><li>修改<code>settings.py</code>数据库配置</li></ul><img src="/2022/09/19/%E5%9F%BA%E4%BA%8EDjango%E7%9A%84%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F/image-20230409203952477.png" class><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">DATABASES = &#123;</span><br><span class="line">    &#x27;default&#x27;: &#123;</span><br><span class="line">        &#x27;ENGINE&#x27;: &#x27;django.db.backends.mysql&#x27;,</span><br><span class="line">        &#x27;NAME&#x27;: &#x27;djtest&#x27;,</span><br><span class="line">        &#x27;USER&#x27;: &#x27;root&#x27;,</span><br><span class="line">        &#x27;PASSWORD&#x27;: &#x27;root&#x27;,</span><br><span class="line">        &#x27;HOST&#x27;: &#x27;127.0.0.1&#x27;,</span><br><span class="line">        &#x27;PORT&#x27;: 3306</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li><p>基于django命令生成数据库的表</p><ul><li>命令行执行</li></ul><img src="/2022/09/19/%E5%9F%BA%E4%BA%8EDjango%E7%9A%84%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F/image-20230409204018972.png" class></li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">python manage.py makemigrations</span><br><span class="line">python manage.py migrate</span><br></pre></td></tr></table></figure><p>​            manage.py中执行</p><img src="/2022/09/19/%E5%9F%BA%E4%BA%8EDjango%E7%9A%84%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F/image-20230409204104842.png" class><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">makemigrations</span><br><span class="line">migrate</span><br></pre></td></tr></table></figure><ul><li>进入数据库查看</li></ul><img src="/2022/09/19/%E5%9F%BA%E4%BA%8EDjango%E7%9A%84%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F/image-20230409204139303.png" class><h3 id="静态文件管理"><a href="#静态文件管理" class="headerlink" title="静态文件管理"></a>静态文件管理</h3><ul><li>放入文件</li></ul><img src="/2022/09/19/%E5%9F%BA%E4%BA%8EDjango%E7%9A%84%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F/image-20230409204156982.png" class><h3 id="列表页面布局"><a href="#列表页面布局" class="headerlink" title="列表页面布局"></a>列表页面布局</h3><ul><li><p><code>urls.py</code></p> <img src="/2022/09/19/%E5%9F%BA%E4%BA%8EDjango%E7%9A%84%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F/image-20230409204235873.png" class></li><li><p>```views.py``</p></li></ul><img src="/2022/09/19/%E5%9F%BA%E4%BA%8EDjango%E7%9A%84%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F/image-20230409204323421.png" class><ul><li><code>depart_list.html</code></li></ul><blockquote><p>略</p></blockquote><ul><li>页面效果</li></ul><img src="/2022/09/19/%E5%9F%BA%E4%BA%8EDjango%E7%9A%84%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F/image-20230409204425456.png" class><h4 id="从数据库获取数据"><a href="#从数据库获取数据" class="headerlink" title="从数据库获取数据"></a>从数据库获取数据</h4><img src="/2022/09/19/%E5%9F%BA%E4%BA%8EDjango%E7%9A%84%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F/image-20230409204452558.png" class><ul><li>如下（以下两个部门为数据库预先输入的）</li></ul><img src="/2022/09/19/%E5%9F%BA%E4%BA%8EDjango%E7%9A%84%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F/image-20230409204529416.png" class><h3 id="增删改页面布局设计"><a href="#增删改页面布局设计" class="headerlink" title="增删改页面布局设计"></a>增删改页面布局设计</h3><ul><li>修改<code>depart_list.html</code></li></ul><img src="/2022/09/19/%E5%9F%BA%E4%BA%8EDjango%E7%9A%84%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F/image-20230409204553542.png" class><ul><li>在<code>urls.py</code>中添加path和```views.py``中写入</li></ul><img src="/2022/09/19/%E5%9F%BA%E4%BA%8EDjango%E7%9A%84%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F/image-20230409204610368.png" class><ul><li><code>depart_add.html</code></li></ul><blockquote><p>略</p></blockquote><h4 id="添加部门"><a href="#添加部门" class="headerlink" title="添加部门"></a>添加部门</h4><img src="/2022/09/19/%E5%9F%BA%E4%BA%8EDjango%E7%9A%84%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F/image-20230409204641684.png" class><h4 id="删除部门"><a href="#删除部门" class="headerlink" title="删除部门"></a>删除部门</h4><img src="/2022/09/19/%E5%9F%BA%E4%BA%8EDjango%E7%9A%84%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F/image-20230409204657683.png" class><ul><li>列表页面删除按钮添加链接</li></ul><img src="/2022/09/19/%E5%9F%BA%E4%BA%8EDjango%E7%9A%84%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F/image-20230409204713096.png" class><h4 id="修改部门"><a href="#修改部门" class="headerlink" title="修改部门"></a>修改部门</h4><img src="/2022/09/19/%E5%9F%BA%E4%BA%8EDjango%E7%9A%84%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F/image-20230409204735174.png" class><img src="/2022/09/19/%E5%9F%BA%E4%BA%8EDjango%E7%9A%84%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F/image-20230409204807904.png" class><h3 id="模板的继承"><a href="#模板的继承" class="headerlink" title="模板的继承"></a>模板的继承</h3><ul><li>当我们每个页面都需要保留导航栏的时候，我们对每个HTML都写了一个导航栏，这样有些麻烦，修改时文件过多不易修改，因此我们可以选择模板。</li><li>模板的定义</li><li>将我们的插件写在模板中</li></ul><p><code>layout.html</code></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">href</span>=<span class="string">&quot;&#123;% static &#x27;plugins/bootstrap3/css/bootstrap.min.css&#x27; %&#125;&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span>标题<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">    &#123;% block content %&#125;&#123;% endblock %&#125;</span><br><span class="line">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span>结尾<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;&#123;% static &#x27;js/jquery-3.6.1.min.js&#x27; %&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;&#123;% static &#x27;plugins/bootstrap3/js/bootstrap.min.js&#x27; %&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li>继承模板</li></ul><blockquote><p>为了避免一个页面加载不必要的插件，可以多写几个模板，在需要的位置进行填充</p></blockquote><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;% extends &#x27;layoyt.html&#x27; %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% block content %&#125;</span><br><span class="line">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span>首页<span class="tag">&lt;<span class="name">h1</span>&gt;</span></span><br><span class="line">&#123;% endblock %&#125;</span><br></pre></td></tr></table></figure><h3 id="模板的继承-1"><a href="#模板的继承-1" class="headerlink" title="模板的继承"></a>模板的继承</h3><ul><li><p>当我们每个页面都需要保留导航栏的时候，我们对每个HTML都写了一个导航栏，这样白那些麻烦，修改时文件过多不易修改，因此我们可以选择模板。</p></li><li><p>模板的定义</p></li><li><p>将我们的插件写在模板中</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">href</span>=<span class="string">&quot;&#123;% static &#x27;plugins/bootstrap3/css/bootstrap.min.css&#x27; %&#125;&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span>标题<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">    &#123;% block content %&#125;&#123;% endblock %&#125;</span><br><span class="line">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span>结尾<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;&#123;% static &#x27;js/jquery-3.6.1.min.js&#x27; %&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;&#123;% static &#x27;plugins/bootstrap3/js/bootstrap.min.js&#x27; %&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>继承模板</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;% extends &#x27;layoyt.html&#x27; %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% block content %&#125;</span><br><span class="line">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span>首页<span class="tag">&lt;<span class="name">h1</span>&gt;</span></span><br><span class="line">&#123;% endblock %&#125;</span><br></pre></td></tr></table></figure></li><li><p>为了避免一个页面加载不必要的插件，可以多写几个模板，在需要的位置进行填充</p></li></ul><h3 id="案例：员工管理系统（部门管理）优化"><a href="#案例：员工管理系统（部门管理）优化" class="headerlink" title="案例：员工管理系统（部门管理）优化"></a>案例：员工管理系统（部门管理）优化</h3><p>将导航部分写入模板，列表，添加，编辑页面进行集成</p><ul><li><p><code>layoyt.html</code></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line">&#123;% load static %&#125;</span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">href</span>=<span class="string">&quot;&#123;% static &#x27;plugins/bootstrap3/css/bootstrap.min.css&#x27; %&#125;&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.navbar</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">border-radius</span>: <span class="number">0px</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">    </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">nav</span> <span class="attr">class</span>=<span class="string">&quot;navbar navbar-default&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;container-fluid&quot;</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- Brand and toggle get grouped for better mobile display --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;navbar-header&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">class</span>=<span class="string">&quot;navbar-toggle collapsed&quot;</span> <span class="attr">data-toggle</span>=<span class="string">&quot;collapse&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">data-target</span>=<span class="string">&quot;#bs-example-navbar-collapse-1&quot;</span> <span class="attr">aria-expanded</span>=<span class="string">&quot;false&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;sr-only&quot;</span>&gt;</span>Toggle navigation<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;icon-bar&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;icon-bar&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;icon-bar&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">&quot;navbar-brand&quot;</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>用户管理系统<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;collapse navbar-collapse&quot;</span> <span class="attr">id</span>=<span class="string">&quot;bs-example-navbar-collapse-1&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">ul</span> <span class="attr">class</span>=<span class="string">&quot;nav navbar-nav&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;/depart/list/&quot;</span>&gt;</span>部门管理<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>用户管理<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"></span><br><span class="line">            <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">ul</span> <span class="attr">class</span>=<span class="string">&quot;nav navbar-nav navbar-right&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>登录<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"></span><br><span class="line">                <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">&quot;dropdown&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span> <span class="attr">class</span>=<span class="string">&quot;dropdown-toggle&quot;</span> <span class="attr">data-toggle</span>=<span class="string">&quot;dropdown&quot;</span> <span class="attr">role</span>=<span class="string">&quot;button&quot;</span> <span class="attr">aria-haspopup</span>=<span class="string">&quot;true&quot;</span></span></span><br><span class="line"><span class="tag">                       <span class="attr">aria-expanded</span>=<span class="string">&quot;false&quot;</span>&gt;</span>我的 <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;caret&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">ul</span> <span class="attr">class</span>=<span class="string">&quot;dropdown-menu&quot;</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>个人资料<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>我的信息<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">li</span> <span class="attr">role</span>=<span class="string">&quot;separator&quot;</span> <span class="attr">class</span>=<span class="string">&quot;divider&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>注销<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">nav</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    &#123;% block content %&#125;&#123;% endblock %&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;&#123;% static &#x27;js/jquery-3.6.1.min.js&#x27; %&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;&#123;% static &#x27;plugins/bootstrap3/js/bootstrap.min.js&#x27; %&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p><code>depart_list.html</code></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line">&#123;% extends &#x27;layoyt.html&#x27; %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% block content %&#125;</span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;container&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;margin-bottom: 10px&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">&quot;btn btn-success&quot;</span> <span class="attr">href</span>=<span class="string">&quot;/depart/add/&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;glyphicon glyphicon-plus-sign&quot;</span> <span class="attr">aria-hidden</span>=<span class="string">&quot;true&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">                新建部门</span><br><span class="line">            <span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;panel panel-default&quot;</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- Default panel contents --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;panel-heading&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;glyphicon glyphicon-th-list&quot;</span> <span class="attr">aria-hidden</span>=<span class="string">&quot;true&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">                部门列表</span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">            <span class="comment">&lt;!-- Table --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">table</span> <span class="attr">class</span>=<span class="string">&quot;table table-bordered&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">thead</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">th</span>&gt;</span>ID<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">th</span>&gt;</span>名称<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">th</span>&gt;</span>操作<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">thead</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">tbody</span>&gt;</span></span><br><span class="line">                &#123;% for obj in querysite %&#125;</span><br><span class="line">                <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">th</span>&gt;</span>&#123;&#123; obj.id &#125;&#125;<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">td</span>&gt;</span>&#123;&#123; obj.title &#125;&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">td</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">&quot;btn btn-primary btn-xs&quot;</span> <span class="attr">href</span>=<span class="string">&quot;/depart/&#123;&#123; obj.id &#125;&#125;/edit/&quot;</span>&gt;</span>编辑<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">&quot;btn btn-danger btn-xs&quot;</span> <span class="attr">href</span>=<span class="string">&quot;/depart/delete/?nid=&#123;&#123; obj.id &#125;&#125;&quot;</span>&gt;</span>删除<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">                &#123;% endfor %&#125;</span><br><span class="line">                <span class="tag">&lt;/<span class="name">tbody</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">&#123;% endblock %&#125;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure></li><li><p><code>depart_add.html</code></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">&#123;% extends &#x27;layoyt.html&#x27; %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% block content %&#125;</span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;container&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;panel panel-default&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;panel-heading&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">h3</span> <span class="attr">class</span>=<span class="string">&quot;panel-title&quot;</span>&gt;</span>新建部门<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;panel-body&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">form</span> <span class="attr">method</span>=<span class="string">&quot;post&quot;</span>&gt;</span></span><br><span class="line">                    &#123;% csrf_token %&#125;</span><br><span class="line">                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;form-group&quot;</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">label</span>&gt;</span>标题<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">class</span>=<span class="string">&quot;form-control&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;标题&quot;</span> <span class="attr">name</span>=<span class="string">&quot;title&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">class</span>=<span class="string">&quot;btn btn-primary&quot;</span>&gt;</span>提 交<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">&#123;% endblock %&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure></li><li><p><code>depart_edit.html</code></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">&#123;% extends &#x27;layoyt.html&#x27; %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% block content %&#125;</span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;container&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;panel panel-default&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;panel-heading&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">h3</span> <span class="attr">class</span>=<span class="string">&quot;panel-title&quot;</span>&gt;</span>修改部门<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;panel-body&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">form</span> <span class="attr">method</span>=<span class="string">&quot;post&quot;</span>&gt;</span></span><br><span class="line">                    &#123;% csrf_token %&#125;</span><br><span class="line">                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;form-group&quot;</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">label</span>&gt;</span>标题<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">class</span>=<span class="string">&quot;form-control&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;标题&quot;</span> <span class="attr">name</span>=<span class="string">&quot;title&quot;</span> <span class="attr">value</span>=<span class="string">&quot;&#123;&#123; row_object.title &#125;&#125;&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">class</span>=<span class="string">&quot;btn btn-primary&quot;</span>&gt;</span>提 交<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">&#123;% endblock %&#125;</span><br></pre></td></tr></table></figure></li></ul><h2 id="用户管理"><a href="#用户管理" class="headerlink" title="用户管理"></a>用户管理</h2><ul><li>先手动输入一些数据<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span>  app01_userinfo(</span><br><span class="line">name,password,age,account,create_time,gender,depart_id) </span><br><span class="line"><span class="keyword">values</span>(&quot;zhang&quot;,&quot;123&quot;,<span class="number">20</span>,<span class="number">10000000</span>,&quot;2022-9-1&quot;,<span class="number">1</span>,<span class="number">1</span>);</span><br></pre></td></tr></table></figure></li></ul><h3 id="添加用户"><a href="#添加用户" class="headerlink" title="添加用户"></a>添加用户</h3><h4 id="原始方法"><a href="#原始方法" class="headerlink" title="原始方法"></a>原始方法</h4><blockquote><p>问题：<br>1.用户提交数据没有校验<br>2.页面输入错误应该有提示<br>3.错误后，页面每一个数据都需要重新写<br>4.关联的数据需要手动获取循环展示到页面</p></blockquote><img src="/2022/09/19/%E5%9F%BA%E4%BA%8EDjango%E7%9A%84%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F/image-20230409205253106.png" class><img src="/2022/09/19/%E5%9F%BA%E4%BA%8EDjango%E7%9A%84%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F/image-20230409205424817.png" class><ul><li>Django组件<ul><li>Form组件<br>可以帮助我们解决前三个问题</li><li>ModelForm组件 </li></ul></li></ul><h4 id="初识Form"><a href="#初识Form" class="headerlink" title="初识Form"></a>初识Form</h4><ol><li>view.py</li></ol><ul><li>自动生成input框<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">MyForm</span>(<span class="title class_ inherited__">Form</span>):</span><br><span class="line">user = forms.CharFiled(widght=forms.Input)</span><br><span class="line">pwd = forms.CharFiled(widght=forms.Input)</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">user_add</span>(<span class="params">request</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;添加用户(原始方法)&quot;&quot;&quot;</span></span><br><span class="line">    <span class="keyword">if</span> request.method == <span class="string">&quot;GET&quot;</span>:</span><br><span class="line">        <span class="keyword">return</span> render(request, <span class="string">&#x27;user_add.html&#x27;</span>,&#123;<span class="string">&quot;form&quot;</span>:form&#125;)</span><br></pre></td></tr></table></figure></li></ul><ol start="3"><li>user_add.html</li></ol><ul><li>循环写<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">method</span>=<span class="string">&quot;post&quot;</span>&gt;</span></span><br><span class="line">&#123;% for field in form %&#125;</span><br><span class="line">&#123;&#123; field &#125;&#125;</span><br><span class="line">&#123;% endfor %&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li>逐一写<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">method</span>=<span class="string">&quot;post&quot;</span>&gt;</span></span><br><span class="line">&#123;&#123; form.user &#125;&#125;</span><br><span class="line">&#123;&#123; form.pwd &#125;&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br></pre></td></tr></table></figure></li></ul><h4 id="ModelForm-推荐"><a href="#ModelForm-推荐" class="headerlink" title="ModelForm(推荐)"></a>ModelForm(推荐)</h4><ol><li>models.py<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">UserInfo</span>(models.Model):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;员工表&quot;&quot;&quot;</span></span><br><span class="line">    name = models.CharField(verbose_name=<span class="string">&quot;姓名&quot;</span>, max_length=<span class="number">16</span>)</span><br><span class="line">    password = models.CharField(verbose_name=<span class="string">&quot;密码&quot;</span>, max_length=<span class="number">64</span>)</span><br><span class="line">    age = models.IntegerField(verbose_name=<span class="string">&quot;年龄&quot;</span>)</span><br><span class="line">    account = models.DecimalField(verbose_name=<span class="string">&quot;账户余额&quot;</span>, max_digits=<span class="number">10</span>, decimal_places=<span class="number">2</span>, default=<span class="number">0</span>)</span><br><span class="line">    create_time = models.DateTimeField(verbose_name=<span class="string">&quot;入职时间&quot;</span>)</span><br><span class="line">    depart = models.ForeignKey(to=<span class="string">&quot;Department&quot;</span>, to_field=<span class="string">&quot;id&quot;</span>, on_delete=models.CASCADE)</span><br><span class="line">    gender_choices = (</span><br><span class="line">        (<span class="number">1</span>, <span class="string">&quot;男&quot;</span>),</span><br><span class="line">        (<span class="number">2</span>, <span class="string">&quot;女&quot;</span>)</span><br><span class="line">    )</span><br><span class="line">    gender = models.SmallIntegerField(verbose_name=<span class="string">&quot;性别&quot;</span>, choices=gender_choices)</span><br></pre></td></tr></table></figure></li><li>view.py</li></ol><ul><li><p>自动生成input框(可以自定义，也可以直接去拿)</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">MyForm</span>(<span class="title class_ inherited__">ModelForm</span>):</span><br><span class="line">user = forms.CharFiled(widght=forms.Input)</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Mete</span>:</span><br><span class="line">model = UserInfo</span><br><span class="line">field = [<span class="string">&quot;name&quot;</span>,<span class="string">&quot;user&quot;</span>,<span class="string">&quot;password&quot;</span>,<span class="string">&quot;age&quot;</span>]</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">user_add</span>(<span class="params">request</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;添加用户(原始方法)&quot;&quot;&quot;</span></span><br><span class="line">    <span class="keyword">if</span> request.method == <span class="string">&quot;GET&quot;</span>:</span><br><span class="line">        <span class="keyword">return</span> render(request, <span class="string">&#x27;user_add.html&#x27;</span>,&#123;<span class="string">&quot;form&quot;</span>:form&#125;)</span><br></pre></td></tr></table></figure></li><li><p>设置settings.py 将默认文字为中文</p></li></ul><img src="/2022/09/19/%E5%9F%BA%E4%BA%8EDjango%E7%9A%84%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F/image-20230409205630144.png" class><h4 id="员工管理系统（用户管理）"><a href="#员工管理系统（用户管理）" class="headerlink" title="员工管理系统（用户管理）"></a>员工管理系统（用户管理）</h4><ul><li><code>user_model_form_add.html</code></li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">&#123;% extends &#x27;layoyt.html&#x27; %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% block content %&#125;</span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;container&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;panel panel-default&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;panel-heading&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">h3</span> <span class="attr">class</span>=<span class="string">&quot;panel-title&quot;</span>&gt;</span>新建用户<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;panel-body&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">form</span> <span class="attr">method</span>=<span class="string">&quot;post&quot;</span> <span class="attr">novalidate</span>&gt;</span></span><br><span class="line">                    &#123;% csrf_token %&#125;</span><br><span class="line"></span><br><span class="line">                    &#123;% for field in form %&#125;</span><br><span class="line">                        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;form-group&quot;</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">label</span>&gt;</span>&#123;&#123; field.label &#125;&#125;<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">                        &#123;&#123; field &#125;&#125;</span><br><span class="line">                            <span class="tag">&lt;<span class="name">span</span> <span class="attr">style</span>=<span class="string">&quot;color: red&quot;</span>&gt;</span></span><br><span class="line">                                &#123;&#123; field.errors.0 &#125;&#125;</span><br><span class="line">                            <span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                    &#123;% endfor %&#125;</span><br><span class="line"></span><br><span class="line">                    <span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">class</span>=<span class="string">&quot;btn btn-primary&quot;</span>&gt;</span>提 交<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">&#123;% endblock %&#125;</span><br></pre></td></tr></table></figure><ul><li><code>views.py</code><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">user_model_form_add</span>(<span class="params">request</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;基于modelform的添加用户&quot;&quot;&quot;</span></span><br><span class="line">    <span class="keyword">if</span> request.method == <span class="string">&quot;GET&quot;</span>:</span><br><span class="line">        form = UserModelForm</span><br><span class="line">        <span class="keyword">return</span> render(request,<span class="string">&#x27;user_model_form_add.html&#x27;</span>, &#123;<span class="string">&quot;form&quot;</span>: form&#125;)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 用户POST提交数据，数据校验</span></span><br><span class="line">    form = UserModelForm(data=request.POST)</span><br><span class="line">    <span class="keyword">if</span> form.is_valid():</span><br><span class="line">        <span class="comment"># 数据合法，保存到数据库</span></span><br><span class="line">        <span class="comment"># models.UserInfo.objects.create()</span></span><br><span class="line">        form.save()</span><br><span class="line">        <span class="keyword">return</span> redirect(<span class="string">&quot;/user/list/&quot;</span>)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="keyword">return</span> render(request,<span class="string">&#x27;user_model_form_add.html&#x27;</span>, &#123;<span class="string">&quot;form&quot;</span>: form&#125;)</span><br></pre></td></tr></table></figure><h4 id="补充编辑删除以后的代码"><a href="#补充编辑删除以后的代码" class="headerlink" title="补充编辑删除以后的代码"></a>补充编辑删除以后的代码</h4></li><li>编辑用户<ul><li>点击编辑，跳转到编辑页面（将编辑行的id携带过去）</li><li>错误校验</li><li>数据库更新</li></ul></li><li>删除用户</li></ul><ol><li><code>views.py</code></li></ol><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">user_edit</span>(<span class="params">request, nid</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;编辑页面&quot;&quot;&quot;</span></span><br><span class="line">    <span class="keyword">if</span> request.method == <span class="string">&quot;GET&quot;</span>:</span><br><span class="line">        <span class="comment"># 根据id获取要编辑的那一行数据</span></span><br><span class="line">        row_object = models.UserInfo.objects.<span class="built_in">filter</span>(<span class="built_in">id</span>=nid).first()</span><br><span class="line">        form = UserModelForm(instance=row_object)</span><br><span class="line">        <span class="keyword">return</span> render(request, <span class="string">&#x27;user_edit.html&#x27;</span>, &#123;<span class="string">&#x27;form&#x27;</span>:form&#125;)</span><br><span class="line"></span><br><span class="line">    row_object = models.UserInfo.objects.<span class="built_in">filter</span>(<span class="built_in">id</span>=nid).first()</span><br><span class="line">    form = UserModelForm(data=request.POST, instance=row_object)</span><br><span class="line">    <span class="keyword">if</span> form.is_valid():</span><br><span class="line">        <span class="comment"># 默认保存的是用户输入的数据</span></span><br><span class="line">        form.save()</span><br><span class="line">        <span class="keyword">return</span> redirect(<span class="string">&#x27;/user/list/&#x27;</span>)</span><br><span class="line">    <span class="keyword">return</span> render(request, <span class="string">&#x27;user_edit.html&#x27;</span>, &#123;<span class="string">&quot;form&quot;</span>: form&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">user_delete</span>(<span class="params">request, nid</span>):</span><br><span class="line">    models.UserInfo.objects.<span class="built_in">filter</span>(<span class="built_in">id</span>=nid).first().delete()</span><br><span class="line">    <span class="keyword">return</span> redirect(<span class="string">&#x27;/user/list&#x27;</span>)</span><br></pre></td></tr></table></figure><ol start="2"><li><p><code>user_model_form_edit.html</code></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">&#123;% extends &#x27;layoyt.html&#x27; %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% block content %&#125;</span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;container&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;panel panel-default&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;panel-heading&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">h3</span> <span class="attr">class</span>=<span class="string">&quot;panel-title&quot;</span>&gt;</span>编辑用户<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;panel-body&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">form</span> <span class="attr">method</span>=<span class="string">&quot;post&quot;</span> <span class="attr">novalidate</span>&gt;</span></span><br><span class="line">                    &#123;% csrf_token %&#125;</span><br><span class="line"></span><br><span class="line">                    &#123;% for field in form %&#125;</span><br><span class="line">                        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;form-group&quot;</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">label</span>&gt;</span>&#123;&#123; field.label &#125;&#125;<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">                        &#123;&#123; field &#125;&#125;</span><br><span class="line">                            <span class="tag">&lt;<span class="name">span</span> <span class="attr">style</span>=<span class="string">&quot;color: red&quot;</span>&gt;</span></span><br><span class="line">                                &#123;&#123; field.errors.0 &#125;&#125;</span><br><span class="line">                            <span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                    &#123;% endfor %&#125;</span><br><span class="line"></span><br><span class="line">                    <span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">class</span>=<span class="string">&quot;btn btn-primary&quot;</span>&gt;</span>提 交<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">&#123;% endblock %&#125;</span><br></pre></td></tr></table></figure></li><li><p>其它修改</p></li></ol><img src="/2022/09/19/%E5%9F%BA%E4%BA%8EDjango%E7%9A%84%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F/image-20230409205927754.png" class><h2 id="号码管理"><a href="#号码管理" class="headerlink" title="号码管理"></a>号码管理</h2><h3 id="表结构"><a href="#表结构" class="headerlink" title="表结构"></a>表结构</h3><ul><li>设计表<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">PrettyNum</span>(models.Model):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;靓号表&quot;&quot;&quot;</span></span><br><span class="line">    mobile = models.CharField(verbose_name=<span class="string">&quot;手机号&quot;</span>, max_length=<span class="number">11</span>)</span><br><span class="line">    price = models.IntegerField(verbose_name=<span class="string">&quot;价格&quot;</span>, default=<span class="number">0</span>)</span><br><span class="line">    </span><br><span class="line">    level_choices = (</span><br><span class="line">        (<span class="number">1</span>, <span class="string">&quot;1级&quot;</span>),</span><br><span class="line">        (<span class="number">2</span>, <span class="string">&quot;2级&quot;</span>),</span><br><span class="line">        (<span class="number">3</span>, <span class="string">&quot;3级&quot;</span>),</span><br><span class="line">        (<span class="number">4</span>, <span class="string">&quot;4级&quot;</span>),</span><br><span class="line">    )</span><br><span class="line">    level = models.SmallIntegerField(verbose_name=<span class="string">&quot;级别&quot;</span>, choices=level_choices, default=<span class="number">1</span>)</span><br><span class="line">    </span><br><span class="line">    status_choices = (</span><br><span class="line">        (<span class="number">1</span>, <span class="string">&quot;已占用&quot;</span>),</span><br><span class="line">        (<span class="number">2</span>, <span class="string">&quot;未使用&quot;</span>),</span><br><span class="line">    )</span><br><span class="line">    status = models.SmallIntegerField(verbose_name=<span class="string">&quot;状态&quot;</span>, choices=status_choices, default=<span class="number">2</span>)</span><br></pre></td></tr></table></figure></li><li>命令创建表</li></ul><h3 id="号码列表"><a href="#号码列表" class="headerlink" title="号码列表"></a>号码列表</h3><ul><li>URL</li><li>函数<ul><li>获取所有的靓号</li><li>结合HTML+render将靓号罗列出来 </li></ul></li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">pretty_list</span>(<span class="params">request</span>):</span><br><span class="line">    queryset = models.PrettyNum.objects.<span class="built_in">all</span>().order_by(<span class="string">&quot;-level&quot;</span>)</span><br><span class="line">    <span class="keyword">return</span> render(request, <span class="string">&#x27;pretty_list.html&#x27;</span>, &#123;<span class="string">&quot;queryset&quot;</span>: queryset&#125;)</span><br></pre></td></tr></table></figure><ul><li><code>pretty_list.html</code><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line">&#123;% extends &#x27;layoyt.html&#x27; %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% block content %&#125;</span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;container&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;margin-bottom: 10px&quot;</span> <span class="attr">class</span>=<span class="string">&quot;clearfix&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">&quot;btn btn-success&quot;</span> <span class="attr">href</span>=<span class="string">&quot;/pretty/add/&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;glyphicon glyphicon-plus-sign&quot;</span> <span class="attr">aria-hidden</span>=<span class="string">&quot;true&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">                新建靓号</span><br><span class="line">            <span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;float: right; width: 300px;&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">form</span> <span class="attr">method</span>=<span class="string">&quot;get&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;input-group&quot;</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;q&quot;</span> <span class="attr">class</span>=<span class="string">&quot;form-control&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;Search for...&quot;</span></span></span><br><span class="line"><span class="tag">                               <span class="attr">value</span>=<span class="string">&quot;&#123;&#123; search_data &#125;&#125;&quot;</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;input-group-btn&quot;</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">button</span> <span class="attr">class</span>=<span class="string">&quot;btn btn-default&quot;</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;glyphicon glyphicon-search&quot;</span> <span class="attr">aria-hidden</span>=<span class="string">&quot;true&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">div</span>&gt;</span><span class="comment">&lt;!-- /input-group --&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;panel panel-default&quot;</span>&gt;</span></span><br><span class="line">                <span class="comment">&lt;!-- Default panel contents --&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;panel-heading&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;glyphicon glyphicon-th-list&quot;</span> <span class="attr">aria-hidden</span>=<span class="string">&quot;true&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">                    用户列表</span><br><span class="line">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">                <span class="comment">&lt;!-- Table --&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">table</span> <span class="attr">class</span>=<span class="string">&quot;table table-bordered&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">thead</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">th</span>&gt;</span>ID<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">th</span>&gt;</span>号码<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">th</span>&gt;</span>价格<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">th</span>&gt;</span>级别<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">th</span>&gt;</span>状态<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">thead</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">tbody</span>&gt;</span></span><br><span class="line">                    &#123;% for obj in queryset %&#125;</span><br><span class="line">                        <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">th</span>&gt;</span>&#123;&#123; obj.id &#125;&#125;<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">td</span>&gt;</span>&#123;&#123; obj.mobile &#125;&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">td</span>&gt;</span>&#123;&#123; obj.price &#125;&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">td</span>&gt;</span>&#123;&#123; obj.get_level_display &#125;&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">td</span>&gt;</span>&#123;&#123; obj.get_status_display &#125;&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">td</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">&quot;btn btn-primary btn-xs&quot;</span> <span class="attr">href</span>=<span class="string">&quot;/pretty/&#123;&#123; obj.id &#125;&#125;/edit/&quot;</span>&gt;</span>编辑<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">&quot;btn btn-danger btn-xs&quot;</span> <span class="attr">href</span>=<span class="string">&quot;/pretty/&#123;&#123; obj.id &#125;&#125;/delete/&quot;</span>&gt;</span>删除<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">                    &#123;% endfor %&#125;</span><br><span class="line">                    <span class="tag">&lt;/<span class="name">tbody</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">&#123;% endblock %&#125;</span><br></pre></td></tr></table></figure></li></ul><h3 id="新建号码"><a href="#新建号码" class="headerlink" title="新建号码"></a>新建号码</h3><ul><li>列表页面点击跳转：/pretty/add/</li><li>URL</li><li>函数</li><li>ModelForm的类</li><li>函数    <ul><li>实例化类的对象</li><li>通过render将对象传入HTML中</li><li>模板的循环展示所有的字段  </li></ul></li><li>点击提交<ul><li>数据校验</li><li>保存到数据库<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">PrettyModelForm</span>(forms.ModelForm):</span><br><span class="line">    <span class="comment"># 验证：方式一</span></span><br><span class="line">    <span class="comment"># 通过正则表达式规范校验手机号码</span></span><br><span class="line">    mobile = forms.CharField(</span><br><span class="line">        label=<span class="string">&quot;手机号&quot;</span>,</span><br><span class="line">        validators=[RegexValidator(<span class="string">r&#x27;^1\d&#123;8&#125;&#x27;</span>, <span class="string">&quot;号码格式错误&quot;</span>)]</span><br><span class="line">    )</span><br><span class="line"></span><br><span class="line">    <span class="keyword">class</span> <span class="title class_">Meta</span>:</span><br><span class="line">        model = models.PrettyNum</span><br><span class="line">        <span class="comment"># fields = &quot;__all__&quot;</span></span><br><span class="line">        fields = [<span class="string">&quot;mobile&quot;</span>, <span class="string">&quot;price&quot;</span>, <span class="string">&quot;level&quot;</span>, <span class="string">&quot;status&quot;</span>]</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, *args, **kwargs</span>):</span><br><span class="line">        <span class="built_in">super</span>().__init__(*args, **kwargs)</span><br><span class="line">        <span class="keyword">for</span> name, field <span class="keyword">in</span> self.fields.items():</span><br><span class="line">            field.widget.attrs = &#123;<span class="string">&quot;class&quot;</span>: <span class="string">&quot;form-control&quot;</span>&#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 验证：方式二</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">clean_mobile</span>(<span class="params">self</span>):</span><br><span class="line">        txt_mobile = self.cleaned_data[<span class="string">&quot;mobile&quot;</span>]</span><br><span class="line"></span><br><span class="line">        exits = models.PrettyNum.objects.<span class="built_in">filter</span>(mobile=txt_mobile).exists()</span><br><span class="line">        <span class="keyword">if</span> exits:</span><br><span class="line">            <span class="keyword">raise</span> ValidationError(<span class="string">&quot;手机号已存在&quot;</span>)</span><br><span class="line">        <span class="keyword">return</span> txt_mobile</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">pretty_add</span>(<span class="params">request</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;添加靓号&quot;&quot;&quot;</span></span><br><span class="line">    <span class="keyword">if</span> request.method == <span class="string">&quot;GET&quot;</span>:</span><br><span class="line">        form = PrettyModelForm()</span><br><span class="line">        <span class="keyword">return</span> render(request, <span class="string">&#x27;pretty_add.html&#x27;</span>, &#123;<span class="string">&quot;form&quot;</span>: form&#125;)</span><br><span class="line">    form = PrettyModelForm(data=request.POST)</span><br><span class="line">    <span class="keyword">if</span> form.is_valid():</span><br><span class="line">        form.save()</span><br><span class="line">        <span class="keyword">return</span> redirect(<span class="string">&quot;/pretty/list/&quot;</span>)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="keyword">return</span> render(request, <span class="string">&#x27;pretty_add.html&#x27;</span>, &#123;<span class="string">&quot;form&quot;</span>: form&#125;)</span><br></pre></td></tr></table></figure></li></ul></li><li><code>pretty_add.html</code><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">&#123;% extends &#x27;layoyt.html&#x27; %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% block content %&#125;</span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;container&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;panel panel-default&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;panel-heading&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">h3</span> <span class="attr">class</span>=<span class="string">&quot;panel-title&quot;</span>&gt;</span>新建靓号<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;panel-body&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">form</span> <span class="attr">method</span>=<span class="string">&quot;post&quot;</span> <span class="attr">novalidate</span>&gt;</span></span><br><span class="line">                    &#123;% csrf_token %&#125;</span><br><span class="line"></span><br><span class="line">                    &#123;% for field in form %&#125;</span><br><span class="line">                        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;form-group&quot;</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">label</span>&gt;</span>&#123;&#123; field.label &#125;&#125;<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">                        &#123;&#123; field &#125;&#125;</span><br><span class="line">                            <span class="tag">&lt;<span class="name">span</span> <span class="attr">style</span>=<span class="string">&quot;color: red&quot;</span>&gt;</span></span><br><span class="line">                                &#123;&#123; field.errors.0 &#125;&#125;</span><br><span class="line">                            <span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                    &#123;% endfor %&#125;</span><br><span class="line"></span><br><span class="line">                    <span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">class</span>=<span class="string">&quot;btn btn-primary&quot;</span>&gt;</span>提 交<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">&#123;% endblock %&#125;</span><br></pre></td></tr></table></figure><h3 id="编辑号码"><a href="#编辑号码" class="headerlink" title="编辑号码"></a>编辑号码</h3></li><li>列表页面点击跳转：/pretty/edit/</li><li>URL</li><li>函数<ul><li>根据id获取当前编辑的对象</li><li>ModelForm配合，默认显示数据</li><li>提交修改</li></ul></li></ul><p>不允许靓号重复</p><ul><li>添加（正则表达式）</li><li>编辑（正则表达式）</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">PrettyEditModelForm</span>(forms.ModelForm):</span><br><span class="line">    <span class="comment"># mobile = forms.CharField(disabled=True,label=&quot;手机号&quot;)</span></span><br><span class="line">    <span class="keyword">class</span> <span class="title class_">Meta</span>:</span><br><span class="line">        model = models.PrettyNum</span><br><span class="line">        <span class="comment"># fields = &quot;__all__&quot;</span></span><br><span class="line">        fields = [<span class="string">&quot;mobile&quot;</span>, <span class="string">&quot;price&quot;</span>, <span class="string">&quot;level&quot;</span>, <span class="string">&quot;status&quot;</span>]</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, *args, **kwargs</span>):</span><br><span class="line">        <span class="built_in">super</span>().__init__(*args, **kwargs)</span><br><span class="line">        <span class="keyword">for</span> name, field <span class="keyword">in</span> self.fields.items():</span><br><span class="line">            field.widget.attrs = &#123;<span class="string">&quot;class&quot;</span>: <span class="string">&quot;form-control&quot;</span>&#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">clean_mobile</span>(<span class="params">self</span>):</span><br><span class="line">        txt_mobile = self.cleaned_data[<span class="string">&quot;mobile&quot;</span>]</span><br><span class="line"></span><br><span class="line">        exits = models.PrettyNum.objects.exclude(<span class="built_in">id</span>=self.instance.pk).<span class="built_in">filter</span>(mobile=txt_mobile).exists()</span><br><span class="line">        <span class="keyword">if</span> exits:</span><br><span class="line">            <span class="keyword">raise</span> ValidationError(<span class="string">&quot;手机号已存在&quot;</span>)</span><br><span class="line">        <span class="keyword">return</span> txt_mobile</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">pretty_edit</span>(<span class="params">request, nid</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;编辑靓号&quot;&quot;&quot;</span></span><br><span class="line">    row_object = models.PrettyNum.objects.<span class="built_in">filter</span>(<span class="built_in">id</span>=nid).first()</span><br><span class="line">    <span class="keyword">if</span> request.method == <span class="string">&quot;GET&quot;</span>:</span><br><span class="line">        form = PrettyEditModelForm(instance=row_object)</span><br><span class="line">        <span class="keyword">return</span> render(request, <span class="string">&#x27;pretty_edit.html&#x27;</span>, &#123;<span class="string">&quot;form&quot;</span>: form&#125;)</span><br><span class="line">    form = PrettyEditModelForm(instance=row_object, data=request.POST)</span><br><span class="line">    <span class="keyword">if</span> form.is_valid():</span><br><span class="line">        form.save()</span><br><span class="line">        <span class="keyword">return</span> redirect(<span class="string">&quot;/pretty/list/&quot;</span>)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="keyword">return</span> render(request, <span class="string">&#x27;pretty_edit.html&#x27;</span>, &#123;<span class="string">&quot;form&quot;</span>: form&#125;)</span><br></pre></td></tr></table></figure><ul><li><code>pretty_edit.html</code><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">&#123;% extends &#x27;layoyt.html&#x27; %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% block content %&#125;</span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;container&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;panel panel-default&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;panel-heading&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">h3</span> <span class="attr">class</span>=<span class="string">&quot;panel-title&quot;</span>&gt;</span>编辑靓号<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;panel-body&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">form</span> <span class="attr">method</span>=<span class="string">&quot;post&quot;</span> <span class="attr">novalidate</span>&gt;</span></span><br><span class="line">                    &#123;% csrf_token %&#125;</span><br><span class="line"></span><br><span class="line">                    &#123;% for field in form %&#125;</span><br><span class="line">                        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;form-group&quot;</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">label</span>&gt;</span>&#123;&#123; field.label &#125;&#125;<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">                        &#123;&#123; field &#125;&#125;</span><br><span class="line">                            <span class="tag">&lt;<span class="name">span</span> <span class="attr">style</span>=<span class="string">&quot;color: red&quot;</span>&gt;</span></span><br><span class="line">                                &#123;&#123; field.errors.0 &#125;&#125;</span><br><span class="line">                            <span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                    &#123;% endfor %&#125;</span><br><span class="line"></span><br><span class="line">                    <span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">class</span>=<span class="string">&quot;btn btn-primary&quot;</span>&gt;</span>提 交<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">&#123;% endblock %&#125;</span><br></pre></td></tr></table></figure><h3 id="删除号码"><a href="#删除号码" class="headerlink" title="删除号码"></a>删除号码</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">pretty_delete</span>(<span class="params">request, nid</span>):</span><br><span class="line">    models.PrettyNum.objects.<span class="built_in">filter</span>(<span class="built_in">id</span>=nid).delete()</span><br><span class="line">    <span class="keyword">return</span> redirect(<span class="string">&#x27;/pretty/list&#x27;</span>)</span><br></pre></td></tr></table></figure></li></ul><h2 id="分页和分页组件"><a href="#分页和分页组件" class="headerlink" title="分页和分页组件"></a>分页和分页组件</h2><h3 id="分页-一般写法"><a href="#分页-一般写法" class="headerlink" title="分页(一般写法)"></a>分页(一般写法)</h3><ul><li><p><code>views.py</code></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">pretty_list</span>(<span class="params">request</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;靓号列表&quot;&quot;&quot;</span></span><br><span class="line">    data_dict = &#123;&#125;</span><br><span class="line">    search_data = request.GET.get(<span class="string">&#x27;q&#x27;</span>, <span class="string">&quot;&quot;</span>)</span><br><span class="line">    <span class="keyword">if</span> search_data:</span><br><span class="line">        data_dict[<span class="string">&#x27;mobile__contains&#x27;</span>] = search_data</span><br><span class="line"></span><br><span class="line">    page = <span class="built_in">int</span>(request.GET.get(<span class="string">&#x27;page&#x27;</span>, <span class="number">1</span>))</span><br><span class="line">    page_size = <span class="number">10</span></span><br><span class="line">    start = (page - <span class="number">1</span>) * page_size</span><br><span class="line">    end = page * page_size</span><br><span class="line">    <span class="comment"># 数据总条数</span></span><br><span class="line">    total_count = models.PrettyNum.objects.<span class="built_in">filter</span>(**data_dict).order_by(<span class="string">&quot;-level&quot;</span>).count()</span><br><span class="line">    queryset = models.PrettyNum.objects.<span class="built_in">filter</span>(**data_dict).order_by(<span class="string">&quot;-level&quot;</span>)[start:end]</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 总页码</span></span><br><span class="line">    total_page_count, div = <span class="built_in">divmod</span>(total_count, page_size)</span><br><span class="line">    <span class="keyword">if</span> div:</span><br><span class="line">        total_page_count += <span class="number">1</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># 计算出当前页得到前五页和后五页</span></span><br><span class="line">    plus = <span class="number">5</span></span><br><span class="line">    <span class="keyword">if</span> total_page_count &lt;= <span class="number">2</span> * plus + <span class="number">1</span>:</span><br><span class="line">        start_page = <span class="number">1</span></span><br><span class="line">        end_page = total_page_count + <span class="number">1</span></span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="comment"># 数据库数据比较多 &gt; 11 页</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> page &lt;= plus:</span><br><span class="line">            start_page = <span class="number">1</span></span><br><span class="line">            end_page = <span class="number">2</span> * plus + <span class="number">1</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="keyword">if</span> (page + plus) &gt; total_page_count:</span><br><span class="line">                start_page = total_page_count - <span class="number">2</span> * plus</span><br><span class="line">                end_page = total_page_count</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                start_page = page - plus</span><br><span class="line">                end_page = page + plus + <span class="number">1</span></span><br><span class="line">    <span class="comment"># 页码</span></span><br><span class="line">    page_str_list = []</span><br><span class="line"></span><br><span class="line">    page_str_list.append(<span class="string">&#x27;&lt;li&gt;&lt;a href=&quot;?page=&#123;&#125;&quot;&gt;首页&lt;/a&gt;&lt;/li&gt;&#x27;</span>.<span class="built_in">format</span>(<span class="number">1</span>))</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 上一页</span></span><br><span class="line">    <span class="keyword">if</span> page &gt; <span class="number">1</span>:</span><br><span class="line">        prev = <span class="string">&#x27;&lt;li&gt;&lt;a href=&quot;?page=&#123;&#125;&quot;&gt;上一页&lt;/a&gt;&lt;/li&gt;&#x27;</span>.<span class="built_in">format</span>(page - <span class="number">1</span>)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        prev = <span class="string">&#x27;&lt;li&gt;&lt;a href=&quot;?page=&#123;&#125;&quot;&gt;上一页&lt;/a&gt;&lt;/li&gt;&#x27;</span>.<span class="built_in">format</span>(<span class="number">1</span>)</span><br><span class="line">    page_str_list.append(prev)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(start_page, end_page):</span><br><span class="line">        <span class="keyword">if</span> i == page:</span><br><span class="line">            ele = <span class="string">&#x27;&lt;li class=&quot;active&quot;&gt;&lt;a href=&quot;?page=&#123;&#125;&quot;&gt;&#123;&#125;&lt;/a&gt;&lt;/li&gt;&#x27;</span>.<span class="built_in">format</span>(i, i)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            ele = <span class="string">&#x27;&lt;li&gt;&lt;a href=&quot;?page=&#123;&#125;&quot;&gt;&#123;&#125;&lt;/a&gt;&lt;/li&gt;&#x27;</span>.<span class="built_in">format</span>(i, i)</span><br><span class="line">        page_str_list.append(ele)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 下一页</span></span><br><span class="line">    <span class="keyword">if</span> page &lt; total_page_count:</span><br><span class="line">        prev = <span class="string">&#x27;&lt;li&gt;&lt;a href=&quot;?page=&#123;&#125;&quot;&gt;下一页&lt;/a&gt;&lt;/li&gt;&#x27;</span>.<span class="built_in">format</span>(page + <span class="number">1</span>)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        prev = <span class="string">&#x27;&lt;li&gt;&lt;a href=&quot;?page=&#123;&#125;&quot;&gt;下一页&lt;/a&gt;&lt;/li&gt;&#x27;</span>.<span class="built_in">format</span>(total_page_count)</span><br><span class="line">    page_str_list.append(prev)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 尾页</span></span><br><span class="line">    page_str_list.append(<span class="string">&#x27;&lt;li&gt;&lt;a href=&quot;?page=&#123;&#125;&quot;&gt;尾页&lt;/a&gt;&lt;/li&gt;&#x27;</span>.<span class="built_in">format</span>(total_page_count))</span><br><span class="line"></span><br><span class="line">    search_string = <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">            &lt;li&gt;</span></span><br><span class="line"><span class="string">            &lt;form style=&quot;float: left; margin-left: -1px&quot; method=&quot;get&quot;&gt;</span></span><br><span class="line"><span class="string">                &lt;div class=&quot;input-group&quot; style=&quot;width: 200px&quot; &gt;</span></span><br><span class="line"><span class="string">                    &lt;input type=&quot;text&quot; name=&quot;page&quot; class=&quot;form-control&quot; placeholder=&quot;页数&quot;&gt;</span></span><br><span class="line"><span class="string">                    &lt;span class=&quot;input-group-btn&quot;&gt;</span></span><br><span class="line"><span class="string">                        &lt;button class=&quot;btn btn-default&quot; type=&quot;submit&quot;&gt;跳转&lt;/button&gt;</span></span><br><span class="line"><span class="string">                    &lt;/span&gt;</span></span><br><span class="line"><span class="string">                &lt;/div&gt;</span></span><br><span class="line"><span class="string">            &lt;/form&gt;</span></span><br><span class="line"><span class="string">            &lt;/li&gt;</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    page_str_list.append(search_string)</span><br><span class="line"></span><br><span class="line">    page_string = mark_safe(<span class="string">&quot;&quot;</span>.join(page_str_list))</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> render(request, <span class="string">&#x27;pretty_list.html&#x27;</span>,</span><br><span class="line">                  &#123;<span class="string">&quot;queryset&quot;</span>: queryset, <span class="string">&quot;search_data&quot;</span>: search_data, <span class="string">&quot;page_string&quot;</span>: page_string&#125;, )</span><br></pre></td></tr></table></figure></li><li><p><code>pretty_list</code></p></li></ul><img src="/2022/09/19/%E5%9F%BA%E4%BA%8EDjango%E7%9A%84%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F/image-20230409210936049.png" class><ul><li>效果展示</li></ul><img src="/2022/09/19/%E5%9F%BA%E4%BA%8EDjango%E7%9A%84%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F/image-20230409210950066.png" class><h3 id="分页组件的封装"><a href="#分页组件的封装" class="headerlink" title="分页组件的封装"></a>分页组件的封装</h3><ul><li>新建文件</li></ul><img src="/2022/09/19/%E5%9F%BA%E4%BA%8EDjango%E7%9A%84%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F/image-20230409211005000.png" class><p>用<code>pagination</code>公共组件</p><ul><li><code>pagination</code></li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">自定义的分页组件，以后如果想要使用分页组件</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">在视图函数中</span></span><br><span class="line"><span class="string">def pretty_list(request):</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    # 根据自己的情况去筛选自己的数据</span></span><br><span class="line"><span class="string">    queryset = models.PrettyNum.objects.all()</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    # 实例化分页对象</span></span><br><span class="line"><span class="string">    page_object = Pagination(request, queryset)</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    context = &#123;</span></span><br><span class="line"><span class="string">        &quot;search_data&quot;: search_data,</span></span><br><span class="line"><span class="string">        &quot;queryset&quot;: page_object.page_queryset,   # 分完页的数据</span></span><br><span class="line"><span class="string">        &quot;page_string&quot;: page_object.html()    # 页码</span></span><br><span class="line"><span class="string">    &#125;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    return render(request, &#x27;pretty_list.html&#x27;, context)</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">在HTML页面中</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">        &#123;% for obj in queryset %&#125;</span></span><br><span class="line"><span class="string">            &#123;&#123; obj.xx &#125;&#125;</span></span><br><span class="line"><span class="string">        &#123;% endfor %&#125;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">        &lt;ul class=&quot;pagination&quot;&gt;</span></span><br><span class="line"><span class="string">            &#123;&#123; page_string &#125;&#125;</span></span><br><span class="line"><span class="string">        &lt;/ul&gt;</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> django.utils.safestring <span class="keyword">import</span> mark_safe</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Pagination</span>(<span class="title class_ inherited__">object</span>):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, request, queryset, page_size=<span class="number">10</span>, page_param=<span class="string">&quot;page&quot;</span>, plus=<span class="number">5</span></span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">        :param request: 请求的对象</span></span><br><span class="line"><span class="string">        :param queryset: 查询的符合条件的数据（根据这个数据进行处理）</span></span><br><span class="line"><span class="string">        :param page_size: 每页显示多少条数据</span></span><br><span class="line"><span class="string">        :param page_param: 在URL中传递的参数</span></span><br><span class="line"><span class="string">        :param plus: 显示当前页的前或后几页</span></span><br><span class="line"><span class="string">        &quot;&quot;&quot;</span></span><br><span class="line">        page = request.GET.get(page_param, <span class="string">&quot;1&quot;</span>)</span><br><span class="line">        <span class="keyword">if</span> page.isdecimal():</span><br><span class="line">            page = <span class="built_in">int</span>(page)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            page = <span class="number">1</span></span><br><span class="line"></span><br><span class="line">        self.page = page</span><br><span class="line">        self.page_size = page_size</span><br><span class="line"></span><br><span class="line">        self.start = (page - <span class="number">1</span>) * page_size</span><br><span class="line">        self.end = page * page_size</span><br><span class="line"></span><br><span class="line">        self.page_queryset = queryset[self.start:self.end]</span><br><span class="line"></span><br><span class="line">        total_count = queryset.count()</span><br><span class="line">        total_page_count, div = <span class="built_in">divmod</span>(total_count, page_size)</span><br><span class="line">        <span class="keyword">if</span> div:</span><br><span class="line">            total_page_count += <span class="number">1</span></span><br><span class="line">        self.total_page_count = total_page_count</span><br><span class="line">        self.plus = plus</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">html</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="comment"># 计算出当前页得到前五页和后五页</span></span><br><span class="line">        <span class="keyword">if</span> self.total_page_count &lt;= <span class="number">2</span> * self.plus + <span class="number">1</span>:</span><br><span class="line">            start_page = <span class="number">1</span></span><br><span class="line">            end_page = self.total_page_count + <span class="number">1</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="comment"># 数据库数据比较多 &gt; 11 页</span></span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> self.page &lt;= self.plus:</span><br><span class="line">                start_page = <span class="number">1</span></span><br><span class="line">                end_page = <span class="number">2</span> * self.plus + <span class="number">1</span></span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                <span class="keyword">if</span> (self.page + self.plus) &gt; self.total_page_count:</span><br><span class="line">                    start_page = self.total_page_count - <span class="number">2</span> * self.plus</span><br><span class="line">                    end_page = self.total_page_count</span><br><span class="line">                <span class="keyword">else</span>:</span><br><span class="line">                    start_page = self.page - self.plus</span><br><span class="line">                    end_page = self.page + self.plus + <span class="number">1</span></span><br><span class="line">        <span class="comment"># 页码</span></span><br><span class="line">        page_str_list = []</span><br><span class="line"></span><br><span class="line">        page_str_list.append(<span class="string">&#x27;&lt;li&gt;&lt;a href=&quot;?page=&#123;&#125;&quot;&gt;首页&lt;/a&gt;&lt;/li&gt;&#x27;</span>.<span class="built_in">format</span>(<span class="number">1</span>))</span><br><span class="line"></span><br><span class="line">        <span class="comment"># 上一页</span></span><br><span class="line">        <span class="keyword">if</span> self.page &gt; <span class="number">1</span>:</span><br><span class="line">            prev = <span class="string">&#x27;&lt;li&gt;&lt;a href=&quot;?page=&#123;&#125;&quot;&gt;上一页&lt;/a&gt;&lt;/li&gt;&#x27;</span>.<span class="built_in">format</span>(self.page - <span class="number">1</span>)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            prev = <span class="string">&#x27;&lt;li&gt;&lt;a href=&quot;?page=&#123;&#125;&quot;&gt;上一页&lt;/a&gt;&lt;/li&gt;&#x27;</span>.<span class="built_in">format</span>(<span class="number">1</span>)</span><br><span class="line">        page_str_list.append(prev)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(start_page, end_page):</span><br><span class="line">            <span class="keyword">if</span> i == self.page:</span><br><span class="line">                ele = <span class="string">&#x27;&lt;li class=&quot;active&quot;&gt;&lt;a href=&quot;?page=&#123;&#125;&quot;&gt;&#123;&#125;&lt;/a&gt;&lt;/li&gt;&#x27;</span>.<span class="built_in">format</span>(i, i)</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                ele = <span class="string">&#x27;&lt;li&gt;&lt;a href=&quot;?page=&#123;&#125;&quot;&gt;&#123;&#125;&lt;/a&gt;&lt;/li&gt;&#x27;</span>.<span class="built_in">format</span>(i, i)</span><br><span class="line">            page_str_list.append(ele)</span><br><span class="line"></span><br><span class="line">        <span class="comment"># 下一页</span></span><br><span class="line">        <span class="keyword">if</span> self.page &lt; self.total_page_count:</span><br><span class="line">            prev = <span class="string">&#x27;&lt;li&gt;&lt;a href=&quot;?page=&#123;&#125;&quot;&gt;下一页&lt;/a&gt;&lt;/li&gt;&#x27;</span>.<span class="built_in">format</span>(self.page + <span class="number">1</span>)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            prev = <span class="string">&#x27;&lt;li&gt;&lt;a href=&quot;?page=&#123;&#125;&quot;&gt;下一页&lt;/a&gt;&lt;/li&gt;&#x27;</span>.<span class="built_in">format</span>(self.total_page_count)</span><br><span class="line">        page_str_list.append(prev)</span><br><span class="line"></span><br><span class="line">        <span class="comment"># 尾页</span></span><br><span class="line">        page_str_list.append(<span class="string">&#x27;&lt;li&gt;&lt;a href=&quot;?page=&#123;&#125;&quot;&gt;尾页&lt;/a&gt;&lt;/li&gt;&#x27;</span>.<span class="built_in">format</span>(self.total_page_count))</span><br><span class="line"></span><br><span class="line">        search_string = <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">                    &lt;li&gt;</span></span><br><span class="line"><span class="string">                    &lt;form style=&quot;float: left; margin-left: -1px&quot; method=&quot;get&quot;&gt;</span></span><br><span class="line"><span class="string">                        &lt;div class=&quot;input-group&quot; style=&quot;width: 200px&quot; &gt;</span></span><br><span class="line"><span class="string">                            &lt;input type=&quot;text&quot; name=&quot;page&quot; class=&quot;form-control&quot; placeholder=&quot;页数&quot;&gt;</span></span><br><span class="line"><span class="string">                            &lt;span class=&quot;input-group-btn&quot;&gt;</span></span><br><span class="line"><span class="string">                                &lt;button class=&quot;btn btn-default&quot; type=&quot;submit&quot;&gt;跳转&lt;/button&gt;</span></span><br><span class="line"><span class="string">                            &lt;/span&gt;</span></span><br><span class="line"><span class="string">                        &lt;/div&gt;</span></span><br><span class="line"><span class="string">                    &lt;/form&gt;</span></span><br><span class="line"><span class="string">                    &lt;/li&gt;</span></span><br><span class="line"><span class="string">            &quot;&quot;&quot;</span></span><br><span class="line">        page_str_list.append(search_string)</span><br><span class="line"></span><br><span class="line">        page_string = mark_safe(<span class="string">&quot;&quot;</span>.join(page_str_list))</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> page_string</span><br></pre></td></tr></table></figure><h3 id="bug"><a href="#bug" class="headerlink" title="bug"></a>bug</h3><ul><li>在搜索下分页查询不保留搜索条件</li></ul><p>在分页的时候，保留搜索条件</p><ul><li><code>pagination.py</code><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">自定义的分页组件，以后如果想要使用分页组件</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">在视图函数中</span></span><br><span class="line"><span class="string">def pretty_list(request):</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    # 根据自己的情况去筛选自己的数据</span></span><br><span class="line"><span class="string">    queryset = models.PrettyNum.objects.all()</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    # 实例化分页对象</span></span><br><span class="line"><span class="string">    page_object = Pagination(request, queryset)</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    context = &#123;</span></span><br><span class="line"><span class="string">        &quot;search_data&quot;: search_data,</span></span><br><span class="line"><span class="string">        &quot;queryset&quot;: page_object.page_queryset,   # 分完页的数据</span></span><br><span class="line"><span class="string">        &quot;page_string&quot;: page_object.html()    # 页码</span></span><br><span class="line"><span class="string">    &#125;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    return render(request, &#x27;pretty_list.html&#x27;, context)</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">在HTML页面中</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">        &#123;% for obj in queryset %&#125;</span></span><br><span class="line"><span class="string">            &#123;&#123; obj.xx &#125;&#125;</span></span><br><span class="line"><span class="string">        &#123;% endfor %&#125;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">        &lt;ul class=&quot;pagination&quot;&gt;</span></span><br><span class="line"><span class="string">            &#123;&#123; page_string &#125;&#125;</span></span><br><span class="line"><span class="string">        &lt;/ul&gt;</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> django.utils.safestring <span class="keyword">import</span> mark_safe</span><br><span class="line"><span class="keyword">import</span> copy</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Pagination</span>(<span class="title class_ inherited__">object</span>):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, request, queryset, page_size=<span class="number">10</span>, page_param=<span class="string">&quot;page&quot;</span>, plus=<span class="number">5</span></span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">        :param request: 请求的对象</span></span><br><span class="line"><span class="string">        :param queryset: 查询的符合条件的数据（根据这个数据进行处理）</span></span><br><span class="line"><span class="string">        :param page_size: 每页显示多少条数据</span></span><br><span class="line"><span class="string">        :param page_param: 在URL中传递的参数</span></span><br><span class="line"><span class="string">        :param plus: 显示当前页的前或后几页</span></span><br><span class="line"><span class="string">        &quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line">        query_dict = copy.deepcopy(request.GET)</span><br><span class="line">        query_dict._mutable = <span class="literal">True</span></span><br><span class="line">        self.query_dict = query_dict</span><br><span class="line"></span><br><span class="line">        self.page_param = page_param</span><br><span class="line">        page = request.GET.get(page_param, <span class="string">&quot;1&quot;</span>)</span><br><span class="line">        <span class="keyword">if</span> page.isdecimal():</span><br><span class="line">            page = <span class="built_in">int</span>(page)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            page = <span class="number">1</span></span><br><span class="line"></span><br><span class="line">        self.page = page</span><br><span class="line">        self.page_size = page_size</span><br><span class="line"></span><br><span class="line">        self.start = (page - <span class="number">1</span>) * page_size</span><br><span class="line">        self.end = page * page_size</span><br><span class="line"></span><br><span class="line">        self.page_queryset = queryset[self.start:self.end]</span><br><span class="line"></span><br><span class="line">        total_count = queryset.count()</span><br><span class="line">        total_page_count, div = <span class="built_in">divmod</span>(total_count, page_size)</span><br><span class="line">        <span class="keyword">if</span> div:</span><br><span class="line">            total_page_count += <span class="number">1</span></span><br><span class="line">        self.total_page_count = total_page_count</span><br><span class="line">        self.plus = plus</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">html</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="comment"># 计算出当前页得到前五页和后五页</span></span><br><span class="line">        <span class="keyword">if</span> self.total_page_count &lt;= <span class="number">2</span> * self.plus + <span class="number">1</span>:</span><br><span class="line">            start_page = <span class="number">1</span></span><br><span class="line">            end_page = self.total_page_count + <span class="number">1</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="comment"># 数据库数据比较多 &gt; 11 页</span></span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> self.page &lt;= self.plus:</span><br><span class="line">                start_page = <span class="number">1</span></span><br><span class="line">                end_page = <span class="number">2</span> * self.plus + <span class="number">1</span></span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                <span class="keyword">if</span> (self.page + self.plus) &gt; self.total_page_count:</span><br><span class="line">                    start_page = self.total_page_count - <span class="number">2</span> * self.plus</span><br><span class="line">                    end_page = self.total_page_count</span><br><span class="line">                <span class="keyword">else</span>:</span><br><span class="line">                    start_page = self.page - self.plus</span><br><span class="line">                    end_page = self.page + self.plus + <span class="number">1</span></span><br><span class="line">        <span class="comment"># 页码</span></span><br><span class="line">        page_str_list = []</span><br><span class="line"></span><br><span class="line">        self.query_dict.setlist(self.page_param,[<span class="number">1</span>])</span><br><span class="line">        page_str_list.append(<span class="string">&#x27;&lt;li&gt;&lt;a href=&quot;?&#123;&#125;&quot;&gt;首页&lt;/a&gt;&lt;/li&gt;&#x27;</span>.<span class="built_in">format</span>(self.query_dict.urlencode()))</span><br><span class="line"></span><br><span class="line">        <span class="comment"># 上一页</span></span><br><span class="line">        <span class="keyword">if</span> self.page &gt; <span class="number">1</span>:</span><br><span class="line">            self.query_dict.setlist(self.page_param, [self.page - <span class="number">1</span>])</span><br><span class="line">            prev = <span class="string">&#x27;&lt;li&gt;&lt;a href=&quot;?&#123;&#125;&quot;&gt;上一页&lt;/a&gt;&lt;/li&gt;&#x27;</span>.<span class="built_in">format</span>(self.query_dict.urlencode())</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            self.query_dict.setlist(self.page_param, [<span class="number">1</span>])</span><br><span class="line">            prev = <span class="string">&#x27;&lt;li&gt;&lt;a href=&quot;?&#123;&#125;&quot;&gt;上一页&lt;/a&gt;&lt;/li&gt;&#x27;</span>.<span class="built_in">format</span>(self.query_dict.urlencode())</span><br><span class="line">        page_str_list.append(prev)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(start_page, end_page):</span><br><span class="line">            self.query_dict.setlist(self.page_param, [i])</span><br><span class="line">            <span class="keyword">if</span> i == self.page:</span><br><span class="line">                ele = <span class="string">&#x27;&lt;li class=&quot;active&quot;&gt;&lt;a href=&quot;?&#123;&#125;&quot;&gt;&#123;&#125;&lt;/a&gt;&lt;/li&gt;&#x27;</span>.<span class="built_in">format</span>(self.query_dict.urlencode(), i)</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                ele = <span class="string">&#x27;&lt;li&gt;&lt;a href=&quot;?&#123;&#125;&quot;&gt;&#123;&#125;&lt;/a&gt;&lt;/li&gt;&#x27;</span>.<span class="built_in">format</span>(self.query_dict.urlencode(), i)</span><br><span class="line">            page_str_list.append(ele)</span><br><span class="line"></span><br><span class="line">        <span class="comment"># 下一页</span></span><br><span class="line">        <span class="keyword">if</span> self.page &lt; self.total_page_count:</span><br><span class="line">            self.query_dict.setlist(self.page_param, [self.page + <span class="number">1</span>])</span><br><span class="line">            self.query_dict.urlencode()</span><br><span class="line">            prev = <span class="string">&#x27;&lt;li&gt;&lt;a href=&quot;?&#123;&#125;&quot;&gt;下一页&lt;/a&gt;&lt;/li&gt;&#x27;</span>.<span class="built_in">format</span>(self.query_dict.urlencode())</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            self.query_dict.setlist(self.page_param, [self.total_page_count])</span><br><span class="line">            prev = <span class="string">&#x27;&lt;li&gt;&lt;a href=&quot;?&#123;&#125;&quot;&gt;下一页&lt;/a&gt;&lt;/li&gt;&#x27;</span>.<span class="built_in">format</span>(self.query_dict.urlencode())</span><br><span class="line">        page_str_list.append(prev)</span><br><span class="line"></span><br><span class="line">        <span class="comment"># 尾页</span></span><br><span class="line">        self.query_dict.setlist(self.page_param, [self.total_page_count])</span><br><span class="line">        page_str_list.append(<span class="string">&#x27;&lt;li&gt;&lt;a href=&quot;?&#123;&#125;&quot;&gt;尾页&lt;/a&gt;&lt;/li&gt;&#x27;</span>.<span class="built_in">format</span>(self.query_dict.urlencode()))</span><br><span class="line"></span><br><span class="line">        search_string = <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">                    &lt;li&gt;</span></span><br><span class="line"><span class="string">                    &lt;form style=&quot;float: left; margin-left: -1px&quot; method=&quot;get&quot;&gt;</span></span><br><span class="line"><span class="string">                        &lt;div class=&quot;input-group&quot; style=&quot;width: 200px&quot; &gt;</span></span><br><span class="line"><span class="string">                            &lt;input type=&quot;text&quot; name=&quot;page&quot; class=&quot;form-control&quot; placeholder=&quot;页数&quot;&gt;</span></span><br><span class="line"><span class="string">                            &lt;span class=&quot;input-group-btn&quot;&gt;</span></span><br><span class="line"><span class="string">                                &lt;button class=&quot;btn btn-default&quot; type=&quot;submit&quot;&gt;跳转&lt;/button&gt;</span></span><br><span class="line"><span class="string">                            &lt;/span&gt;</span></span><br><span class="line"><span class="string">                        &lt;/div&gt;</span></span><br><span class="line"><span class="string">                    &lt;/form&gt;</span></span><br><span class="line"><span class="string">                    &lt;/li&gt;</span></span><br><span class="line"><span class="string">            &quot;&quot;&quot;</span></span><br><span class="line">        page_str_list.append(search_string)</span><br><span class="line"></span><br><span class="line">        page_string = mark_safe(<span class="string">&quot;&quot;</span>.join(page_str_list))</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> page_string</span><br></pre></td></tr></table></figure></li></ul><h3 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h3><ul><li>放在任意py文件中，在用的文件中进行导入</li></ul><img src="/2022/09/19/%E5%9F%BA%E4%BA%8EDjango%E7%9A%84%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F/image-20230409211128007.png" class><ul><li>具体操作说明</li></ul><img src="/2022/09/19/%E5%9F%BA%E4%BA%8EDjango%E7%9A%84%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F/image-20230409211212874.png" class><h2 id="管理员操作"><a href="#管理员操作" class="headerlink" title="管理员操作"></a>管理员操作</h2><h2 id="文件目录结构"><a href="#文件目录结构" class="headerlink" title="文件目录结构"></a>文件目录结构</h2><ul><li><code>urls.py</code></li></ul><img src="/2022/09/19/%E5%9F%BA%E4%BA%8EDjango%E7%9A%84%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F/image-20230409211248197.png" class><ul><li><p><code>admin.py</code></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> django.shortcuts <span class="keyword">import</span> render, redirect</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> app01 <span class="keyword">import</span> models</span><br><span class="line"><span class="keyword">from</span> app01.utils.pagiantion <span class="keyword">import</span> Pagination</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">admin_list</span>(<span class="params">request</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;管理员列表&quot;&quot;&quot;</span></span><br><span class="line">    <span class="comment"># 搜索</span></span><br><span class="line">    data_dict = &#123;&#125;</span><br><span class="line">    search_data = request.GET.get(<span class="string">&#x27;q&#x27;</span>, <span class="string">&quot;&quot;</span>)</span><br><span class="line">    <span class="keyword">if</span> search_data:</span><br><span class="line">        data_dict[<span class="string">&#x27;username__contains&#x27;</span>] = search_data</span><br><span class="line"></span><br><span class="line">    queryset = models.Admin.objects.<span class="built_in">filter</span>(**data_dict)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 分页</span></span><br><span class="line">    page_object = Pagination(request, queryset)</span><br><span class="line">    context = &#123;</span><br><span class="line">        <span class="string">&quot;queryset&quot;</span>: page_object.page_queryset,</span><br><span class="line">        <span class="string">&quot;page_string&quot;</span>: page_object.html(),</span><br><span class="line">        <span class="string">&quot;search_data&quot;</span>: search_data,</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> render(request, <span class="string">&quot;admin_list.html&quot;</span>, context)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> django <span class="keyword">import</span> forms</span><br><span class="line"><span class="keyword">from</span> django.core.exceptions <span class="keyword">import</span> ValidationError</span><br><span class="line"><span class="keyword">from</span> app01.utils.bootstrap <span class="keyword">import</span> BootStrapModelForm</span><br><span class="line"><span class="keyword">from</span> app01.utils.encrtpt <span class="keyword">import</span> md5</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">AdminModelForm</span>(<span class="title class_ inherited__">BootStrapModelForm</span>):</span><br><span class="line">    confirm_password = forms.CharField(</span><br><span class="line">        label=<span class="string">&quot;确认密码&quot;</span>,</span><br><span class="line">        widget=forms.PasswordInput(render_value=<span class="literal">True</span>)</span><br><span class="line">    )</span><br><span class="line"></span><br><span class="line">    <span class="keyword">class</span> <span class="title class_">Meta</span>:</span><br><span class="line">        model = models.Admin</span><br><span class="line">        fields = [<span class="string">&#x27;username&#x27;</span>, <span class="string">&#x27;password&#x27;</span>, <span class="string">&quot;confirm_password&quot;</span>]</span><br><span class="line">        widgets = &#123;</span><br><span class="line">            <span class="string">&quot;password&quot;</span>: forms.PasswordInput(render_value=<span class="literal">True</span>)</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">clean_password</span>(<span class="params">self</span>):</span><br><span class="line">        pwd = self.cleaned_data.get(<span class="string">&quot;password&quot;</span>)</span><br><span class="line">        <span class="keyword">return</span> md5(pwd)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">clean_confirm_password</span>(<span class="params">self</span>):</span><br><span class="line">        pwd = self.cleaned_data.get(<span class="string">&quot;password&quot;</span>)</span><br><span class="line">        confirm = md5(self.cleaned_data.get(<span class="string">&quot;confirm_password&quot;</span>))</span><br><span class="line">        <span class="keyword">if</span> confirm != pwd:</span><br><span class="line">            <span class="keyword">raise</span> ValidationError(<span class="string">&quot;密码不一致&quot;</span>)</span><br><span class="line">        <span class="keyword">return</span> confirm</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">AdminEditModelForm</span>(<span class="title class_ inherited__">BootStrapModelForm</span>):</span><br><span class="line">    <span class="keyword">class</span> <span class="title class_">Meta</span>:</span><br><span class="line">        model = models.Admin</span><br><span class="line">        fields = [<span class="string">&#x27;username&#x27;</span>]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">AdminResetModelForm</span>(<span class="title class_ inherited__">BootStrapModelForm</span>):</span><br><span class="line">    confirm_password = forms.CharField(</span><br><span class="line">        label=<span class="string">&quot;确认密码&quot;</span>,</span><br><span class="line">        widget=forms.PasswordInput(render_value=<span class="literal">True</span>)</span><br><span class="line">    )</span><br><span class="line"></span><br><span class="line">    <span class="keyword">class</span> <span class="title class_">Meta</span>:</span><br><span class="line">        model = models.Admin</span><br><span class="line">        fields = [<span class="string">&#x27;password&#x27;</span> , <span class="string">&#x27;confirm_password&#x27;</span>]</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">clean_password</span>(<span class="params">self</span>):</span><br><span class="line">        pwd = self.cleaned_data.get(<span class="string">&quot;password&quot;</span>)</span><br><span class="line">        md5_pwd = md5(pwd)</span><br><span class="line"></span><br><span class="line">        <span class="comment"># 去数据库校验当前密码和数据库是否一致</span></span><br><span class="line">        exists = models.Admin.objects.<span class="built_in">filter</span>(<span class="built_in">id</span>=self.instance.pk, password=md5_pwd).exists()</span><br><span class="line">        <span class="keyword">if</span> exists:</span><br><span class="line">            <span class="keyword">raise</span> ValidationError(<span class="string">&quot;密码不能与以前的相同&quot;</span>)</span><br><span class="line">        <span class="keyword">return</span> md5(pwd)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">clean_confirm_password</span>(<span class="params">self</span>):</span><br><span class="line">        pwd = self.cleaned_data.get(<span class="string">&quot;password&quot;</span>)</span><br><span class="line">        confirm = md5(self.cleaned_data.get(<span class="string">&quot;confirm_password&quot;</span>))</span><br><span class="line">        <span class="keyword">if</span> confirm != pwd:</span><br><span class="line">            <span class="keyword">raise</span> ValidationError(<span class="string">&quot;密码不一致&quot;</span>)</span><br><span class="line">        <span class="keyword">return</span> confirm</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">admin_add</span>(<span class="params">request</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;添加管理员&quot;&quot;&quot;</span></span><br><span class="line">    title = <span class="string">&quot;新建管理员&quot;</span></span><br><span class="line">    <span class="keyword">if</span> request.method == <span class="string">&quot;GET&quot;</span>:</span><br><span class="line">        form = AdminModelForm()</span><br><span class="line">        <span class="keyword">return</span> render(request, <span class="string">&#x27;change.html&#x27;</span>, &#123;<span class="string">&quot;form&quot;</span>: form, <span class="string">&quot;title&quot;</span>: title&#125;)</span><br><span class="line"></span><br><span class="line">    form = AdminModelForm(data=request.POST)</span><br><span class="line">    <span class="keyword">if</span> form.is_valid():</span><br><span class="line">        form.save()</span><br><span class="line">        <span class="keyword">return</span> redirect(<span class="string">&#x27;/admin/list&#x27;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> render(request, <span class="string">&#x27;change.html&#x27;</span>, &#123;<span class="string">&quot;form&quot;</span>: form, <span class="string">&quot;title&quot;</span>: title&#125;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">admin_edit</span>(<span class="params">request, nid</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;编辑管理员&quot;&quot;&quot;</span></span><br><span class="line">    row_object = models.Admin.objects.<span class="built_in">filter</span>(<span class="built_in">id</span>=nid).first()</span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> row_object:</span><br><span class="line">        <span class="comment"># return render(request, &#x27;error.html&#x27;, &#123;&quot;msg&quot;: &quot;数据不存在&quot;&#125;)</span></span><br><span class="line">        <span class="keyword">return</span> redirect(<span class="string">&#x27;/admin/list/&#x27;</span>)</span><br><span class="line"></span><br><span class="line">    title = <span class="string">&quot;编辑管理员&quot;</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> request.method == <span class="string">&quot;GET&quot;</span>:</span><br><span class="line">        form = AdminEditModelForm(instance=row_object)</span><br><span class="line">        <span class="keyword">return</span> render(request, <span class="string">&#x27;change.html&#x27;</span>, &#123;<span class="string">&quot;form&quot;</span>: form, <span class="string">&quot;title&quot;</span>: title&#125;)</span><br><span class="line"></span><br><span class="line">    form = AdminEditModelForm(data=request.POST, instance=row_object)</span><br><span class="line">    <span class="keyword">if</span> form.is_valid():</span><br><span class="line">        form.save()</span><br><span class="line">        <span class="keyword">return</span> redirect(<span class="string">&#x27;/admin/list/&#x27;</span>)</span><br><span class="line">    <span class="keyword">return</span> render(request, <span class="string">&#x27;change.html&#x27;</span>, &#123;<span class="string">&quot;form&quot;</span>: form, <span class="string">&quot;title&quot;</span>: title&#125;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">admin_delete</span>(<span class="params">request, nid</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;删除管理员&quot;&quot;&quot;</span></span><br><span class="line">    models.Admin.objects.<span class="built_in">filter</span>(<span class="built_in">id</span>=nid).delete()</span><br><span class="line">    <span class="keyword">return</span> redirect(<span class="string">&#x27;/admin/list/&#x27;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">admin_reset</span>(<span class="params">request, nid</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;重置密码&quot;&quot;&quot;</span></span><br><span class="line">    row_object = models.Admin.objects.<span class="built_in">filter</span>(<span class="built_in">id</span>=nid).first()</span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> row_object:</span><br><span class="line">        <span class="keyword">return</span> redirect(<span class="string">&#x27;/admin/list/&#x27;</span>)</span><br><span class="line"></span><br><span class="line">    title = <span class="string">&quot;重置密码-&#123;&#125;&quot;</span>.<span class="built_in">format</span>(row_object.username)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> request.method == <span class="string">&quot;GET&quot;</span>:</span><br><span class="line">        form = AdminResetModelForm()</span><br><span class="line">        <span class="keyword">return</span> render(request, <span class="string">&#x27;change.html&#x27;</span>, &#123;<span class="string">&quot;form&quot;</span>: form ,<span class="string">&quot;title&quot;</span>: title&#125;)</span><br><span class="line">    form = AdminResetModelForm(data=request.POST, instance=row_object)</span><br><span class="line">    <span class="keyword">if</span> form.is_valid():</span><br><span class="line">        form.save()</span><br><span class="line">        <span class="keyword">return</span> redirect(<span class="string">&#x27;/admin/list/&#x27;</span>)</span><br><span class="line">    <span class="keyword">return</span> render(request, <span class="string">&#x27;change.html&#x27;</span>, &#123;<span class="string">&quot;form&quot;</span>: form, <span class="string">&quot;title&quot;</span>: title&#125;)</span><br></pre></td></tr></table></figure></li><li><p><code>admin_list.html</code></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line">&#123;% extends &#x27;layoyt.html&#x27; %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% block content %&#125;</span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;container&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;margin-bottom: 10px&quot;</span> <span class="attr">class</span>=<span class="string">&quot;clearfix&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">&quot;btn btn-success&quot;</span> <span class="attr">href</span>=<span class="string">&quot;/admin/add/&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;glyphicon glyphicon-plus-sign&quot;</span> <span class="attr">aria-hidden</span>=<span class="string">&quot;true&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">                新建管理员</span><br><span class="line">            <span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;float: right; width: 300px;&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">form</span> <span class="attr">method</span>=<span class="string">&quot;get&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;input-group&quot;</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;q&quot;</span> <span class="attr">class</span>=<span class="string">&quot;form-control&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;关键字&quot;</span></span></span><br><span class="line"><span class="tag">                               <span class="attr">value</span>=<span class="string">&quot;&#123;&#123; search_data &#125;&#125;&quot;</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;input-group-btn&quot;</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">button</span> <span class="attr">class</span>=<span class="string">&quot;btn btn-default&quot;</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;glyphicon glyphicon-search&quot;</span> <span class="attr">aria-hidden</span>=<span class="string">&quot;true&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">div</span>&gt;</span><span class="comment">&lt;!-- /input-group --&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;panel panel-default&quot;</span>&gt;</span></span><br><span class="line">                <span class="comment">&lt;!-- Default panel contents --&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;panel-heading&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;glyphicon glyphicon-th-list&quot;</span> <span class="attr">aria-hidden</span>=<span class="string">&quot;true&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">                    管理员列表</span><br><span class="line">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">                <span class="comment">&lt;!-- Table --&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">table</span> <span class="attr">class</span>=<span class="string">&quot;table table-bordered&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">thead</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">th</span>&gt;</span>ID<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">th</span>&gt;</span>用户名<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">th</span>&gt;</span>密码<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">th</span>&gt;</span>重置密码<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">th</span>&gt;</span>操作<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">thead</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">tbody</span>&gt;</span></span><br><span class="line">                    &#123;% for obj in queryset %&#125;</span><br><span class="line">                        <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">th</span>&gt;</span>&#123;&#123; obj.id &#125;&#125;<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">td</span>&gt;</span>&#123;&#123; obj.username&#125;&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">td</span>&gt;</span>********<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">td</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;/admin/&#123;&#123; obj.id &#125;&#125;/reset/&quot;</span>&gt;</span>重置密码<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">td</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">&quot;btn btn-primary btn-xs&quot;</span> <span class="attr">href</span>=<span class="string">&quot;/admin/&#123;&#123; obj.id &#125;&#125;/edit/&quot;</span>&gt;</span>编辑<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">&quot;btn btn-danger btn-xs&quot;</span> <span class="attr">href</span>=<span class="string">&quot;/admin/&#123;&#123; obj.id &#125;&#125;/delete/&quot;</span>&gt;</span>删除<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">                    &#123;% endfor %&#125;</span><br><span class="line">                    <span class="tag">&lt;/<span class="name">tbody</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">ul</span> <span class="attr">class</span>=<span class="string">&quot;pagination&quot;</span>&gt;</span></span><br><span class="line">                &#123;&#123; page_string &#125;&#125;</span><br><span class="line">            <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">&#123;% endblock %&#125;</span><br></pre></td></tr></table></figure></li><li><p><code>change.html</code></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">&#123;% extends &#x27;layoyt.html&#x27; %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% block content %&#125;</span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;container&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;panel panel-default&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;panel-heading&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">h3</span> <span class="attr">class</span>=<span class="string">&quot;panel-title&quot;</span>&gt;</span>&#123;&#123; title &#125;&#125;<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;panel-body&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">form</span> <span class="attr">method</span>=<span class="string">&quot;post&quot;</span> <span class="attr">novalidate</span>&gt;</span></span><br><span class="line">                    &#123;% csrf_token %&#125;</span><br><span class="line"></span><br><span class="line">                    &#123;% for field in form %&#125;</span><br><span class="line">                        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;form-group&quot;</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">label</span>&gt;</span>&#123;&#123; field.label &#125;&#125;<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">                        &#123;&#123; field &#125;&#125;</span><br><span class="line">                            <span class="tag">&lt;<span class="name">span</span> <span class="attr">style</span>=<span class="string">&quot;color: red&quot;</span>&gt;</span></span><br><span class="line">                                &#123;&#123; field.errors.0 &#125;&#125;</span><br><span class="line">                            <span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                    &#123;% endfor %&#125;</span><br><span class="line"></span><br><span class="line">                    <span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">class</span>=<span class="string">&quot;btn btn-primary&quot;</span>&gt;</span>提 交<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">&#123;% endblock %&#125;</span><br></pre></td></tr></table></figure></li><li><p><code>error.html</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&#123;% extends &#x27;layoyt.html&#x27; %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% block content %&#125;</span><br><span class="line">    &lt;div class=&quot;container&quot;&gt;</span><br><span class="line">        &lt;div class=&quot;alert alert-danger&quot; role=&quot;alert&quot;&gt;&#123;&#123; msg &#125;&#125;&lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line"></span><br><span class="line">&#123;% endblock %&#125;</span><br></pre></td></tr></table></figure></li></ul><h2 id="用户登录"><a href="#用户登录" class="headerlink" title="用户登录"></a>用户登录</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">http://127.0.0.1:8000/user/list/</span><br><span class="line">https://127.0.0.1:8000/user/list/</span><br></pre></td></tr></table></figure><ul><li><p>无状态&amp;短链接<br>一次请求一次响应（每次默认为新请求，不携带以前的状态）</p></li><li><p>cookie和session<br>cookie：保存在浏览器上的键值对，发送请求时，自动携带<br>session：服务端存储我们信息的地方<br>发起请求后，网站可以在浏览器上写一个键值对，会给你一个响应体（页面），还有一个响应头（cookie），会生成一个专属的凭证。</p></li></ul><h3 id="登录界面"><a href="#登录界面" class="headerlink" title="登录界面"></a>登录界面</h3><ul><li><p><code>login.html</code></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line">&#123;% load static %&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>用户登录<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">href</span>=<span class="string">&quot;&#123;% static &#x27;plugins/bootstrap3/css/bootstrap.min.css&#x27; %&#125;&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.acount</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">width</span>: <span class="number">400px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">border</span>: <span class="number">1px</span> solid <span class="number">#ddd</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">box-shadow</span>: <span class="number">5px</span> <span class="number">5px</span> <span class="number">5px</span> <span class="number">#aaa</span>;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">            <span class="attribute">margin-left</span>: auto;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">margin-right</span>: auto;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">margin-top</span>: <span class="number">100px</span>;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">            <span class="attribute">padding</span>: <span class="number">20px</span> <span class="number">30px</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.acount</span> <span class="selector-tag">h1</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">text-align</span>: center;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">    </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;acount&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h2</span>&gt;</span>用户登录<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">form</span> <span class="attr">method</span>=<span class="string">&quot;post&quot;</span> <span class="attr">novalidate</span>&gt;</span></span><br><span class="line">        &#123;% csrf_token %&#125;</span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;form-group&quot;</span> &gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">label</span>&gt;</span>用户名<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">            &#123;&#123; form.username &#125;&#125;</span><br><span class="line">            <span class="tag">&lt;<span class="name">span</span> <span class="attr">style</span>=<span class="string">&quot;color: red&quot;</span>&gt;</span>&#123;&#123; form.username.errors.0 &#125;&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;form-group&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">label</span>&gt;</span>密码<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">            &#123;&#123; form.password &#125;&#125;</span><br><span class="line">            <span class="tag">&lt;<span class="name">span</span> <span class="attr">style</span>=<span class="string">&quot;color: red&quot;</span>&gt;</span>&#123;&#123; form.username.errors.0 &#125;&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">class</span>=<span class="string">&quot;btn btn-primary&quot;</span>&gt;</span>登录<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p><code>account.py</code></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> django.shortcuts <span class="keyword">import</span> render, redirect, HttpResponse</span><br><span class="line"><span class="keyword">from</span> django <span class="keyword">import</span> forms</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> app01 <span class="keyword">import</span> models</span><br><span class="line"><span class="keyword">from</span> app01.utils.bootstrap <span class="keyword">import</span> BootStrapForm</span><br><span class="line"><span class="keyword">from</span> app01.utils.encrtpt <span class="keyword">import</span> md5</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">LoginForm</span>(<span class="title class_ inherited__">BootStrapForm</span>):</span><br><span class="line">    username = forms.CharField(</span><br><span class="line">        label=<span class="string">&quot;用户名&quot;</span>,</span><br><span class="line">        widget=forms.TextInput,</span><br><span class="line">        required=<span class="literal">True</span></span><br><span class="line">    )</span><br><span class="line">    password = forms.CharField(</span><br><span class="line">        label=<span class="string">&quot;密码&quot;</span>,</span><br><span class="line">        widget=forms.TextInput,</span><br><span class="line">        required=<span class="literal">True</span></span><br><span class="line">    )</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">clean_password</span>(<span class="params">self</span>):</span><br><span class="line">        pwd = self.cleaned_data.get(<span class="string">&quot;password&quot;</span>)</span><br><span class="line">        <span class="keyword">return</span> md5(pwd)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">login</span>(<span class="params">request</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;登录&quot;&quot;&quot;</span></span><br><span class="line">    <span class="keyword">if</span> request.method == <span class="string">&quot;GET&quot;</span>:</span><br><span class="line">        form = LoginForm()</span><br><span class="line">        <span class="keyword">return</span> render(request, <span class="string">&#x27;login.html&#x27;</span>, &#123;<span class="string">&#x27;form&#x27;</span>: form&#125;)</span><br><span class="line"></span><br><span class="line">    form = LoginForm(data=request.POST)</span><br><span class="line">    <span class="keyword">if</span> form.is_valid():</span><br><span class="line">        <span class="comment"># 验证成功后，获取到的用户名和密码,去数据校验(前提字典的键值和数据库一致)</span></span><br><span class="line">        admin_object = models.Admin.objects.<span class="built_in">filter</span>(**form.cleaned_data).first()</span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> admin_object:</span><br><span class="line">            form.add_error(<span class="string">&quot;username&quot;</span>, <span class="string">&quot;用户名或密码错误&quot;</span>)</span><br><span class="line">            <span class="keyword">return</span> render(request, <span class="string">&#x27;login.html&#x27;</span>, &#123;<span class="string">&#x27;form&#x27;</span>: form&#125;)</span><br><span class="line">        <span class="comment"># 验证通过后</span></span><br><span class="line">        <span class="comment"># 网站生成随机字符串，写到用户浏览器的cookie中：再写入到session中</span></span><br><span class="line">        request.session[<span class="string">&quot;info&quot;</span>] = &#123;<span class="string">&#x27;id&#x27;</span>: admin_object.<span class="built_in">id</span>, <span class="string">&#x27;name&#x27;</span>: admin_object.username&#125;</span><br><span class="line">        <span class="keyword">return</span> redirect(<span class="string">&quot;/admin/list&quot;</span>)</span><br><span class="line">    <span class="keyword">return</span> render(request, <span class="string">&#x27;login.html&#x27;</span>, &#123;<span class="string">&#x27;form&#x27;</span>: form&#125;)</span><br></pre></td></tr></table></figure><h3 id="用户验证"><a href="#用户验证" class="headerlink" title="用户验证"></a>用户验证</h3><p>登录成功后：</p></li><li><p>cookie：随机字符串</p></li><li><p>session：用户信息<br>在其他需要登录才能访问的页面中都需要加入：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">admin_list</span>(<span class="params">request</span>):</span><br><span class="line">    <span class="comment"># 检查用户是否已经登录，已登录，继续，未登录，跳转至登录界面</span></span><br><span class="line">    <span class="comment"># 用户发来的请求，获取cookie随机字符串，拿着字符串看看session有没有</span></span><br><span class="line">    info = request.session.get(<span class="string">&quot;info&quot;</span>)</span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> info:</span><br><span class="line">        <span class="keyword">return</span> redirect(<span class="string">&#x27;/login/&#x27;</span>)</span><br></pre></td></tr></table></figure><p>需要在18个页面都加入，过于繁琐，此时可使用django的中间件</p><h4 id="中间件"><a href="#中间件" class="headerlink" title="中间件"></a>中间件</h4></li><li><p>请求进入网站会通过中间件，出去也会通过中间件（中间件其实就相当一个类）</p></li><li><p>当中间件阻拦请求后，就会从中间件返回，用户就无法访问到视图函数</p></li></ul><p>中间件的使用</p><ul><li>定义中间件<ul><li>写一个类</li></ul></li></ul><img src="/2022/09/19/%E5%9F%BA%E4%BA%8EDjango%E7%9A%84%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F/image-20230409211432200.png" class><ul><li>使用中间件<ul><li>settings.py中注册中间件</li></ul></li></ul><img src="/2022/09/19/%E5%9F%BA%E4%BA%8EDjango%E7%9A%84%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F/image-20230409211451885.png" class><blockquote><p>在中间件中没有返回值继续走，如果有返回值则继续向后走</p></blockquote><h2 id="注销"><a href="#注销" class="headerlink" title="注销"></a>注销</h2><img src="/2022/09/19/%E5%9F%BA%E4%BA%8EDjango%E7%9A%84%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F/image-20230409211519897.png" class><img src="/2022/09/19/%E5%9F%BA%E4%BA%8EDjango%E7%9A%84%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F/image-20230409211601689.png" class><img src="/2022/09/19/%E5%9F%BA%E4%BA%8EDjango%E7%9A%84%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F/image-20230409211621794.png" class><h2 id="Ajax请求"><a href="#Ajax请求" class="headerlink" title="Ajax请求"></a>Ajax请求</h2><p>浏览器向网站发送请求时候:URL和表单的形式提交</p><ul><li>GET</li><li>POST<br>特点：页面会刷新。<br>除此之外，也可以基于Ajax向后台发请求（页面不会做刷新）</li><li>依赖jQuery</li><li>编写Ajax代码</li></ul><h3 id="get请求"><a href="#get请求" class="headerlink" title="get请求"></a>get请求</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">$.<span class="title function_">ajax</span>(</span><br><span class="line"><span class="attr">url</span>:<span class="string">&quot;发送的地址&quot;</span>,</span><br><span class="line"><span class="attr">type</span>:<span class="string">&quot;get</span></span><br><span class="line"><span class="string">&quot;</span>,</span><br><span class="line"><span class="attr">data</span>:&#123;</span><br><span class="line"><span class="attr">n1</span>:<span class="number">123</span>,</span><br><span class="line"><span class="attr">n2</span>:<span class="number">456</span>,</span><br><span class="line">&#125;</span><br><span class="line"><span class="attr">sucess</span>:<span class="keyword">function</span>(<span class="params">res</span>)&#123;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(res);</span><br><span class="line">&#125;</span><br><span class="line">)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> django.shortcuts <span class="keyword">import</span> render, HttpResponse</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">task_ajak</span>(<span class="params">request</span>):</span><br><span class="line"><span class="built_in">print</span>(request.GET)</span><br><span class="line"><span class="keyword">return</span> HttpResponse(<span class="string">&quot;成功了&quot;</span>)</span><br></pre></td></tr></table></figure><h3 id="post请求"><a href="#post请求" class="headerlink" title="post请求"></a>post请求</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">$.<span class="title function_">ajax</span>(</span><br><span class="line"><span class="attr">url</span>:<span class="string">&quot;发送的地址&quot;</span>,</span><br><span class="line"><span class="attr">type</span>:<span class="string">&quot;post&quot;</span>,</span><br><span class="line"><span class="attr">data</span>:&#123;</span><br><span class="line"><span class="attr">n1</span>:<span class="number">123</span>,</span><br><span class="line"><span class="attr">n2</span>:<span class="number">456</span>,</span><br><span class="line">&#125;</span><br><span class="line"><span class="attr">sucess</span>:<span class="keyword">function</span>(<span class="params">res</span>)&#123;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(res);</span><br><span class="line">&#125;</span><br><span class="line">)</span><br></pre></td></tr></table></figure><p>对于post请求需要携带session，这个过程过于繁琐，可以采用免除csrf_token认证</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> django.shortcuts <span class="keyword">import</span> render, HttpResponse</span><br><span class="line"><span class="keyword">from</span> django.views.decorators.csrf <span class="keyword">import</span> csrf_exempt</span><br><span class="line"></span><br><span class="line"><span class="meta">@csrf_exempt</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">task_ajax</span>(<span class="params">request</span>):</span><br><span class="line"><span class="built_in">print</span>(request.GET)</span><br><span class="line"><span class="built_in">print</span>(request.POST)</span><br><span class="line"><span class="keyword">return</span> HttpResponse(<span class="string">&quot;成功了&quot;</span>)</span><br></pre></td></tr></table></figure><h3 id="关于绑定事件"><a href="#关于绑定事件" class="headerlink" title="关于绑定事件"></a>关于绑定事件</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">&#123;% extends &#x27;layoyt.html&#x27; %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% block content %&#125;</span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;container&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h1</span>&gt;</span>任务管理<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">h3</span>&gt;</span>示例1<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">id</span>=<span class="string">&quot;btn1&quot;</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">class</span>=<span class="string">&quot;btn btn-primary&quot;</span> <span class="attr">value</span>=<span class="string">&quot;点击&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">&#123;% endblock %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% block js %&#125;</span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    $(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">//页面加载完成之后代码自动执行</span></span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">bindBtn1Event</span>();</span></span><br><span class="line"><span class="language-javascript">    &#125;)</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">function</span> <span class="title function_">bindBtn1Event</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">         $(<span class="string">&quot;#btn1&quot;</span>).<span class="title function_">click</span>(<span class="keyword">function</span> (<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">            $.<span class="title function_">ajax</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">url</span>: <span class="string">&#x27;/task/ajax/&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">type</span>: <span class="string">&quot;post&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">data</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">n1</span>: <span class="number">123</span>,</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">n2</span>: <span class="number">456</span></span></span><br><span class="line"><span class="language-javascript">                &#125;,</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">success</span>: <span class="keyword">function</span> (<span class="params">res</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="variable language_">console</span>.<span class="title function_">log</span>(res)</span></span><br><span class="line"><span class="language-javascript">                &#125;</span></span><br><span class="line"><span class="language-javascript">            &#125;)</span></span><br><span class="line"><span class="language-javascript">        &#125;)</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">&#123;% endblock %&#125;</span><br></pre></td></tr></table></figure><h3 id="ajax请求的返回值"><a href="#ajax请求的返回值" class="headerlink" title="ajax请求的返回值"></a>ajax请求的返回值</h3><p>返回的是json格式</p><h4 id="案例：表单"><a href="#案例：表单" class="headerlink" title="案例：表单"></a>案例：表单</h4><img src="/2022/09/19/%E5%9F%BA%E4%BA%8EDjango%E7%9A%84%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F/5f2e0e6c400940d681c2e2fa52aaab12.png" class title="在这里插入图片描述"><ul><li><p><code>task_list.html</code></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line">&#123;% extends &#x27;layoyt.html&#x27; %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% block content %&#125;</span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;container&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;panel panel-default&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;panel-heading&quot;</span>&gt;</span>表单<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;panel-body&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">form</span> <span class="attr">id</span>=<span class="string">&quot;formAdd&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;clearfix&quot;</span>&gt;</span></span><br><span class="line">                    &#123;% for field in form %&#125;</span><br><span class="line">                        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;form-group col-xs-6&quot;</span> <span class="attr">style</span>=<span class="string">&quot;position: relative;margin-bottom: 20px&quot;</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">label</span>&gt;</span>&#123;&#123; field.label &#125;&#125;<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">                            &#123;&#123; field &#125;&#125;</span><br><span class="line">                            <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;error-msg&quot;</span> <span class="attr">style</span>=<span class="string">&quot;color: red;position: absolute&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                    &#123;% endfor %&#125;</span><br><span class="line">                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;col-xs-12&quot;</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">&quot;btnAdd&quot;</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">class</span>=<span class="string">&quot;btn btn-primary&quot;</span>&gt;</span>提 交<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">&#123;% endblock %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% block js %&#125;</span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        $(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">//页面加载完成之后代码自动执行</span></span></span><br><span class="line"><span class="language-javascript">            <span class="title function_">bindBtnAddEvent</span>();</span></span><br><span class="line"><span class="language-javascript">        &#125;)</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">function</span> <span class="title function_">bindBtnAddEvent</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            $(<span class="string">&quot;#btnAdd&quot;</span>).<span class="title function_">click</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                $(<span class="string">&quot;.error-msg&quot;</span>).<span class="title function_">empty</span>();</span></span><br><span class="line"><span class="language-javascript">                $.<span class="title function_">ajax</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">url</span>: <span class="string">&#x27;/task/add/&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">type</span>: <span class="string">&quot;post&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">data</span>: $(<span class="string">&quot;#formAdd&quot;</span>).<span class="title function_">serialize</span>(),</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">dataType</span>: <span class="string">&quot;JSON&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">success</span>: <span class="keyword">function</span> (<span class="params">res</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                        <span class="keyword">if</span>(res.<span class="property">status</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">                            <span class="title function_">alert</span>(<span class="string">&quot;添加成功&quot;</span>)</span></span><br><span class="line"><span class="language-javascript">                        &#125;<span class="keyword">else</span>&#123;</span></span><br><span class="line"><span class="language-javascript">                            $.<span class="title function_">each</span>(res.<span class="property">error</span>,<span class="keyword">function</span> (<span class="params">name,data</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">                                $(<span class="string">&quot;#id_&quot;</span> + name).<span class="title function_">next</span>().<span class="title function_">text</span>(data[<span class="number">0</span>]);</span></span><br><span class="line"><span class="language-javascript">                            &#125;)</span></span><br><span class="line"><span class="language-javascript">                        &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">                    &#125;</span></span><br><span class="line"><span class="language-javascript">                &#125;)</span></span><br><span class="line"><span class="language-javascript">            &#125;)</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">&#123;% endblock %&#125;</span><br></pre></td></tr></table></figure></li><li><p><code>task.py</code></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> json</span><br><span class="line"><span class="keyword">from</span> django <span class="keyword">import</span> forms</span><br><span class="line"><span class="keyword">from</span> django.shortcuts <span class="keyword">import</span> render, HttpResponse</span><br><span class="line"><span class="keyword">from</span> django.http <span class="keyword">import</span> JsonResponse</span><br><span class="line"><span class="keyword">from</span> django.views.decorators.csrf <span class="keyword">import</span> csrf_exempt</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> app01 <span class="keyword">import</span> models</span><br><span class="line"><span class="keyword">from</span> app01.utils.bootstrap <span class="keyword">import</span> BootStrapModelForm</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">TaskModeForm</span>(<span class="title class_ inherited__">BootStrapModelForm</span>):</span><br><span class="line">    <span class="keyword">class</span> <span class="title class_">Meta</span>:</span><br><span class="line">        model = models.Task</span><br><span class="line">        fields = <span class="string">&quot;__all__&quot;</span></span><br><span class="line">        widgets = &#123;</span><br><span class="line">            <span class="comment"># &quot;detail&quot;: forms.Textarea</span></span><br><span class="line">            <span class="string">&quot;detail&quot;</span>: forms.TextInput</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">task_list</span>(<span class="params">request</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;任务列表&quot;&quot;&quot;</span></span><br><span class="line">    form = TaskModeForm</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> render(request, <span class="string">&#x27;task_list.html&#x27;</span> , &#123;<span class="string">&quot;form&quot;</span>:form&#125;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@csrf_exempt</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">task_add</span>(<span class="params">request</span>):</span><br><span class="line">    <span class="built_in">print</span>(request.POST)</span><br><span class="line">    <span class="comment"># 1.用户发送过来的数据进行校验（）</span></span><br><span class="line">    form = TaskModeForm(data=request.POST)</span><br><span class="line">    <span class="keyword">if</span> form.is_valid():</span><br><span class="line">        form.save()</span><br><span class="line">        data_dict = &#123;<span class="string">&quot;status&quot;</span>: <span class="literal">True</span>&#125;</span><br><span class="line">        <span class="keyword">return</span> HttpResponse(json.dumps(data_dict))</span><br><span class="line">    data_dict = &#123;<span class="string">&quot;status&quot;</span>: <span class="literal">False</span>, <span class="string">&#x27;error&#x27;</span>: form.errors&#125;</span><br><span class="line">    <span class="keyword">return</span> HttpResponse(json.dumps(data_dict, ensure_ascii=<span class="literal">False</span>))</span><br></pre></td></tr></table></figure></li></ul><h2 id="基于Ajax的订单管理"><a href="#基于Ajax的订单管理" class="headerlink" title="基于Ajax的订单管理"></a>基于Ajax的订单管理</h2><h3 id="创建表结构"><a href="#创建表结构" class="headerlink" title="创建表结构"></a>创建表结构</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Order</span>(models.Model):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;工单&quot;&quot;&quot;</span></span><br><span class="line">    oid = models.CharField(verbose_name=<span class="string">&quot;订单号&quot;</span>, max_length=<span class="number">64</span>)</span><br><span class="line">    title = models.CharField(verbose_name=<span class="string">&quot;名称&quot;</span>, max_length=<span class="number">32</span>)</span><br><span class="line">    price = models.IntegerField(verbose_name=<span class="string">&quot;价格&quot;</span>)</span><br><span class="line"></span><br><span class="line">    status_choices = (</span><br><span class="line">        (<span class="number">1</span>, <span class="string">&quot;待支付&quot;</span>),</span><br><span class="line">        (<span class="number">2</span>, <span class="string">&quot;已支付&quot;</span>),</span><br><span class="line">    )</span><br><span class="line">    status = models.SmallIntegerField(verbose_name=<span class="string">&quot;状态&quot;</span>, choices=status_choices, default=<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">    admin = models.ForeignKey(verbose_name=<span class="string">&quot;管理员&quot;</span>, to=<span class="string">&quot;Admin&quot;</span>, on_delete=models.CASCADE)</span><br></pre></td></tr></table></figure><h3 id="前端页面"><a href="#前端页面" class="headerlink" title="前端页面"></a>前端页面</h3><ul><li><p><code>order_list.html</code></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br></pre></td><td class="code"><pre><span class="line">&#123;% extends &#x27;layoyt.html&#x27; %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% block content %&#125;</span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;container&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">input</span> <span class="attr">id</span>=<span class="string">&quot;btnAdd&quot;</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">value</span>=<span class="string">&quot;新建订单&quot;</span> <span class="attr">class</span>=<span class="string">&quot;btn btn-primary&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;panel panel-default&quot;</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- Default panel contents --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;panel-heading&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;glyphicon glyphicon-th-list&quot;</span> <span class="attr">aria-hidden</span>=<span class="string">&quot;true&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">                订单列表</span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- Table --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">table</span> <span class="attr">class</span>=<span class="string">&quot;table table-bordered&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">thead</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">th</span>&gt;</span>ID<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">th</span>&gt;</span>订单号<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">th</span>&gt;</span>名称<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">th</span>&gt;</span>价格<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">th</span>&gt;</span>状态<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">th</span>&gt;</span>管理员<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">th</span>&gt;</span>操作<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">thead</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">tbody</span>&gt;</span></span><br><span class="line">                &#123;% for obj in queryset %&#125;</span><br><span class="line">                    <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">th</span>&gt;</span>&#123;&#123; obj.id &#125;&#125;<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">td</span>&gt;</span>&#123;&#123; obj.oid &#125;&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">td</span>&gt;</span>&#123;&#123; obj.title &#125;&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">td</span>&gt;</span>&#123;&#123; obj.price &#125;&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">td</span>&gt;</span>&#123;&#123; obj.get_status_display &#125;&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">td</span>&gt;</span>&#123;&#123; obj.admin.username &#125;&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">td</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">input</span> <span class="attr">uid</span>=<span class="string">&quot;&#123;&#123; obj.id &#125;&#125;&quot;</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">class</span>=<span class="string">&quot;btn btn-primary btn-xs btn-edit&quot;</span> <span class="attr">value</span>=<span class="string">&quot;编辑&quot;</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">input</span> <span class="attr">uid</span>=<span class="string">&quot;&#123;&#123; obj.id &#125;&#125;&quot;</span> <span class="attr">class</span>=<span class="string">&quot;btn btn-danger btn-xs btn-delete&quot;</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">value</span>=<span class="string">&quot;删除&quot;</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">                &#123;% endfor %&#125;</span><br><span class="line">                <span class="tag">&lt;/<span class="name">tbody</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">ul</span> <span class="attr">class</span>=<span class="string">&quot;pagination&quot;</span>&gt;</span></span><br><span class="line">            &#123;&#123; page_string &#125;&#125;</span><br><span class="line">        <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- 新建/编辑 订单Modal --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;modal fade&quot;</span> <span class="attr">id</span>=<span class="string">&quot;myModal&quot;</span> <span class="attr">tabindex</span>=<span class="string">&quot;-1&quot;</span> <span class="attr">role</span>=<span class="string">&quot;dialog&quot;</span> <span class="attr">aria-labelledby</span>=<span class="string">&quot;myModalLabel&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;modal-dialog&quot;</span> <span class="attr">role</span>=<span class="string">&quot;document&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;modal-content&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;modal-header&quot;</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">class</span>=<span class="string">&quot;close&quot;</span> <span class="attr">data-dismiss</span>=<span class="string">&quot;modal&quot;</span> <span class="attr">aria-label</span>=<span class="string">&quot;Close&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">span</span></span></span><br><span class="line"><span class="tag">                                <span class="attr">aria-hidden</span>=<span class="string">&quot;true&quot;</span>&gt;</span><span class="symbol">&amp;times;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">h4</span> <span class="attr">class</span>=<span class="string">&quot;modal-title&quot;</span> <span class="attr">id</span>=<span class="string">&quot;myModalLabel&quot;</span>&gt;</span>新建<span class="tag">&lt;/<span class="name">h4</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;modal-body&quot;</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">form</span> <span class="attr">id</span>=<span class="string">&quot;formAdd&quot;</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;clearfix&quot;</span>&gt;</span></span><br><span class="line">                                &#123;% for field in form %&#125;</span><br><span class="line">                                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;form-group col-xs-6&quot;</span> <span class="attr">style</span>=<span class="string">&quot;position: relative;margin-bottom: 20px&quot;</span>&gt;</span></span><br><span class="line">                                        <span class="tag">&lt;<span class="name">label</span>&gt;</span>&#123;&#123; field.label &#125;&#125;<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">                                        &#123;&#123; field &#125;&#125;</span><br><span class="line">                                        <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;error-msg&quot;</span> <span class="attr">style</span>=<span class="string">&quot;color: red;position: absolute&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">                                    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                                &#123;% endfor %&#125;</span><br><span class="line">                            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;modal-footer&quot;</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">class</span>=<span class="string">&quot;btn btn-default&quot;</span> <span class="attr">data-dismiss</span>=<span class="string">&quot;modal&quot;</span>&gt;</span>取 消<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">&quot;btnSave&quot;</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">class</span>=<span class="string">&quot;btn btn-primary&quot;</span>&gt;</span>保 存<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- 删除Modal --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;modal fade&quot;</span> <span class="attr">id</span>=<span class="string">&quot;deleteModal&quot;</span> <span class="attr">tabindex</span>=<span class="string">&quot;-1&quot;</span> <span class="attr">role</span>=<span class="string">&quot;dialog&quot;</span> <span class="attr">aria-labelledby</span>=<span class="string">&quot;myModalLabel&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;modal-dialog&quot;</span> <span class="attr">role</span>=<span class="string">&quot;document&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;alert alert-danger alert-dismissible fade in&quot;</span> <span class="attr">role</span>=<span class="string">&quot;alert&quot;</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">h4</span>&gt;</span>是否确定删除<span class="tag">&lt;/<span class="name">h4</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">p</span>&gt;</span>删除后所有关联的相关数据都将会被删除。<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">p</span> <span class="attr">style</span>=<span class="string">&quot;text-align: right&quot;</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">&quot;btnConfirmDelete&quot;</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">class</span>=<span class="string">&quot;btn btn-danger&quot;</span>&gt;</span>确定<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">class</span>=<span class="string">&quot;btn btn-default&quot;</span> <span class="attr">data-dismiss</span>=<span class="string">&quot;modal&quot;</span>&gt;</span>取消<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">&#123;% endblock %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% block js %&#125;</span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">var</span> <span class="variable constant_">DELETE_ID</span>;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">var</span> <span class="variable constant_">EDIT_ID</span>;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        $(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="title function_">bindBtnAddEvent</span>();</span></span><br><span class="line"><span class="language-javascript">            <span class="title function_">bindBtnSaveEvent</span>();</span></span><br><span class="line"><span class="language-javascript">            <span class="title function_">bindBtnDeleteEvent</span>();</span></span><br><span class="line"><span class="language-javascript">            <span class="title function_">bindBtnConfirmDelete</span>();</span></span><br><span class="line"><span class="language-javascript">            <span class="title function_">bindBtnEditDelete</span>();</span></span><br><span class="line"><span class="language-javascript">        &#125;)</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">function</span> <span class="title function_">bindBtnAddEvent</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            $(<span class="string">&quot;#btnAdd&quot;</span>).<span class="title function_">click</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="comment">// 将当前的编辑置空</span></span></span><br><span class="line"><span class="language-javascript">                <span class="variable constant_">EDIT_ID</span> = <span class="literal">undefined</span>;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">                $(<span class="string">&quot;#formAdd&quot;</span>)[<span class="number">0</span>].<span class="title function_">reset</span>();</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">                $(<span class="string">&#x27;#myModalLabel&#x27;</span>).<span class="title function_">text</span>(<span class="string">&quot;新建&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">                <span class="comment">//点击新建按钮，显示订单</span></span></span><br><span class="line"><span class="language-javascript">                $(<span class="string">&#x27;#myModal&#x27;</span>).<span class="title function_">modal</span>(<span class="string">&#x27;show&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">            &#125;)</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">function</span> <span class="title function_">bindBtnSaveEvent</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            $(<span class="string">&quot;#btnSave&quot;</span>).<span class="title function_">click</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="comment">// 清除错误信息</span></span></span><br><span class="line"><span class="language-javascript">                $(<span class="string">&quot;.error-msg&quot;</span>).<span class="title function_">empty</span>();</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">if</span>(<span class="variable constant_">EDIT_ID</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="comment">// 编辑</span></span></span><br><span class="line"><span class="language-javascript">                    <span class="title function_">doEdit</span>();</span></span><br><span class="line"><span class="language-javascript">                &#125;<span class="keyword">else</span>&#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="comment">// 添加</span></span></span><br><span class="line"><span class="language-javascript">                    <span class="title function_">doAdd</span>();</span></span><br><span class="line"><span class="language-javascript">                &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">            &#125;)</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">function</span> <span class="title function_">doEdit</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="comment">// 向后台发送信息(添加的ajax请求)</span></span></span><br><span class="line"><span class="language-javascript">                $.<span class="title function_">ajax</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">url</span>: <span class="string">&quot;/order/edit/&quot;</span> + <span class="string">&quot;?uid=&quot;</span> + <span class="variable constant_">EDIT_ID</span>, <span class="comment">//编辑的id</span></span></span><br><span class="line"><span class="language-javascript">            <span class="attr">type</span>: <span class="string">&quot;post&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">data</span>: $(<span class="string">&quot;#formAdd&quot;</span>).<span class="title function_">serialize</span>(),</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">dataType</span>: <span class="string">&quot;JSON&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">success</span>: <span class="keyword">function</span> (<span class="params">res</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">if</span> (res.<span class="property">status</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="comment">// 清空表单</span></span></span><br><span class="line"><span class="language-javascript">                    $(<span class="string">&quot;#formAdd&quot;</span>)[<span class="number">0</span>].<span class="title function_">reset</span>();</span></span><br><span class="line"><span class="language-javascript">                    <span class="comment">// 关闭对话框</span></span></span><br><span class="line"><span class="language-javascript">                    $(<span class="string">&#x27;#myModal&#x27;</span>).<span class="title function_">modal</span>(<span class="string">&#x27;hide&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                    location.<span class="title function_">reload</span>();</span></span><br><span class="line"><span class="language-javascript">                &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">if</span> (res.<span class="property">tips</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                        <span class="title function_">alert</span>(res.<span class="property">tips</span>);</span></span><br><span class="line"><span class="language-javascript">                    &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                        $.<span class="title function_">each</span>(res.<span class="property">error</span>, <span class="keyword">function</span> (<span class="params">name, errorList</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                            $(<span class="string">&quot;#id_&quot;</span> + name).<span class="title function_">next</span>().<span class="title function_">text</span>(errorList[<span class="number">0</span>]);</span></span><br><span class="line"><span class="language-javascript">                        &#125;)</span></span><br><span class="line"><span class="language-javascript">                    &#125;</span></span><br><span class="line"><span class="language-javascript">                &#125;</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">        &#125;)</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">function</span> <span class="title function_">doAdd</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="comment">// 向后台发送信息(添加的ajax请求)</span></span></span><br><span class="line"><span class="language-javascript">                $.<span class="title function_">ajax</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">url</span>: <span class="string">&#x27;/order/add/&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">type</span>: <span class="string">&quot;post&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">data</span>: $(<span class="string">&quot;#formAdd&quot;</span>).<span class="title function_">serialize</span>(),</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">dataType</span>: <span class="string">&quot;JSON&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">success</span>: <span class="keyword">function</span> (<span class="params">res</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                        <span class="keyword">if</span> (res.<span class="property">status</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                            <span class="title function_">alert</span>(<span class="string">&quot;创建成功&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">                            $(<span class="string">&quot;#formAdd&quot;</span>)[<span class="number">0</span>].<span class="title function_">reset</span>();</span></span><br><span class="line"><span class="language-javascript">                            $(<span class="string">&#x27;#myModal&#x27;</span>).<span class="title function_">modal</span>(<span class="string">&#x27;hide&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                            location.<span class="title function_">reload</span>();</span></span><br><span class="line"><span class="language-javascript">                        &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                            $.<span class="title function_">each</span>(res.<span class="property">error</span>, <span class="keyword">function</span> (<span class="params">name, errorList</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                                $(<span class="string">&quot;#id_&quot;</span> + name).<span class="title function_">next</span>().<span class="title function_">text</span>(errorList[<span class="number">0</span>]);</span></span><br><span class="line"><span class="language-javascript">                            &#125;)</span></span><br><span class="line"><span class="language-javascript">                        &#125;</span></span><br><span class="line"><span class="language-javascript">                    &#125;</span></span><br><span class="line"><span class="language-javascript">                &#125;)</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">function</span> <span class="title function_">bindBtnDeleteEvent</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            $(<span class="string">&quot;.btn-delete&quot;</span>).<span class="title function_">click</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="comment">// alert(&quot;确认删除&quot;);</span></span></span><br><span class="line"><span class="language-javascript">                $(<span class="string">&#x27;#deleteModal&#x27;</span>).<span class="title function_">modal</span>(<span class="string">&#x27;show&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">                <span class="comment">// 获取uid赋值给全局变量</span></span></span><br><span class="line"><span class="language-javascript">                <span class="variable constant_">DELETE_ID</span> = $(<span class="variable language_">this</span>).<span class="title function_">attr</span>(<span class="string">&quot;uid&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">            &#125;);</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">function</span> <span class="title function_">bindBtnConfirmDelete</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            $(<span class="string">&quot;#btnConfirmDelete&quot;</span>).<span class="title function_">click</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="comment">// 点击确定删除，将DELETEID发送到后台</span></span></span><br><span class="line"><span class="language-javascript">                $.<span class="title function_">ajax</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">url</span>: <span class="string">&quot;/order/delete/&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">type</span>: <span class="string">&quot;GET&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">data</span>:&#123;</span></span><br><span class="line"><span class="language-javascript">                        <span class="attr">uid</span>: <span class="variable constant_">DELETE_ID</span></span></span><br><span class="line"><span class="language-javascript">                    &#125;,</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">dataType</span>: <span class="string">&quot;JSON&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">success</span>: <span class="keyword">function</span> (<span class="params">res</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">                        <span class="keyword">if</span> (res.<span class="property">status</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                            <span class="title function_">alert</span>(<span class="string">&quot;删除成功&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">                            location.<span class="title function_">reload</span>();</span></span><br><span class="line"><span class="language-javascript">                        &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                            <span class="title function_">alert</span>(res.<span class="property">error</span>);</span></span><br><span class="line"><span class="language-javascript">                        &#125;</span></span><br><span class="line"><span class="language-javascript">                    &#125;</span></span><br><span class="line"><span class="language-javascript">                &#125;)</span></span><br><span class="line"><span class="language-javascript">            &#125;)</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">function</span> <span class="title function_">bindBtnEditDelete</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">            $(<span class="string">&quot;.btn-edit&quot;</span>).<span class="title function_">click</span>(<span class="keyword">function</span> (<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">                $(<span class="string">&quot;#formAdd&quot;</span>)[<span class="number">0</span>].<span class="title function_">reset</span>();</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">var</span> uid = $(<span class="variable language_">this</span>).<span class="title function_">attr</span>(<span class="string">&quot;uid&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">                <span class="variable constant_">EDIT_ID</span> = uid;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">                <span class="comment">// 发送ajax请求去后台获取数据</span></span></span><br><span class="line"><span class="language-javascript">                $.<span class="title function_">ajax</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">url</span>: <span class="string">&quot;/order/detail/&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">type</span>: <span class="string">&quot;get&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">data</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">                        <span class="attr">uid</span>: uid</span></span><br><span class="line"><span class="language-javascript">                    &#125;,</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">success</span>: <span class="keyword">function</span> (<span class="params">res</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                        <span class="keyword">if</span> (res.<span class="property">status</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                            <span class="comment">// 将数据赋值</span></span></span><br><span class="line"><span class="language-javascript">                            $.<span class="title function_">each</span>(res.<span class="property">data</span>, <span class="keyword">function</span> (<span class="params">name,value</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">                                $(<span class="string">&quot;#id_&quot;</span> + name).<span class="title function_">val</span>(value);</span></span><br><span class="line"><span class="language-javascript">                            &#125;)</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">                            <span class="comment">// 修改对话框标题</span></span></span><br><span class="line"><span class="language-javascript">                            $(<span class="string">&#x27;#myModalLabel&#x27;</span>).<span class="title function_">text</span>(<span class="string">&quot;编辑&quot;</span>);</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">                            <span class="comment">//点击编辑，显示对话框</span></span></span><br><span class="line"><span class="language-javascript">                            $(<span class="string">&#x27;#myModal&#x27;</span>).<span class="title function_">modal</span>(<span class="string">&#x27;show&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                        &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                            <span class="title function_">alert</span>(res.<span class="property">error</span>);</span></span><br><span class="line"><span class="language-javascript">                        &#125;</span></span><br><span class="line"><span class="language-javascript">                    &#125;</span></span><br><span class="line"><span class="language-javascript">                &#125;)</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">                <span class="comment">// 在对话框中默认看到</span></span></span><br><span class="line"><span class="language-javascript">            &#125;)</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line">&#123;% endblock %&#125;</span><br></pre></td></tr></table></figure><h3 id="后台管理"><a href="#后台管理" class="headerlink" title="后台管理"></a>后台管理</h3></li><li><p><code>order.py</code></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> random</span><br><span class="line"><span class="keyword">from</span> datetime <span class="keyword">import</span> datetime</span><br><span class="line"><span class="keyword">from</span> django.shortcuts <span class="keyword">import</span> render</span><br><span class="line"><span class="keyword">from</span> django.http <span class="keyword">import</span> JsonResponse</span><br><span class="line"><span class="keyword">from</span> django.views.decorators.csrf <span class="keyword">import</span> csrf_exempt</span><br><span class="line"><span class="keyword">from</span> app01.utils.bootstrap <span class="keyword">import</span> BootStrapModelForm</span><br><span class="line"><span class="keyword">from</span> app01 <span class="keyword">import</span> models</span><br><span class="line"><span class="keyword">from</span> app01.utils.pagiantion <span class="keyword">import</span> Pagination</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">OrderModelForm</span>(<span class="title class_ inherited__">BootStrapModelForm</span>):</span><br><span class="line">    <span class="keyword">class</span> <span class="title class_">Meta</span>:</span><br><span class="line">        model = models.Order</span><br><span class="line">        <span class="comment"># fields = &quot;__all__&quot;</span></span><br><span class="line">        exclude = [<span class="string">&quot;oid&quot;</span>, <span class="string">&quot;admin&quot;</span>]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">order_list</span>(<span class="params">request</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;订单列表&quot;&quot;&quot;</span></span><br><span class="line">    queryset = models.Order.objects.<span class="built_in">all</span>().order_by(<span class="string">&#x27;-id&#x27;</span>)</span><br><span class="line">    page_object = Pagination(request, queryset)</span><br><span class="line"></span><br><span class="line">    form = OrderModelForm</span><br><span class="line"></span><br><span class="line">    context = &#123;</span><br><span class="line">        <span class="string">&quot;form&quot;</span>: form,</span><br><span class="line">        <span class="string">&quot;queryset&quot;</span>: page_object.page_queryset,</span><br><span class="line">        <span class="string">&quot;page_string&quot;</span>: page_object.html()</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> render(request, <span class="string">&#x27;order_list.html&#x27;</span>, context)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@csrf_exempt</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">order_add</span>(<span class="params">request</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;新建订单（ajax）&quot;&quot;&quot;</span></span><br><span class="line">    form = OrderModelForm(data=request.POST)</span><br><span class="line">    <span class="keyword">if</span> form.is_valid():</span><br><span class="line">        <span class="comment"># 生成订单号</span></span><br><span class="line">        form.instance.oid = datetime.now().strftime(<span class="string">&quot;%Y%m%d%H%M%S&quot;</span>) + <span class="built_in">str</span>(random.randint(<span class="number">1000</span>, <span class="number">9999</span>))</span><br><span class="line">        <span class="comment"># 固定设置管理员（当前登录系统的人的id）</span></span><br><span class="line">        form.instance.admin_id = request.session[<span class="string">&quot;info&quot;</span>][<span class="string">&quot;id&quot;</span>]</span><br><span class="line">        <span class="comment"># 保存到数据库</span></span><br><span class="line">        form.save()</span><br><span class="line">        <span class="keyword">return</span> JsonResponse(&#123;<span class="string">&quot;status&quot;</span>: <span class="literal">True</span>&#125;)</span><br><span class="line">    <span class="keyword">return</span> JsonResponse(&#123;<span class="string">&quot;status&quot;</span>: <span class="literal">False</span>, <span class="string">&quot;error&quot;</span>: form.errors&#125;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">order_delete</span>(<span class="params">requeset</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;删除订单&quot;&quot;&quot;</span></span><br><span class="line">    uid = requeset.GET.get(<span class="string">&quot;uid&quot;</span>)</span><br><span class="line">    exists = models.Order.objects.<span class="built_in">filter</span>(<span class="built_in">id</span>=uid).exists()</span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> exists:</span><br><span class="line">        <span class="keyword">return</span> JsonResponse(&#123;<span class="string">&quot;status&quot;</span>: <span class="literal">False</span>, <span class="string">&#x27;error&#x27;</span>:<span class="string">&quot;数据不存在&quot;</span>&#125;)</span><br><span class="line">    models.Order.objects.<span class="built_in">filter</span>(<span class="built_in">id</span>=uid).delete()</span><br><span class="line">    <span class="keyword">return</span> JsonResponse(&#123;<span class="string">&quot;status&quot;</span>: <span class="literal">True</span>&#125;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">order_detail</span>(<span class="params">requeset</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;根据id获取订单详情&quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># 方式一</span></span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    uid = requeset.GET.get(&quot;uid&quot;)</span></span><br><span class="line"><span class="string">    row_object = models.Order.objects.filter(id=uid).first()</span></span><br><span class="line"><span class="string">    if not row_object:</span></span><br><span class="line"><span class="string">        return JsonResponse(&#123;&quot;status&quot;: False, &#x27;error&#x27;: &quot;数据不存在&quot;&#125;)</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    # 从数据库中获取到一个对象 row_object</span></span><br><span class="line"><span class="string">    result = &#123;</span></span><br><span class="line"><span class="string">        &quot;status&quot;: True,</span></span><br><span class="line"><span class="string">        &quot;data&quot;: &#123;</span></span><br><span class="line"><span class="string">            &quot;title&quot;: row_object.title,</span></span><br><span class="line"><span class="string">            &quot;price&quot;: row_object.price,</span></span><br><span class="line"><span class="string">            &quot;status&quot;: row_object.status,</span></span><br><span class="line"><span class="string">        &#125;</span></span><br><span class="line"><span class="string">    &#125;0</span></span><br><span class="line"><span class="string">    return JsonResponse(&#123;&quot;status&quot;: True, &quot;data&quot;: result&#125;)</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># 方式二</span></span><br><span class="line">    uid = requeset.GET.get(<span class="string">&quot;uid&quot;</span>)</span><br><span class="line">    row_dict = models.Order.objects.<span class="built_in">filter</span>(<span class="built_in">id</span>=uid).values(<span class="string">&quot;title&quot;</span>,<span class="string">&quot;price&quot;</span>,<span class="string">&quot;status&quot;</span>).first()</span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> row_dict:</span><br><span class="line">        <span class="keyword">return</span> JsonResponse(&#123;<span class="string">&quot;status&quot;</span>: <span class="literal">False</span>, <span class="string">&#x27;error&#x27;</span>: <span class="string">&quot;数据不存在&quot;</span>&#125;)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 从数据库中获取到一个对象 row_object</span></span><br><span class="line">    result = &#123;</span><br><span class="line">        <span class="string">&quot;status&quot;</span>: <span class="literal">True</span>,</span><br><span class="line">        <span class="string">&quot;data&quot;</span>: row_dict,</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> JsonResponse(result)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@csrf_exempt</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">order_edit</span>(<span class="params">request</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;编辑订单&quot;&quot;&quot;</span></span><br><span class="line">    uid = request.GET.get(<span class="string">&quot;uid&quot;</span>)</span><br><span class="line">    row_object = models.Order.objects.<span class="built_in">filter</span>(<span class="built_in">id</span>=uid).first()</span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> row_object:</span><br><span class="line">        <span class="keyword">return</span> JsonResponse(&#123;<span class="string">&quot;status&quot;</span>: <span class="literal">False</span>, <span class="string">&#x27;tips&#x27;</span>: <span class="string">&quot;数据不存在&quot;</span>&#125;)</span><br><span class="line">    form = OrderModelForm(data=request.POST, instance=row_object)</span><br><span class="line">    <span class="keyword">if</span> form.is_valid():</span><br><span class="line">        form.save()</span><br><span class="line">        <span class="keyword">return</span> JsonResponse(&#123;<span class="string">&quot;status&quot;</span>: <span class="literal">True</span>&#125;)</span><br><span class="line">    <span class="keyword">return</span> JsonResponse(&#123;<span class="string">&quot;status&quot;</span>: <span class="literal">False</span>, <span class="string">&#x27;error&#x27;</span>: form.errors&#125;)</span><br></pre></td></tr></table></figure></li><li><p>路径</p></li></ul><img src="/2022/09/19/%E5%9F%BA%E4%BA%8EDjango%E7%9A%84%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F/image-20230409211818226.png" class>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;案例：员工管理系统&quot;&gt;&lt;a href=&quot;#案例：员工管理系统&quot; class=&quot;headerlink&quot; title=&quot;案例：员工管理系统&quot;&gt;&lt;/a&gt;案例：员工管理系统&lt;/h2&gt;&lt;h3 id=&quot;创建项目&quot;&gt;&lt;a href=&quot;#创建项目&quot; class=&quot;headerli</summary>
      
    
    
    
    <category term="Python篇" scheme="http://bkystop.github.io/categories/Python%E7%AF%87/"/>
    
    
    <category term="Python" scheme="http://bkystop.github.io/tags/Python/"/>
    
    <category term="Django" scheme="http://bkystop.github.io/tags/Django/"/>
    
  </entry>
  
  <entry>
    <title>Django框架</title>
    <link href="http://bkystop.github.io/2022/09/15/Django%E6%A1%86%E6%9E%B6/"/>
    <id>http://bkystop.github.io/2022/09/15/Django%E6%A1%86%E6%9E%B6/</id>
    <published>2022-09-15T12:02:40.000Z</published>
    <updated>2023-04-09T13:23:07.493Z</updated>
    
    <content type="html"><![CDATA[<h2 id="安装django"><a href="#安装django" class="headerlink" title="安装django"></a>安装django</h2><ul><li>终端执行并安装django<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install django</span><br></pre></td></tr></table></figure></li><li><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">c:\python3.9</span><br><span class="line">-python.exe</span><br><span class="line">-bin</span><br><span class="line">-script</span><br><span class="line">-pip.exe</span><br><span class="line">-django-admin.exe  (工具，帮助创建django项目)</span><br><span class="line"> -lib</span><br><span class="line">-内置模块</span><br><span class="line">-site-packages</span><br><span class="line">- openpyxl</span><br><span class="line">- flask</span><br><span class="line">- django （框架的源码）</span><br><span class="line"></span><br></pre></td></tr></table></figure></li></ul><h3 id="创建项目"><a href="#创建项目" class="headerlink" title="创建项目"></a>创建项目</h3><ul><li>打开pycharm进入创建django文件</li></ul><img src="/2022/09/15/Django%E6%A1%86%E6%9E%B6/image-20230409200716585.png" class><ul><li>出现类似目录即为创建成功（不同版本略有不同）</li></ul><p><strong>还有一种命令行创建的，命令行创建的是最标准的，不会有templates目录，pycharm会自动帮助我们创建templates目录</strong></p><p>我们学习的时候使用的最标准的templates目录</p><ul><li>删除templates目录</li><li>pycharm还在settings.py中自动生成了一句话</li></ul><img src="/2022/09/15/Django%E6%A1%86%E6%9E%B6/image-20230409200831041.png" class><ul><li>修改成如下（直接删除）</li></ul><img src="/2022/09/15/Django%E6%A1%86%E6%9E%B6/image-20230409200848298.png" class><h3 id="打开终端"><a href="#打开终端" class="headerlink" title="打开终端"></a>打开终端</h3><ul><li>默认已经进入我们的文件</li></ul><img src="/2022/09/15/Django%E6%A1%86%E6%9E%B6/image-20230409201022695.png" class><ul><li>输入命令即可完成创建<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python manage.py startapp app01</span><br></pre></td></tr></table></figure></li></ul><img src="/2022/09/15/Django%E6%A1%86%E6%9E%B6/image-20230409201103081.png" class><h2 id="djangoProject默认文件介绍"><a href="#djangoProject默认文件介绍" class="headerlink" title="djangoProject默认文件介绍"></a>djangoProject默认文件介绍</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">djangoProject</span><br><span class="line">- manage.py (项目的管理，启动项目，创建app，数据管理)（不需要修改）(常用)</span><br><span class="line">- djangoProject  （与项目同名）</span><br><span class="line">- _init_,py </span><br><span class="line">- settings.py (项目配置) （经常常修改）</span><br><span class="line">- urls.py（URL和python函数的对应关系）（经常修改）</span><br><span class="line">- asgi.py  （接收网络请求）（不需要修改）</span><br><span class="line">- wsgi.py （接收网络请求）（不需要修改）</span><br></pre></td></tr></table></figure><ul><li>app的项目目录</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">- 项目</span><br><span class="line">- app，用户管理 （表结构，函数，HTML模板，css）(各自独立，相互不影响)</span><br><span class="line">- app，订单管理   （表结构，函数，HTML模板，css）</span><br><span class="line">- app，后台管理    （表结构，函数，HTML模板，css）</span><br><span class="line">- app，网页</span><br><span class="line">- app，API </span><br></pre></td></tr></table></figure><ul><li>app01文件目录</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">- app01</span><br><span class="line">- _init_.py</span><br><span class="line">- admin.py (固定不用动)   django提供了默认的admin后台管理</span><br><span class="line">- apps.py (固定不用动) app启动类</span><br><span class="line">- migrations.py (固定不用动) 数据库变更记录</span><br><span class="line">-  _init_.py </span><br><span class="line">- models.py  （常用） 对数据库操作</span><br><span class="line">- tests.py  (固定不用动)  单元测试</span><br><span class="line">- views.py  （常用） 写函数</span><br></pre></td></tr></table></figure><ul><li><p>创建项目并注册</p><blockquote><p>安装django，在pycharm中创建项目文件夹，终端输入<code>python manage.py startapp app01</code> 完成创建</p><p>在settings.py中注册app，INSTALLED_APPS中的名字与app.py相对应</p></blockquote></li><li><p>页面创建</p><blockquote><p>编写url和视图函数的对应关系，urls.py中写页面网址入口，views中写视图函数</p><p>通过访问对应的url即可看到不同的返回</p><p>在templates中根据app的注册顺序，逐一在templates寻找他们html文件</p></blockquote></li><li><p>静态文件</p><blockquote><p>开发过程中一般将图片，css，js都当作静态文件处理放在static目录下并引用</p></blockquote></li><li><p>请求和响应</p><ul><li>GET</li><li>POST</li></ul></li><li><p>数据库操作</p><blockquote><p>Mysql数据库+pymysql</p><p>Django内部提供了ORM框架，ORM会帮我们将写下的代码翻译成sql语句，再去执行</p><p>安装第三方模块<code>pip install mysqlclient</code></p><p>Django连接数据库</p><blockquote><p>在setting.py中的DATABASES中配置数据库</p><p>django的models.py中创建表,创建好之后使用以下的命令进行书信</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt;python manage.py makemigrations</span><br><span class="line">&gt;python manage.py migrate</span><br></pre></td></tr></table></figure></blockquote></blockquote></li></ul><h2 id="快速上手"><a href="#快速上手" class="headerlink" title="快速上手"></a>快速上手</h2><h3 id="注册app"><a href="#注册app" class="headerlink" title="注册app"></a>注册app</h3><ul><li>这里的名字需要和app.py里的对应</li></ul><img src="/2022/09/15/Django%E6%A1%86%E6%9E%B6/image-20230409201151241.png" class><img src="/2022/09/15/Django%E6%A1%86%E6%9E%B6/image-20230409201205949.png" class><h3 id="编写url和视图函数的对应关系"><a href="#编写url和视图函数的对应关系" class="headerlink" title="编写url和视图函数的对应关系"></a>编写url和视图函数的对应关系</h3><ul><li>urls.py,导入views，修改对应关系</li></ul><img src="/2022/09/15/Django%E6%A1%86%E6%9E%B6/image-20230409201242288.png" class><ul><li>viwes.py,编写视图函数</li></ul><img src="/2022/09/15/Django%E6%A1%86%E6%9E%B6/image-20230409201301334.png" class><h3 id="启动django项目"><a href="#启动django项目" class="headerlink" title="启动django项目"></a>启动django项目</h3><ul><li>命令行启动<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python mange.py runserver</span><br></pre></td></tr></table></figure></li><li>pycharm启动</li></ul><img src="/2022/09/15/Django%E6%A1%86%E6%9E%B6/image-20230409201320325.png" class><ul><li>提示url不对</li></ul><img src="/2022/09/15/Django%E6%A1%86%E6%9E%B6/image-20230409201331284.png" class><ul><li>修改URL，完成启动</li></ul><img src="/2022/09/15/Django%E6%A1%86%E6%9E%B6/image-20230409201357055.png" class><blockquote><p>至此，我们已经创建并运行了一个最简单的django项目</p></blockquote><h2 id="页面创建"><a href="#页面创建" class="headerlink" title="页面创建"></a>页面创建</h2><ul><li><code>urls.py</code>中写页面路径，<code>views.py</code>中写页面函数</li></ul><img src="/2022/09/15/Django%E6%A1%86%E6%9E%B6/image-20230409201503981.png" class title="urls.py"><img src="/2022/09/15/Django%E6%A1%86%E6%9E%B6/image-20230409201544201.png" class title="views.py"><img src="/2022/09/15/Django%E6%A1%86%E6%9E%B6/image-20230409201614862.png" class><ul><li>分别访问这三个页面可以看到不同的返回</li></ul><img src="/2022/09/15/Django%E6%A1%86%E6%9E%B6/image-20230409201633895.png" class><h3 id="templates目录"><a href="#templates目录" class="headerlink" title="templates目录"></a>templates目录</h3><ul><li>默认在app的目录下的templates目录寻找user_list.html（根据app的注册表顺序，逐一去他们的templates的目录寻找）</li></ul><img src="/2022/09/15/Django%E6%A1%86%E6%9E%B6/image-20230409201653104.png" class><h3 id="静态文件"><a href="#静态文件" class="headerlink" title="静态文件"></a>静态文件</h3><ul><li>在开发过程中一般将：图片，css，js都当作静态文件处理。</li></ul><ol><li>static目录<br>在app目录下创建static文件夹</li></ol><img src="/2022/09/15/Django%E6%A1%86%E6%9E%B6/image-20230409201711618.png" class><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&#123;% load static %&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>用户列表<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">href</span>=<span class="string">&quot;&#123;% static &#x27;plugins/bootstrap3/css/bootstrap.css&#x27; %&#125;&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">href</span>=<span class="string">&quot;https://cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span>用户列表<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">class</span>=<span class="string">&quot;btn btn-primary&quot;</span> <span class="attr">value</span>=<span class="string">&quot;提交&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;&#123;% static &#x27;js/jquery-3.6.1.min.js&#x27; %&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;&#123;% static &#x27;plugins/bootstrap3/js/bootstrap.js&#x27; %&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="模板语法"><a href="#模板语法" class="headerlink" title="模板语法"></a>模板语法</h2><p>本质上：在HTML中写一些占位符，由后台返回的数据对这些占位符进行替换和处理。</p><ul><li><p>视图函数中的render内部</p><ul><li>读取含有模板语法的HTML文件</li><li>内部进行渲染，最终得到只包含HTML标签的字符串</li><li>最后将渲染完成的字符串返回给用户浏览器</li></ul></li><li><p>数据替换</p></li></ul><img src="/2022/09/15/Django%E6%A1%86%E6%9E%B6/image-20230409201927228.png" class><ul><li>if语法</li></ul><img src="/2022/09/15/Django%E6%A1%86%E6%9E%B6/image-20230409202118192.png" class><img src="/2022/09/15/Django%E6%A1%86%E6%9E%B6/image-20230409202145424.png" class><h2 id="请求和响应"><a href="#请求和响应" class="headerlink" title="请求和响应"></a>请求和响应</h2><h4 id="请求"><a href="#请求" class="headerlink" title="请求"></a>请求</h4><ul><li> 获取请求方式 GET/POST<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(request.method)</span><br></pre></td></tr></table></figure></li><li>在url上传递值<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(request.GET)</span><br></pre></td></tr></table></figure></li><li>在请求体中提交数据 <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(request.POST)</span><br></pre></td></tr></table></figure><h4 id="响应"><a href="#响应" class="headerlink" title="响应"></a>响应</h4></li><li>内容字符串返回给请求者</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">return</span> HttpResponse(<span class="string">&quot;返回&quot;</span>)</span><br></pre></td></tr></table></figure><ul><li><p>读取HTML的内容+渲染 ——&gt; 将字符串内容返回给用户浏览器</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">return</span> render(request, <span class="string">&#x27;something.html&#x27;</span>,&#123;<span class="string">&quot;title&quot;</span>: <span class="string">&quot;来了&quot;</span>&#125;)</span><br></pre></td></tr></table></figure></li><li><p>让浏览器重定向到其他页面</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">return</span> redirect(<span class="string">&quot;https://www.baidu.com&quot;</span>)</span><br></pre></td></tr></table></figure></li></ul><h4 id="案例：用户登录"><a href="#案例：用户登录" class="headerlink" title="案例：用户登录"></a>案例：用户登录</h4><ul><li>url对应关系</li></ul><img src="/2022/09/15/Django%E6%A1%86%E6%9E%B6/image-20230409202252058.png" class><ul><li><p><code>views.py</code></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">from</span> django.shortcuts <span class="keyword">import</span> render, HttpResponse, redirect</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">login</span>(<span class="params">request</span>):</span><br><span class="line">    <span class="keyword">if</span> request.method == <span class="string">&quot;GET&quot;</span>:</span><br><span class="line">        <span class="keyword">return</span> render(request, <span class="string">&quot;login.html&quot;</span>)</span><br><span class="line">    <span class="comment"># 如果是POST请求，获取用户提交的数据</span></span><br><span class="line">    <span class="comment"># print(request.POST)</span></span><br><span class="line">    username = request.POST.get(<span class="string">&quot;user&quot;</span>)</span><br><span class="line">    password = request.POST.get(<span class="string">&quot;pwd&quot;</span>)</span><br><span class="line">    <span class="keyword">if</span> username == <span class="string">&quot;root&quot;</span> <span class="keyword">and</span> password == <span class="string">&quot;123&quot;</span>:</span><br><span class="line">        <span class="keyword">return</span> HttpResponse(<span class="string">&quot;登录成功&quot;</span>)</span><br><span class="line">        <span class="comment"># return HttpResponse(&quot;登陆失败&quot;)</span></span><br><span class="line">    <span class="keyword">return</span> render(request, <span class="string">&#x27;login.html&#x27;</span>,&#123;<span class="string">&quot;error_msg&quot;</span>: <span class="string">&quot;用户名或密码错误&quot;</span>&#125;)</span><br></pre></td></tr></table></figure></li><li><p><code>login.html</code></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>用户登录<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">method</span>=<span class="string">&quot;post&quot;</span> <span class="attr">action</span>=<span class="string">&quot;/login/&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    &#123;% csrf_token %&#125;</span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;user&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;用户名&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;password&quot;</span> <span class="attr">name</span>=<span class="string">&quot;pwd&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;密码&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">value</span>=<span class="string">&quot;提交&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">span</span> <span class="attr">style</span>=<span class="string">&quot;color: red&quot;</span>&gt;</span>&#123;&#123; error_msg &#125;&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure></li><li><p>CSRF 相当于多了一层验证</p></li></ul><img src="/2022/09/15/Django%E6%A1%86%E6%9E%B6/image-20230409202338694.png" class><ul><li>在form表单中加上一句</li></ul><img src="/2022/09/15/Django%E6%A1%86%E6%9E%B6/image-20230409202350419.png" class><h2 id="数据库操作"><a href="#数据库操作" class="headerlink" title="数据库操作"></a>数据库操作</h2><ul><li><p>MySQL数据库+pymysql</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">import pymysql</span><br><span class="line"></span><br><span class="line"># 连接mysql</span><br><span class="line">conn <span class="operator">=</span> pymysql.connect(host<span class="operator">=</span>&quot;127.0.0.1&quot;, port<span class="operator">=</span><span class="number">3306</span>, <span class="keyword">user</span><span class="operator">=</span>&quot;root&quot;, password<span class="operator">=</span>&quot;root&quot;, charset<span class="operator">=</span><span class="string">&#x27;utf8&#x27;</span>, db<span class="operator">=</span><span class="string">&#x27;bkys&#x27;</span>)</span><br><span class="line"><span class="keyword">cursor</span> <span class="operator">=</span> conn.cursor(<span class="keyword">cursor</span><span class="operator">=</span>pymysql.cursors.DictCursor)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 发送指令(不要用字符串格式化做<span class="keyword">sql</span>的拼接，安全隐患<span class="keyword">sql</span>注入)</span><br><span class="line">cursor.execute(&quot;insert into admin(username,password,mobile) values(&#x27;bkys&#x27;,&#x27;adawd&#x27;,&#x27;2131153245&#x27;)&quot;)</span><br><span class="line">con.commit()</span><br><span class="line"></span><br><span class="line"># 关闭</span><br><span class="line">cursor.close()</span><br><span class="line">conn.close()</span><br></pre></td></tr></table></figure></li><li><p>在models中写如下类</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Department</span>(models.Model):</span><br><span class="line">    title = models.CharField(max_length=<span class="number">16</span>)</span><br></pre></td></tr></table></figure></li><li><p>执行命令</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">python manage.py makemigrations</span><br><span class="line">python manage.py migrate</span><br></pre></td></tr></table></figure></li></ul><h3 id="安装第三方模块"><a href="#安装第三方模块" class="headerlink" title="安装第三方模块"></a>安装第三方模块</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install mysqlclient</span><br></pre></td></tr></table></figure><ul><li>安装成功</li></ul><img src="/2022/09/15/Django%E6%A1%86%E6%9E%B6/image-20230409203029371.png" class><h3 id="ORM"><a href="#ORM" class="headerlink" title="ORM"></a>ORM</h3><p>ORM会帮我们将写下的代码翻译给sql语句，再去数据库执行</p><ul><li>创建，修改和删除数据库中的表。（无法创建数据库）</li><li>操作表中的数据（不用写SQL语句）</li></ul><ol><li>创建数据库</li></ol><ul><li>启动MySQL服务</li><li>创建数据库</li></ul><ol start="2"><li>django连接数据库<br>在 settings.py文件中配置</li></ol><ul><li>注释原来的</li></ul><img src="/2022/09/15/Django%E6%A1%86%E6%9E%B6/image-20230409203102082.png" class><h3 id="django操作表"><a href="#django操作表" class="headerlink" title="django操作表"></a>django操作表</h3><h4 id="创建表"><a href="#创建表" class="headerlink" title="创建表"></a>创建表</h4><ul><li>在models.py中</li></ul><img src="/2022/09/15/Django%E6%A1%86%E6%9E%B6/image-20230409203122465.png" class><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">UserInfo</span>(models.Model):</span><br><span class="line">    name = models.CharField(max_length=<span class="number">32</span>)</span><br><span class="line">    password = models.CharField(max_length=<span class="number">64</span>)</span><br><span class="line">    age = models.IntegerField()</span><br></pre></td></tr></table></figure><ul><li>这就相当于sql中的</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> app01_userinfo(</span><br><span class="line">    id <span class="type">bigint</span> auto_increment <span class="keyword">primary</span> key,</span><br><span class="line">    name <span class="type">varchar</span>(<span class="number">32</span>),</span><br><span class="line">    password <span class="type">varchar</span>(<span class="number">64</span>),</span><br><span class="line">    age <span class="type">int</span></span><br><span class="line">)</span><br></pre></td></tr></table></figure><ul><li>执行命令<br>前提：app已经注册<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">python manage.py makemigrations</span><br><span class="line">python manage.py migrate</span><br></pre></td></tr></table></figure>执行完命令出现如下字样即为成功</li></ul><img src="/2022/09/15/Django%E6%A1%86%E6%9E%B6/image-20230409203147985.png" class title="image-20230409203147985"><ul><li>此时查看数据库</li></ul><img src="/2022/09/15/Django%E6%A1%86%E6%9E%B6/image-20230409203207954.png" class><img src="/2022/09/15/Django%E6%A1%86%E6%9E%B6/image-20230409203223561.png" class><ul><li>新增表时，在models.py中新增类即可，然后执行命令</li><li>当需要在创建成功的表中修改时候<ul><li>删除：注释后执行命令</li><li>新增：由已存在列中可能由数据，所以需要指定新增对应的数据<ul><li>手动输入一个值</li><li>类中定义一个默认值<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">size = models.IntegerField(default=<span class="number">1</span>)</span><br></pre></td></tr></table></figure></li><li>允许可以为空  <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">size = models.IntegerField(null=<span class="literal">True</span>, blank=<span class="literal">True</span>)</span><br></pre></td></tr></table></figure></li></ul></li></ul></li></ul><h3 id="对表中的数据进行操作"><a href="#对表中的数据进行操作" class="headerlink" title="对表中的数据进行操作"></a>对表中的数据进行操作</h3><ul><li><p>新建</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Department.objects.create(title=<span class="string">&quot;qwe&quot;</span>)</span><br></pre></td></tr></table></figure></li><li><p>删除</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Department.objects.<span class="built_in">filter</span>(<span class="built_in">id</span>=<span class="number">1</span>).delete()  <span class="comment"># 删除id为1</span></span><br><span class="line">Department.objects.<span class="built_in">all</span>().delete()  <span class="comment"># 删除表中所有数据</span></span><br></pre></td></tr></table></figure></li><li><p>获取数据<br>data_list = [行（对象），行（对象），行（对象）]     QuerySet类型</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">data_list = Department.objects.<span class="built_in">all</span>()   <span class="comment"># 获取所有数据</span></span><br><span class="line"><span class="keyword">for</span> obj <span class="keyword">in</span> data_list:</span><br><span class="line">    <span class="built_in">print</span>(obj.<span class="built_in">id</span>, obj.title)</span><br></pre></td></tr></table></figure></li><li><p>更新数据</p></li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Department.objects.<span class="built_in">all</span>().update(title=<span class="string">&quot;aaa&quot;</span>)  <span class="comment"># 更新所有</span></span><br><span class="line">Department.objects.<span class="built_in">filter</span>(<span class="built_in">id</span>=<span class="string">&quot;1&quot;</span>).update(title=<span class="string">&quot;aaa&quot;</span>)  <span class="comment"># 更新某行</span></span><br></pre></td></tr></table></figure><h4 id="案例：用户管理"><a href="#案例：用户管理" class="headerlink" title="案例：用户管理"></a>案例：用户管理</h4><ol><li>展示用户列表</li></ol><ul><li>url</li><li>函数<ul><li>获取所有用户数据</li><li>HTML渲染</li></ul></li></ul><img src="/2022/09/15/Django%E6%A1%86%E6%9E%B6/image-20230409202510634.png" class title="url.py"><img src="/2022/09/15/Django%E6%A1%86%E6%9E%B6/image-20230409202537403.png" class title="view.py和html的代码"><ol start="2"><li>添加用户列表</li></ol><ul><li>url</li><li>函数<ul><li>GET，看到页面，输入内容</li><li>POST，提交，写入数据库 </li></ul></li></ul><img src="/2022/09/15/Django%E6%A1%86%E6%9E%B6/image-20230409202622739.png" class><img src="/2022/09/15/Django%E6%A1%86%E6%9E%B6/image-20230409202646474.png" class><ol start="3"><li>删除用户</li></ol><ul><li>url</li><li><code>views.py</code>函数</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">info_delete</span>(<span class="params">request</span>):</span><br><span class="line">    nid = request.GET.get(<span class="string">&#x27;nid&#x27;</span>)</span><br><span class="line">    UserInfo.objects.<span class="built_in">filter</span>(<span class="built_in">id</span>=nid).delete()</span><br><span class="line">    <span class="keyword">return</span> HttpResponse(<span class="string">&quot;删除成功&quot;</span>)</span><br></pre></td></tr></table></figure><h4 id="用户管理界面"><a href="#用户管理界面" class="headerlink" title="用户管理界面"></a>用户管理界面</h4><p>进行优化，使得添加和删除在一个页面</p><ul><li><code>models.py</code></li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> django.db <span class="keyword">import</span> models</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">UserInfo</span>(models.Model):</span><br><span class="line">    name = models.CharField(max_length=<span class="number">32</span>)</span><br><span class="line">    password = models.CharField(max_length=<span class="number">64</span>)</span><br><span class="line">    age = models.IntegerField()</span><br></pre></td></tr></table></figure><ul><li><code>views.py</code></li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> django.shortcuts <span class="keyword">import</span> render, HttpResponse, redirect, redirect</span><br><span class="line"><span class="keyword">from</span> requests <span class="keyword">import</span> request</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> app01.models <span class="keyword">import</span> UserInfo</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">info_list</span>(<span class="params">request</span>):</span><br><span class="line">    <span class="comment"># 创建数据</span></span><br><span class="line">    <span class="comment"># UserInfo.objects.create(name=&quot;bkys&quot;, password=&quot;123&quot;, age=&quot;20&quot;)</span></span><br><span class="line">    <span class="comment"># 获取数据库中的所有用户信息</span></span><br><span class="line">    data_list = UserInfo.objects.<span class="built_in">all</span>()</span><br><span class="line">    <span class="built_in">print</span>(data_list)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> render(request, <span class="string">&quot;info_list.html&quot;</span>, &#123;<span class="string">&quot;data_list&quot;</span>: data_list&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">info_add</span>(<span class="params">request</span>):</span><br><span class="line">    <span class="keyword">if</span> request.method == <span class="string">&quot;GET&quot;</span>:</span><br><span class="line">        <span class="keyword">return</span> render(request, <span class="string">&quot;info_add.html&quot;</span>)</span><br><span class="line">    user = request.POST.get(<span class="string">&quot;user&quot;</span>)</span><br><span class="line">    pwd = request.POST.get(<span class="string">&quot;pwd&quot;</span>)</span><br><span class="line">    age = request.POST.get(<span class="string">&quot;age&quot;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 添加到数据库</span></span><br><span class="line">    UserInfo.objects.create(name=user, password=pwd, age=age)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 自动跳转</span></span><br><span class="line">    <span class="keyword">return</span> redirect(<span class="string">&quot;/info/list/&quot;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">info_delete</span>(<span class="params">request</span>):</span><br><span class="line">    nid = request.GET.get(<span class="string">&#x27;nid&#x27;</span>)</span><br><span class="line">    UserInfo.objects.<span class="built_in">filter</span>(<span class="built_in">id</span>=nid).delete()</span><br><span class="line">    <span class="keyword">return</span> redirect(<span class="string">&quot;/info/list/&quot;</span>)</span><br></pre></td></tr></table></figure><ul><li><code>info_add.html</code></li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>添加用户<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">method</span>=<span class="string">&quot;post&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    &#123;% csrf_token %&#125;</span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;user&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;用户名&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;pwd&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;密码&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;age&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;年龄&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">value</span>=<span class="string">&quot;提交&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li><code>info_list.html</code></li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>用户列表<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;/info/add/&quot;</span>&gt;</span>添加<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">table</span> <span class="attr">border</span>=<span class="string">&quot;1&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">thead</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">th</span>&gt;</span>id<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">th</span>&gt;</span>name<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">th</span>&gt;</span>pwd<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">th</span>&gt;</span>age<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">th</span>&gt;</span>操作<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">thead</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tbody</span>&gt;</span></span><br><span class="line">    &#123;% for obj in data_list %&#125;</span><br><span class="line">        <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span>&gt;</span>&#123;&#123; obj.id &#125;&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span>&gt;</span>&#123;&#123; obj.name &#125;&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span>&gt;</span>&#123;&#123; obj.pwd &#125;&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span>&gt;</span>&#123;&#123; obj.age &#125;&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;/info/delete/?nid=&#123;&#123; obj.id &#125;&#125;&quot;</span>&gt;</span>删除<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">    &#123;% endfor %&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">tbody</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li>如下所示</li></ul><img src="/2022/09/15/Django%E6%A1%86%E6%9E%B6/image-20230409202806250.png" class>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;安装django&quot;&gt;&lt;a href=&quot;#安装django&quot; class=&quot;headerlink&quot; title=&quot;安装django&quot;&gt;&lt;/a&gt;安装django&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;终端执行并安装django&lt;figure class=&quot;highlight sh</summary>
      
    
    
    
    <category term="Python篇" scheme="http://bkystop.github.io/categories/Python%E7%AF%87/"/>
    
    
    <category term="Python" scheme="http://bkystop.github.io/tags/Python/"/>
    
    <category term="Django" scheme="http://bkystop.github.io/tags/Django/"/>
    
  </entry>
  
  <entry>
    <title>Flsak框架</title>
    <link href="http://bkystop.github.io/2022/09/07/Flsak%E6%A1%86%E6%9E%B6/"/>
    <id>http://bkystop.github.io/2022/09/07/Flsak%E6%A1%86%E6%9E%B6/</id>
    <published>2022-09-07T13:41:09.000Z</published>
    <updated>2023-04-09T09:07:10.448Z</updated>
    
    <content type="html"><![CDATA[<h2 id="Flask快速开发网站"><a href="#Flask快速开发网站" class="headerlink" title="Flask快速开发网站"></a>Flask快速开发网站</h2><ol><li>终端执行以下命令，安装flask<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip3 install flask</span><br></pre></td></tr></table></figure></li></ol><img src="/2022/09/07/Flsak%E6%A1%86%E6%9E%B6/image-20230407214144304.png" class><img src="/2022/09/07/Flsak%E6%A1%86%E6%9E%B6/image-20230407214201860.png" class><ol start="2"><li>创建python文件夹，并且创建文件（文件名不为flask），以下以<code>web.py</code>为例</li></ol><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> flask <span class="keyword">import</span> Flask  <span class="comment"># 导入flask</span></span><br><span class="line"></span><br><span class="line">app = Flask(__name__)  <span class="comment"># Flsak 是一个类</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建了网址 /show/info 和函数 index 的对应关系</span></span><br><span class="line"><span class="comment"># 用户在浏览器访问网址 /show/info，网站自动执行函数 index</span></span><br><span class="line"><span class="meta">@app.route(<span class="params"><span class="string">&quot;/show/info&quot;</span></span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">index</span>():</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;bkys&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    app.run()</span><br></pre></td></tr></table></figure><ul><li>运行（不同版本运行出来不完全一致，大致相同即可）</li></ul><img src="/2022/09/07/Flsak%E6%A1%86%E6%9E%B6/image-20230407214232779.png" class><ul><li>打开蓝色链接（此时更改网址为）</li></ul><img src="/2022/09/07/Flsak%E6%A1%86%E6%9E%B6/image-20230407214253000.png" class title="image-20230407214253000"><ul><li>即可出现一个网站</li></ul><img src="/2022/09/07/Flsak%E6%A1%86%E6%9E%B6/image-20230407214304747.png" class><ul><li>运行后不会自动结束，此时需要结束的话点击运行窗口左边的红色方框。</li></ul><h2 id="网站优化"><a href="#网站优化" class="headerlink" title="网站优化"></a>网站优化</h2><ul><li>当我们发送一个请求时候，网站给用户返回的本质是字符串，我们可以用标签修改字符串的格式，所以我们需要学习浏览器所能解析的标签，此时就可以控制页面的外观。</li><li>Flask框架为了让写标签方便，我们就可以把标签及字符串写入文件中，它会读取这个文件夹并返回。</li><li>在当前项目目录的创建templates文件夹，并在文件夹中创建index.html文件</li></ul><ol><li>修改<code>web.py</code>中代码为</li></ol><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> flask <span class="keyword">import</span> Flask,render_template  <span class="comment"># 导入flask</span></span><br><span class="line"></span><br><span class="line">app = Flask(__name__)  <span class="comment"># Flsak 是一个类</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建了网址 /show/info 和函数 index 的对应关系</span></span><br><span class="line"><span class="comment"># 用户在浏览器访问网址 /show/info，网站自动执行函数 index</span></span><br><span class="line"><span class="meta">@app.route(<span class="params"><span class="string">&quot;/show/info&quot;</span></span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">index</span>():</span><br><span class="line">    <span class="comment"># Flask内部会自动打开这个文件，并读取内容，将内容返回给用户</span></span><br><span class="line">    <span class="comment"># 默认：去当前项目目录的templates文件夹找</span></span><br><span class="line">    <span class="keyword">return</span> render_template(<span class="string">&quot;index.html&quot;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    app.run()</span><br><span class="line"></span><br></pre></td></tr></table></figure><ol start="2"><li><code>index.html</code>中内容为</li></ol><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span>bkys<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><ol start="3"><li>重新运行web.py<br>此时<code>&lt;h1&gt;</code>标签已经生效</li></ol><img src="/2022/09/07/Flsak%E6%A1%86%E6%9E%B6/image-20230407214428970.png" class><ol start="4"><li>为了让网站更好看，我们就需要学习更多的标签<br>html详解</li></ol><ul><li><p> 编码格式</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span> </span><br></pre></td></tr></table></figure></li><li><p>title标签（每次修改后重新运行）</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">title</span>&gt;</span>我用python搭建的第一个网站<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br></pre></td></tr></table></figure></li></ul><img src="/2022/09/07/Flsak%E6%A1%86%E6%9E%B6/image-20230407214456566.png" class><h3 id="网站请求"><a href="#网站请求" class="headerlink" title="网站请求"></a>网站请求</h3><blockquote><p> 在浏览器的url中写入一个地址，点击回车，访问<br>浏览器会发送数据过去，本质上发送的是字符串<br>GET /info http.1.1\r\n…….<br>POST  /info http.1.1\r\n…….</p></blockquote><ul><li>浏览器向发送请求时<ul><li>GET请求（url访问，表单提交）<br>现象：GET请求，跳转，向后台传入数据会拼接在url上，与url用？拼接。</li><li>POST请求（只能通过表单提交）<br>现象：提交数据不体现在url中，而是在请求体中。</li></ul></li></ul><h2 id="案例：用户注册"><a href="#案例：用户注册" class="headerlink" title="案例：用户注册"></a>案例：用户注册</h2><ul><li>创建项目</li><li>创建Flask代码</li></ul><p>页面上的数据，想要提交到后台：</p><ul><li>form标签内包裹的提交数据的标签<ul><li>提交方式：<code>method=&quot;get&quot;</code></li><li>提交的地址：<code>action=&quot;/xxxx/xxx&quot;</code></li><li>在form标签里还需要一个<code>submbit</code>来提交表单</li></ul></li><li>在form内的一些标签<ul><li>一定要写name属性<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">用户名：<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;uu&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">  密码：<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;password&quot;</span> <span class="attr">name</span>=<span class="string">&quot;pp&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure></li></ul></li></ul><h3 id="GET提交"><a href="#GET提交" class="headerlink" title="GET提交"></a>GET提交</h3><p><code>web.py</code></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> flask <span class="keyword">import</span> Flask,render_template,request</span><br><span class="line"></span><br><span class="line">app = Flask(__name__)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@app.route(<span class="params"><span class="string">&#x27;/register&#x27;</span>, methods=[<span class="string">&#x27;GET&#x27;</span>]</span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">reguister</span>():</span><br><span class="line">    <span class="keyword">return</span> render_template(<span class="string">&#x27;register.html&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="meta">@app.route(<span class="params"><span class="string">&quot;/do/reg&quot;</span>, methods=[<span class="string">&#x27;GET&#x27;</span>]</span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">do_register</span>():</span><br><span class="line">    <span class="comment"># 接收到用户通过GET形式发送过来的</span></span><br><span class="line">    <span class="built_in">print</span>(request.args)</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;注册成功&quot;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    app.run()</span><br></pre></td></tr></table></figure><p><code>register.html</code></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>注册登录<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h3</span>&gt;</span>注册登录<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">form</span> <span class="attr">method</span>=<span class="string">&quot;get&quot;</span> <span class="attr">action</span>=<span class="string">&quot;/do/reg&quot;</span>&gt;</span></span><br><span class="line">        用户名：<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;user&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">        密码：<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;password&quot;</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">value</span>=<span class="string">&quot;submit&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li>submit</li></ul><img src="/2022/09/07/Flsak%E6%A1%86%E6%9E%B6/image-20230407214703937.png" class><ul><li>submit之后的url</li></ul><img src="/2022/09/07/Flsak%E6%A1%86%E6%9E%B6/image-20230407214716076.png" class><p>若<code>web.py</code>做出以下修改</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@app.route(<span class="params"><span class="string">&quot;/do/reg&quot;</span>, methods=[<span class="string">&#x27;GET&#x27;</span>]</span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">do_register</span>():</span><br><span class="line">    <span class="comment"># 接收到用户通过GET形式发送过来的</span></span><br><span class="line">    <span class="built_in">print</span>(request.args)</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;注册成功&quot;</span></span><br></pre></td></tr></table></figure><p>在页面提交后，终端则可输出输入的用户名和密码</p><img src="/2022/09/07/Flsak%E6%A1%86%E6%9E%B6/image-20230407214821112.png" class title="image-20230407214821112"><h3 id="POST提交"><a href="#POST提交" class="headerlink" title="POST提交"></a>POST提交</h3><p>修改<code>web.py</code></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> flask <span class="keyword">import</span> Flask,render_template,request</span><br><span class="line"></span><br><span class="line">app = Flask(__name__)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@app.route(<span class="params"><span class="string">&#x27;/register&#x27;</span>, methods=[<span class="string">&#x27;GET&#x27;</span>]</span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">reguister</span>():</span><br><span class="line">    <span class="keyword">return</span> render_template(<span class="string">&#x27;register.html&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="meta">@app.route(<span class="params"><span class="string">&quot;/post/reg&quot;</span>, methods=[<span class="string">&#x27;POST&#x27;</span>]</span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">post_register</span>():</span><br><span class="line">    <span class="comment"># 接收到用户通过POST形式发送过来的</span></span><br><span class="line">    <span class="built_in">print</span>(request.form)</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;注册成功&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    app.run()</span><br></pre></td></tr></table></figure><p>修改 <code>register.html</code>中</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">method</span>=<span class="string">&quot;post&quot;</span> <span class="attr">action</span>=<span class="string">&quot;/post/reg&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li>submit之后的url</li></ul><img src="/2022/09/07/Flsak%E6%A1%86%E6%9E%B6/image-20230407214846100.png" class title="image-20230407214846100"><ul><li>终端终端返回用户名和密码</li></ul><img src="/2022/09/07/Flsak%E6%A1%86%E6%9E%B6/image-20230407214855834.png" class title="image-20230407214855834"><h2 id="css"><a href="#css" class="headerlink" title="css"></a>css</h2><p>CSS (Cascading Style Sheets，层叠样式表），css是专门用来美化“标签”。，是一种用来为结构化文档（如 HTML 文档）添加样式（字体、间距和颜色等）的计算机语言。</p><ul><li>学习目标一：学习基础css，可以写简单页面和看懂别人的并进行修改。</li><li>使用模块，调整和修改。</li></ul><h3 id="应用css的几种方式"><a href="#应用css的几种方式" class="headerlink" title="应用css的几种方式"></a>应用css的几种方式</h3><p><strong>其中主要使用的为2，3种应用较多</strong></p><ol><li>可以直接写在html标签上</li><li>也可以在html中的head标签上写style（样式）标签</li><li>写到文件中去，<code>comom.css</code>即为我们的样式文件</li></ol><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">href</span>=<span class="string">&quot;common.css&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="在flask中应用"><a href="#在flask中应用" class="headerlink" title="在flask中应用"></a>在flask中应用</h3><ul><li>在flask框架中开发不方便<ul><li>每次都需要重启</li><li>规定有些文件需要放在特定文件夹</li><li>新创建一个页面的时候就需要在python文件中添加函数和html文件</li></ul></li><li>解决方案：在pycharm中，为我们提供了一种非常便捷开发前端页面的工具，当我们写好之后再放入相应的位置，进行集成。</li><li>在html文件的右上角点击相应的浏览器即可查看效果。</li></ul><img src="/2022/09/07/Flsak%E6%A1%86%E6%9E%B6/image-20230407215007905.png" class><h3 id="页面布局"><a href="#页面布局" class="headerlink" title="页面布局"></a>页面布局</h3><ul><li>对于初学者，页面布局是一个很大的问题，往往不知道怎么布局。此时就需要借鉴，查看，分析别人的样式。</li></ul><ol><li>在浏览中使用<code>&lt;F12&gt;</code>查看页面源代码</li><li>点击如图所示位置，此时可以用光标在页面选择自己需要看的部分(以chrome浏览器为例)</li></ol><img src="/2022/09/07/Flsak%E6%A1%86%E6%9E%B6/image-20230407215045424.png" class><ol start="3"><li>光标点击后，源代码即展现在右侧框内</li><li>分析别人的布局，样式，进行划分</li></ol><h3 id="模板-CSS-构建页面"><a href="#模板-CSS-构建页面" class="headerlink" title="模板+CSS+构建页面"></a>模板+CSS+构建页面</h3><ul><li>HTML标签<blockquote><p>固定格式，记住不同标签的效果，熟练使用<br>h /div /span /a /img /ul /li /table /input /form</p></blockquote></li><li>CSS样式<blockquote><p>引用CSS，进行页面划分，再去填充样式<br>高度 /宽度 /块级 /行内 /浮动 /字体 /文字对齐方式 /内边距 /外边距</p></blockquote></li></ul><h4 id="小技巧"><a href="#小技巧" class="headerlink" title="小技巧"></a>小技巧</h4><ul><li>a标签是行内标签，行内标签的高度，内外边距，默认无效，要进行转换。</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">style</span>=<span class="string">&quot;margin-top:22px;display:inline-block&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li>垂直方向居中<ul><li>本文+line-height</li><li>图片+边距</li></ul></li><li>a标签链接后默认有下划线<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.a</span> &#123;</span><br><span class="line"><span class="attribute">text-decoration</span>:none;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li>鼠标放上去之后hover</li></ul><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.c1</span><span class="selector-pseudo">:hover</span>&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">a</span>:hovwe&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>设置透明度,数字可自由设置</li></ul><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">opacity</span>:<span class="number">0.5</span>;  </span><br></pre></td></tr></table></figure><ul><li>hover</li><li> after</li><li>position</li></ul><ol><li>fixed</li></ol><p>固定在窗口的某个位置。</p><ul><li><p>relative和absolute 一般是一起使用，相对的放在旁边</p></li><li><p>boder可以修改边框</p></li><li><p>background-color背景色</p></li></ul><h4 id="注意：以上不是所有css样式"><a href="#注意：以上不是所有css样式" class="headerlink" title="注意：以上不是所有css样式"></a>注意：以上不是所有css样式</h4><ul><li>我们大致了解了页面的样式和标签，具体的所有布局<a href="https://v3.bootcss.com/css/">全局 CSS 样式</a> 之后根据不同模板进行修改即可</li></ul><h4 id="BootStrap"><a href="#BootStrap" class="headerlink" title="BootStrap"></a>BootStrap</h4><ul><li>是别人帮我们已经写好的CSS样式，如果我们想要使用这个BootStrap </li></ul><ol><li>下载BootStrap<ul><li><a href="https://v3.bootcss.com/">BootStrap下载</a></li></ul></li></ol><img src="/2022/09/07/Flsak%E6%A1%86%E6%9E%B6/image-20230407215205338.png" class><ol start="2"><li>使用<ul><li>在页面上引入BootStrap</li><li>编写HTML时候，按照BootStrap的规定编写+自定义</li><li>先创建一个目录结构，如下所示，并将插件的包解压缩后放入plugins中，解压缩后将目录改名称为bootstrap5，放在你的网站目录，例如static目录下，之所以改名是为了书写的时候简单。</li></ul></li></ol><img src="/2022/09/07/Flsak%E6%A1%86%E6%9E%B6/image-20230407215223479.png" class><ul><li>代码如下</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--  引入开发版本  --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">href</span>=<span class="string">&quot;/static/plugins/bootstrap5/css/bootstrap.css&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">value</span>=<span class="string">&quot;提交&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">value</span>=<span class="string">&quot;提交&quot;</span> <span class="attr">class</span>=<span class="string">&quot;btn btn-primary&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">value</span>=<span class="string">&quot;提交&quot;</span> <span class="attr">class</span>=<span class="string">&quot;btn btn-success&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">value</span>=<span class="string">&quot;提交&quot;</span> <span class="attr">class</span>=<span class="string">&quot;btn btn-danger&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li>运行效果如下，此时我们就已经应用了BootStrap中的样式</li></ul><img src="/2022/09/07/Flsak%E6%A1%86%E6%9E%B6/image-20230407215243540.png" class><h2 id="Bootstrap的使用及案例"><a href="#Bootstrap的使用及案例" class="headerlink" title="Bootstrap的使用及案例"></a>Bootstrap的使用及案例</h2><p><strong>注意这里我们使用的是Bootstrap3</strong><br>进入<a href="https://v3.bootcss.com/css/">Bootstrap3使用手册</a></p><ul><li>先将样式表导入</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">href</span>=<span class="string">&quot;/static/plugins/bootstrap3/css/bootstrap.css&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="导航条"><a href="#导航条" class="headerlink" title="导航条"></a>导航条</h3><ul><li>进入Bootstrap3使用手册,点击组件，然后右边找到导航条，复制这一串代码，粘贴到body标签内</li></ul><img src="/2022/09/07/Flsak%E6%A1%86%E6%9E%B6/image-20230407215349579.png" class><ul><li>即可得到如下效果</li></ul><img src="/2022/09/07/Flsak%E6%A1%86%E6%9E%B6/image-20230407215405436.png" class><h3 id="栅格系统"><a href="#栅格系统" class="headerlink" title="栅格系统"></a>栅格系统</h3><p><a href="https://v3.bootcss.com/css/#grid">https://v3.bootcss.com/css/#grid</a></p><ul><li>把整体划分了12格</li><li>分类</li></ul><ol><li>  非响应式<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;col-xs-6&quot;</span> <span class="attr">style</span>=<span class="string">&quot;background-color: red&quot;</span>&gt;</span>1<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;col-xs-6&quot;</span> <span class="attr">style</span>=<span class="string">&quot;background-color: green&quot;</span>&gt;</span>2<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure></li></ol><p>特点：无论如何修改页面大小，其相对不变</p><img src="/2022/09/07/Flsak%E6%A1%86%E6%9E%B6/image-20230407215425910.png" class><ol start="2"><li>响应式</li></ol><p>后面三个为响应式 </p><img src="/2022/09/07/Flsak%E6%A1%86%E6%9E%B6/image-20230407215437077.png" class><p>特点：当屏幕宽度不同，会做出不同的响应</p><img src="/2022/09/07/Flsak%E6%A1%86%E6%9E%B6/image-20230407215448144.png" class><img src="/2022/09/07/Flsak%E6%A1%86%E6%9E%B6/image-20230407215454601.png" class><ul><li>列偏移</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;col-sm-offset-2 col-lg-6&quot;</span> <span class="attr">style</span>=<span class="string">&quot;background-color: red&quot;</span>&gt;</span>1<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><img src="/2022/09/07/Flsak%E6%A1%86%E6%9E%B6/image-20230407215509631.png" class><h3 id="container"><a href="#container" class="headerlink" title="container"></a>container</h3><ul><li>自己写网站的时候，前端页面的修改不可避免。无论用什么框架，都无法避免要用到container。在h5出现之前，我们用的最频繁的html标签是div，span等，可以看到目前主流的css框架，比如bootstrap，用到这样的语义化标识，container是为了分块，更好的设计。</li></ul><img src="/2022/09/07/Flsak%E6%A1%86%E6%9E%B6/image-20230407215605393.png" class><ul><li><p>加上container会居中显示， container-fluid会平铺</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;container&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;col-lg-9&quot;</span>&gt;</span>left<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;col-lg-3&quot;</span>&gt;</span>right<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>效果如下</p></li></ul><img src="/2022/09/07/Flsak%E6%A1%86%E6%9E%B6/image-20230407215643877.png" class><h3 id="面板"><a href="#面板" class="headerlink" title="面板"></a>面板</h3><ul><li>以下面板即用了Bootstrap的导航和栅格系统，面板，媒体对象，分页进行构建的</li></ul><img src="/2022/09/07/Flsak%E6%A1%86%E6%9E%B6/image-20230407215655660.png" class><h3 id="案例"><a href="#案例" class="headerlink" title="案例"></a>案例</h3><ul><li>通过Bootstrap的组件和css进行实现，主要用使用有面板，表格，表单等。</li></ul><h3 id="登录"><a href="#登录" class="headerlink" title="登录"></a>登录</h3><img src="/2022/09/07/Flsak%E6%A1%86%E6%9E%B6/image-20230407215743993.png" class><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>用户登录<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">href</span>=<span class="string">&quot;/static/plugins/bootstrap3/css/bootstrap.css&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.acount</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">width</span>: <span class="number">400px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">border</span>: <span class="number">1px</span> solid <span class="number">#ddd</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">box-shadow</span>: <span class="number">5px</span> <span class="number">5px</span> <span class="number">5px</span> <span class="number">#aaa</span>;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">            <span class="attribute">margin-left</span>: auto;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">margin-right</span>: auto;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">margin-top</span>: <span class="number">100px</span>;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">            <span class="attribute">padding</span>: <span class="number">20px</span> <span class="number">30px</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.acount</span> <span class="selector-tag">h1</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">text-align</span>: center;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">    </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;acount&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h2</span>&gt;</span>用户登录<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">form</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;form-group&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">&quot;exampleInputEmail1&quot;</span>&gt;</span>用户名<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;email&quot;</span> <span class="attr">class</span>=<span class="string">&quot;form-control&quot;</span> <span class="attr">id</span>=<span class="string">&quot;exampleInputEmail1&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;用户名&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;form-group&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">&quot;exampleInputPassword1&quot;</span>&gt;</span>密码<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;password&quot;</span> <span class="attr">class</span>=<span class="string">&quot;form-control&quot;</span> <span class="attr">id</span>=<span class="string">&quot;exampleInputPassword1&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;密码&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">class</span>=<span class="string">&quot;btn btn-primary&quot;</span>&gt;</span>登录<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="后台管理"><a href="#后台管理" class="headerlink" title="后台管理"></a>后台管理</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>后台管理<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">href</span>=<span class="string">&quot;/static/plugins/bootstrap3/css/bootstrap.css&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;navbar navbar-default&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;container&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;navbar-header&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">class</span>=<span class="string">&quot;navbar-toggle collapsed&quot;</span> <span class="attr">data-toggle</span>=<span class="string">&quot;collapse&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">data-target</span>=<span class="string">&quot;#bs-example-navbar-collapse-1&quot;</span> <span class="attr">aria-expanded</span>=<span class="string">&quot;false&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;sr-only&quot;</span>&gt;</span>Toggle navigation<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;icon-bar&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;icon-bar&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;icon-bar&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">&quot;navbar-brand&quot;</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>xxx系统<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;collapse navbar-collapse&quot;</span> <span class="attr">id</span>=<span class="string">&quot;bs-example-navbar-collapse-1&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">ul</span> <span class="attr">class</span>=<span class="string">&quot;nav navbar-nav&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>Link<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>Link<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"></span><br><span class="line">            <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">            <span class="tag">&lt;<span class="name">ul</span> <span class="attr">class</span>=<span class="string">&quot;nav navbar-nav navbar-right&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>登录<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>注册<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;container&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;panel panel-default&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;panel-heading&quot;</span>&gt;</span>表单区域<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;panel-body&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">form</span> <span class="attr">class</span>=<span class="string">&quot;form-inline&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;form-group&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">label</span> <span class="attr">class</span>=<span class="string">&quot;sr-only&quot;</span> <span class="attr">for</span>=<span class="string">&quot;exampleInputEmail3&quot;</span>&gt;</span>Email address<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;email&quot;</span> <span class="attr">class</span>=<span class="string">&quot;form-control&quot;</span> <span class="attr">id</span>=<span class="string">&quot;exampleInputEmail3&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;Email&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;form-group&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">label</span> <span class="attr">class</span>=<span class="string">&quot;sr-only&quot;</span> <span class="attr">for</span>=<span class="string">&quot;exampleInputPassword3&quot;</span>&gt;</span>Password<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;password&quot;</span> <span class="attr">class</span>=<span class="string">&quot;form-control&quot;</span> <span class="attr">id</span>=<span class="string">&quot;exampleInputPassword3&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;Password&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">class</span>=<span class="string">&quot;btn btn-success&quot;</span>&gt;</span>保存<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;panel panel-default&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;panel-heading&quot;</span>&gt;</span>数据列表<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;panel-body&quot;</span>&gt;</span></span><br><span class="line">            以下是数据</span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">table</span> <span class="attr">class</span>=<span class="string">&quot;table table-bordered table-hover&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">thead</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">th</span>&gt;</span>#<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">th</span>&gt;</span>First Name<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">th</span>&gt;</span>Last Name<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">th</span>&gt;</span>操作<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">thead</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">tbody</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">th</span> <span class="attr">scope</span>=<span class="string">&quot;row&quot;</span>&gt;</span>1<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">td</span>&gt;</span>Mark<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">td</span>&gt;</span>Otto<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">td</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">&quot;btn-primary btn-xs&quot;</span>&gt;</span>编辑<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">&quot;btn-danger btn-xs&quot;</span>&gt;</span>删除<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">th</span> <span class="attr">scope</span>=<span class="string">&quot;row&quot;</span>&gt;</span>2<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">td</span>&gt;</span>Jacob<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">td</span>&gt;</span>Thornton<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">td</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">&quot;btn-primary btn-xs&quot;</span>&gt;</span>编辑<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">&quot;btn-danger btn-xs&quot;</span>&gt;</span>删除<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">th</span> <span class="attr">scope</span>=<span class="string">&quot;row&quot;</span>&gt;</span>3<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">td</span>&gt;</span>Larry<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">td</span>&gt;</span>the Bird<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">td</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">&quot;btn-primary btn-xs&quot;</span>&gt;</span>编辑<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">&quot;btn-danger btn-xs&quot;</span>&gt;</span>删除<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">tbody</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">ul</span> <span class="attr">class</span>=<span class="string">&quot;pagination&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span> <span class="attr">aria-label</span>=<span class="string">&quot;Previous&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">span</span> <span class="attr">aria-hidden</span>=<span class="string">&quot;true&quot;</span>&gt;</span>«<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>1<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>2<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>3<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>4<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>5<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span> <span class="attr">aria-label</span>=<span class="string">&quot;Next&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">span</span> <span class="attr">aria-hidden</span>=<span class="string">&quot;true&quot;</span>&gt;</span>»<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="图标"><a href="#图标" class="headerlink" title="图标"></a>图标</h3><ul><li>我们使用<a href="http://www.fontawesome.com.cn/">fontawesome</a><ul><li>下载</li><li>引入</li><li>使用</li></ul></li></ul><h3 id="jQuery类库"><a href="#jQuery类库" class="headerlink" title="jQuery类库"></a>jQuery类库</h3><ul><li>html就像是骨架，而css进行点缀达到好看的效果，JavaScript就是动态，可以交互。</li><li>bootstrap依赖JavaScript的一个叫jQuery的类库</li></ul><p><a href="https://jquery.com/download/">jQuery</a> 下载文件</p><img src="/2022/09/07/Flsak%E6%A1%86%E6%9E%B6/image-20230407215918571.png" class><ul><li>如图目录存放</li></ul><img src="/2022/09/07/Flsak%E6%A1%86%E6%9E%B6/image-20230407215930896.png" class><ul><li>导入两个JavaScript文件,先导入jQuery，再导入bootstrap</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;static/js/jquery-3.6.1.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;static/plugins/bootstrap3/js/bootstrap.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><p>此时bootstrap中的动态效果即可使用</p><h2 id="JavaScript基础"><a href="#JavaScript基础" class="headerlink" title="JavaScript基础"></a>JavaScript基础</h2><ul><li>JavaScript 是一门编程语言。浏览器就是JavaScript语言的解释器。</li><li>DOM和BOM，相当于编程语言内置的一些模块。python中的re，random之类</li><li>jquery相当于编程语言的第三方模块。例如request是，openpyxl。</li></ul><ul><li>JavaScript就是让程序实现一些动态的效果。<ul><li>点击出现弹出<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.menus</span>&#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">width</span>: <span class="number">200px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">border</span>: <span class="number">1px</span> solid red;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.menus</span> <span class="selector-class">.header</span>&#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">background-color</span>: gold;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">padding</span>: <span class="number">20px</span> <span class="number">10px</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">    </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;menus&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;header&quot;</span> <span class="attr">onclick</span>=<span class="string">&quot;myFunc()&quot;</span>&gt;</span>大标题<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;item&quot;</span>&gt;</span>内容<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">function</span> <span class="title function_">myFunc</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">//alert(&quot;hello&quot;);</span></span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">confirm</span>(<span class="string">&quot;yes or no&quot;</span>)</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure></li></ul></li></ul><h3 id="代码位置"><a href="#代码位置" class="headerlink" title="代码位置"></a>代码位置</h3><ul><li>推荐放到位置2，HTML页面是从上到下逐一进行解析的，如果放在上面 它会先执行js，把JavaScript的执行完才能显示页面，如果JavaScript比较耗时，会长时间无法显示页面，写在后面则是先展示页面。</li></ul><img src="/2022/09/07/Flsak%E6%A1%86%E6%9E%B6/image-20230407220210986.png" class><h3 id="js代码的存在形式"><a href="#js代码的存在形式" class="headerlink" title="js代码的存在形式"></a>js代码的存在形式</h3><ul><li>可以写在当前HTML文件中，也可以单独写在一个文件中进行导入。 </li><li>文件创建在static中，以<code>.js</code>为后缀,一般导入的位置也放在后面。</li></ul><h3 id="注释"><a href="#注释" class="headerlink" title="注释"></a>注释</h3><ul><li>HTML的注释<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 注释--&gt;</span></span><br></pre></td></tr></table></figure></li><li>css的注释，<code>style</code>代码块中<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/* 注释 */</span><br></pre></td></tr></table></figure></li><li>JavaScript的注释，<code>script</code>代码块中<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">// 注释</span><br><span class="line">/* 注释 */</span><br></pre></td></tr></table></figure></li></ul><h3 id="变量"><a href="#变量" class="headerlink" title="变量"></a>变量</h3><p>JavaScript也是一门编程语言，也有变量。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;script type=<span class="string">&quot;text/javascript&quot;</span>&gt;</span><br><span class="line">    <span class="keyword">var</span> name = <span class="string">&quot;bkys&quot;</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(name) <span class="comment">//打印</span></span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><h3 id="字符串类型"><a href="#字符串类型" class="headerlink" title="字符串类型"></a>字符串类型</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 声明</span></span><br><span class="line"><span class="keyword">var</span> name = <span class="string">&quot;bkys&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> name = <span class="string">&quot;bkys&quot;</span>;</span><br></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 常见功能</span></span><br><span class="line"><span class="keyword">var</span> name = <span class="string">&quot;bkys&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> v1 = name.<span class="property">lenth</span>;  <span class="comment">// 获取字符串长度</span></span><br><span class="line"><span class="keyword">var</span> v2 = name[<span class="number">0</span>]  <span class="comment">// 获取name字符串的第一个字</span></span><br><span class="line"><span class="keyword">var</span> v3 = name.<span class="title function_">trim</span>();  <span class="comment">//  去除空白</span></span><br><span class="line"><span class="keyword">var</span> v3 = name.<span class="title function_">substring</span>(<span class="number">2</span>);  <span class="comment">//前取后不取</span></span><br></pre></td></tr></table></figure><h4 id="案例：跑马灯"><a href="#案例：跑马灯" class="headerlink" title="案例：跑马灯"></a>案例：跑马灯</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>跑马灯<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">span</span> <span class="attr">id</span>=<span class="string">&quot;txt&quot;</span>&gt;</span>欢迎光临<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">function</span> <span class="title function_">show</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// 1.去HTML中找到标签并获取它的内容（DOM）</span></span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">var</span> tag = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;txt&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">var</span> dataString = tag.<span class="property">innerText</span>;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// 动态起来，把第一个放在最后面</span></span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">var</span> firstChar = dataString[<span class="number">0</span>];</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">var</span> otherString = dataString.<span class="title function_">substring</span>(<span class="number">1</span>, dataString.<span class="property">length</span>);</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">var</span> newText = otherString + firstChar;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// 在HTML中更新</span></span></span><br><span class="line"><span class="language-javascript">            tag.<span class="property">innerText</span> = newText;</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">//JavaScript中的定时器,每500ms执行一次</span></span></span><br><span class="line"><span class="language-javascript">        <span class="built_in">setInterval</span>(show,<span class="number">500</span>)</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="数组"><a href="#数组" class="headerlink" title="数组"></a>数组</h2><ul><li><p>定义</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> v1 = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>];</span><br><span class="line"><span class="keyword">var</span> v2 = <span class="title class_">Array</span>(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>);</span><br></pre></td></tr></table></figure></li><li><p>操作</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> v1 = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>];</span><br><span class="line"></span><br><span class="line">v1[<span class="number">1</span>]  </span><br><span class="line">v[<span class="number">0</span>] = <span class="string">&quot;2&quot;</span>;  <span class="comment">// 修改</span></span><br><span class="line">v1.<span class="title function_">push</span>(<span class="string">&quot;5&quot;</span>);  <span class="comment">// 尾部追加</span></span><br><span class="line">v1.<span class="title function_">unshift</span>(<span class="string">&quot;0&quot;</span>);  <span class="comment">// 前面追加</span></span><br><span class="line">v1.<span class="title function_">splice</span>(索引位置,<span class="number">0</span>,元素); <span class="comment">// 把元素放在索引的位置</span></span><br><span class="line"></span><br><span class="line">v1.<span class="title function_">pop</span>(); <span class="comment">// 尾部删除</span></span><br><span class="line">v1.<span class="title function_">shift</span>(); <span class="comment">//头部删除 </span></span><br><span class="line">v1.<span class="title function_">splice</span>(索引位置,<span class="number">1</span>);  <span class="comment">// 指定位置删除</span></span><br><span class="line"></span><br></pre></td></tr></table></figure></li><li><p>循环</p></li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> v1 = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>];</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> idx <span class="keyword">in</span> v1) &#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">var</span> i=<span class="number">0</span>; i&lt;v1.<span class="property">lenth</span>; i++) &#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>跳出循环<br>break和continue</li></ul><h4 id="案例：动态数据"><a href="#案例：动态数据" class="headerlink" title="案例：动态数据"></a>案例：动态数据</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>动态创建数据<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">ul</span> <span class="attr">id</span>=<span class="string">&quot;city&quot;</span>&gt;</span></span><br><span class="line">    </span><br><span class="line"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">//发送网络请求，获取数据，显示在页面上</span></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">var</span> cityList = [<span class="string">&quot; 北京&quot;</span>, <span class="string">&quot;上海&quot;</span>, <span class="string">&quot;深圳&quot;</span>];</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">for</span>(<span class="keyword">var</span> idx <span class="keyword">in</span> cityList)&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">var</span> text = cityList[idx];</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">//创建li标签</span></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">var</span> tag = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&quot;li&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 在li标签中写入内容</span></span></span><br><span class="line"><span class="language-javascript">        tag.<span class="property">innerText</span> = text;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">var</span> parentTag = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;city&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">        parentTag.<span class="title function_">append</span>(tag);</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">    </span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span> </span><br></pre></td></tr></table></figure><h3 id="对象"><a href="#对象" class="headerlink" title="对象"></a>对象</h3><ul><li>类似python中的字典</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">info = &#123;</span><br><span class="line"><span class="attr">name</span>:<span class="string">&quot;bkys&quot;</span>,</span><br><span class="line"><span class="attr">age</span>:<span class="number">18</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 操作值</span></span><br><span class="line">info.<span class="property">age</span></span><br><span class="line">info.<span class="property">name</span> = <span class="string">&quot;bkys&quot;</span></span><br><span class="line"></span><br><span class="line">info[<span class="string">&quot;age&quot;</span>]</span><br><span class="line">info[<span class="string">&quot;name&quot;</span>] = <span class="string">&quot;bkys&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">delete</span> info[<span class="string">&quot;age&quot;</span>] </span><br></pre></td></tr></table></figure><ul><li>循环</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">info = &#123;</span><br><span class="line"><span class="attr">name</span>:<span class="string">&quot;bkys&quot;</span>,</span><br><span class="line"><span class="attr">age</span>:<span class="number">18</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">var</span> key <span class="keyword">in</span> info)&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="动态表格"><a href="#动态表格" class="headerlink" title="动态表格"></a>动态表格</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line">&lt;!<span class="variable constant_">DOCTYPE</span> html&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>动态表格<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">table</span> <span class="attr">border</span>=<span class="string">&quot;1&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">thead</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">th</span>&gt;</span>id<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">th</span>&gt;</span>name<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">th</span>&gt;</span>age<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">thead</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">tbody</span> <span class="attr">id</span>=<span class="string">&quot;body&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">tbody</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">table</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="comment">//发送网络请求，获取数据，显示在页面上</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">var</span> datalist = [</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#123;<span class="attr">id</span>: <span class="number">1</span>, <span class="attr">name</span>: <span class="string">&quot;bkys&quot;</span>, <span class="attr">age</span>: <span class="number">19</span>&#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#123;<span class="attr">id</span>: <span class="number">1</span>, <span class="attr">name</span>: <span class="string">&quot;bkys&quot;</span>, <span class="attr">age</span>: <span class="number">19</span>&#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#123;<span class="attr">id</span>: <span class="number">1</span>, <span class="attr">name</span>: <span class="string">&quot;bkys&quot;</span>, <span class="attr">age</span>: <span class="number">19</span>&#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#123;<span class="attr">id</span>: <span class="number">1</span>, <span class="attr">name</span>: <span class="string">&quot;bkys&quot;</span>, <span class="attr">age</span>: <span class="number">19</span>&#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    ];</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">for</span> (<span class="keyword">var</span> idx <span class="keyword">in</span> datalist) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="keyword">var</span> info = datalist[idx];</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="keyword">var</span> tr = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&quot;tr&quot;</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="keyword">for</span> (<span class="keyword">var</span> key <span class="keyword">in</span> info) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="keyword">var</span> text = info[key];</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="keyword">var</span> td = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&#x27;td&#x27;</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            td.<span class="property">innerText</span> = text;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            tr.<span class="title function_">appendChild</span>(td);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="keyword">var</span> bodyTag = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;body&quot;</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        bodyTag.<span class="title function_">appendChild</span>(tr);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span></span><br></pre></td></tr></table></figure><h3 id="条件语句"><a href="#条件语句" class="headerlink" title="条件语句"></a>条件语句</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (条件) &#123;</span><br><span class="line"></span><br><span class="line">&#125; <span class="keyword">else</span>&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (条件) &#123;</span><br><span class="line"></span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span>&#123;</span><br><span class="line"></span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span>&#123;</span><br><span class="line"></span><br><span class="line">&#125;<span class="keyword">else</span>&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="函数"><a href="#函数" class="headerlink" title="函数"></a>函数</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">func</span>(<span class="params"></span>)&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">func</span>()</span><br></pre></td></tr></table></figure><h3 id="DOM"><a href="#DOM" class="headerlink" title="DOM"></a>DOM</h3><p>DOM，就是一个模块，基于这个模块，可以对HTML中的标签进行操作</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//根据id获取标签</span></span><br><span class="line"><span class="keyword">var</span> tag = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;xx&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 获取标签中的文本</span></span><br><span class="line">tag.<span class="property">innerText</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 修改标签中的文本</span></span><br><span class="line">tag.<span class="property">innerText</span> = <span class="string">&quot;bkys&quot;</span>;</span><br></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 创建标签</span></span><br><span class="line"><span class="keyword">var</span> tag = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&#x27;td&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 标签写内容</span></span><br><span class="line">tag.<span class="property">innerText</span> = <span class="string">&quot;bkys&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 将newtag写入tag</span></span><br><span class="line">tag.<span class="title function_">appendChild</span>(newtag);</span><br></pre></td></tr></table></figure><h4 id="事件的绑定"><a href="#事件的绑定" class="headerlink" title="事件的绑定"></a>事件的绑定</h4><ul><li>单击添加和双击添加</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>点击添加<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">value</span>=<span class="string">&quot;单击点击添加&quot;</span> <span class="attr">onclick</span>=<span class="string">&quot;addCityInfo()&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">value</span>=<span class="string">&quot;双击点击添加&quot;</span> <span class="attr">ondblclick</span>=<span class="string">&quot;addCityInfo()&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">ul</span> <span class="attr">id</span>=<span class="string">&quot;city&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">function</span>  <span class="title function_">addCityInfo</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">var</span> newtag = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&quot;li&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">        newtag.<span class="property">innerText</span> = <span class="string">&quot;bkys&quot;</span>;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">var</span> parentTag = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;city&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">        parentTag.<span class="title function_">appendChild</span>(newtag);</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="输入内容添加"><a href="#输入内容添加" class="headerlink" title="输入内容添加"></a>输入内容添加</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>动态表格<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;请输入内容&quot;</span> <span class="attr">id</span>=<span class="string">&quot;txt&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">value</span>=<span class="string">&quot;单击点击添加&quot;</span> <span class="attr">onclick</span>=<span class="string">&quot;addCityInfo()&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">ul</span> <span class="attr">id</span>=<span class="string">&quot;city&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">function</span> <span class="title function_">addCityInfo</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 先获取输入框用户输入的数据</span></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">var</span> txt = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;txt&quot;</span>);</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 读取标签的内容</span></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">var</span> newString = txt.<span class="property">value</span>;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 判断字符串是否为零</span></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">if</span>(newString.<span class="property">length</span> &gt; <span class="number">0</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// 创建标签</span></span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">var</span> newtag = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&quot;li&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">            newtag.<span class="property">innerText</span> = newString;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// 把标签添加到ul中</span></span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">var</span> parentTag = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;city&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">            parentTag.<span class="title function_">appendChild</span>(newtag);</span></span><br><span class="line"><span class="language-javascript">        &#125;<span class="keyword">else</span>&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="title function_">alert</span>(<span class="string">&quot;输入不能为空&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li><strong>注意：DOM中还有很多操做。但是比较繁琐，我们页面中的效果一般都是用jQuery，以后包括vue.js  / react.js</strong></li></ul><h2 id="jQuery类库-1"><a href="#jQuery类库-1" class="headerlink" title="jQuery类库"></a>jQuery类库</h2><p> jQuery是一个JavaScript第三方模块</p><ul><li>基于jQuery，自己开发一个功能。</li><li>现成的工具，依赖jQuery。例如：bootstrap动态效果。</li></ul><h3 id="快速上手"><a href="#快速上手" class="headerlink" title="快速上手"></a>快速上手</h3><ul><li><p>下载jQuery<br><a href="https://jquery.com/download/">jQuery下载</a> 文件</p></li><li><p>应用jQuery</p></li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">h1</span> <span class="attr">id</span>=<span class="string">&quot;txt&quot;</span>&gt;</span>中国联通<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;static/js/jquery-3.6.1.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">//利用jQuery实现某些功能</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">//找到id=txt的标签</span></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">//内容修改</span></span></span><br><span class="line"><span class="language-javascript">        $(<span class="string">&quot;#txt&quot;</span>).<span class="title function_">text</span>(<span class="string">&quot;广西联通&quot;</span>)</span></span><br><span class="line"><span class="language-javascript">        </span></span><br><span class="line"><span class="language-javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="寻找标签"><a href="#寻找标签" class="headerlink" title="寻找标签"></a>寻找标签</h3><p>直接寻找</p><ul><li>id<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">h1</span> <span class="attr">id</span>=<span class="string">&quot;txt&quot;</span>&gt;</span>bkys<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>bkys<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>bkys<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br></pre></td></tr></table></figure></li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">&quot;#txt&quot;</span>)</span><br></pre></td></tr></table></figure><ul><li>样式选择器<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">h1</span> <span class="attr">class</span>=<span class="string">&quot;c1&quot;</span>&gt;</span>bkys<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h1</span> <span class="attr">class</span>=<span class="string">&quot;c2&quot;</span>&gt;</span>bkys<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>bkys<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br></pre></td></tr></table></figure></li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">&quot;.c1&quot;</span>)</span><br></pre></td></tr></table></figure><ul><li>标签选择器</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">h1</span> <span class="attr">class</span>=<span class="string">&quot;c1&quot;</span>&gt;</span>bkys<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span>bkys<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>bkys<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">&quot;h1&quot;</span>)</span><br></pre></td></tr></table></figure><ul><li>层级选择器<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// c1下的c2中的a标签</span></span><br><span class="line">$(<span class="string">&quot;.c1 .c2 a&quot;</span>)</span><br></pre></td></tr></table></figure></li><li>多选择器<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">&quot;#c1, #c3, li&quot;</span>)</span><br></pre></td></tr></table></figure></li><li>属性选择器<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span>, <span class="attr">name</span>=<span class="string">&quot;n1&quot;</span>&gt;</span>    </span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span>, <span class="attr">name</span>=<span class="string">&quot;n1&quot;</span>&gt;</span>    </span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span>, <span class="attr">name</span>=<span class="string">&quot;n3&quot;</span>&gt;</span>   </span><br></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">&quot;input[name = &#x27;n1&#x27;]&quot;</span>)</span><br></pre></td></tr></table></figure></li></ul><p>间接寻找</p><ul><li>找兄弟<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span>1<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;c1&quot;</span>&gt;</span>2<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span>3<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span>4<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure></li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">&quot;#c1&quot;</span>).<span class="title function_">prev</span>()  <span class="comment">//上一个 找到1</span></span><br><span class="line">$(<span class="string">&quot;#c1&quot;</span>).<span class="title function_">next</span>()  <span class="comment">// 下一个 2</span></span><br><span class="line">$(<span class="string">&quot;#c1&quot;</span>).<span class="title function_">next</span>().<span class="title function_">next</span>() <span class="comment">// 下一个的下一个 3</span></span><br><span class="line">$(<span class="string">&quot;#c1&quot;</span>).<span class="title function_">siblings</span>()  <span class="comment">// 所有的兄弟</span></span><br></pre></td></tr></table></figure><ul><li>找父子</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">$(&quot;#c1&quot;).parent() // 父亲</span><br><span class="line">$(&quot;#c1&quot;).parent().parent() // 的父亲</span><br><span class="line"></span><br><span class="line">$(&quot;#c1&quot;).children()  // 所有的儿子</span><br><span class="line">$(&quot;#c1&quot;).children(&quot;.uu&quot;)  // 所有的儿子中寻找class=uu</span><br><span class="line"></span><br><span class="line">$(&quot;#c1&quot;).find(&quot;.uu&quot;)  // 所有的子孙中的uu</span><br><span class="line">$(&quot;#c1&quot;).find(&quot;div&quot;)  // 所有的子孙中的div</span><br></pre></td></tr></table></figure><h4 id="案例：菜单的切换"><a href="#案例：菜单的切换" class="headerlink" title="案例：菜单的切换"></a>案例：菜单的切换</h4><ul><li>点击展开，再点击隐藏</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.menus</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">width</span>: <span class="number">200px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">height</span>: <span class="number">800px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">border</span>: <span class="number">1px</span> solid red;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.menus</span>  <span class="selector-class">.header</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">background-color</span>: gold;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">padding</span>: <span class="number">10px</span> <span class="number">50px</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.menus</span> <span class="selector-class">.content</span> <span class="selector-tag">a</span>&#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">display</span>: block;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">padding</span>: <span class="number">5px</span> <span class="number">5px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">border-bottom</span>: <span class="number">1px</span> dotted gray;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.hide</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">display</span>: none;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">    </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;menus&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;item&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;header&quot;</span> <span class="attr">onclick</span>=<span class="string">&quot;clickMe(this);&quot;</span>&gt;</span>上海<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;content hide&quot;</span> &gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">a</span>&gt;</span>1区<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">a</span>&gt;</span>2区<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">a</span>&gt;</span>3区<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">a</span>&gt;</span>4区<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;item&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;header&quot;</span> <span class="attr">onclick</span>=<span class="string">&quot;clickMe(this);&quot;</span>&gt;</span>北京<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;content hide&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">a</span>&gt;</span>1区<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">a</span>&gt;</span>2区<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">a</span>&gt;</span>3区<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">a</span>&gt;</span>4区<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;static/js/jquery-3.6.1.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">function</span> <span class="title function_">clickMe</span>(<span class="params">self</span>) &#123;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">var</span> hasHide = $(self).<span class="title function_">next</span>().<span class="title function_">hasClass</span>(<span class="string">&quot;hide&quot;</span>);</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">if</span> (hasHide) &#123;</span></span><br><span class="line"><span class="language-javascript">            $(self).<span class="title function_">next</span>().<span class="title function_">removeClass</span>(<span class="string">&quot;hide&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">        &#125; <span class="keyword">else</span>&#123;</span></span><br><span class="line"><span class="language-javascript">            $(self).<span class="title function_">next</span>().<span class="title function_">addClass</span>(<span class="string">&quot;hide&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li>点击一个隐藏其他</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.menus</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">width</span>: <span class="number">200px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">height</span>: <span class="number">800px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">border</span>: <span class="number">1px</span> solid red;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.menus</span>  <span class="selector-class">.header</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">background-color</span>: gold;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">padding</span>: <span class="number">10px</span> <span class="number">50px</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.menus</span> <span class="selector-class">.content</span> <span class="selector-tag">a</span>&#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">display</span>: block;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">padding</span>: <span class="number">5px</span> <span class="number">5px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">border-bottom</span>: <span class="number">1px</span> dotted gray;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.hide</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">display</span>: none;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">    </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;menus&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;item&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;header&quot;</span> <span class="attr">onclick</span>=<span class="string">&quot;clickMe(this);&quot;</span>&gt;</span>上海<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;content hide&quot;</span> &gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">a</span>&gt;</span>1区<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">a</span>&gt;</span>2区<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">a</span>&gt;</span>3区<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">a</span>&gt;</span>4区<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;item&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;header&quot;</span> <span class="attr">onclick</span>=<span class="string">&quot;clickMe(this);&quot;</span>&gt;</span>北京<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;content hide&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">a</span>&gt;</span>1区<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">a</span>&gt;</span>2区<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">a</span>&gt;</span>3区<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">a</span>&gt;</span>4区<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;item&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;header&quot;</span> <span class="attr">onclick</span>=<span class="string">&quot;clickMe(this);&quot;</span>&gt;</span>西安<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;content hide&quot;</span> &gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">a</span>&gt;</span>1区<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">a</span>&gt;</span>2区<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">a</span>&gt;</span>3区<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">a</span>&gt;</span>4区<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;item&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;header&quot;</span> <span class="attr">onclick</span>=<span class="string">&quot;clickMe(this);&quot;</span>&gt;</span>深圳<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;content hide&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">a</span>&gt;</span>1区<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">a</span>&gt;</span>2区<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">a</span>&gt;</span>3区<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">a</span>&gt;</span>4区<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;static/js/jquery-3.6.1.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">function</span> <span class="title function_">clickMe</span>(<span class="params">self</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 将自己下面的因此起来</span></span></span><br><span class="line"><span class="language-javascript">        $(self).<span class="title function_">next</span>().<span class="title function_">removeClass</span>(<span class="string">&quot;hide&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 找父亲的所有兄弟的子孙中的class=content</span></span></span><br><span class="line"><span class="language-javascript">        $(self).<span class="title function_">parent</span>().<span class="title function_">siblings</span>().<span class="title function_">find</span>(<span class="string">&quot;.content&quot;</span>).<span class="title function_">addClass</span>(<span class="string">&quot;hide&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="操作样式"><a href="#操作样式" class="headerlink" title="操作样式"></a>操作样式</h3><ul><li>addClas</li><li>removeClass</li><li>hasClass</li></ul><h3 id="值的操作"><a href="#值的操作" class="headerlink" title="值的操作"></a>值的操作</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;c1&quot;</span>&gt;</span>内容<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">&quot;#c1&quot;</span>).<span class="title function_">text</span>()<span class="comment">// 设置文本内容</span></span><br><span class="line">$(<span class="string">&quot;#c1&quot;</span>).<span class="title function_">text</span>() <span class="comment">//设置文本内容</span></span><br></pre></td></tr></table></figure><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">id</span>=<span class="string">&quot;c2&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">&quot;#c2&quot;</span>).<span class="title function_">val</span>()  <span class="comment">//获取用户输入的值</span></span><br><span class="line">$(<span class="string">&quot;#c2&quot;</span>).<span class="title function_">val</span>(<span class="string">&quot;哈哈&quot;</span>)  <span class="comment">// 设置值</span></span><br></pre></td></tr></table></figure><h4 id="获取值并操作"><a href="#获取值并操作" class="headerlink" title="获取值并操作"></a>获取值并操作</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">id</span>=<span class="string">&quot;txtUser&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;用户名&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">id</span>=<span class="string">&quot;txtEmail&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;邮箱&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">value</span>=<span class="string">&quot;提交&quot;</span> <span class="attr">onclick</span>=<span class="string">&quot;getInfo()&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">ul</span> <span class="attr">id</span>=<span class="string">&quot;view&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;static/js/jquery-3.6.1.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">function</span> <span class="title function_">getInfo</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// 获取用户输入的用户名和密码</span></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">var</span> username = $(<span class="string">&quot;#txtUser&quot;</span>).<span class="title function_">val</span>();</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">var</span> email = $(<span class="string">&quot;#txtEmailt&quot;</span>).<span class="title function_">val</span>();</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">//创建li标签,给li的内部写入内容</span></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">var</span> newli = $(<span class="string">&quot;&lt;li&gt;&quot;</span>).<span class="title function_">text</span>(username);</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// 把新创建的li标签添加到ul里面</span></span></span><br><span class="line"><span class="language-javascript">    $(<span class="string">&quot;#view&quot;</span>).<span class="title function_">append</span>(newli);</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="事件"><a href="#事件" class="headerlink" title="事件"></a>事件</h3><ul><li>点击获取文本</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>1<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>2<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>3<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;static/js/jquery-3.6.1.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    $(<span class="string">&quot;li&quot;</span>).<span class="title function_">click</span>(<span class="keyword">function</span> (<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">var</span> text = $(<span class="variable language_">this</span>).<span class="title function_">text</span>();</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">console</span>.<span class="title function_">log</span>(text);</span></span><br><span class="line"><span class="language-javascript">        &#125;);</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li>删除标签</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>1<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>2<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>3<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;static/js/jquery-3.6.1.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    $(<span class="string">&quot;li&quot;</span>).<span class="title function_">click</span>(<span class="keyword">function</span> (<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">        $(<span class="variable language_">this</span>).<span class="title function_">remove</span>();</span></span><br><span class="line"><span class="language-javascript">        &#125;);</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li>当页面框架加载完成之后执行的代码<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>1<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>2<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>3<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;static/js/jquery-3.6.1.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    $(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">//当页面的框架加载完成之后，自动就执行</span></span></span><br><span class="line"><span class="language-javascript">        $(<span class="string">&quot;li&quot;</span>).<span class="title function_">click</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">var</span> text = $(<span class="variable language_">this</span>).<span class="title function_">remove</span>();</span></span><br><span class="line"><span class="language-javascript">        &#125;);</span></span><br><span class="line"><span class="language-javascript">    &#125;)</span></span><br><span class="line"><span class="language-javascript">    </span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure></li></ul><h4 id="案例：表格的操作"><a href="#案例：表格的操作" class="headerlink" title="案例：表格的操作"></a>案例：表格的操作</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">table</span> <span class="attr">border</span>=<span class="string">&quot;1&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">thead</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">th</span>&gt;</span>id<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">th</span>&gt;</span>name<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">th</span>&gt;</span>do<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">thead</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tbody</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span>1<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span>bkys<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">value</span>=<span class="string">&quot;删除&quot;</span> <span class="attr">class</span>=<span class="string">&quot;delete&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span>1<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span>bkys<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">value</span>=<span class="string">&quot;删除&quot;</span> <span class="attr">class</span>=<span class="string">&quot;delete&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span>1<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span>bkys<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">value</span>=<span class="string">&quot;删除&quot;</span> <span class="attr">class</span>=<span class="string">&quot;delete&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span>1<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span>bkys<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">value</span>=<span class="string">&quot;删除&quot;</span> <span class="attr">class</span>=<span class="string">&quot;delete&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;/<span class="name">tbody</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;static/js/jquery-3.6.1.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    $(<span class="keyword">function</span> (<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">        $(<span class="string">&quot;.delete&quot;</span>).<span class="title function_">click</span>(<span class="keyword">function</span> (<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">            $(<span class="variable language_">this</span>).<span class="title function_">parent</span>().<span class="title function_">parent</span>().<span class="title function_">remove</span>();</span></span><br><span class="line"><span class="language-javascript">        &#125;)</span></span><br><span class="line"><span class="language-javascript">    &#125;)</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="前端基础整合"><a href="#前端基础整合" class="headerlink" title="前端基础整合"></a>前端基础整合</h2><ul><li>HTML</li><li>CSS</li><li>JavaScript，jQuery</li><li>bootstrap（动态效果依赖jQuery）</li></ul><blockquote><p>本地无法使用的时候可以引入其CDN</p></blockquote><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">href</span>=<span class="string">&quot;https://cdn.bootcss.com/twitter-bootstrap/3.3.7/css/bootstrap.min.css&quot;</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">href</span>=<span class="string">&quot;https://cdn.bootcss.com/twitter-bootstrap/3.3.7/css/bootstrap-theme.min.css&quot;</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;http://cdn.bootcss.com/jquery/1.11.1/jquery.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;http://cdn.bootcss.com/bootstrap/3.3.7/js/bootstrap.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="先引入bootstrap和jQuery"><a href="#先引入bootstrap和jQuery" class="headerlink" title="先引入bootstrap和jQuery"></a>先引入bootstrap和jQuery</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">href</span>=<span class="string">&quot;static/plugins/bootstrap3/css/bootstrap.css&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">href</span>=<span class="string">&quot;https://cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;static/js/jquery-3.6.1.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;static/plugins/bootstrap3/js/bootstrap.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li>JavaScript组件的一些应用</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">href</span>=<span class="string">&quot;static/plugins/bootstrap3/css/bootstrap.css&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">href</span>=<span class="string">&quot;https://cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.navbar</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">border-radius</span>: <span class="number">0px</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">    </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">nav</span> <span class="attr">class</span>=<span class="string">&quot;navbar navbar-inverse&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;container-fluid&quot;</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- Brand and toggle get grouped for better mobile display --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;navbar-header&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">class</span>=<span class="string">&quot;navbar-toggle collapsed&quot;</span> <span class="attr">data-toggle</span>=<span class="string">&quot;collapse&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">data-target</span>=<span class="string">&quot;#bs-example-navbar-collapse-9&quot;</span> <span class="attr">aria-expanded</span>=<span class="string">&quot;false&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;sr-only&quot;</span>&gt;</span>Toggle navigation<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;icon-bar&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;icon-bar&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;icon-bar&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">&quot;navbar-brand&quot;</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>xx系统<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- Collect the nav links, forms, and other content for toggling --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;collapse navbar-collapse&quot;</span> <span class="attr">id</span>=<span class="string">&quot;bs-example-navbar-collapse-9&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">ul</span> <span class="attr">class</span>=<span class="string">&quot;nav navbar-nav&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">&quot;active&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>Home<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>Link<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>Link<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">&quot;dropdown&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span> <span class="attr">class</span>=<span class="string">&quot;dropdown-toggle&quot;</span> <span class="attr">data-toggle</span>=<span class="string">&quot;dropdown&quot;</span> <span class="attr">role</span>=<span class="string">&quot;button&quot;</span> <span class="attr">aria-haspopup</span>=<span class="string">&quot;true&quot;</span></span></span><br><span class="line"><span class="tag">                       <span class="attr">aria-expanded</span>=<span class="string">&quot;false&quot;</span>&gt;</span>Dropdown <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;caret&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">ul</span> <span class="attr">class</span>=<span class="string">&quot;dropdown-menu&quot;</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>Action<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>Another action<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>Something else here<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">li</span> <span class="attr">role</span>=<span class="string">&quot;separator&quot;</span> <span class="attr">class</span>=<span class="string">&quot;divider&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>Separated link<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">li</span> <span class="attr">role</span>=<span class="string">&quot;separator&quot;</span> <span class="attr">class</span>=<span class="string">&quot;divider&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>One more separated link<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">ul</span> <span class="attr">class</span>=<span class="string">&quot;nav navbar-nav navbar-right&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>登录<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>注册<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">&quot;dropdown&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span> <span class="attr">class</span>=<span class="string">&quot;dropdown-toggle&quot;</span> <span class="attr">data-toggle</span>=<span class="string">&quot;dropdown&quot;</span> <span class="attr">role</span>=<span class="string">&quot;button&quot;</span> <span class="attr">aria-haspopup</span>=<span class="string">&quot;true&quot;</span></span></span><br><span class="line"><span class="tag">                       <span class="attr">aria-expanded</span>=<span class="string">&quot;false&quot;</span>&gt;</span>librafree <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;caret&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">ul</span> <span class="attr">class</span>=<span class="string">&quot;dropdown-menu&quot;</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>个人资料<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>我的账户<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>修改密码<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">li</span> <span class="attr">role</span>=<span class="string">&quot;separator&quot;</span> <span class="attr">class</span>=<span class="string">&quot;divider&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>注销<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span><span class="comment">&lt;!-- /.navbar-collapse --&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span><span class="comment">&lt;!-- /.container-fluid --&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">nav</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- Button trigger modal --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">class</span>=<span class="string">&quot;btn btn-primary btn-lg&quot;</span> <span class="attr">data-toggle</span>=<span class="string">&quot;modal&quot;</span> <span class="attr">data-target</span>=<span class="string">&quot;#myModal&quot;</span>&gt;</span></span><br><span class="line">    Launch demo modal</span><br><span class="line"><span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- Modal --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;modal fade&quot;</span> <span class="attr">id</span>=<span class="string">&quot;myModal&quot;</span> <span class="attr">tabindex</span>=<span class="string">&quot;-1&quot;</span> <span class="attr">role</span>=<span class="string">&quot;dialog&quot;</span> <span class="attr">aria-labelledby</span>=<span class="string">&quot;myModalLabel&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;modal-dialog&quot;</span> <span class="attr">role</span>=<span class="string">&quot;document&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;modal-content&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;modal-header&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">class</span>=<span class="string">&quot;close&quot;</span> <span class="attr">data-dismiss</span>=<span class="string">&quot;modal&quot;</span> <span class="attr">aria-label</span>=<span class="string">&quot;Close&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">span</span> <span class="attr">aria-hidden</span>=<span class="string">&quot;true&quot;</span>&gt;</span><span class="symbol">&amp;times;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">h4</span> <span class="attr">class</span>=<span class="string">&quot;modal-title&quot;</span> <span class="attr">id</span>=<span class="string">&quot;myModalLabel&quot;</span>&gt;</span>Modal title<span class="tag">&lt;/<span class="name">h4</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;modal-body&quot;</span>&gt;</span></span><br><span class="line">                ...</span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;modal-footer&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">class</span>=<span class="string">&quot;btn btn-default&quot;</span> <span class="attr">data-dismiss</span>=<span class="string">&quot;modal&quot;</span>&gt;</span>Close<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">class</span>=<span class="string">&quot;btn btn-primary&quot;</span>&gt;</span>Save changes<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;bs-example-tooltips&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">class</span>=<span class="string">&quot;btn btn-default&quot;</span> <span class="attr">data-toggle</span>=<span class="string">&quot;tooltip&quot;</span> <span class="attr">data-placement</span>=<span class="string">&quot;left&quot;</span> <span class="attr">title</span>=<span class="string">&quot;&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">data-original-title</span>=<span class="string">&quot;Tooltip on left&quot;</span>&gt;</span>Tooltip on left</span><br><span class="line">    <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">class</span>=<span class="string">&quot;btn btn-default&quot;</span> <span class="attr">data-toggle</span>=<span class="string">&quot;tooltip&quot;</span> <span class="attr">data-placement</span>=<span class="string">&quot;top&quot;</span> <span class="attr">title</span>=<span class="string">&quot;&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">data-original-title</span>=<span class="string">&quot;Tooltip on top&quot;</span>&gt;</span>Tooltip on top</span><br><span class="line">    <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">class</span>=<span class="string">&quot;btn btn-default&quot;</span> <span class="attr">data-toggle</span>=<span class="string">&quot;tooltip&quot;</span> <span class="attr">data-placement</span>=<span class="string">&quot;bottom&quot;</span> <span class="attr">title</span>=<span class="string">&quot;&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">data-original-title</span>=<span class="string">&quot;Tooltip on bottom&quot;</span>&gt;</span>Tooltip on bottom</span><br><span class="line">    <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">class</span>=<span class="string">&quot;btn btn-default&quot;</span> <span class="attr">data-toggle</span>=<span class="string">&quot;tooltip&quot;</span> <span class="attr">data-placement</span>=<span class="string">&quot;right&quot;</span> <span class="attr">title</span>=<span class="string">&quot;&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">data-original-title</span>=<span class="string">&quot;Tooltip on right&quot;</span>&gt;</span>Tooltip on right</span><br><span class="line">    <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">&quot;element&quot;</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">class</span>=<span class="string">&quot;btn btn-lg btn-danger&quot;</span> <span class="attr">data-toggle</span>=<span class="string">&quot;popover&quot;</span> <span class="attr">title</span>=<span class="string">&quot;标题&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">data-content</span>=<span class="string">&quot;And here&#x27;s some amazing content. It&#x27;s very engaging. Right?&quot;</span>&gt;</span>内容</span><br><span class="line">    <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;width: 700px&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;carousel-example-captions&quot;</span> <span class="attr">class</span>=<span class="string">&quot;carousel slide&quot;</span> <span class="attr">data-ride</span>=<span class="string">&quot;carousel&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">ol</span> <span class="attr">class</span>=<span class="string">&quot;carousel-indicators&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span> <span class="attr">data-target</span>=<span class="string">&quot;#carousel-example-captions&quot;</span> <span class="attr">data-slide-to</span>=<span class="string">&quot;0&quot;</span> <span class="attr">class</span>=<span class="string">&quot;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span> <span class="attr">data-target</span>=<span class="string">&quot;#carousel-example-captions&quot;</span> <span class="attr">data-slide-to</span>=<span class="string">&quot;1&quot;</span> <span class="attr">class</span>=<span class="string">&quot;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span> <span class="attr">data-target</span>=<span class="string">&quot;#carousel-example-captions&quot;</span> <span class="attr">data-slide-to</span>=<span class="string">&quot;2&quot;</span> <span class="attr">class</span>=<span class="string">&quot;active&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">ol</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;carousel-inner&quot;</span> <span class="attr">role</span>=<span class="string">&quot;listbox&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;item&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">img</span> <span class="attr">data-src</span>=<span class="string">&quot;holder.js/900x500/auto/#777:#777&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;900x500&quot;</span></span></span><br><span class="line"><span class="tag">                     <span class="attr">src</span>=<span class="string">&quot;data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9InllcyI/PjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB3aWR0aD0iOTAwIiBoZWlnaHQ9IjUwMCIgdmlld0JveD0iMCAwIDkwMCA1MDAiIHByZXNlcnZlQXNwZWN0UmF0aW89Im5vbmUiPjwhLS0KU291cmNlIFVSTDogaG9sZGVyLmpzLzkwMHg1MDAvYXV0by8jNzc3OiM3NzcKQ3JlYXRlZCB3aXRoIEhvbGRlci5qcyAyLjYuMC4KTGVhcm4gbW9yZSBhdCBodHRwOi8vaG9sZGVyanMuY29tCihjKSAyMDEyLTIwMTUgSXZhbiBNYWxvcGluc2t5IC0gaHR0cDovL2ltc2t5LmNvCi0tPjxkZWZzPjxzdHlsZSB0eXBlPSJ0ZXh0L2NzcyI+PCFbQ0RBVEFbI2hvbGRlcl8xODM0ZmQ2OWFmMiB0ZXh0IHsgZmlsbDojNzc3O2ZvbnQtd2VpZ2h0OmJvbGQ7Zm9udC1mYW1pbHk6QXJpYWwsIEhlbHZldGljYSwgT3BlbiBTYW5zLCBzYW5zLXNlcmlmLCBtb25vc3BhY2U7Zm9udC1zaXplOjQ1cHQgfSBdXT48L3N0eWxlPjwvZGVmcz48ZyBpZD0iaG9sZGVyXzE4MzRmZDY5YWYyIj48cmVjdCB3aWR0aD0iOTAwIiBoZWlnaHQ9IjUwMCIgZmlsbD0iIzc3NyIvPjxnPjx0ZXh0IHg9IjMzMy4yMDYyNDU0MjIzNjMzIiB5PSIyNzAuMTYwMDAxMzczMjkxMDQiPjkwMHg1MDA8L3RleHQ+PC9nPjwvZz48L3N2Zz4=&quot;</span></span></span><br><span class="line"><span class="tag">                     <span class="attr">data-holder-rendered</span>=<span class="string">&quot;true&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;carousel-caption&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">h3</span>&gt;</span>First slide label<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">p</span>&gt;</span>Nulla vitae elit libero, a pharetra augue mollis interdum.<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;item&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">img</span> <span class="attr">data-src</span>=<span class="string">&quot;holder.js/900x500/auto/#666:#666&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;900x500&quot;</span></span></span><br><span class="line"><span class="tag">                     <span class="attr">src</span>=<span class="string">&quot;data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9InllcyI/PjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB3aWR0aD0iOTAwIiBoZWlnaHQ9IjUwMCIgdmlld0JveD0iMCAwIDkwMCA1MDAiIHByZXNlcnZlQXNwZWN0UmF0aW89Im5vbmUiPjwhLS0KU291cmNlIFVSTDogaG9sZGVyLmpzLzkwMHg1MDAvYXV0by8jNjY2OiM2NjYKQ3JlYXRlZCB3aXRoIEhvbGRlci5qcyAyLjYuMC4KTGVhcm4gbW9yZSBhdCBodHRwOi8vaG9sZGVyanMuY29tCihjKSAyMDEyLTIwMTUgSXZhbiBNYWxvcGluc2t5IC0gaHR0cDovL2ltc2t5LmNvCi0tPjxkZWZzPjxzdHlsZSB0eXBlPSJ0ZXh0L2NzcyI+PCFbQ0RBVEFbI2hvbGRlcl8xODM0ZmQ2ODU3YiB0ZXh0IHsgZmlsbDojNjY2O2ZvbnQtd2VpZ2h0OmJvbGQ7Zm9udC1mYW1pbHk6QXJpYWwsIEhlbHZldGljYSwgT3BlbiBTYW5zLCBzYW5zLXNlcmlmLCBtb25vc3BhY2U7Zm9udC1zaXplOjQ1cHQgfSBdXT48L3N0eWxlPjwvZGVmcz48ZyBpZD0iaG9sZGVyXzE4MzRmZDY4NTdiIj48cmVjdCB3aWR0aD0iOTAwIiBoZWlnaHQ9IjUwMCIgZmlsbD0iIzY2NiIvPjxnPjx0ZXh0IHg9IjMzMy4yMDYyNDU0MjIzNjMzIiB5PSIyNzAuMTYwMDAxMzczMjkxMDQiPjkwMHg1MDA8L3RleHQ+PC9nPjwvZz48L3N2Zz4=&quot;</span></span></span><br><span class="line"><span class="tag">                     <span class="attr">data-holder-rendered</span>=<span class="string">&quot;true&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;carousel-caption&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">h3</span>&gt;</span>Second slide label<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">p</span>&gt;</span>Lorem ipsum dolor sit amet, consectetur adipiscing elit.<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;item active&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">img</span> <span class="attr">data-src</span>=<span class="string">&quot;holder.js/900x500/auto/#555:#555&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;900x500&quot;</span></span></span><br><span class="line"><span class="tag">                     <span class="attr">src</span>=<span class="string">&quot;data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9InllcyI/PjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB3aWR0aD0iOTAwIiBoZWlnaHQ9IjUwMCIgdmlld0JveD0iMCAwIDkwMCA1MDAiIHByZXNlcnZlQXNwZWN0UmF0aW89Im5vbmUiPjwhLS0KU291cmNlIFVSTDogaG9sZGVyLmpzLzkwMHg1MDAvYXV0by8jNTU1OiM1NTUKQ3JlYXRlZCB3aXRoIEhvbGRlci5qcyAyLjYuMC4KTGVhcm4gbW9yZSBhdCBodHRwOi8vaG9sZGVyanMuY29tCihjKSAyMDEyLTIwMTUgSXZhbiBNYWxvcGluc2t5IC0gaHR0cDovL2ltc2t5LmNvCi0tPjxkZWZzPjxzdHlsZSB0eXBlPSJ0ZXh0L2NzcyI+PCFbQ0RBVEFbI2hvbGRlcl8xODM0ZmQ2YzUwYyB0ZXh0IHsgZmlsbDojNTU1O2ZvbnQtd2VpZ2h0OmJvbGQ7Zm9udC1mYW1pbHk6QXJpYWwsIEhlbHZldGljYSwgT3BlbiBTYW5zLCBzYW5zLXNlcmlmLCBtb25vc3BhY2U7Zm9udC1zaXplOjQ1cHQgfSBdXT48L3N0eWxlPjwvZGVmcz48ZyBpZD0iaG9sZGVyXzE4MzRmZDZjNTBjIj48cmVjdCB3aWR0aD0iOTAwIiBoZWlnaHQ9IjUwMCIgZmlsbD0iIzU1NSIvPjxnPjx0ZXh0IHg9IjMzMy4yMDYyNDU0MjIzNjMzIiB5PSIyNzAuMTYwMDAxMzczMjkxMDQiPjkwMHg1MDA8L3RleHQ+PC9nPjwvZz48L3N2Zz4=&quot;</span></span></span><br><span class="line"><span class="tag">                     <span class="attr">data-holder-rendered</span>=<span class="string">&quot;true&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;carousel-caption&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">h3</span>&gt;</span>Third slide label<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">p</span>&gt;</span>Praesent commodo cursus magna, vel scelerisque nisl consectetur.<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">&quot;left carousel-control&quot;</span> <span class="attr">href</span>=<span class="string">&quot;#carousel-example-captions&quot;</span> <span class="attr">role</span>=<span class="string">&quot;button&quot;</span> <span class="attr">data-slide</span>=<span class="string">&quot;prev&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;glyphicon glyphicon-chevron-left&quot;</span> <span class="attr">aria-hidden</span>=<span class="string">&quot;true&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;sr-only&quot;</span>&gt;</span>Previous<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">&quot;right carousel-control&quot;</span> <span class="attr">href</span>=<span class="string">&quot;#carousel-example-captions&quot;</span> <span class="attr">role</span>=<span class="string">&quot;button&quot;</span> <span class="attr">data-slide</span>=<span class="string">&quot;next&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;glyphicon glyphicon-chevron-right&quot;</span> <span class="attr">aria-hidden</span>=<span class="string">&quot;true&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;sr-only&quot;</span>&gt;</span>Next<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;static/js/jquery-3.6.1.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;static/plugins/bootstrap3/js/bootstrap.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    $(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        $(<span class="string">&#x27;[data-toggle=&quot;tooltip&quot;]&#x27;</span>).<span class="title function_">tooltip</span>()</span></span><br><span class="line"><span class="language-javascript">        $(<span class="string">&#x27;#element&#x27;</span>).<span class="title function_">popover</span>(&#123;<span class="attr">trigger</span>: <span class="string">&quot;click&quot;</span>, <span class="attr">placement</span>: <span class="string">&quot;bottom&quot;</span>&#125;)</span></span><br><span class="line"><span class="language-javascript">        $(<span class="string">&#x27;.carousel&#x27;</span>).<span class="title function_">carousel</span>()</span></span><br><span class="line"><span class="language-javascript">    &#125;)</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="案例：添加数据页面"><a href="#案例：添加数据页面" class="headerlink" title="案例：添加数据页面"></a>案例：添加数据页面</h3><p>人员录入系统，需要提供用户信息：</p><ul><li>用户名，年龄，薪资，部门，入职时间</li><li>对于时间的选择不能输入（插件） datetimepicker<ul><li>下载插件</li><li>应用插件</li><li>也可以设置input为date</li></ul></li></ul><img src="/2022/09/07/Flsak%E6%A1%86%E6%9E%B6/image-20230407220938935.png" class><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">href</span>=<span class="string">&quot;static/plugins/bootstrap3/css/bootstrap.css&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">href</span>=<span class="string">&quot;https://cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;container&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">form</span> <span class="attr">class</span>=<span class="string">&quot;form-horizontal&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;row clearfix&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;col-xs-6&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;form-group&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">label</span> <span class="attr">class</span>=<span class="string">&quot;col-sm-2 control-label&quot;</span>&gt;</span>姓名<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;col-sm-10&quot;</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;email&quot;</span> <span class="attr">class</span>=<span class="string">&quot;form-control&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;姓名&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;col-xs-6&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;form-group&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">label</span> <span class="attr">class</span>=<span class="string">&quot;col-sm-2 control-label&quot;</span>&gt;</span>年龄<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;col-sm-10&quot;</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;email&quot;</span> <span class="attr">class</span>=<span class="string">&quot;form-control&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;年龄&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;row clearfix&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;col-xs-6&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;form-group&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">label</span> <span class="attr">class</span>=<span class="string">&quot;col-sm-2 control-label&quot;</span>&gt;</span>薪资<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;col-sm-10&quot;</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;email&quot;</span> <span class="attr">class</span>=<span class="string">&quot;form-control&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;薪资&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;col-xs-6&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;form-group&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">label</span> <span class="attr">class</span>=<span class="string">&quot;col-sm-2 control-label&quot;</span>&gt;</span>部门<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;col-sm-10&quot;</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">select</span> <span class="attr">class</span>=<span class="string">&quot;form-control&quot;</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">option</span>&gt;</span>IT<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">option</span>&gt;</span>销售<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">option</span>&gt;</span>运营<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;row clearfix&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;col-xs-6&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;form-group&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">label</span> <span class="attr">class</span>=<span class="string">&quot;col-sm-2 control-label&quot;</span>&gt;</span>入职日期<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;col-sm-10&quot;</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;date&quot;</span> <span class="attr">class</span>=<span class="string">&quot;form-control&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;入职日期&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;form-group&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;col-sm-offset-2 col-sm-10&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">class</span>=<span class="string">&quot;btn btn-primary&quot;</span>&gt;</span>提交<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            </span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span>   </span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;static/js/jquery-3.6.1.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;static/plugins/bootstrap3/js/bootstrap.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="MYSQL-Python案例"><a href="#MYSQL-Python案例" class="headerlink" title="MYSQL+Python案例"></a>MYSQL+Python案例</h2><h3 id="前提"><a href="#前提" class="headerlink" title="前提"></a>前提</h3><ul><li>python相关：基础，函数，数据类型，面向，模块</li><li>前端开发：HTML，CSS，JavaScript，jQuery。[静态页面]（任何编程语言都可以结合其进行开发，才能形成动态页面）</li><li>动态：需要用到web框架的功能</li></ul><p>txt文件和excel文件可以修改数据，读取数不方便<br>所以我们选择专业的软件：数据库管理系统.</p><blockquote><p>数据库管理系统:mysql/ oracle / sqlserver /db2 / access<br>下面以mysql为例</p></blockquote><p>我们平时开发系统时</p><ul><li>创建数据库</li><li>创建表结构<br>这些需要提前通过MySQL命令创建</li></ul><p>但是表中获得数据一般是通过程序实现增删改查的。</p><h3 id="案例：员工管理系统"><a href="#案例：员工管理系统" class="headerlink" title="案例：员工管理系统"></a>案例：员工管理系统</h3><h4 id="使用mysql创建表格"><a href="#使用mysql创建表格" class="headerlink" title="使用mysql创建表格"></a>使用mysql创建表格</h4><ul><li>使用MySQL内置工具（命令）<ul><li>创建数据表：unicom</li><li>数据表：admin<blockquote><p>表名：admin<br>列：</p><blockquote><p>id,整型，自增，主键<br>username 字符串 不为空<br>password 字符串 不为空<br>mobile  字符串 不为空</p></blockquote></blockquote></li></ul></li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> admin(</span><br><span class="line">id <span class="type">int</span> <span class="keyword">not</span> <span class="keyword">null</span> auto_increment <span class="keyword">primary</span> key,  </span><br><span class="line">username <span class="type">varchar</span>(<span class="number">16</span>) <span class="keyword">not</span> <span class="keyword">null</span>,</span><br><span class="line">password <span class="type">char</span>(<span class="number">64</span>) <span class="keyword">not</span> <span class="keyword">null</span>,</span><br><span class="line">mobile <span class="type">char</span>(<span class="number">11</span>) <span class="keyword">not</span> <span class="keyword">null</span></span><br><span class="line">)<span class="keyword">default</span> charset<span class="operator">=</span>utf8;</span><br></pre></td></tr></table></figure><h4 id="python操作mysql"><a href="#python操作mysql" class="headerlink" title="python操作mysql"></a>python操作mysql</h4><ul><li>python代码实现：<ul><li>添加用户</li><li>删除用户</li><li> 查看用户</li><li>更新用户信息</li></ul></li><li>用python操作mysql需要安装一个插件<ul><li>在pycharm命令行执行以下内容 <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip3 install pymysql</span><br></pre></td></tr></table></figure></li></ul></li></ul><h4 id="输入数据"><a href="#输入数据" class="headerlink" title="输入数据"></a>输入数据</h4><ul><li>程序输入</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pymysql</span><br><span class="line"></span><br><span class="line"><span class="comment"># 连接mysql</span></span><br><span class="line">conn = pymysql.connect(host=<span class="string">&quot;127.0.0.1&quot;</span>, port=<span class="number">3306</span>, user=<span class="string">&quot;root&quot;</span>, password=<span class="string">&quot;root&quot;</span>, charset=<span class="string">&#x27;utf8&#x27;</span>, db=<span class="string">&#x27;bkys&#x27;</span>)</span><br><span class="line">cursor = conn.cursor(cursor=pymysql.cursors.DictCursor)</span><br><span class="line"></span><br><span class="line"><span class="comment"># # 发送指令</span></span><br><span class="line"><span class="comment"># cursor.execute(&quot;insert into admin(username,password,mobile) values(&#x27;bkys&#x27;,&#x27;root123&#x27;,&#x27;55555555555&#x27;)&quot;)</span></span><br><span class="line"><span class="comment"># conn.commit()</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># # 发送指令(不要用字符串格式化做sql的拼接，安全隐患sql注入)</span></span><br><span class="line"><span class="comment"># sql = &quot;insert into admin(username,password,mobile) values(%s,%s,%s)&quot;</span></span><br><span class="line"><span class="comment"># cursor.execute(sql, [&quot;zhang&quot;, &quot;zhang123&quot;, &quot;99999999999&quot;])</span></span><br><span class="line"><span class="comment"># conn.commit()</span></span><br><span class="line"></span><br><span class="line">sql = <span class="string">&quot;insert into admin(username,password,mobile) values(%(n1)s,%(n2)s,%(n3)s)&quot;</span></span><br><span class="line">cursor.execute(sql, &#123;<span class="string">&quot;n1&quot;</span>: <span class="string">&quot;zh&quot;</span>, <span class="string">&quot;n2&quot;</span>: <span class="string">&quot;zhang123456&quot;</span>, <span class="string">&quot;n3&quot;</span>: <span class="string">&quot;99999999&quot;</span>&#125;)</span><br><span class="line">conn.commit()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 关闭</span></span><br><span class="line">cursor.close()</span><br><span class="line">conn.close()</span><br></pre></td></tr></table></figure><ul><li>终端动态输入</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pymysql</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">    user = <span class="built_in">input</span>(<span class="string">&quot;用户名：&quot;</span>)</span><br><span class="line">    <span class="keyword">if</span> user.upper() == <span class="string">&quot;EXIT&quot;</span>:</span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line">    pwd = <span class="built_in">input</span>(<span class="string">&quot;密码：&quot;</span>)</span><br><span class="line">    mobile = <span class="built_in">input</span>(<span class="string">&quot;手机号：&quot;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment"># 连接mysql</span></span><br><span class="line">    conn = pymysql.connect(host=<span class="string">&quot;127.0.0.1&quot;</span>, port=<span class="number">3306</span>, user=<span class="string">&quot;root&quot;</span>, password=<span class="string">&quot;root&quot;</span>, charset=<span class="string">&#x27;utf8&#x27;</span>, db=<span class="string">&#x27;bkys&#x27;</span>)</span><br><span class="line">    cursor = conn.cursor(cursor=pymysql.cursors.DictCursor)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment"># 发送指令(不要用字符串格式化做sql的拼接，安全隐患sql注入)</span></span><br><span class="line">    sql = <span class="string">&quot;insert into admin(username,password,mobile) values(%s,%s,%s)&quot;</span></span><br><span class="line">    cursor.execute(sql, [user, pwd, mobile])</span><br><span class="line">    conn.commit()</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 关闭</span></span><br><span class="line">    cursor.close()</span><br><span class="line">    conn.close()</span><br></pre></td></tr></table></figure><h4 id="查询数据"><a href="#查询数据" class="headerlink" title="查询数据"></a>查询数据</h4><ul><li>查询所有数据</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pymysql</span><br><span class="line"></span><br><span class="line"><span class="comment"># 连接mysql</span></span><br><span class="line">conn = pymysql.connect(host=<span class="string">&quot;127.0.0.1&quot;</span>, port=<span class="number">3306</span>, user=<span class="string">&quot;root&quot;</span>, password=<span class="string">&quot;root&quot;</span>, charset=<span class="string">&#x27;utf8&#x27;</span>, db=<span class="string">&#x27;bkys&#x27;</span>)</span><br><span class="line">cursor = conn.cursor(cursor=pymysql.cursors.DictCursor)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 发送指令(不要用字符串格式化做sql的拼接，安全隐患sql注入)</span></span><br><span class="line">cursor.execute(<span class="string">&quot;select * from admin&quot;</span>)</span><br><span class="line">data_list = cursor.fetchall()</span><br><span class="line"><span class="comment"># print(data_list)</span></span><br><span class="line"><span class="keyword">for</span> row_dict <span class="keyword">in</span> data_list:</span><br><span class="line">    <span class="built_in">print</span>(row_dict)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 关闭</span></span><br><span class="line">cursor.close()</span><br><span class="line">conn.close()</span><br></pre></td></tr></table></figure><ul><li>获取符合条件第一条数据</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pymysql</span><br><span class="line"></span><br><span class="line"><span class="comment"># 连接mysql</span></span><br><span class="line">conn = pymysql.connect(host=<span class="string">&quot;127.0.0.1&quot;</span>, port=<span class="number">3306</span>, user=<span class="string">&quot;root&quot;</span>, password=<span class="string">&quot;root&quot;</span>, charset=<span class="string">&#x27;utf8&#x27;</span>, db=<span class="string">&#x27;bkys&#x27;</span>)</span><br><span class="line">cursor = conn.cursor(cursor=pymysql.cursors.DictCursor)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 发送指令(不要用字符串格式化做sql的拼接，安全隐患sql注入)</span></span><br><span class="line">cursor.execute(<span class="string">&quot;select * from admin where id &gt; %s&quot;</span>, [<span class="number">2</span>, ])</span><br><span class="line">data_list = cursor.fetchone()</span><br><span class="line"><span class="built_in">print</span>(data_list)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 关闭</span></span><br><span class="line">cursor.close()</span><br><span class="line">conn.close()</span><br></pre></td></tr></table></figure><h4 id="删除数据"><a href="#删除数据" class="headerlink" title="删除数据"></a>删除数据</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pymysql</span><br><span class="line"></span><br><span class="line"><span class="comment"># 连接mysql</span></span><br><span class="line">conn = pymysql.connect(host=<span class="string">&quot;127.0.0.1&quot;</span>, port=<span class="number">3306</span>, user=<span class="string">&quot;root&quot;</span>, password=<span class="string">&quot;root&quot;</span>, charset=<span class="string">&#x27;utf8&#x27;</span>, db=<span class="string">&#x27;bkys&#x27;</span>)</span><br><span class="line">cursor = conn.cursor(cursor=pymysql.cursors.DictCursor)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 发送指令(不要用字符串格式化做sql的拼接，安全隐患sql注入)</span></span><br><span class="line">cursor.execute(<span class="string">&quot;delete from admin where  id = %s&quot;</span>, [<span class="number">3</span>])</span><br><span class="line">conn.commit()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 关闭</span></span><br><span class="line">cursor.close()</span><br><span class="line">conn.close()</span><br></pre></td></tr></table></figure><h4 id="修改数据"><a href="#修改数据" class="headerlink" title="修改数据"></a>修改数据</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pymysql</span><br><span class="line"></span><br><span class="line"><span class="comment"># 连接mysql</span></span><br><span class="line">conn = pymysql.connect(host=<span class="string">&quot;127.0.0.1&quot;</span>, port=<span class="number">3306</span>, user=<span class="string">&quot;root&quot;</span>, password=<span class="string">&quot;root&quot;</span>, charset=<span class="string">&#x27;utf8&#x27;</span>, db=<span class="string">&#x27;bkys&#x27;</span>)</span><br><span class="line">cursor = conn.cursor(cursor=pymysql.cursors.DictCursor)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 发送指令(不要用字符串格式化做sql的拼接，安全隐患sql注入)</span></span><br><span class="line">cursor.execute(<span class="string">&quot;update admin set mobile=%s where id = %s&quot;</span>, [<span class="string">&quot;15431&quot;</span>,<span class="number">4</span>, ])</span><br><span class="line">conn.commit()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 关闭</span></span><br><span class="line">cursor.close()</span><br><span class="line">conn.close()</span><br></pre></td></tr></table></figure><h4 id="注意"><a href="#注意" class="headerlink" title="注意"></a>注意</h4><ul><li>在进行新增，删除，修改的时候，一定记得commit，否则数据库没有数据。</li><li>在查询的时候，不需要commit，执行fetchall /fetchone</li><li>对于sql语句不要用python字符串格式化进行拼接，会被sql注入</li></ul><h2 id="前端-python-MYSQL案例"><a href="#前端-python-MYSQL案例" class="headerlink" title="前端+python+MYSQL案例"></a>前端+python+MYSQL案例</h2><h3 id="安装插件"><a href="#安装插件" class="headerlink" title="安装插件"></a>安装插件</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">pip3 install flask  </span><br><span class="line">pip install cryptography </span><br><span class="line">pip3 install pymysql </span><br></pre></td></tr></table></figure><h3 id="文件位置"><a href="#文件位置" class="headerlink" title="文件位置"></a>文件位置</h3><img src="/2022/09/07/Flsak%E6%A1%86%E6%9E%B6/image-20230407221445470.png" class title="image-20230407221445470"><h3 id="新增用户"><a href="#新增用户" class="headerlink" title="新增用户"></a>新增用户</h3><ul><li><code>app.py</code><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> flask <span class="keyword">import</span> Flask,render_template, request</span><br><span class="line"><span class="keyword">import</span> pymysql</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">app = Flask(__name__)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@app.route(<span class="params"><span class="string">&#x27;/add/user&#x27;</span>, methods=[<span class="string">&quot;GET&quot;</span>,<span class="string">&quot;POST&quot;</span>]</span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">add</span>():</span><br><span class="line">    <span class="keyword">if</span> request.method == <span class="string">&quot;GET&quot;</span>:</span><br><span class="line">        <span class="keyword">return</span> render_template(<span class="string">&quot;add_user.html&quot;</span>)</span><br><span class="line"></span><br><span class="line">    username = request.form.get(<span class="string">&quot;user&quot;</span>)</span><br><span class="line">    pwd = request.form.get(<span class="string">&quot;pwd&quot;</span>)</span><br><span class="line">    mobile = request.form.get(<span class="string">&quot;mobile&quot;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 连接mysql</span></span><br><span class="line">    conn = pymysql.connect(host=<span class="string">&quot;127.0.0.1&quot;</span>, port=<span class="number">3306</span>, user=<span class="string">&quot;root&quot;</span>, password=<span class="string">&quot;root&quot;</span>, charset=<span class="string">&#x27;utf8&#x27;</span>, db=<span class="string">&#x27;bkys&#x27;</span>)</span><br><span class="line">    cursor = conn.cursor(cursor=pymysql.cursors.DictCursor)</span><br><span class="line"></span><br><span class="line">    sql = <span class="string">&quot;insert into admin(username,password,mobile) values(%s,%s,%s)&quot;</span></span><br><span class="line">    cursor.execute(sql, [username, pwd, mobile])</span><br><span class="line">    conn.commit()</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 关闭</span></span><br><span class="line">    cursor.close()</span><br><span class="line">    conn.close()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;添加成功&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    app.run()</span><br></pre></td></tr></table></figure></li></ul><ul><li><code>add_user.html</code></li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>添加用户<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>添加用户<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">method</span>=<span class="string">&quot;post&quot;</span> <span class="attr">action</span>=<span class="string">&quot;/add/user&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;user&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;用户名&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;pwd&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;密码&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;mobile&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;手机号&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">value</span>=<span class="string">&quot;提交&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="查询所有用户"><a href="#查询所有用户" class="headerlink" title="查询所有用户"></a>查询所有用户</h3><ul><li><code>app.py</code></li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line">from flask import Flask,render_template, request</span><br><span class="line">import pymysql</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">app = Flask(__name__)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">@app.route(&#x27;/add/user&#x27;, methods=[&quot;GET&quot;,&quot;POST&quot;])</span><br><span class="line">def add():</span><br><span class="line">    if request.method == &quot;GET&quot;:</span><br><span class="line">        return render_template(&quot;add_user.html&quot;)</span><br><span class="line"></span><br><span class="line">    username = request.form.get(&quot;user&quot;)</span><br><span class="line">    pwd = request.form.get(&quot;pwd&quot;)</span><br><span class="line">    mobile = request.form.get(&quot;mobile&quot;)</span><br><span class="line"></span><br><span class="line">    # 连接mysql</span><br><span class="line">    conn = pymysql.connect(host=&quot;127.0.0.1&quot;, port=3306, user=&quot;root&quot;, password=&quot;root&quot;, charset=&#x27;utf8&#x27;, db=&#x27;bkys&#x27;)</span><br><span class="line">    cursor = conn.cursor(cursor=pymysql.cursors.DictCursor)</span><br><span class="line"></span><br><span class="line">    sql = &quot;insert into admin(username,password,mobile) values(%s,%s,%s)&quot;</span><br><span class="line">    cursor.execute(sql, [username, pwd, mobile])</span><br><span class="line">    conn.commit()</span><br><span class="line"></span><br><span class="line">    # 关闭</span><br><span class="line">    cursor.close()</span><br><span class="line">    conn.close()</span><br><span class="line"></span><br><span class="line">    return &quot;添加成功&quot;</span><br><span class="line"></span><br><span class="line">@app.route(&quot;/show/user&quot;)</span><br><span class="line">def show_user():</span><br><span class="line">    # 连接mysql</span><br><span class="line">    conn = pymysql.connect(host=&quot;127.0.0.1&quot;, port=3306, user=&quot;root&quot;, password=&quot;root&quot;, charset=&#x27;utf8&#x27;, db=&#x27;bkys&#x27;)</span><br><span class="line">    cursor = conn.cursor(cursor=pymysql.cursors.DictCursor)</span><br><span class="line"></span><br><span class="line">    sql = &quot;select * from admin&quot;</span><br><span class="line">    cursor.execute(sql)</span><br><span class="line">    data_list = cursor.fetchall()</span><br><span class="line"></span><br><span class="line">    # 关闭</span><br><span class="line">    cursor.close()</span><br><span class="line">    conn.close()</span><br><span class="line"></span><br><span class="line">    print(data_list)</span><br><span class="line"></span><br><span class="line">    return render_template(&quot;show_user.html&quot;,data_list=data_list)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">if __name__ == &#x27;__main__&#x27;:</span><br><span class="line">    app.run()</span><br></pre></td></tr></table></figure><ul><li><code>show_user.html</code></li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>用户列表<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span>用户列表<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">table</span> <span class="attr">border</span>=<span class="string">&quot;1&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">thead</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">tr</span>&gt;</span>id<span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">tr</span>&gt;</span>name<span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">tr</span>&gt;</span>user<span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">tr</span>&gt;</span>mobile<span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">thead</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">tbody</span>&gt;</span></span><br><span class="line">        &#123;% for item in data_list %&#125;</span><br><span class="line">            <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">td</span>&gt;</span>&#123;&#123; item.id &#125;&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">td</span>&gt;</span>&#123;&#123; item.username &#125;&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">td</span>&gt;</span>&#123;&#123; item.password &#125;&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">td</span>&gt;</span>&#123;&#123; item.mobile &#125;&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">        &#123;% endfor %&#125;</span><br><span class="line">        <span class="tag">&lt;/<span class="name">tbody</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;Flask快速开发网站&quot;&gt;&lt;a href=&quot;#Flask快速开发网站&quot; class=&quot;headerlink&quot; title=&quot;Flask快速开发网站&quot;&gt;&lt;/a&gt;Flask快速开发网站&lt;/h2&gt;&lt;ol&gt;
&lt;li&gt;终端执行以下命令，安装flask&lt;figure clas</summary>
      
    
    
    
    <category term="Python篇" scheme="http://bkystop.github.io/categories/Python%E7%AF%87/"/>
    
    
    <category term="Python" scheme="http://bkystop.github.io/tags/Python/"/>
    
    <category term="Flsak" scheme="http://bkystop.github.io/tags/Flsak/"/>
    
  </entry>
  
  <entry>
    <title>Flask入门</title>
    <link href="http://bkystop.github.io/2022/08/28/Flask%E5%85%A5%E9%97%A8/"/>
    <id>http://bkystop.github.io/2022/08/28/Flask%E5%85%A5%E9%97%A8/</id>
    <published>2022-08-28T13:59:35.000Z</published>
    <updated>2023-04-09T09:06:41.322Z</updated>
    
    <content type="html"><![CDATA[<h2 id="Flask入门"><a href="#Flask入门" class="headerlink" title="Flask入门"></a>Flask入门</h2><ul><li>Flask作为web框架，它的作用主要是为了开发we应用程序。</li><li>开启debug</li></ul><img src="/2022/08/28/Flask%E5%85%A5%E9%97%A8/image-20230405220003024.png" class><img src="/2022/08/28/Flask%E5%85%A5%E9%97%A8/image-20230405220016730.png" class><ul><li>基本操作</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> flask <span class="keyword">import</span> Flask,render_template</span><br><span class="line"><span class="keyword">import</span> datetime</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">app = Flask(__name__)</span><br><span class="line"></span><br><span class="line"><span class="comment"># @app.route(&#x27;/&#x27;)</span></span><br><span class="line"><span class="comment"># def hello_world():  # put application&#x27;s code here</span></span><br><span class="line"><span class="comment">#     return &#x27;Hello!&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="meta">@app.route(<span class="params"><span class="string">&quot;/index&quot;</span></span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">index</span>():</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;hello&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 通过访问路径，获取用户的字符串参数</span></span><br><span class="line"><span class="meta">@app.route(<span class="params"><span class="string">&quot;/user/&lt;name&gt;&quot;</span></span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">name</span>(<span class="params">name</span>):</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;你好 %s&quot;</span> %name</span><br><span class="line"></span><br><span class="line"><span class="comment"># 通过访问路径，获取用户的字符串参数          此外还有float类型</span></span><br><span class="line"><span class="meta">@app.route(<span class="params"><span class="string">&quot;/user/&lt;int:id&gt;&quot;</span></span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">id</span>(<span class="params"><span class="built_in">id</span></span>):</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;你好 %d 号的会员&quot;</span> %<span class="built_in">id</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 路由路径不能重复，用户只能通过唯一路径来访问特点的函数</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 返回给用户网页文件</span></span><br><span class="line"><span class="comment"># @app.route(&quot;/&quot;)</span></span><br><span class="line"><span class="comment"># def index2():</span></span><br><span class="line"><span class="comment">#     return render_template(&quot;index.html&quot;)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 向页面传递变量</span></span><br><span class="line"><span class="meta">@app.route(<span class="params"><span class="string">&quot;/&quot;</span></span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">index2</span>():</span><br><span class="line">    time = datetime.date.today()        <span class="comment"># 普通变量</span></span><br><span class="line">    name = [<span class="string">&quot;张&quot;</span>,<span class="string">&quot;王&quot;</span>,<span class="string">&quot;李&quot;</span>,<span class="string">&quot;赵&quot;</span>]          <span class="comment"># 列表类型</span></span><br><span class="line">    task = &#123;<span class="string">&quot;任务&quot;</span>:<span class="string">&quot;睡觉&quot;</span>,<span class="string">&quot;时间&quot;</span>:<span class="string">&quot;24hours&quot;</span>&#125;    <span class="comment"># 字典类型</span></span><br><span class="line">    <span class="keyword">return</span> render_template(<span class="string">&quot;index.html&quot;</span>, var = time, <span class="built_in">list</span> = name, task = task)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    app.run()</span><br></pre></td></tr></table></figure><ul><li>在templates下新建html文件</li></ul><img src="/2022/08/28/Flask%E5%85%A5%E9%97%A8/image-20230405220047633.png" class><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    今天是&#123;&#123; var&#125;&#125;,欢迎你！<span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line">    今天值班的有:<span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line">    &#123;% for data in list %&#125;      <span class="comment">&lt;!--用大括号和百分号扩起来是控制结构--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span>&#123;&#123; data &#125;&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    &#123;% endfor %&#125;</span><br><span class="line"></span><br><span class="line">    任务：<span class="tag">&lt;<span class="name">br</span>/&gt;</span>            <span class="comment">&lt;!--在页面打印表格，迭代--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">table</span> <span class="attr">border</span>=<span class="string">&quot;1&quot;</span>&gt;</span></span><br><span class="line">            &#123;% for key,value in task.items() %&#125;      #<span class="comment">&lt;!--[(key,value),(key,value),(key,value)]--&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">td</span>&gt;</span>&#123;&#123; key &#125;&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">td</span>&gt;</span>&#123;&#123; value &#125;&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">            &#123;% endfor %&#125;</span><br><span class="line">        <span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="表单提交"><a href="#表单提交" class="headerlink" title="表单提交"></a>表单提交</h3><ul><li>app.py</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> flask <span class="keyword">import</span> Flask,render_template,request</span><br><span class="line"><span class="keyword">import</span> datetime</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">app = Flask(__name__)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 表单提交,需要指定methods为post</span></span><br><span class="line"><span class="meta">@app.route(<span class="params"><span class="string">&quot;/test/register&quot;</span></span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">register</span>():</span><br><span class="line">    <span class="keyword">return</span> render_template(<span class="string">&quot;test/register.html&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="meta">@app.route(<span class="params"><span class="string">&quot;/result&quot;</span>,methods=[<span class="string">&#x27;POST&#x27;</span>,<span class="string">&#x27;GET&#x27;</span>]</span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">result</span>():</span><br><span class="line">    <span class="keyword">if</span> request.method == <span class="string">&#x27;POST&#x27;</span>:</span><br><span class="line">        result = request.form</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> render_template(<span class="string">&quot;test/result.html&quot;</span>,result=result)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    app.run()</span><br></pre></td></tr></table></figure><ul><li>register.html</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">&quot;&#123;&#123; url_for(&#x27;result&#x27;) &#125;&#125;&quot;</span> <span class="attr">method</span>=<span class="string">&quot;post&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>姓名：<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;姓名&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>姓名：<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;年龄&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>姓名：<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;性别&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>姓名：<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;地址&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">value</span>=<span class="string">&quot;提交&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li>result.html</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">table</span> <span class="attr">border</span>=<span class="string">&quot;1&quot;</span>&gt;</span></span><br><span class="line">            &#123;% for key,value in result.items() %&#125;      #<span class="comment">&lt;!--[(key,value),(key,value),(key,value)]--&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">th</span>&gt;</span>&#123;&#123; key &#125;&#125;<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">th</span>&gt;</span>&#123;&#123; value &#125;&#125;<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">            &#123;% endfor %&#125;</span><br><span class="line">        <span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;Flask入门&quot;&gt;&lt;a href=&quot;#Flask入门&quot; class=&quot;headerlink&quot; title=&quot;Flask入门&quot;&gt;&lt;/a&gt;Flask入门&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;Flask作为web框架，它的作用主要是为了开发we应用程序。&lt;/li&gt;
&lt;li&gt;开启d</summary>
      
    
    
    
    <category term="Python篇" scheme="http://bkystop.github.io/categories/Python%E7%AF%87/"/>
    
    
    <category term="Python" scheme="http://bkystop.github.io/tags/Python/"/>
    
    <category term="Flask" scheme="http://bkystop.github.io/tags/Flask/"/>
    
  </entry>
  
  <entry>
    <title>Python爬取豆瓣Top250</title>
    <link href="http://bkystop.github.io/2022/07/05/Python%E7%88%AC%E5%8F%96%E8%B1%86%E7%93%A3Top250/"/>
    <id>http://bkystop.github.io/2022/07/05/Python%E7%88%AC%E5%8F%96%E8%B1%86%E7%93%A3Top250/</id>
    <published>2022-07-05T13:55:25.000Z</published>
    <updated>2023-04-09T09:10:41.611Z</updated>
    
    <content type="html"><![CDATA[<h2 id="python爬虫简介"><a href="#python爬虫简介" class="headerlink" title="python爬虫简介"></a>python爬虫简介</h2><ul><li>网络爬虫，是一种按照一定规则，自动抓取互联网信息的程序或脚本。由于互联网数据的多样性和资源的有限性，根据用户需求定向抓取相关网页并分析。</li><li>爬虫的本质：模拟浏览器打开网页，捕获网页中我们想要的那部分数据。</li></ul><p>从索引区出发——&gt;网页（将抓取到的网页放到历史库中进行处理）——&gt;临时库（不符合规则的清理，符合规则的进入索引区）——&gt;索引区（在索引区进行分类，归档，排序，然后反馈到用户）</p><p>——&gt;搜索引擎查询</p><h2 id="基本流程"><a href="#基本流程" class="headerlink" title="基本流程"></a>基本流程</h2><ul><li>准备工作（通过浏览器查看分析目标网页）</li><li>获取数据（通过http库向目标站点发起请求）</li><li>解析内容（得到的内容可能是html，json。可以用页面解析库，正则表达式进行解析）</li><li>保存数据（存为文本，保存到数据库，或者保存特定个数的文件。）</li><li>豆瓣电影网址：<a href="https://movie.douban.com/top250">https://movie.douban.com/top250</a> </li></ul><h2 id="准备工作"><a href="#准备工作" class="headerlink" title="准备工作"></a>准备工作</h2><h3 id="url分析"><a href="#url分析" class="headerlink" title="url分析"></a>url分析</h3><ul><li>页面包括250条电影数据，分10页，每页25条</li><li>每页的url不同之处：最后的数值 = （页数-1) * 25</li></ul><h3 id="分析页面"><a href="#分析页面" class="headerlink" title="分析页面"></a>分析页面</h3><ul><li>借助Chrome开发者工具（F12）来分析页面，在Elements下找到需要的数据位置.</li></ul><h3 id="编码规范"><a href="#编码规范" class="headerlink" title="编码规范"></a>编码规范</h3><ul><li>一般python程序第一行需加入以下内容（这样代码中可以包含文字）</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#-*-coding:utf-s-*-  或者   coding=utf-8</span></span><br></pre></td></tr></table></figure><ul><li>python文件中可以加入main函数可以用于测试程序（可以控制代码的程序和流程）</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&quot;__main__&quot;</span>:   <span class="comment"># 当程序执行时</span></span><br><span class="line"><span class="comment"># 调用函数</span></span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">main</span>():</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;hello&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&quot;__main__&quot;</span>:   <span class="comment"># 当程序执行时</span></span><br><span class="line"><span class="comment"># 调用函数</span></span><br><span class="line">    main()</span><br></pre></td></tr></table></figure><ul><li>引入自定义模块</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 引入自定义模块</span></span><br><span class="line"><span class="keyword">from</span> test1 <span class="keyword">import</span> t1</span><br><span class="line"></span><br><span class="line"><span class="comment"># 引入系统模块</span></span><br><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"></span><br><span class="line"><span class="comment"># 引入第三方模块</span></span><br><span class="line"><span class="keyword">import</span> re</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(t1)</span><br></pre></td></tr></table></figure><h3 id="引入模块"><a href="#引入模块" class="headerlink" title="引入模块"></a>引入模块</h3><ul><li>pycharm终端进行安装</li><li>setting——&gt;project interpreter</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> bs4   <span class="comment"># 网页解析，获取数据</span></span><br><span class="line"><span class="keyword">import</span> re    <span class="comment"># 正则表达式，进行文字匹配</span></span><br><span class="line"><span class="keyword">import</span> urllib.request,urllib.error   <span class="comment"># 制定url，获取数据</span></span><br><span class="line"><span class="keyword">import</span> xlwt  <span class="comment"># 进行excel操作</span></span><br><span class="line"><span class="keyword">import</span> sqlite3  <span class="comment"># 进行sqllite数据库操作</span></span><br></pre></td></tr></table></figure><h3 id="思路"><a href="#思路" class="headerlink" title="思路"></a>思路</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">main</span>():</span><br><span class="line">    baseurl = <span class="string">&quot;https://movie.douban.com/top250?start=&quot;</span></span><br><span class="line">    datelist = getData(baseurl)</span><br><span class="line">    savepath = <span class="string">&quot;.\\豆瓣电影Top.xls&quot;</span></span><br><span class="line">    <span class="comment"># 1.爬取网页</span></span><br><span class="line">    <span class="comment"># 2.逐一解析数据</span></span><br><span class="line">    <span class="comment"># 3.保存数据</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">getData</span>(<span class="params">baseurl</span>):</span><br><span class="line">    datalist = []</span><br><span class="line">    <span class="comment"># 2.逐一解析数据</span></span><br><span class="line">    <span class="keyword">return</span> datalist</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">saveData</span>(<span class="params">baseurl</span>):</span><br><span class="line"><span class="comment"># 3.保存数据</span></span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&quot;__main__&quot;</span>:   <span class="comment"># 当程序执行时</span></span><br><span class="line"><span class="comment"># 调用函数</span></span><br><span class="line">    main()</span><br></pre></td></tr></table></figure><h2 id="获取数据"><a href="#获取数据" class="headerlink" title="获取数据"></a>获取数据</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> bs4 <span class="keyword">import</span> BeautifulSoup   <span class="comment"># 网页解析，获取数据</span></span><br><span class="line"><span class="keyword">import</span> re    <span class="comment"># 正则表达式，进行文字匹配</span></span><br><span class="line"><span class="keyword">import</span> urllib.request,urllib.error   <span class="comment"># 制定url，获取数据</span></span><br><span class="line"><span class="keyword">import</span> xlwt  <span class="comment"># 进行excel操作</span></span><br><span class="line"><span class="keyword">import</span> sqlite3  <span class="comment"># 进行sqllite数据库操作</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">main</span>():</span><br><span class="line">    baseurl = <span class="string">&quot;https://movie.douban.com/top250?start=&quot;</span></span><br><span class="line">    <span class="comment"># 爬取网页</span></span><br><span class="line">    datelist = getData(baseurl)</span><br><span class="line">    savepath = <span class="string">&quot;.\\豆瓣电影Top.xls&quot;</span></span><br><span class="line">    <span class="comment"># 保存数据</span></span><br><span class="line">    <span class="comment"># saveData(savepath)</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">getData</span>(<span class="params">baseurl</span>):</span><br><span class="line">    datalist = []</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">0</span>,<span class="number">10</span>):    <span class="comment"># 调用获取信息的函数：10次</span></span><br><span class="line">        url = baseurl + <span class="built_in">str</span>(i * <span class="number">25</span>)</span><br><span class="line">        html = askURL(url)   <span class="comment"># 保存获取到的网页源码</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> datalist</span><br><span class="line"></span><br><span class="line"><span class="comment"># 得到指定一个url的网页内容</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">askURL</span>(<span class="params">url</span>):</span><br><span class="line">    head = &#123;      <span class="comment"># 模拟浏览器头部信息（伪装）</span></span><br><span class="line">        <span class="string">&quot;User-Agent&quot;</span>: <span class="string">&quot;Mozilla / 5.0(Windows NT 10.0;Win64;x64) AppleWebKit / 537.36(KHTML, likeGecko) Chrome / 97.0.4692.71Safari / 537.36&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment"># 用户代理，告诉豆瓣，我们是什么类型的及其，浏览器（本质是告诉浏览器。我们可以接收什么水平的信息）</span></span><br><span class="line"></span><br><span class="line">    request = urllib.request.Request(url,headers=head)</span><br><span class="line">    html = <span class="string">&quot;&quot;</span></span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        response = urllib.request.urlopen(request)</span><br><span class="line">        html = response.read().decode(<span class="string">&quot;utf-&quot;</span>)</span><br><span class="line">        <span class="built_in">print</span>(html)</span><br><span class="line">    <span class="keyword">except</span> urllib.error.URLError <span class="keyword">as</span> e:</span><br><span class="line">        <span class="keyword">if</span> <span class="built_in">hasattr</span>(e, <span class="string">&quot;code&quot;</span>):</span><br><span class="line">            <span class="built_in">print</span>(e.code)</span><br><span class="line">        <span class="keyword">if</span> <span class="built_in">hasattr</span>(e, <span class="string">&quot;reason&quot;</span>):</span><br><span class="line">            <span class="built_in">print</span>(e.reason)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> html</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">saveData</span>(<span class="params">baseurl</span>):</span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&quot;__main__&quot;</span>:   <span class="comment"># 当程序执行时</span></span><br><span class="line"><span class="comment"># 调用函数</span></span><br><span class="line">    main()</span><br></pre></td></tr></table></figure><h2 id="解析内容"><a href="#解析内容" class="headerlink" title="解析内容"></a>解析内容</h2><ul><li>使用BeautifulSoup定位特定的标签位置</li><li>使用正则表达式找到具体的内容</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> bs4 <span class="keyword">import</span> BeautifulSoup   <span class="comment"># 网页解析，获取数据</span></span><br><span class="line"><span class="keyword">import</span> re    <span class="comment"># 正则表达式，进行文字匹配</span></span><br><span class="line"><span class="keyword">import</span> urllib.request,urllib.error   <span class="comment"># 制定url，获取数据</span></span><br><span class="line"><span class="keyword">import</span> xlwt  <span class="comment"># 进行excel操作</span></span><br><span class="line"><span class="keyword">import</span> sqlite3  <span class="comment"># 进行sqllite数据库操作</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">main</span>():</span><br><span class="line">    baseurl = <span class="string">&quot;https://movie.douban.com/top250?start=&quot;</span></span><br><span class="line">    <span class="comment"># 爬取网页</span></span><br><span class="line">    datelist = getData(baseurl)</span><br><span class="line">    savepath = <span class="string">&quot;.\\豆瓣电影Top.xls&quot;</span></span><br><span class="line">    <span class="comment"># 保存数据</span></span><br><span class="line">    <span class="comment"># saveData(savepath)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 影片详情的规则</span></span><br><span class="line">findLink = re.<span class="built_in">compile</span>(<span class="string">r&#x27;&lt;a href=&quot;(.*?)&quot;&gt;&#x27;</span>)  <span class="comment"># 创建正则表达式对象，表示规则（字符串的模式）</span></span><br><span class="line"><span class="comment"># 硬片图片</span></span><br><span class="line">findImgSrc = re.<span class="built_in">compile</span>(<span class="string">r&#x27;&lt;img.*src=&quot;(.*?)&quot;&gt;&#x27;</span>,re.S)  <span class="comment"># .不包括换行的概念，re.S 让换行符包含在字符中</span></span><br><span class="line"><span class="comment">#片名</span></span><br><span class="line">findTitle = re.<span class="built_in">compile</span>(<span class="string">r&#x27;&lt;span class=&quot;title&quot;&gt;(.*)&lt;/span&gt;&#x27;</span>)</span><br><span class="line"><span class="comment">#评分</span></span><br><span class="line">findRating = re.<span class="built_in">compile</span>(<span class="string">r&#x27;&lt;span class=&quot;rating_num&quot; property=&quot;v:average&quot;&gt;(.*)&lt;/span&gt;&#x27;</span>)</span><br><span class="line"><span class="comment">#评价人数</span></span><br><span class="line">findJudge = re.<span class="built_in">compile</span>(<span class="string">r&#x27;&lt;span&gt;(\d*)人评价&lt;/span&gt;&#x27;</span>)</span><br><span class="line"><span class="comment">#概况</span></span><br><span class="line">findInq = re.<span class="built_in">compile</span>(<span class="string">r&#x27;&lt;span class=&quot;inq&quot;&gt;(.*)&lt;/span&gt;&#x27;</span>)</span><br><span class="line"><span class="comment">#相关内容</span></span><br><span class="line">findBd = re.<span class="built_in">compile</span>(<span class="string">r&#x27;&lt;p class=&quot;&quot;&gt;(.*?)&lt;/p&gt;\n&lt;div&#x27;</span>,re.S)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">getData</span>(<span class="params">baseurl</span>):</span><br><span class="line">    datalist = []</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">0</span>,<span class="number">10</span>):    <span class="comment"># 调用获取信息的函数：10次</span></span><br><span class="line">        url = baseurl + <span class="built_in">str</span>(i * <span class="number">25</span>)</span><br><span class="line">        html = askURL(url)   <span class="comment"># 保存获取到的网页源码</span></span><br><span class="line"></span><br><span class="line">        <span class="comment"># 逐一解析数据</span></span><br><span class="line">        soup = BeautifulSoup(html,<span class="string">&quot;html.parser&quot;</span>)</span><br><span class="line">        <span class="keyword">for</span> item <span class="keyword">in</span> soup.find_all(<span class="string">&#x27;div&#x27;</span>,class_=<span class="string">&quot;item&quot;</span>):   <span class="comment"># 查找符合要求的字符串，形成列表,class加下划线，表示属性值</span></span><br><span class="line">            <span class="comment"># print(item)   # 测试：查看一部电影的所有信息</span></span><br><span class="line">            data = []</span><br><span class="line">            item = <span class="built_in">str</span>(item)</span><br><span class="line"></span><br><span class="line">            <span class="comment"># 影片详情的超链接</span></span><br><span class="line">            link = re.findall(findLink,item)[<span class="number">0</span>]  <span class="comment"># re库通过正则表达式查早指定的字符串</span></span><br><span class="line">            data.append(link)                    <span class="comment"># 添加链接</span></span><br><span class="line"></span><br><span class="line">            imgSrc = re.findall(findImgSrc,item)[<span class="number">0</span>]</span><br><span class="line">            data.append(imgSrc)                  <span class="comment"># 添加图片</span></span><br><span class="line"></span><br><span class="line">            titles = re.findall(findTitle,item)  <span class="comment"># 片面，可能只有一个中文名</span></span><br><span class="line">            <span class="keyword">if</span>(<span class="built_in">len</span>(titles) == <span class="number">2</span>):</span><br><span class="line">                ctitie = titles[<span class="number">0</span>]</span><br><span class="line">                data.append(ctitie)                    <span class="comment"># 添加中文名</span></span><br><span class="line">                otitle = titles[<span class="number">1</span>].replace(<span class="string">&quot;/&quot;</span>,<span class="string">&quot;&quot;</span>)      <span class="comment"># 去掉无关符号</span></span><br><span class="line">                data.append(otitle)                     <span class="comment"># 添加外国名</span></span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                data.append(titles[<span class="number">0</span>])</span><br><span class="line">                data.append(<span class="string">&#x27; &#x27;</span>)                         <span class="comment">#  若没有外国名留空</span></span><br><span class="line"></span><br><span class="line">            rating = re.findall(findRating,item)[<span class="number">0</span>]</span><br><span class="line">            data.append(rating)                       <span class="comment"># 添加评分</span></span><br><span class="line"></span><br><span class="line">            judgeNum = re.findall(findJudge,item)[<span class="number">0</span>]</span><br><span class="line">            data.append(judgeNum)                      <span class="comment"># 添加评价人数</span></span><br><span class="line"></span><br><span class="line">            inq = re.findall(findInq,item)</span><br><span class="line">            <span class="keyword">if</span> <span class="built_in">len</span>(inq) != <span class="number">0</span>:</span><br><span class="line">                inq = inq[<span class="number">0</span>].replace(<span class="string">&quot;。&quot;</span>,<span class="string">&quot;，&quot;</span>)        <span class="comment"># 去掉句号</span></span><br><span class="line">                data.append(inq)</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                data.append(inq)                           <span class="comment"># 添加概述</span></span><br><span class="line"></span><br><span class="line">            bd = re.findall(findBd,item)[<span class="number">0</span>]</span><br><span class="line">            bd = re.sub(<span class="string">&#x27;&lt;br(\s+)?/&gt;(\s+)?&#x27;</span>, <span class="string">&quot;&quot;</span>, bd)   <span class="comment"># 去掉&lt;br/&gt;</span></span><br><span class="line">            bd = re.sub(<span class="string">&#x27;/&#x27;</span>, <span class="string">&quot;&quot;</span>, bd)                    <span class="comment">#  替换/</span></span><br><span class="line">            data.append(bd.strip())                   <span class="comment"># 去掉前后空格</span></span><br><span class="line"></span><br><span class="line">            datalist.append(data)                     <span class="comment"># 将处理好的一部电影信息放入datalist</span></span><br><span class="line">        <span class="built_in">print</span>(datalist)</span><br><span class="line">    <span class="keyword">return</span> datalist</span><br><span class="line"></span><br><span class="line"><span class="comment"># 得到指定一个url的网页内容</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">askURL</span>(<span class="params">url</span>):</span><br><span class="line">    head = &#123;      <span class="comment"># 模拟浏览器头部信息（伪装）</span></span><br><span class="line">        <span class="string">&quot;User-Agent&quot;</span>: <span class="string">&quot;Mozilla / 5.0(Windows NT 10.0;Win64;x64) AppleWebKit / 537.36(KHTML, likeGecko) Chrome / 97.0.4692.71Safari / 537.36&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment"># 用户代理，告诉豆瓣，我们是什么类型的及其，浏览器（本质是告诉浏览器。我们可以接收什么水平的信息）</span></span><br><span class="line"></span><br><span class="line">    request = urllib.request.Request(url,headers=head)</span><br><span class="line">    html = <span class="string">&quot;&quot;</span></span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        response = urllib.request.urlopen(request)</span><br><span class="line">        html = response.read().decode(<span class="string">&quot;utf-&quot;</span>)</span><br><span class="line">        <span class="comment"># print(html)</span></span><br><span class="line">    <span class="keyword">except</span> urllib.error.URLError <span class="keyword">as</span> e:</span><br><span class="line">        <span class="keyword">if</span> <span class="built_in">hasattr</span>(e, <span class="string">&quot;code&quot;</span>):</span><br><span class="line">            <span class="built_in">print</span>(e.code)</span><br><span class="line">        <span class="keyword">if</span> <span class="built_in">hasattr</span>(e, <span class="string">&quot;reason&quot;</span>):</span><br><span class="line">            <span class="built_in">print</span>(e.reason)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> html</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">saveData</span>(<span class="params">baseurl</span>):</span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&quot;__main__&quot;</span>:   <span class="comment"># 当程序执行时</span></span><br><span class="line"><span class="comment"># 调用函数</span></span><br><span class="line">    main()</span><br></pre></td></tr></table></figure><h2 id="保存数据"><a href="#保存数据" class="headerlink" title="保存数据"></a>保存数据</h2><ul><li>以utf-8编码创建一个Excel对象</li><li>创建一个sheet表</li><li>往单元格写入内容</li><li>保存表格</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># -*- codeing = utf-8 -*-</span></span><br><span class="line"><span class="comment"># @Time : 2022/1/28 21:06</span></span><br><span class="line"><span class="comment"># @Author : bkys</span></span><br><span class="line"><span class="comment"># @File : spider.py</span></span><br><span class="line"><span class="comment"># @Software : PyCharm</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> bs4 <span class="keyword">import</span> BeautifulSoup   <span class="comment"># 网页解析，获取数据</span></span><br><span class="line"><span class="keyword">import</span> re    <span class="comment"># 正则表达式，进行文字匹配</span></span><br><span class="line"><span class="keyword">import</span> urllib.request,urllib.error   <span class="comment"># 制定url，获取数据</span></span><br><span class="line"><span class="keyword">import</span> xlwt  <span class="comment"># 进行excel操作</span></span><br><span class="line"><span class="keyword">import</span> sqlite3  <span class="comment"># 进行sqllite数据库操作</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">main</span>():</span><br><span class="line">    baseurl = <span class="string">&quot;https://movie.douban.com/top250?start=&quot;</span></span><br><span class="line">    <span class="comment"># 爬取网页</span></span><br><span class="line">    datalist = getData(baseurl)</span><br><span class="line">    savepath = <span class="string">&quot;.\\豆瓣电影Top.xls&quot;</span></span><br><span class="line">    <span class="comment"># 保存数据</span></span><br><span class="line">    saveData(datalist,savepath)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 影片详情的规则</span></span><br><span class="line">findLink = re.<span class="built_in">compile</span>(<span class="string">r&#x27;&lt;a href=&quot;(.*?)&quot;&gt;&#x27;</span>)  <span class="comment"># 创建正则表达式对象，表示规则（字符串的模式）</span></span><br><span class="line"><span class="comment"># 硬片图片</span></span><br><span class="line">findImgSrc = re.<span class="built_in">compile</span>(<span class="string">r&#x27;&lt;img.*src=&quot;(.*?)&quot;&gt;&#x27;</span>,re.S)  <span class="comment"># .不包括换行的概念，re.S 让换行符包含在字符中</span></span><br><span class="line"><span class="comment">#片名</span></span><br><span class="line">findTitle = re.<span class="built_in">compile</span>(<span class="string">r&#x27;&lt;span class=&quot;title&quot;&gt;(.*)&lt;/span&gt;&#x27;</span>)</span><br><span class="line"><span class="comment">#评分</span></span><br><span class="line">findRating = re.<span class="built_in">compile</span>(<span class="string">r&#x27;&lt;span class=&quot;rating_num&quot; property=&quot;v:average&quot;&gt;(.*)&lt;/span&gt;&#x27;</span>)</span><br><span class="line"><span class="comment">#评价人数</span></span><br><span class="line">findJudge = re.<span class="built_in">compile</span>(<span class="string">r&#x27;&lt;span&gt;(\d*)人评价&lt;/span&gt;&#x27;</span>)</span><br><span class="line"><span class="comment">#概况</span></span><br><span class="line">findInq = re.<span class="built_in">compile</span>(<span class="string">r&#x27;&lt;span class=&quot;inq&quot;&gt;(.*)&lt;/span&gt;&#x27;</span>)</span><br><span class="line"><span class="comment">#相关内容</span></span><br><span class="line">findBd = re.<span class="built_in">compile</span>(<span class="string">r&#x27;&lt;p class=&quot;&quot;&gt;(.*?)&lt;/p&gt;\n&lt;div&#x27;</span>,re.S)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">getData</span>(<span class="params">baseurl</span>):</span><br><span class="line">    datalist = []</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">0</span>,<span class="number">10</span>):    <span class="comment"># 调用获取信息的函数：10次</span></span><br><span class="line">        url = baseurl + <span class="built_in">str</span>(i * <span class="number">25</span>)</span><br><span class="line">        html = askURL(url)   <span class="comment"># 保存获取到的网页源码</span></span><br><span class="line"></span><br><span class="line">        <span class="comment"># 逐一解析数据</span></span><br><span class="line">        soup = BeautifulSoup(html,<span class="string">&quot;html.parser&quot;</span>)</span><br><span class="line">        <span class="keyword">for</span> item <span class="keyword">in</span> soup.find_all(<span class="string">&#x27;div&#x27;</span>,class_=<span class="string">&quot;item&quot;</span>):   <span class="comment"># 查找符合要求的字符串，形成列表,class加下划线，表示属性值</span></span><br><span class="line">            <span class="comment"># print(item)   # 测试：查看一部电影的所有信息</span></span><br><span class="line">            data = []</span><br><span class="line">            item = <span class="built_in">str</span>(item)</span><br><span class="line"></span><br><span class="line">            <span class="comment"># 影片详情的超链接</span></span><br><span class="line">            link = re.findall(findLink,item)[<span class="number">0</span>]  <span class="comment"># re库通过正则表达式查早指定的字符串</span></span><br><span class="line">            data.append(link)                    <span class="comment"># 添加链接</span></span><br><span class="line"></span><br><span class="line">            imgSrc = re.findall(findImgSrc,item)[<span class="number">0</span>]</span><br><span class="line">            data.append(imgSrc)                  <span class="comment"># 添加图片</span></span><br><span class="line"></span><br><span class="line">            titles = re.findall(findTitle,item)  <span class="comment"># 片面，可能只有一个中文名</span></span><br><span class="line">            <span class="keyword">if</span>(<span class="built_in">len</span>(titles) == <span class="number">2</span>):</span><br><span class="line">                ctitie = titles[<span class="number">0</span>]</span><br><span class="line">                data.append(ctitie)                    <span class="comment"># 添加中文名</span></span><br><span class="line">                otitle = titles[<span class="number">1</span>].replace(<span class="string">&quot;/&quot;</span>,<span class="string">&quot;&quot;</span>)      <span class="comment"># 去掉无关符号</span></span><br><span class="line">                data.append(otitle)                     <span class="comment"># 添加外国名</span></span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                data.append(titles[<span class="number">0</span>])</span><br><span class="line">                data.append(<span class="string">&#x27; &#x27;</span>)                         <span class="comment">#  若没有外国名留空</span></span><br><span class="line"></span><br><span class="line">            rating = re.findall(findRating,item)[<span class="number">0</span>]</span><br><span class="line">            data.append(rating)                       <span class="comment"># 添加评分</span></span><br><span class="line"></span><br><span class="line">            judgeNum = re.findall(findJudge,item)[<span class="number">0</span>]</span><br><span class="line">            data.append(judgeNum)                      <span class="comment"># 添加评价人数</span></span><br><span class="line"></span><br><span class="line">            inq = re.findall(findInq,item)</span><br><span class="line">            <span class="keyword">if</span> <span class="built_in">len</span>(inq) != <span class="number">0</span>:</span><br><span class="line">                inq = inq[<span class="number">0</span>].replace(<span class="string">&quot;。&quot;</span>,<span class="string">&quot;，&quot;</span>)        <span class="comment"># 去掉句号</span></span><br><span class="line">                data.append(inq)</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                data.append(inq)                           <span class="comment"># 添加概述</span></span><br><span class="line"></span><br><span class="line">            bd = re.findall(findBd,item)[<span class="number">0</span>]</span><br><span class="line">            bd = re.sub(<span class="string">&#x27;&lt;br(\s+)?/&gt;(\s+)?&#x27;</span>, <span class="string">&quot;&quot;</span>, bd)   <span class="comment"># 去掉&lt;br/&gt;</span></span><br><span class="line">            bd = re.sub(<span class="string">&#x27;/&#x27;</span>, <span class="string">&quot;&quot;</span>, bd)                    <span class="comment">#  替换/</span></span><br><span class="line">            data.append(bd.strip())                   <span class="comment"># 去掉前后空格</span></span><br><span class="line"></span><br><span class="line">            datalist.append(data)                     <span class="comment"># 将处理好的一部电影信息放入datalist</span></span><br><span class="line">    <span class="keyword">return</span> datalist</span><br><span class="line"></span><br><span class="line"><span class="comment"># 得到指定一个url的网页内容</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">askURL</span>(<span class="params">url</span>):</span><br><span class="line">    head = &#123;      <span class="comment"># 模拟浏览器头部信息（伪装）</span></span><br><span class="line">        <span class="string">&quot;User-Agent&quot;</span>: <span class="string">&quot;Mozilla / 5.0(Windows NT 10.0;Win64;x64) AppleWebKit / 537.36(KHTML, likeGecko) Chrome / 97.0.4692.71Safari / 537.36&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment"># 用户代理，告诉豆瓣，我们是什么类型的及其，浏览器（本质是告诉浏览器。我们可以接收什么水平的信息）</span></span><br><span class="line"></span><br><span class="line">    request = urllib.request.Request(url,headers=head)</span><br><span class="line">    html = <span class="string">&quot;&quot;</span></span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        response = urllib.request.urlopen(request)</span><br><span class="line">        html = response.read().decode(<span class="string">&quot;utf-&quot;</span>)</span><br><span class="line">        <span class="comment"># print(html)</span></span><br><span class="line">    <span class="keyword">except</span> urllib.error.URLError <span class="keyword">as</span> e:</span><br><span class="line">        <span class="keyword">if</span> <span class="built_in">hasattr</span>(e, <span class="string">&quot;code&quot;</span>):</span><br><span class="line">            <span class="built_in">print</span>(e.code)</span><br><span class="line">        <span class="keyword">if</span> <span class="built_in">hasattr</span>(e, <span class="string">&quot;reason&quot;</span>):</span><br><span class="line">            <span class="built_in">print</span>(e.reason)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> html</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">saveData</span>(<span class="params">datalist,savapath</span>):</span><br><span class="line">    book = xlwt.Workbook(encoding=<span class="string">&quot;utf-8&quot;</span>,style_compression=<span class="number">0</span>)  <span class="comment"># 创建workbook对象</span></span><br><span class="line">    sheet = book.add_sheet(<span class="string">&quot;豆瓣电影Top250&quot;</span>,cell_overwrite_ok=<span class="literal">True</span>)  <span class="comment"># 创建工作表</span></span><br><span class="line">    col = (<span class="string">&quot;电影详情链接&quot;</span>,<span class="string">&quot;图片链接&quot;</span>,<span class="string">&quot;影片中文名&quot;</span>,<span class="string">&quot;影片外国名&quot;</span>,<span class="string">&quot;评分&quot;</span>,<span class="string">&quot;评价数&quot;</span>,<span class="string">&quot;概况&quot;</span>,<span class="string">&quot;相关信息&quot;</span>)</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">0</span>,<span class="number">8</span>):</span><br><span class="line">        sheet.write(<span class="number">0</span>,i,col[i])  <span class="comment"># 列名</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">0</span>,<span class="number">250</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;第%d条&quot;</span> %(i+<span class="number">1</span>))</span><br><span class="line">        data = datalist[i]</span><br><span class="line">        <span class="keyword">for</span> j <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">0</span>,<span class="number">8</span>):</span><br><span class="line">            sheet.write(i+<span class="number">1</span>,j,data[j])</span><br><span class="line"></span><br><span class="line">    book.save(savapath)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&quot;__main__&quot;</span>:   <span class="comment"># 当程序执行时</span></span><br><span class="line"><span class="comment"># 调用函数</span></span><br><span class="line">    main()</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;爬取完毕&quot;</span>)</span><br></pre></td></tr></table></figure><h2 id="urllib扩展"><a href="#urllib扩展" class="headerlink" title="urllib扩展"></a>urllib扩展</h2><h3 id="获取一个get请求"><a href="#获取一个get请求" class="headerlink" title="获取一个get请求"></a>获取一个get请求</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> urllib.request</span><br><span class="line"></span><br><span class="line">response = urllib.request.urlopen(<span class="string">&quot;http://www.baidu.com&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(response.read().decode(<span class="string">&#x27;utf-8&#x27;</span>))  <span class="comment"># 对获得到的网页源码进行utf-8解码</span></span><br></pre></td></tr></table></figure><h3 id="获取一个post请求"><a href="#获取一个post请求" class="headerlink" title="获取一个post请求"></a>获取一个post请求</h3><ul><li>httpbin.org（用于测试）</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> urllib.request</span><br><span class="line"><span class="keyword">import</span> urllib.parse  <span class="comment"># 解析器，解析键值对</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 给post传递表单信息</span></span><br><span class="line"><span class="comment"># data = bytes()  # 转换成二进制的数据包</span></span><br><span class="line">data = <span class="built_in">bytes</span>(urllib.parse.urlencode(&#123;<span class="string">&quot;hello&quot;</span>:<span class="string">&quot;world&quot;</span>&#125;),encoding=<span class="string">&quot;utf-8&quot;</span>)</span><br><span class="line">response = urllib.request.urlopen(<span class="string">&quot;http://httpbin.org/post&quot;</span>,data= data)   </span><br><span class="line"><span class="built_in">print</span>(response.read().decode(<span class="string">&quot;utf-8&quot;</span>))</span><br></pre></td></tr></table></figure><h3 id="超时处理（418被发现）"><a href="#超时处理（418被发现）" class="headerlink" title="超时处理（418被发现）"></a>超时处理（418被发现）</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> urllib.request</span><br><span class="line"></span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    response = urllib.request.urlopen(<span class="string">&quot;http://httpbin.org/get&quot;</span>,timeout=<span class="number">0.01</span>)</span><br><span class="line">    <span class="built_in">print</span>(response.read().decode(<span class="string">&quot;utf-8&quot;</span>))</span><br><span class="line"><span class="keyword">except</span> urllib.error.URLError <span class="keyword">as</span> e:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;time out!&quot;</span>)</span><br></pre></td></tr></table></figure><h3 id="获取header"><a href="#获取header" class="headerlink" title="获取header"></a>获取header</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> urllib.request</span><br><span class="line"></span><br><span class="line">response = urllib.request.urlopen(<span class="string">&quot;http://www.baidu.com&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(response.getheaders())  <span class="comment"># 要拿具体的header，使用getheader</span></span><br><span class="line"><span class="built_in">print</span>(response.getheader(<span class="string">&quot;Server&quot;</span>))</span><br></pre></td></tr></table></figure><h2 id="Bs4"><a href="#Bs4" class="headerlink" title="Bs4"></a>Bs4</h2><h3 id="BeautifulSoup简介"><a href="#BeautifulSoup简介" class="headerlink" title="BeautifulSoup简介"></a>BeautifulSoup简介</h3><p><strong>BeautifulSoup将复杂的html文档转换成一个复杂的树形结构，每个节点都是python对象，所有的对象可分为四类。</strong> </p><ul><li>Tag   标签及其内容：只能拿到它所找到的第一个内容</li><li>NavigableString    标签里的内容（字符串）</li><li>BeautifulSoup      整个文档</li><li>Comment      这是一个特殊的NavigableString，输出的内容不包含注释符号</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> bs4 <span class="keyword">import</span> BeautifulSoup</span><br><span class="line"><span class="keyword">import</span> urllib.request</span><br><span class="line"></span><br><span class="line">file = urllib.request.urlopen(<span class="string">&quot;http://www.baidu.com&quot;</span>)</span><br><span class="line">html = file.read()</span><br><span class="line">bs = BeautifulSoup(html,<span class="string">&quot;html.parser&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(bs.title)  <span class="comment"># 拿到整个title标签</span></span><br><span class="line"><span class="built_in">print</span>(bs.title.string)  <span class="comment"># 拿到title标签内的内容</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">type</span>(bs.title.string))  <span class="comment"># 标签内的内容，字符串</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(bs.a.attrs)  <span class="comment"># 以字典形式展示标签中的属性</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">type</span>(bs))   <span class="comment"># 表示整个文档</span></span><br><span class="line"><span class="built_in">print</span>(bs.name)  <span class="comment"># 文档</span></span><br><span class="line"><span class="built_in">print</span>(bs)  <span class="comment"># 打印整个文档</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(bs.a.string)  <span class="comment"># 去掉注释</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">type</span>(bs.a.string))  <span class="comment"># 是一个特殊的NavigableString,不包含注释部分</span></span><br></pre></td></tr></table></figure><h3 id="文档的遍历"><a href="#文档的遍历" class="headerlink" title="文档的遍历"></a>文档的遍历</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> bs4 <span class="keyword">import</span> BeautifulSoup</span><br><span class="line"><span class="keyword">import</span> urllib.request</span><br><span class="line"></span><br><span class="line">file = urllib.request.urlopen(<span class="string">&quot;http://www.baidu.com&quot;</span>)</span><br><span class="line">html = file.read().decode(<span class="string">&#x27;utf-8&#x27;</span>)</span><br><span class="line">bs = BeautifulSoup(html,<span class="string">&quot;html.parser&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># print(bs.head.contents)   # 返回一个列表</span></span><br><span class="line"><span class="built_in">print</span>(bs.head.contents[<span class="number">1</span>])</span><br></pre></td></tr></table></figure><h3 id="文档的搜索"><a href="#文档的搜索" class="headerlink" title="文档的搜索"></a>文档的搜索</h3><ul><li>字符串过滤：会查找与字符串完全匹配的内容</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> bs4 <span class="keyword">import</span> BeautifulSoup</span><br><span class="line"><span class="keyword">import</span> urllib.request</span><br><span class="line"></span><br><span class="line">file = urllib.request.urlopen(<span class="string">&quot;http://www.baidu.com&quot;</span>)</span><br><span class="line"><span class="comment"># file = open(response.decode(&#x27;utf-8&#x27;))</span></span><br><span class="line">html = file.read().decode(<span class="string">&#x27;utf-8&#x27;</span>)</span><br><span class="line">bs = BeautifulSoup(html,<span class="string">&quot;html.parser&quot;</span>)</span><br><span class="line"></span><br><span class="line">t_list = bs.find_all(<span class="string">&quot;a&quot;</span>)  <span class="comment"># 返回一个列表，这个列表包含所有的a标签</span></span><br><span class="line"><span class="built_in">print</span>(t_list)    </span><br></pre></td></tr></table></figure><ul><li>正则表达式搜索：使用search（）方法来匹配内容</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> bs4 <span class="keyword">import</span> BeautifulSoup</span><br><span class="line"><span class="keyword">import</span> urllib.request</span><br><span class="line"><span class="keyword">import</span> re</span><br><span class="line"></span><br><span class="line">file = urllib.request.urlopen(<span class="string">&quot;http://www.baidu.com&quot;</span>))</span><br><span class="line">html = file.read().decode(<span class="string">&#x27;utf-8&#x27;</span>)</span><br><span class="line">bs = BeautifulSoup(html,<span class="string">&quot;html.parser&quot;</span>)</span><br><span class="line"></span><br><span class="line">t_list = bs.find_all(re.<span class="built_in">compile</span>(<span class="string">&quot;a&quot;</span>))  <span class="comment"># 所有包含a的标签，捕获标签及其内容</span></span><br><span class="line"><span class="built_in">print</span>(t_list)</span><br></pre></td></tr></table></figure><ul><li>传入一个函数，根据函数的要求来搜索</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> bs4 <span class="keyword">import</span> BeautifulSoup</span><br><span class="line"><span class="keyword">import</span> urllib.request</span><br><span class="line">file = urllib.request.urlopen(<span class="string">&quot;http://www.baidu.com&quot;</span>)</span><br><span class="line"></span><br><span class="line">html = file.read().decode(<span class="string">&#x27;utf-8&#x27;</span>)</span><br><span class="line"></span><br><span class="line">bs = BeautifulSoup(html,<span class="string">&quot;html.parser&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">name_is_exists</span>(<span class="params">tag</span>):</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> tag.has_attr(<span class="string">&quot;name&quot;</span>)  <span class="comment"># 搜索有name标签的</span></span><br><span class="line"></span><br><span class="line">t_list = bs.find_all(name_is_exists)</span><br><span class="line"></span><br><span class="line"><span class="comment"># print(t_list)</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> item <span class="keyword">in</span> t_list:</span><br><span class="line"></span><br><span class="line">    <span class="built_in">print</span>(t_list)     <span class="comment"># 以列表形式打印</span></span><br></pre></td></tr></table></figure><ul><li>kwargs 参数</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> bs4 <span class="keyword">import</span> BeautifulSoup</span><br><span class="line"><span class="keyword">import</span> urllib.request</span><br><span class="line"></span><br><span class="line">file = urllib.request.urlopen(<span class="string">&quot;http://www.baidu.com&quot;</span>)</span><br><span class="line">html = file.read().decode(<span class="string">&#x27;utf-8&#x27;</span>)</span><br><span class="line">bs = BeautifulSoup(html,<span class="string">&quot;html.parser&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># t_list = bs.find_all(id=&quot;head&quot;)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># t_list = bs.find_all(class_=True)  # 包含class及其子内容</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># print(t_list)</span></span><br><span class="line"><span class="keyword">for</span> item <span class="keyword">in</span> t_list:</span><br><span class="line">    <span class="built_in">print</span>(item)     <span class="comment"># 以打印head中的所有子内容</span></span><br></pre></td></tr></table></figure><ul><li>text参数</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> bs4 <span class="keyword">import</span> BeautifulSoup</span><br><span class="line"><span class="keyword">import</span> urllib.request</span><br><span class="line"><span class="keyword">import</span> re</span><br><span class="line"></span><br><span class="line">file = urllib.request.urlopen(<span class="string">&quot;http://www.baidu.com&quot;</span>)</span><br><span class="line">html = file.read().decode(<span class="string">&#x27;utf-8&#x27;</span>)</span><br><span class="line">bs = BeautifulSoup(html,<span class="string">&quot;html.parser&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># t_list = bs.find_all(text = &quot;hao123&quot;)</span></span><br><span class="line">t_list = bs.find_all(text = [<span class="string">&quot;hao123&quot;</span>,<span class="string">&quot;地图&quot;</span>,<span class="string">&quot;贴吧&quot;</span>])</span><br><span class="line"></span><br><span class="line">t_list = bs.find_all(text = re.<span class="built_in">compile</span>(<span class="string">&quot;\d&quot;</span>))   <span class="comment"># 应用正则表达式来查找包含特定文本的内容</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> item <span class="keyword">in</span> t_list:</span><br><span class="line">    <span class="built_in">print</span>(item)</span><br></pre></td></tr></table></figure><ul><li>limit参数</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> bs4 <span class="keyword">import</span> BeautifulSoup</span><br><span class="line"><span class="keyword">import</span> urllib.request</span><br><span class="line"><span class="keyword">import</span> re</span><br><span class="line"></span><br><span class="line">file = urllib.request.urlopen(<span class="string">&quot;http://www.baidu.com&quot;</span>)</span><br><span class="line">html = file.read().decode(<span class="string">&#x27;utf-8&#x27;</span>)</span><br><span class="line">bs = BeautifulSoup(html,<span class="string">&quot;html.parser&quot;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">t_list = bs.find_all(<span class="string">&quot;a&quot;</span>, limit= <span class="number">3</span>)  <span class="comment"># limit在得到信息时限制条数</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> item <span class="keyword">in</span> t_list:</span><br><span class="line">    <span class="built_in">print</span>(item)</span><br></pre></td></tr></table></figure><ul><li>css选择器</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> bs4 <span class="keyword">import</span> BeautifulSoup</span><br><span class="line"><span class="keyword">import</span> urllib.request</span><br><span class="line"><span class="keyword">import</span> re</span><br><span class="line"></span><br><span class="line">file = urllib.request.urlopen(<span class="string">&quot;http://www.baidu.com&quot;</span>)</span><br><span class="line">html = file.read().decode(<span class="string">&#x27;utf-8&#x27;</span>)</span><br><span class="line">bs = BeautifulSoup(html,<span class="string">&quot;html.parser&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># t_list = bs.select(&quot;title&quot;) #  通过标签来查找</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># t_list = bs.select(&quot;.mnav&quot;)  #  通过类名字来查找</span></span><br><span class="line"></span><br><span class="line">t_list = bs.select(<span class="string">&quot;#u1&quot;</span>)  <span class="comment"># 通过id查找</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 通过属性查找</span></span><br><span class="line"><span class="comment"># 通过子标签查找</span></span><br><span class="line"><span class="comment"># ...</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> item <span class="keyword">in</span> t_list:</span><br><span class="line">    <span class="built_in">print</span>(item)</span><br></pre></td></tr></table></figure><h2 id="正则表达式"><a href="#正则表达式" class="headerlink" title="正则表达式"></a>正则表达式</h2><ul><li><a href="https://www.cnblogs.com/yibuyi-123/p/14661160.html">最全常用正则表达式大全 - 易不易 - 博客园 (cnblogs.com)</a> </li></ul><table><thead><tr><th align="center">操作符</th><th>说明</th><th>实例</th></tr></thead><tbody><tr><td align="center">.</td><td>表示任何单个字符</td><td></td></tr><tr><td align="center">[  ]</td><td>字符集</td><td>[abc] 表示a，b，c</td></tr><tr><td align="center">[^ ]</td><td>非字符集</td><td>[^abc] 表示非a，b，c</td></tr><tr><td align="center">*</td><td>前一个字符0次或无限次扩展</td><td>abc*  表示ab,abc,abcc,abccc等</td></tr><tr><td align="center">+</td><td>前一个字符1次或无限次扩展</td><td>abc+  表示abc,abcc,abccc等</td></tr><tr><td align="center">?</td><td>前一个字符0次或1次扩展</td><td>abc？ 表示ab，abc</td></tr><tr><td align="center">|</td><td>或</td><td></td></tr><tr><td align="center">{m}</td><td>扩展前一个字符m次</td><td>ab{2} 表示abcc</td></tr><tr><td align="center">{m,n}</td><td>扩展前一个字符m至n次</td><td>ab{1，2}c 表示abc，abbc</td></tr><tr><td align="center">^</td><td>匹配字符串开头</td><td></td></tr><tr><td align="center">$</td><td>匹配字符串结尾</td><td></td></tr><tr><td align="center">（）</td><td>分组标记，内部只能使用 | 操作符</td><td>（a|b） 表示a，b</td></tr><tr><td align="center">\d</td><td>数字，等价于[0-9]</td><td></td></tr><tr><td align="center">\w</td><td>单词字符，等价于[A-Z,a-z,0-9,_]</td><td></td></tr></tbody></table><h3 id="Re库主要功能函数"><a href="#Re库主要功能函数" class="headerlink" title="Re库主要功能函数"></a>Re库主要功能函数</h3><table><thead><tr><th align="left">函数</th><th>说明</th></tr></thead><tbody><tr><td align="left">re.search()</td><td>在一个字符串中搜索匹配正则表达式的第一个位置，返回match对象</td></tr><tr><td align="left">re.match()</td><td>从第一个字符串开始位置匹配正则表达式，返回match对象</td></tr><tr><td align="left">re.findall()</td><td>搜索字符串，以列表类型返回全部能匹配的子串</td></tr><tr><td align="left">re.split()</td><td>将一个字符串按照正则表达式匹配结果进行性分割，返回列表类型</td></tr><tr><td align="left">re.finditer()</td><td>搜索字符串，返回一个匹配结果的迭代类型，每个迭代元素是match对象</td></tr><tr><td align="left">re.sub()</td><td>在一个字符串中替换所有匹配正则表达式的子串，返回替换后的字符串</td></tr></tbody></table><h3 id="修饰符"><a href="#修饰符" class="headerlink" title="修饰符"></a>修饰符</h3><table><thead><tr><th>修饰符</th><th>描述</th></tr></thead><tbody><tr><td>re.l</td><td>使匹配对大小写不敏感</td></tr><tr><td>re.L</td><td>做本地化识别（Locale-aware）匹配</td></tr><tr><td>re.M</td><td>多行匹配，影响^和$</td></tr><tr><td>re.S</td><td>使.匹配包括换行在内的所有字符</td></tr><tr><td>re.U</td><td>根据Unicode字符集解析字符，这个影响\w,\W,\b,\B</td></tr><tr><td>re.X</td><td>该标志通过给予你更灵活的格式以便将正则表达式写的更利与理解</td></tr></tbody></table><h3 id="实例"><a href="#实例" class="headerlink" title="实例"></a>实例</h3><ul><li>search（）方法</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> re</span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建模式对象</span></span><br><span class="line">pat = re.<span class="built_in">compile</span>(<span class="string">&quot;AA&quot;</span>)  <span class="comment"># 此处的AA是正则表达式，用来去验证其他的字符串</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># m = pat.search(&quot;CBAA&quot;)          # search字符串被校验内容</span></span><br><span class="line">m = pat.search(<span class="string">&quot;AACBAA&quot;</span>)          <span class="comment"># search方法只能搜索找到的第一组，进行比对查找</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 不创建模式对象</span></span><br><span class="line">m = re.<span class="built_in">compile</span>(<span class="string">&quot;asd,Aasd&quot;</span>)  <span class="comment"># 前面的字符串是规则（模板），后面的字符串是被校验的对象</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(m)</span><br></pre></td></tr></table></figure><ul><li>findall（）方法</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> re</span><br><span class="line"></span><br><span class="line"><span class="comment"># m = re.findall(&quot;a&quot;, &quot;asdASDasd&quot;)  # 前面的字符串是规则（正则表达式），后面的字符串是被校验的对象</span></span><br><span class="line"><span class="comment"># m = re.findall(&quot;[A-Z]&quot;, &quot;asdASDasdAWM&quot;)</span></span><br><span class="line">m = re.findall(<span class="string">&quot;[A-Z]+&quot;</span>, <span class="string">&quot;asdASDasdAWM&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(m)</span><br></pre></td></tr></table></figure><ul><li>sub方法</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> re</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(re.sub(<span class="string">&quot;a&quot;</span>,<span class="string">&quot;A&quot;</span>,<span class="string">&quot;asdASDawm&quot;</span>))  <span class="comment"># 在第三个字符串中找到a，用A替换</span></span><br></pre></td></tr></table></figure><ul><li>建议在正则表达式中被比较字符串前面加上r，不用担心转义字符的问题</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">a = <span class="string">&quot;\abc\&#x27;&quot;</span></span><br><span class="line"><span class="built_in">print</span>(a)</span><br><span class="line"></span><br><span class="line">a = <span class="string">r&quot;\abc\&#x27;&quot;</span></span><br><span class="line"><span class="built_in">print</span>(a)</span><br></pre></td></tr></table></figure><h2 id="SQLite"><a href="#SQLite" class="headerlink" title="SQLite"></a>SQLite</h2><h3 id="连接数据库"><a href="#连接数据库" class="headerlink" title="连接数据库"></a>连接数据库</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 1.连接数据库</span></span><br><span class="line">conn = sqlite3.connect(<span class="string">&quot;test.db&quot;</span>)     <span class="comment"># 打开或创建数据库文件</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;成功打开数据库&quot;</span>)</span><br></pre></td></tr></table></figure><h3 id="创建数据表"><a href="#创建数据表" class="headerlink" title="创建数据表"></a>创建数据表</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 1.连接数据库</span></span><br><span class="line">conn = sqlite3.connect(<span class="string">&quot;test.db&quot;</span>)     <span class="comment"># 打开或创建数据库文件</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;成功打开数据库&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 2.创建数据表</span></span><br><span class="line">c = conn.cursor()  <span class="comment"># 获取游标</span></span><br><span class="line"></span><br><span class="line">sql = <span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">    create table company</span></span><br><span class="line"><span class="string">        (id int primary key not null,</span></span><br><span class="line"><span class="string">        name text not null,</span></span><br><span class="line"><span class="string">        age int not null,</span></span><br><span class="line"><span class="string">        address char(50),</span></span><br><span class="line"><span class="string">        salary real);       </span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"></span><br><span class="line">c.execute(sql)   <span class="comment"># 执行sql语句</span></span><br><span class="line">conn.commit()    <span class="comment"># 提交数据库操作</span></span><br><span class="line">conn.close()     <span class="comment"># 关闭数据库链接</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;成功建表&quot;</span>)</span><br></pre></td></tr></table></figure><h3 id="插入数据"><a href="#插入数据" class="headerlink" title="插入数据"></a>插入数据</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> sqlite3</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 1.连接数据库</span></span><br><span class="line">conn = sqlite3.connect(<span class="string">&quot;test.db&quot;</span>)     <span class="comment"># 打开或创建数据库文件</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;成功打开数据库&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 2.创建数据表</span></span><br><span class="line">c = conn.cursor()  <span class="comment"># 获取游标</span></span><br><span class="line"></span><br><span class="line">sql1 = <span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">    insert into company (id,name,age,address,salary)</span></span><br><span class="line"><span class="string">    values(1,&quot;张三&quot; ,&quot;19&quot;,&quot;西安&quot;,&quot;10000&quot;)    </span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"></span><br><span class="line">sql2 = <span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">    insert into company (id,name,age,address,salary)</span></span><br><span class="line"><span class="string">    values(2,&quot;bkys&quot; ,&quot;19&quot;,&quot;西安&quot;,&quot;1000000&quot;)    </span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"></span><br><span class="line">c.execute(sql1)   <span class="comment"># 执行sql语句</span></span><br><span class="line">c.execute(sql2)</span><br><span class="line">conn.commit()    <span class="comment"># 提交数据库操作</span></span><br><span class="line">conn.close()     <span class="comment"># 关闭数据库链接</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;插入数据完毕&quot;</span>)</span><br></pre></td></tr></table></figure><h3 id="查询数据"><a href="#查询数据" class="headerlink" title="查询数据"></a>查询数据</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 1.连接数据库</span></span><br><span class="line">conn = sqlite3.connect(<span class="string">&quot;test.db&quot;</span>)     <span class="comment"># 打开或创建数据库文件</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;成功打开数据库&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 2.创建数据表</span></span><br><span class="line">c = conn.cursor()  <span class="comment"># 获取游标</span></span><br><span class="line"></span><br><span class="line">sql = <span class="string">&quot;select id,name,address,salary from company&quot;</span></span><br><span class="line"></span><br><span class="line">cursor = c.execute(sql)</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> row <span class="keyword">in</span> cursor:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;id = &quot;</span>, row[<span class="number">0</span>])</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;name = &quot;</span>, row[<span class="number">1</span>])</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;address = &quot;</span>, row[<span class="number">2</span>])</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;salary = &quot;</span>, row[<span class="number">3</span>], <span class="string">&quot;\n&quot;</span>)</span><br><span class="line"></span><br><span class="line">conn.close()     <span class="comment"># 关闭数据库链接</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;查询完毕&quot;</span>)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">saveData2DB</span>(<span class="params">datalist,dbpath</span>):</span><br><span class="line">            init_db(dbpath)</span><br><span class="line">            conn =sqlite3.connect(dbpath)</span><br><span class="line">            cur = conn.cursor()</span><br><span class="line"></span><br><span class="line">            <span class="keyword">for</span> data <span class="keyword">in</span> datalist:</span><br><span class="line">                <span class="keyword">for</span> index <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(data)):</span><br><span class="line">                    data[index] = <span class="string">&#x27;&quot;&#x27;</span> + data[index] + <span class="string">&#x27;&quot;&#x27;</span></span><br><span class="line">                sql = <span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">                        insert into movie250 (</span></span><br><span class="line"><span class="string">                        info_link, pic_link, cname, ename, score, rated, introduction, info) </span></span><br><span class="line"><span class="string">                        values(%s)&#x27;&#x27;&#x27;</span> % <span class="string">&quot;,&quot;</span>.join(data)</span><br><span class="line">                cur.execute(sql)</span><br><span class="line">                conn.commit()</span><br><span class="line">            cur.close()</span><br><span class="line">            conn.close()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">init_db</span>(<span class="params">dbpath</span>):</span><br><span class="line">    sql = <span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">         create table movie250</span></span><br><span class="line"><span class="string">         (</span></span><br><span class="line"><span class="string">         id integer primary key autoincrement,</span></span><br><span class="line"><span class="string">         info_link text,</span></span><br><span class="line"><span class="string">         pic_link text,</span></span><br><span class="line"><span class="string">         cname varchar ,</span></span><br><span class="line"><span class="string">         ename varchar ,</span></span><br><span class="line"><span class="string">         score numeric ,</span></span><br><span class="line"><span class="string">         rated numeric ,</span></span><br><span class="line"><span class="string">         instroduction text,</span></span><br><span class="line"><span class="string">         info text</span></span><br><span class="line"><span class="string">         )      </span></span><br><span class="line"><span class="string">    &#x27;&#x27;&#x27;</span></span><br><span class="line">    conn = sqlite3.connect(dbpath)</span><br><span class="line">    cursor = conn.cursor()</span><br><span class="line">    cursor.execute(sql)</span><br><span class="line">    conn.commit()</span><br><span class="line">    conn.close()</span><br></pre></td></tr></table></figure><h3 id="将豆瓣Top250存入数据库"><a href="#将豆瓣Top250存入数据库" class="headerlink" title="将豆瓣Top250存入数据库"></a>将豆瓣Top250存入数据库</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> bs4 <span class="keyword">import</span> BeautifulSoup    <span class="comment">#网页解析，获取数据</span></span><br><span class="line"><span class="keyword">import</span> re       <span class="comment">#正则表达式，进行文字匹配</span></span><br><span class="line"><span class="keyword">import</span> urllib.request,urllib.error      <span class="comment">#指定URL，获取网页数据</span></span><br><span class="line"><span class="keyword">import</span> xlwt  <span class="comment">#进行Excel操作</span></span><br><span class="line"><span class="keyword">import</span> sqlite3  <span class="comment">#进行sql数据库操作</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#创建正则表达式对象</span></span><br><span class="line">findLink = re.<span class="built_in">compile</span>(<span class="string">r&#x27;&lt;a href=&quot;(.*?)&quot;&gt;&#x27;</span>) <span class="comment">#影片链接的规则</span></span><br><span class="line">findImgSrc = re.<span class="built_in">compile</span>(<span class="string">r&#x27;&lt;img.*src=&quot;(.*?)&quot;&#x27;</span>,re.S)  <span class="comment">#影片图片的规则 re.s换行符包括在字符中</span></span><br><span class="line">findTitle = re.<span class="built_in">compile</span>(<span class="string">r&#x27;&lt;span class=&quot;title&quot;&gt;(.*)&lt;/span&gt;&#x27;</span>)  <span class="comment">#影片名的规则</span></span><br><span class="line">findRating = re.<span class="built_in">compile</span>(<span class="string">r&#x27;&lt;span class=&quot;rating_num&quot; property=&quot;v:average&quot;&gt;(.*)&lt;/span&gt;&#x27;</span>)  <span class="comment">#影片评分的规则</span></span><br><span class="line">findJudge = re.<span class="built_in">compile</span>(<span class="string">r&#x27;&lt;span&gt;(\d*)人评价&lt;/span&gt;&#x27;</span>)    <span class="comment">#影片评价人数的规则</span></span><br><span class="line">findInq = re.<span class="built_in">compile</span>(<span class="string">r&#x27;&lt;span class=&quot;inq&quot;&gt;(.*)&lt;/span&gt;&#x27;</span>)  <span class="comment">#影片概况的规则</span></span><br><span class="line">findBd = re.<span class="built_in">compile</span>(<span class="string">r&#x27;&lt;p class=&quot;&quot;&gt;(.*?)&lt;/p&gt;&#x27;</span>,re.S)   <span class="comment">#影片导演的规则</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">main</span>():</span><br><span class="line">    baseurl = <span class="string">&quot;https://movie.douban.com/top250?start=&quot;</span></span><br><span class="line">    <span class="comment"># 爬取网页</span></span><br><span class="line">    datalist = getData(baseurl)</span><br><span class="line">    <span class="comment"># 保存数据</span></span><br><span class="line">    dbpath = <span class="string">&quot;movie.db&quot;</span></span><br><span class="line">    saveData(datalist,dbpath)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#爬取网页</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">getData</span>(<span class="params">baseurl</span>):</span><br><span class="line">    datalist = []</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">0</span>,<span class="number">10</span>):</span><br><span class="line">        url = baseurl + <span class="built_in">str</span>(i*<span class="number">25</span>)</span><br><span class="line">        html = askURL(url)  <span class="comment">#保存从网页中获取到的源码</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">#逐个解析数据</span></span><br><span class="line">        soup = BeautifulSoup(html,<span class="string">&quot;html.parser&quot;</span>)</span><br><span class="line">        <span class="keyword">for</span> item <span class="keyword">in</span> soup.find_all(<span class="string">&#x27;div&#x27;</span>,class_=<span class="string">&quot;item&quot;</span>):    <span class="comment">#查找符合要求的字符串，形成列表</span></span><br><span class="line">            <span class="comment">#print(item)</span></span><br><span class="line">            data = [] <span class="comment">#保存一部电影的所有信息</span></span><br><span class="line">            item = <span class="built_in">str</span>(item)</span><br><span class="line"></span><br><span class="line">            <span class="comment">#正则表达式查找指定的字符</span></span><br><span class="line">            link = re.findall(findLink,item)[<span class="number">0</span>]</span><br><span class="line">            data.append(link)</span><br><span class="line"></span><br><span class="line">            imgSrc = re.findall(findImgSrc,item)[<span class="number">0</span>]</span><br><span class="line">            data.append(imgSrc)</span><br><span class="line"></span><br><span class="line">            titles = re.findall(findTitle, item)</span><br><span class="line">            <span class="keyword">if</span> <span class="built_in">len</span>(titles)==<span class="number">2</span>:</span><br><span class="line">                ctitle = titles[<span class="number">0</span>]</span><br><span class="line">                otitle = titles[<span class="number">1</span>].replace(<span class="string">&quot;/&quot;</span>,<span class="string">&quot;&quot;</span>)  <span class="comment">#替换符号</span></span><br><span class="line">                data.append(ctitle)</span><br><span class="line">                data.append(otitle)</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                data.append(titles[<span class="number">0</span>])</span><br><span class="line">                data.append(<span class="string">&#x27;&#x27;</span>) <span class="comment">#占位留空</span></span><br><span class="line"></span><br><span class="line">            rating = re.findall(findRating, item)[<span class="number">0</span>]</span><br><span class="line">            data.append(rating)</span><br><span class="line"></span><br><span class="line">            judgeNum = re.findall(findJudge, item)[<span class="number">0</span>]</span><br><span class="line">            data.append(judgeNum)</span><br><span class="line"></span><br><span class="line">            inq = re.findall(findInq,item)</span><br><span class="line">            <span class="keyword">if</span> <span class="built_in">len</span>(inq) != <span class="number">0</span>:</span><br><span class="line">               inq = inq[<span class="number">0</span>].replace(<span class="string">&quot;。&quot;</span>,<span class="string">&quot;&quot;</span>)</span><br><span class="line">               data.append(inq)</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                data.append(<span class="string">&#x27;&#x27;</span>)</span><br><span class="line"></span><br><span class="line">            bd = re.findall(findBd,item)[<span class="number">0</span>]</span><br><span class="line">            bd = re.sub(<span class="string">&#x27;&lt;br(\s+)?/&gt;(\s+)?&#x27;</span>,<span class="string">&quot;&quot;</span>,bd)</span><br><span class="line">            bd = re.sub(<span class="string">&#x27;/&#x27;</span>,<span class="string">&quot;&quot;</span>,bd)</span><br><span class="line">            data.append(bd.strip()) <span class="comment">#去空格</span></span><br><span class="line"></span><br><span class="line">            datalist.append(data)</span><br><span class="line">    <span class="keyword">return</span> datalist</span><br><span class="line"></span><br><span class="line"><span class="comment">#得到指定一个URL的网页内容</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">askURL</span>(<span class="params">url</span>):</span><br><span class="line">    head = &#123;<span class="string">&quot;User-Agent&quot;</span>: <span class="string">&quot;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/74.0.3729.108 Safari/537.36&quot;</span>&#125;</span><br><span class="line">    request = urllib.request.Request(url,headers=head)</span><br><span class="line">    html = <span class="string">&quot;&quot;</span></span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        response = urllib.request.urlopen(request)</span><br><span class="line">        html = response.read().decode(<span class="string">&quot;utf-8&quot;</span>)</span><br><span class="line">        <span class="comment">#print(html)</span></span><br><span class="line">    <span class="keyword">except</span> urllib.error.URLError <span class="keyword">as</span> e:</span><br><span class="line">        <span class="keyword">if</span> <span class="built_in">hasattr</span>(e,<span class="string">&quot;code&quot;</span>):</span><br><span class="line">            <span class="built_in">print</span>(e.code)</span><br><span class="line">        <span class="keyword">if</span> <span class="built_in">hasattr</span>(e,<span class="string">&quot;reason&quot;</span>):</span><br><span class="line">            <span class="built_in">print</span>(e.reason)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> html</span><br><span class="line"></span><br><span class="line"><span class="comment">#创建一个数据表</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">createTable</span>(<span class="params">dbpath</span>):</span><br><span class="line">        sql = <span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">            CREATE TABLE movie250</span></span><br><span class="line"><span class="string">            (</span></span><br><span class="line"><span class="string">            id integer primary key autoincrement,</span></span><br><span class="line"><span class="string">            info_link TEXT,</span></span><br><span class="line"><span class="string">            pic_link TEXT,</span></span><br><span class="line"><span class="string">            cname VARCHAR(255),</span></span><br><span class="line"><span class="string">            oname VARCHAR(255),</span></span><br><span class="line"><span class="string">            score FLOAT,</span></span><br><span class="line"><span class="string">            rated NUMERIC,</span></span><br><span class="line"><span class="string">            instroduction TEXT,</span></span><br><span class="line"><span class="string">            info text</span></span><br><span class="line"><span class="string">            );</span></span><br><span class="line"><span class="string">              &#x27;&#x27;&#x27;</span></span><br><span class="line">        conn = sqlite3.connect(dbpath)</span><br><span class="line">        cursor = conn.cursor()</span><br><span class="line">        cursor.execute(sql)</span><br><span class="line">        conn.commit()</span><br><span class="line">        conn.close()</span><br><span class="line"></span><br><span class="line"><span class="comment">#保存数据</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">saveData</span>(<span class="params">datalist,dbpath</span>):</span><br><span class="line">    createTable(dbpath)</span><br><span class="line">    conn = sqlite3.connect(dbpath)</span><br><span class="line">    cur = conn.cursor()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> data <span class="keyword">in</span> datalist:</span><br><span class="line">        <span class="keyword">for</span> index <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(data)):</span><br><span class="line">            <span class="keyword">if</span> index == <span class="number">4</span> <span class="keyword">or</span> index == <span class="number">5</span>:</span><br><span class="line">                <span class="keyword">continue</span></span><br><span class="line">            data[index] = <span class="string">&#x27;&quot;&#x27;</span>+data[index]+<span class="string">&#x27;&quot;&#x27;</span></span><br><span class="line">        sql = <span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">                  INSERT INTO movie250(</span></span><br><span class="line"><span class="string">                  info_link,</span></span><br><span class="line"><span class="string">                  pic_link,</span></span><br><span class="line"><span class="string">                  cname,</span></span><br><span class="line"><span class="string">                  oname,</span></span><br><span class="line"><span class="string">                  score,</span></span><br><span class="line"><span class="string">                  rated,</span></span><br><span class="line"><span class="string">                  instroduction,</span></span><br><span class="line"><span class="string">                  info</span></span><br><span class="line"><span class="string">                  ) VALUES(%s)</span></span><br><span class="line"><span class="string">                  &#x27;&#x27;&#x27;</span>%<span class="string">&quot;,&quot;</span>.join(data)  <span class="comment"># 表名  字段名 插入的值</span></span><br><span class="line">        cur.execute(sql)</span><br><span class="line">        conn.commit()</span><br><span class="line">    cur.close()</span><br><span class="line">    conn.close()</span><br><span class="line"></span><br><span class="line"><span class="comment">#入口</span></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    main()</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;爬取完毕&quot;</span>)</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;python爬虫简介&quot;&gt;&lt;a href=&quot;#python爬虫简介&quot; class=&quot;headerlink&quot; title=&quot;python爬虫简介&quot;&gt;&lt;/a&gt;python爬虫简介&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;网络爬虫，是一种按照一定规则，自动抓取互联网信息的程序或脚本。由</summary>
      
    
    
    
    <category term="Python篇" scheme="http://bkystop.github.io/categories/Python%E7%AF%87/"/>
    
    
    <category term="Python" scheme="http://bkystop.github.io/tags/Python/"/>
    
    <category term="Python爬虫" scheme="http://bkystop.github.io/tags/Python%E7%88%AC%E8%99%AB/"/>
    
  </entry>
  
  <entry>
    <title>Python基础</title>
    <link href="http://bkystop.github.io/2022/07/05/Python%E5%9F%BA%E7%A1%80/"/>
    <id>http://bkystop.github.io/2022/07/05/Python%E5%9F%BA%E7%A1%80/</id>
    <published>2022-07-05T13:50:30.000Z</published>
    <updated>2023-04-09T09:10:14.130Z</updated>
    
    <content type="html"><![CDATA[<h1 id="python基础"><a href="#python基础" class="headerlink" title="python基础"></a>python基础</h1><h2 id="python简介"><a href="#python简介" class="headerlink" title="python简介"></a>python简介</h2><ul><li>python是一门解释型，面向对象的高级编程语言。开源免费，支持交互式，可跨平台移植的脚本语言。</li></ul><p><strong>优点：</strong> </p><ol><li>开源，易于维护。</li><li>可移植。</li><li>易于使用，简单优雅。</li><li>广泛的库。</li></ol><p><strong>缺点：</strong> </p><ol><li>运行速度慢。</li><li>代码不能加密。</li></ol><ul><li>python的应用：数据分析，科学计算，网络爬虫，软件开发，web开发，人工智能</li></ul><h2 id="python基础-1"><a href="#python基础-1" class="headerlink" title="python基础"></a>python基础</h2><h3 id="变量"><a href="#变量" class="headerlink" title="变量"></a>变量</h3><ul><li>变量可以是任意的数据类型。</li><li>变量名必须是的大小写英文，数字和下划线组成，且不能以数字开头。</li></ul><h3 id="标识符和关键字"><a href="#标识符和关键字" class="headerlink" title="标识符和关键字"></a>标识符和关键字</h3><ul><li>关键字是一些具有特殊功能标识符。</li><li>python中不允许自定义和关键字相同的名字的标识符。</li></ul><h3 id="输出"><a href="#输出" class="headerlink" title="输出"></a>输出</h3><ul><li>普通输出</li><li>格式化输出</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(<span class="string">&quot;标准化输出字符穿&quot;</span>)</span><br><span class="line">a = <span class="number">10</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;这是变量：&quot;</span>,a)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;格式化输出&quot;</span>)</span><br><span class="line">age = <span class="number">20</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;我的名字是: %s, 我的国籍是: %s&quot;</span> %(<span class="string">&quot;bkys&quot;</span>,<span class="string">&quot;中国&quot;</span>))</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;我的年纪是: %d 岁&quot;</span> %age)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;a&quot;</span>,<span class="string">&quot;b&quot;</span>,<span class="string">&quot;c&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;www&quot;</span>,<span class="string">&quot;baidu&quot;</span>,<span class="string">&quot;com&quot;</span>,sep=<span class="string">&quot;.&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;hello&quot;</span>, end=<span class="string">&quot;&quot;</span>)  <span class="comment"># 输出不换行</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;world&quot;</span>, end=<span class="string">&quot;\t&quot;</span>) <span class="comment"># 制表符</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;python&quot;</span>, end=<span class="string">&quot;\n&quot;</span>) <span class="comment"># 换行</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;输入&quot;</span>)</span><br><span class="line">password = <span class="built_in">input</span>(<span class="string">&quot;请输入密码：&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;您输入的密码是：&quot;</span>,password)</span><br><span class="line"></span><br><span class="line">a = <span class="built_in">int</span>(<span class="built_in">input</span>(<span class="string">&quot;输入：&quot;</span>))</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;输入一个数字: %s&quot;</span> %a)</span><br></pre></td></tr></table></figure><h3 id="输入"><a href="#输入" class="headerlink" title="输入"></a>输入</h3><ul><li>input（）的小括号放入提示信息</li><li>input（）在从键盘获取了数据以后，会存放到等号左边的变量中</li><li>input（）函数接受的输入必须是表达式</li></ul><h3 id="运算符和表达式"><a href="#运算符和表达式" class="headerlink" title="运算符和表达式"></a>运算符和表达式</h3><p><strong>运算符</strong> </p><ul><li>算数运算符：+，-，*，/。%（求余），**（幂），//（整除）</li><li>比较运算符：==，！=，&lt;，&gt;，&lt;=，&gt;=</li><li>赋值运算符：=，+=，-=，*=，/+，%=，**=，//=（c += a，c = c + a）</li><li>位运算符：&amp;，|，^，~，&lt;&lt;，&gt;&gt;</li><li>逻辑运算符：and，or，not</li><li>成员运算符：in，not in</li><li>身份运算符：is，is not</li></ul><p><strong>运算符优先级：</strong> </p><h3 id="判断语句和循环语句"><a href="#判断语句和循环语句" class="headerlink" title="判断语句和循环语句"></a>判断语句和循环语句</h3><h4 id="判断语句："><a href="#判断语句：" class="headerlink" title="判断语句："></a>判断语句：</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> <span class="literal">True</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;True&quot;</span>)</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;False&quot;</span>)</span><br></pre></td></tr></table></figure><ul><li>分数评级</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">score = <span class="built_in">int</span>(<span class="built_in">input</span>(<span class="string">&quot;请输入你的分数：&quot;</span>))</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> score &gt;= <span class="number">90</span> <span class="keyword">and</span> score &lt; <span class="number">100</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;优秀&quot;</span>)</span><br><span class="line"><span class="keyword">elif</span> score &gt;= <span class="number">80</span> <span class="keyword">and</span> score &lt; <span class="number">90</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;良好&quot;</span>)</span><br><span class="line"><span class="keyword">elif</span> score &gt;= <span class="number">70</span> <span class="keyword">and</span> score &lt; <span class="number">80</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;中&quot;</span>)</span><br><span class="line"><span class="keyword">elif</span> score &gt;= <span class="number">60</span> <span class="keyword">and</span> score &lt; <span class="number">70</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;及格&quot;</span>)</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;不及格&quot;</span>)</span><br></pre></td></tr></table></figure><ul><li>石头剪刀布</li></ul><h4 id="循环语句："><a href="#循环语句：" class="headerlink" title="循环语句："></a>循环语句：</h4><ul><li>for语句</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">5</span>):</span><br><span class="line">    <span class="built_in">print</span>(i)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;\n&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> j <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">0</span>,<span class="number">10</span>,<span class="number">3</span>):  <span class="comment"># 0-10,每次加3，不包含10</span></span><br><span class="line">    <span class="built_in">print</span>(j, end= <span class="string">&quot;&quot;</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;\n&quot;</span>)</span><br><span class="line"></span><br><span class="line">name = <span class="string">&quot;xian&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> x <span class="keyword">in</span> name:</span><br><span class="line">    <span class="built_in">print</span>(x, end= <span class="string">&quot;\t&quot;</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;\n&quot;</span>)</span><br><span class="line"></span><br><span class="line">a = [<span class="string">&quot;aa&quot;</span>, <span class="string">&quot;bb&quot;</span>, <span class="string">&quot;cc&quot;</span>, <span class="string">&quot;dd&quot;</span>]  <span class="comment"># 通过列表的下标打印</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span>  <span class="built_in">range</span>(<span class="built_in">len</span>(a)):</span><br><span class="line">    <span class="built_in">print</span>(i, a[i])</span><br></pre></td></tr></table></figure><ul><li>while语句</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">count = <span class="number">0</span></span><br><span class="line"><span class="keyword">while</span> count &lt; <span class="number">5</span> :</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;第%d次执行循环&quot;</span>%(count+<span class="number">1</span>))</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;count = %d&quot;</span> %count)</span><br><span class="line">    count += <span class="number">1</span></span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    <span class="built_in">print</span>(count,<span class="string">&quot;大于等于5&quot;</span>)</span><br></pre></td></tr></table></figure><ul><li>1-100求和</li><li>九九乘法表</li></ul><p><strong>break，continue，pass语句：</strong> </p><ul><li>break语句可以跳出for和while的循环体</li><li>continue语句跳过当前循环，进入下一轮循环</li><li>pass是空语句，占位语句</li></ul><h3 id="字符串，列表，元组，字典"><a href="#字符串，列表，元组，字典" class="headerlink" title="字符串，列表，元组，字典"></a>字符串，列表，元组，字典</h3><h4 id="字符串（string）"><a href="#字符串（string）" class="headerlink" title="字符串（string）"></a>字符串（string）</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">word = <span class="string">&#x27;字符串&#x27;</span></span><br><span class="line">sentence = <span class="string">&#x27;这是一个句子&#x27;</span></span><br><span class="line">paragraph = <span class="string">&quot;&quot;&quot; 0</span></span><br><span class="line"><span class="string">  这是一个段落</span></span><br><span class="line"><span class="string">由多行组成</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="built_in">print</span>(word)</span><br><span class="line"><span class="built_in">print</span>(sentence)</span><br><span class="line"><span class="built_in">print</span>(paragraph)</span><br><span class="line"></span><br><span class="line">str1 = <span class="string">&quot;I&#x27;m a student&quot;</span></span><br><span class="line"><span class="built_in">print</span>(str1)</span><br><span class="line">str2 = <span class="string">&#x27;I\&#x27;m a student&#x27;</span>  <span class="comment"># 外面用单引号内部要使用转义字符</span></span><br><span class="line"><span class="built_in">print</span>(str2)</span><br><span class="line"><span class="built_in">print</span>(str1[<span class="number">0</span>])</span><br><span class="line"><span class="built_in">print</span>(str1[<span class="number">0</span>:<span class="number">5</span>])</span><br><span class="line"><span class="built_in">print</span>(str1[<span class="number">0</span>:<span class="number">7</span>:<span class="number">2</span>])   <span class="comment"># [起始位置：结束位置：步进值]</span></span><br><span class="line"><span class="built_in">print</span>(str1[:<span class="number">5</span>])      <span class="comment"># 从0到下标5，不包含下标5</span></span><br><span class="line"><span class="built_in">print</span>(str1[<span class="number">5</span>:])      <span class="comment"># 从下标5到结束</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(str1 + str2)</span><br><span class="line"><span class="built_in">print</span>(str1 + <span class="string">&quot;str2&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(str1 * <span class="number">3</span>)     <span class="comment"># pyhon中对字符串进行相加减</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;hello\npython&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">r&quot;hello\npython&quot;</span>)  <span class="comment">#前面加r，表示显示原始字符串，不进行转义</span></span><br></pre></td></tr></table></figure><ul><li>转义字符</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">\\  # 反斜杠</span><br><span class="line">\&#x27;</span><br><span class="line">\&quot;</span><br><span class="line">\a  # 响铃</span><br><span class="line">\b  # 退格</span><br><span class="line">\000  # 空</span><br><span class="line">\n</span><br><span class="line">\v  # 纵向制表符</span><br><span class="line">\t  # 横向制表符</span><br><span class="line">\r  # 回车</span><br><span class="line">\f  # 换页</span><br></pre></td></tr></table></figure><ul><li>字符串的常见操作</li></ul><h4 id="列表（list）"><a href="#列表（list）" class="headerlink" title="列表（list）"></a>列表（list）</h4><ul><li>列表中元素的类型可以不相同，可以是数字，字符串甚至是列表（嵌套）</li><li>列表是写在方括号[]内，用逗号分隔的元素列表。</li><li>列表索引值0为开始值，-1为末尾的开始位置</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">namelist = [<span class="string">&quot;张&quot;</span>, <span class="string">&quot;王&quot;</span>, <span class="string">&quot;李&quot;</span>, <span class="string">&quot;赵&quot;</span>]</span><br><span class="line"><span class="built_in">print</span>(namelist[<span class="number">0</span>])</span><br><span class="line"></span><br><span class="line">typelist = [<span class="number">1</span>, <span class="string">&quot;张&quot;</span>]</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">type</span>((typelist[<span class="number">0</span>])))</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">type</span>((typelist[<span class="number">1</span>])))</span><br><span class="line"></span><br><span class="line"><span class="comment"># for循环遍历列表</span></span><br><span class="line"><span class="keyword">for</span> name <span class="keyword">in</span> namelist:</span><br><span class="line">    <span class="built_in">print</span>(name)</span><br><span class="line">    </span><br><span class="line"><span class="comment"># while循环遍历列表</span></span><br><span class="line"><span class="built_in">len</span> = <span class="built_in">len</span>(namelist)</span><br><span class="line">i = <span class="number">0</span></span><br><span class="line"><span class="keyword">while</span> i&lt; <span class="built_in">len</span>:</span><br><span class="line">    <span class="built_in">print</span>(namelist[i],end= <span class="string">&quot;&quot;</span>)</span><br><span class="line">    i += <span class="number">1</span></span><br></pre></td></tr></table></figure><h5 id="增"><a href="#增" class="headerlink" title="增"></a>增</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># append（在末尾增加元素,整体添加） extend（逐一添加）</span></span><br><span class="line">nametemp = <span class="built_in">input</span>(<span class="string">&quot;请输入添加学生的姓名：&quot;</span>)</span><br><span class="line">namelist.append(nametemp)</span><br><span class="line"></span><br><span class="line"><span class="comment"># insert（第一个表示下标，第二个表示元素，指定下标位置插入元素）</span></span><br><span class="line">a = [<span class="number">0</span>,<span class="number">1</span>,<span class="number">2</span>]</span><br><span class="line">a.insert(<span class="number">1</span>,<span class="number">3</span>)</span><br><span class="line"><span class="built_in">print</span>(a)</span><br><span class="line"></span><br></pre></td></tr></table></figure><h5 id="删"><a href="#删" class="headerlink" title="删"></a>删</h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">moviename = [&quot;肖申克的救赎&quot;, &quot;阿甘正传&quot;, &quot;速度与激情&quot;, &quot;黑客帝国&quot;, &quot;骇客帝国&quot;]</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">del moviename[2]  <span class="comment"># 在指定下标处删除</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">moviename.pop()   <span class="comment"># 在末尾删除最后一个元素</span></span></span><br><span class="line">moviename.remove(&quot;速度与激情&quot;)  # 直接删除指定内容,删除找到的第一个</span><br><span class="line"></span><br><span class="line">print(moviename)</span><br></pre></td></tr></table></figure><h5 id="改"><a href="#改" class="headerlink" title="改"></a>改</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">moviename = [<span class="string">&quot;肖申克的救赎&quot;</span>, <span class="string">&quot;阿甘正传&quot;</span>, <span class="string">&quot;速度与激情&quot;</span>, <span class="string">&quot;黑客帝国&quot;</span>, <span class="string">&quot;骇客帝国&quot;</span>]</span><br><span class="line"></span><br><span class="line">moviename[<span class="number">3</span>] = <span class="string">&quot;泰坦尼克号&quot;</span>   <span class="comment"># 修改指定下标的元素内容</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(moviename)</span><br></pre></td></tr></table></figure><h5 id="查"><a href="#查" class="headerlink" title="查"></a>查</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">namelist = [<span class="string">&quot;张&quot;</span>, <span class="string">&quot;王&quot;</span>, <span class="string">&quot;李&quot;</span>, <span class="string">&quot;赵&quot;</span>, <span class="string">&quot;孙&quot;</span>]</span><br><span class="line"></span><br><span class="line">findName = <span class="built_in">input</span>(<span class="string">&quot;请输入你要查找的学生姓名：&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> findName <span class="keyword">in</span> namelist:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;已找到&quot;</span>)</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;没有找到&quot;</span>)</span><br><span class="line">    </span><br><span class="line"></span><br><span class="line">a = [<span class="string">&quot;a&quot;</span>, <span class="string">&quot;b&quot;</span>, <span class="string">&quot;c&quot;</span>, <span class="string">&quot;a&quot;</span>, <span class="string">&quot;b&quot;</span>]</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(a.index(<span class="string">&quot;a&quot;</span>,<span class="number">1</span>,<span class="number">4</span>))  <span class="comment"># 找到指定元素的下标，范围区间左闭右开</span></span><br><span class="line"><span class="built_in">print</span>(a.count(<span class="string">&quot;b&quot;</span>))      <span class="comment"># 统计某个元素出现了几次</span></span><br></pre></td></tr></table></figure><h5 id="排序"><a href="#排序" class="headerlink" title="排序"></a>排序</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">a = [<span class="number">1</span>,<span class="number">4</span>,<span class="number">2</span>,<span class="number">3</span>]</span><br><span class="line"></span><br><span class="line">a.reverse() <span class="comment"># 反转</span></span><br><span class="line"><span class="built_in">print</span>(a.reverse())</span><br><span class="line"></span><br><span class="line">a.sort()  <span class="comment"># 排序（升序）</span></span><br><span class="line"><span class="built_in">print</span>(a)</span><br><span class="line"></span><br><span class="line">a.sort(reverse=<span class="literal">True</span>)  <span class="comment"># 降序</span></span><br><span class="line"><span class="built_in">print</span>(a)</span><br></pre></td></tr></table></figure><ul><li>列表的应用</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> random</span><br><span class="line"></span><br><span class="line">offices = [[],[],[]]</span><br><span class="line"></span><br><span class="line">names = [<span class="string">&quot;A&quot;</span>,<span class="string">&quot;B&quot;</span>,<span class="string">&quot;C&quot;</span>,<span class="string">&quot;D&quot;</span>,<span class="string">&quot;E&quot;</span>,<span class="string">&quot;F&quot;</span>,<span class="string">&quot;G&quot;</span>,<span class="string">&quot;H&quot;</span>]</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> name <span class="keyword">in</span> names:</span><br><span class="line">    index = random.randint(<span class="number">0</span>,<span class="number">2</span>)</span><br><span class="line">    offices[index].append(name)</span><br><span class="line"></span><br><span class="line">i = <span class="number">1</span></span><br><span class="line"><span class="keyword">for</span> office <span class="keyword">in</span> offices:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;办公室%d 的人数为：%d&quot;</span> %(i,<span class="built_in">len</span>(office)))</span><br><span class="line">    i += <span class="number">1</span></span><br><span class="line">    <span class="keyword">for</span> name <span class="keyword">in</span> office:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;%s&quot;</span> %name, end= <span class="string">&quot;\t&quot;</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;\n&quot;</span>)</span><br></pre></td></tr></table></figure><h4 id="元组（tuple）"><a href="#元组（tuple）" class="headerlink" title="元组（tuple）"></a>元组（tuple）</h4><ul><li>tuple与list类似，tuple中的元素不能修改。</li><li>tuple写在小括号里，元素之间用逗号隔开。</li><li>元组得元素不可变，但可以包含可变对象。</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">tup1 = ()  <span class="comment"># 创建空元组</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">type</span>(tup1))</span><br><span class="line"></span><br><span class="line"><span class="comment"># tup2 = (50) # &lt;class &#x27;tuple&#x27;&gt;</span></span><br><span class="line">tup2 = (<span class="number">50</span>,)  <span class="comment"># 当只有一个数据时，应给后面加上逗号</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">type</span>(tup2))</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">tup1 = (<span class="string">&quot;abc&quot;</span>,<span class="string">&quot;def&quot;</span>,<span class="number">2000</span>,<span class="number">2020</span>)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(tup1[<span class="number">0</span>])</span><br><span class="line"><span class="built_in">print</span>(tup1[-<span class="number">1</span>])  <span class="comment"># 最后一个元素</span></span><br><span class="line"><span class="built_in">print</span>(tup1[<span class="number">1</span>:<span class="number">5</span>])  <span class="comment"># 左闭右开</span></span><br><span class="line"></span><br><span class="line">tup2 = (<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>)</span><br><span class="line">tup = tup1 + tup2</span><br><span class="line"><span class="built_in">print</span>(tup)</span><br></pre></td></tr></table></figure><h5 id="字典（dict）"><a href="#字典（dict）" class="headerlink" title="字典（dict）"></a>字典（dict）</h5><ul><li>字典是无序得对象集合，使用键-值（key-value）存储。</li><li>键（key）必须使用不可变类型。</li><li>同一个字典中，键必须是唯一的。</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">info = &#123;<span class="string">&quot;name&quot;</span>:<span class="string">&quot;bkys&quot;</span>, <span class="string">&quot;age&quot;</span>:<span class="string">&quot;18&quot;</span>&#125;  <span class="comment"># 定义一个字典</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(info[<span class="string">&quot;name&quot;</span>])</span><br><span class="line"><span class="built_in">print</span>(info[<span class="string">&quot;age&quot;</span>])</span><br><span class="line"></span><br><span class="line"><span class="comment"># 访问不存在得键</span></span><br><span class="line"><span class="comment"># print(info[&quot;gender&quot;])  # 直接访问报错</span></span><br><span class="line"><span class="comment"># print(info.get(&quot;gender&quot;))  # 使用get方法，默认返回：None</span></span><br><span class="line"><span class="built_in">print</span>(info.get(<span class="string">&quot;age&quot;</span>, <span class="number">20</span>))</span><br><span class="line"><span class="built_in">print</span>(info.get(<span class="string">&quot;gender&quot;</span>, <span class="string">&quot;10&quot;</span>))  <span class="comment"># 没找到默认值</span></span><br></pre></td></tr></table></figure><h5 id="增-1"><a href="#增-1" class="headerlink" title="增"></a>增</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">info = &#123;<span class="string">&quot;name&quot;</span>:<span class="string">&quot;bkys&quot;</span>, <span class="string">&quot;age&quot;</span>:<span class="string">&quot;18&quot;</span>&#125;</span><br><span class="line">newID = <span class="built_in">input</span>(<span class="string">&quot;请输入新学号&quot;</span>)</span><br><span class="line">info[<span class="string">&quot;id&quot;</span>] = newID</span><br><span class="line"><span class="built_in">print</span>(info[<span class="string">&quot;id&quot;</span>])</span><br></pre></td></tr></table></figure><h5 id="删-1"><a href="#删-1" class="headerlink" title="删"></a>删</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">info = &#123;<span class="string">&quot;name&quot;</span>:<span class="string">&quot;bkys&quot;</span>, <span class="string">&quot;age&quot;</span>:<span class="string">&quot;18&quot;</span>&#125;</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;del前: %S&quot;</span> %info[<span class="string">&quot;name&quot;</span>])</span><br><span class="line"></span><br><span class="line"><span class="keyword">del</span> info[<span class="string">&quot;name&quot;</span>]  <span class="comment">#del</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># print(&quot;del后: %S&quot; %info[&quot;name&quot;])  # del删除的是整个键值对，再次访问会报错</span></span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">info = &#123;<span class="string">&quot;name&quot;</span>:<span class="string">&quot;bkys&quot;</span>, <span class="string">&quot;age&quot;</span>:<span class="string">&quot;18&quot;</span>&#125;</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;clear前: %s&quot;</span> %info)</span><br><span class="line"></span><br><span class="line">info.clear()</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;clear后: %s&quot;</span> %info)</span><br></pre></td></tr></table></figure><h5 id="改-1"><a href="#改-1" class="headerlink" title="改"></a>改</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">info = &#123;<span class="string">&quot;name&quot;</span>:<span class="string">&quot;bkys&quot;</span>, <span class="string">&quot;age&quot;</span>:<span class="string">&quot;18&quot;</span>&#125;</span><br><span class="line">info[<span class="string">&quot;age&quot;</span>] = <span class="number">20</span></span><br><span class="line"><span class="built_in">print</span>(info[<span class="string">&quot;age&quot;</span>])</span><br></pre></td></tr></table></figure><h5 id="查-1"><a href="#查-1" class="headerlink" title="查"></a>查</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">info = &#123;<span class="string">&quot;name&quot;</span>:<span class="string">&quot;bkys&quot;</span>, <span class="string">&quot;age&quot;</span>:<span class="string">&quot;18&quot;</span>&#125;</span><br><span class="line"><span class="built_in">print</span>(info.keys())  <span class="comment"># 得到所有的键（列表）</span></span><br><span class="line"><span class="built_in">print</span>(info.values())  <span class="comment"># 打印所有的值（列表）</span></span><br><span class="line"><span class="built_in">print</span>(info.items())   <span class="comment"># 打印所有的项（列表），每个键值对是一个元组</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 遍历所有的值</span></span><br><span class="line"><span class="keyword">for</span> key <span class="keyword">in</span> info.keys():</span><br><span class="line">    <span class="built_in">print</span>(key)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 遍历所有的键</span></span><br><span class="line"><span class="keyword">for</span> value <span class="keyword">in</span> info.values():</span><br><span class="line">    <span class="built_in">print</span>(value)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 遍历所有的键值</span></span><br><span class="line"><span class="keyword">for</span> key,value <span class="keyword">in</span> info.items():</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;key=%s,value=%s&quot;</span> %(key,value))</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 使用枚举函数，同时拿到列表中的下标和元素内容</span></span><br><span class="line">mylist = [<span class="string">&quot;a&quot;</span>, <span class="string">&quot;b&quot;</span>, <span class="string">&quot;c&quot;</span>, <span class="string">&quot;d&quot;</span>]</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i, x <span class="keyword">in</span> <span class="built_in">enumerate</span>(mylist):</span><br><span class="line">    <span class="built_in">print</span>(i, x)</span><br></pre></td></tr></table></figure><h4 id="集合-set"><a href="#集合-set" class="headerlink" title="集合(set)"></a>集合(set)</h4><ul><li>set和dict类似，是一组key的集合，不储存value。（key不重复）</li><li>set是无序的，重复的元素在set中自动过滤</li></ul><table><thead><tr><th></th><th>是否有序</th><th>是否可变类型</th></tr></thead><tbody><tr><td>列表[]</td><td>有序</td><td>可变类型</td></tr><tr><td>元组()</td><td>有序</td><td>不可变类型</td></tr><tr><td>字典{}</td><td>无序</td><td>key不可变，value可变</td></tr><tr><td>集合{}</td><td>无序</td><td>可变类型（不重复）</td></tr></tbody></table><h3 id="函数"><a href="#函数" class="headerlink" title="函数"></a>函数</h3><ul><li>无参数，无返回值</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">函数名</span>():</span><br><span class="line">代码</span><br></pre></td></tr></table></figure><ul><li>有参数</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">add2num</span>(<span class="params">a,b</span>):</span><br><span class="line">    c = a + b</span><br><span class="line">    <span class="built_in">print</span>(c)</span><br><span class="line"></span><br><span class="line">add2num(<span class="number">11</span>, <span class="number">22</span>)</span><br></pre></td></tr></table></figure><ul><li>有参数，有返回值</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">add2num</span>(<span class="params">a,b</span>):</span><br><span class="line">    <span class="keyword">return</span> a + b</span><br><span class="line"></span><br><span class="line">result = add2num(<span class="number">11</span>,<span class="number">22</span>)</span><br><span class="line"><span class="built_in">print</span>(result)</span><br></pre></td></tr></table></figure><ul><li>返回多个值</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">divid</span>(<span class="params">a, b</span>):</span><br><span class="line">    shang = a//b</span><br><span class="line">    yushu = a % b</span><br><span class="line">    <span class="keyword">return</span> shang,yushu</span><br><span class="line">sh,yu = divid(<span class="number">5</span>, <span class="number">2</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;商：%d，余数：%d&quot;</span> %(sh,yu))</span><br></pre></td></tr></table></figure><ul><li>全局变量和局部变量</li><li>在一个函数中定义的变量，只能在本函数中用</li><li>在函数外定义的变量，可以在所有的函数中使用</li></ul><h3 id="文件操作"><a href="#文件操作" class="headerlink" title="文件操作"></a>文件操作</h3><table><thead><tr><th align="center">模式</th><th align="left">描述</th></tr></thead><tbody><tr><td align="center">r</td><td align="left">以只读方式打开文件。文件的指针将会放在文件的开头。这是默认模式。</td></tr><tr><td align="center"><strong>w</strong></td><td align="left">打开一个文件只用于写入。如果该文件已存在则将其覆盖。如果该文件不存在，创建新文件。</td></tr><tr><td align="center">r+</td><td align="left">打开一个文件用于读写。文件指针将会放在文件的开头。</td></tr><tr><td align="center">w+</td><td align="left">打开一个文件用于读写。如果该文件已存在则将其覆盖。如果该文件不存在，创建新文件。</td></tr><tr><td align="center">rb</td><td align="left">以二进制格式打开一个文件用于只读。文件指针将会放在文件的开头。这是默认模式。</td></tr><tr><td align="center">rb+</td><td align="left">以二进制格式打开一个文件用于只读。文件指针将会放在文件的开头。</td></tr><tr><td align="center">wb</td><td align="left">以二进制格式打开一个文件只用于写入。如果该文件已存在则将其覆盖。如果该文件不存在，创建新文件。</td></tr><tr><td align="center">wb+</td><td align="left">以二进制格式打开一个文件用于读写。如果该文件已存在则将其覆盖。如果该文件不存在，创建新文件。</td></tr><tr><td align="center">a</td><td align="left">打开一个文件用于追加。如果该文件已存在，文件指针将会放在文件的结尾。也就是说，新的内容将会被写入到已有内容之后。如果该文件不存在，创建新文件进行写入。</td></tr><tr><td align="center">a+</td><td align="left">打开一个文件用于读写。如果该文件已存在，文件指针将会放在文件的结尾。文件打开时会是追加模式。如果该文件不存在，创建新文件用于读写。</td></tr><tr><td align="center">ab</td><td align="left">以二进制格式打开一个文件用于追加。如果该文件已存在，文件指针将会放在文件的结尾。也就是说，新的内容将会被写入到已有内容之后。如果该文件不存在，创建新文件进行写入。</td></tr><tr><td align="center">ab+</td><td align="left">以二进制格式打开一个文件用于追加。如果该文件已存在，文件指针将会放在文件的结尾。如果该文件不存在，创建新文件用于读写。</td></tr></tbody></table><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">f = <span class="built_in">open</span>(<span class="string">&quot;test.txt&quot;</span>, <span class="string">&quot;w&quot;</span>)  <span class="comment"># 打开文件，w模式，文件不存在则新建</span></span><br><span class="line"></span><br><span class="line">f.write(<span class="string">&quot;hello world&quot;</span>)   <span class="comment"># 将字符串写入文件中</span></span><br><span class="line"></span><br><span class="line">f.close()   <span class="comment"># 关闭文件</span></span><br></pre></td></tr></table></figure><ul><li>read方法，读取指定的字符，开始时定位在文件头部，每执行一次，向后移动指定数</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">f = <span class="built_in">open</span>(<span class="string">&quot;test.txt&quot;</span>,<span class="string">&quot;r&quot;</span>)</span><br><span class="line"></span><br><span class="line">content = f.read(<span class="number">5</span>)</span><br><span class="line"><span class="built_in">print</span>(content)</span><br><span class="line"></span><br><span class="line">content = f.read(<span class="number">5</span>)</span><br><span class="line"><span class="built_in">print</span>(content)</span><br><span class="line"></span><br><span class="line">f.close()</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># readlines方法，读完所有文档，形成一个列表</span></span><br><span class="line">f = <span class="built_in">open</span>(<span class="string">&quot;test.txt&quot;</span>,<span class="string">&quot;r&quot;</span>)</span><br><span class="line"></span><br><span class="line">content = f.readline()</span><br><span class="line"><span class="built_in">print</span>(content)  <span class="comment"># 直接打印,每次读一行</span></span><br><span class="line"></span><br><span class="line">content = f.readline()</span><br><span class="line"><span class="built_in">print</span>(content)  <span class="comment"># 直接打印</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;-&quot;</span> * <span class="number">100</span>)</span><br><span class="line"></span><br><span class="line">content = f.readlines()</span><br><span class="line"><span class="built_in">print</span>(content)  <span class="comment"># 直接打印</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;-&quot;</span> * <span class="number">100</span>)</span><br><span class="line"></span><br><span class="line">i = <span class="number">1</span></span><br><span class="line"><span class="keyword">for</span> temp <span class="keyword">in</span> content:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;%d：%s &quot;</span> %(i,temp))  <span class="comment"># 分行打印</span></span><br><span class="line">    i += <span class="number">1</span></span><br><span class="line"></span><br><span class="line">f.close()</span><br></pre></td></tr></table></figure><ul><li>os模块</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br><span class="line"></span><br><span class="line">os.rename(<span class="string">&quot;test.txt&quot;</span>, <span class="string">&quot;retest.txt&quot;</span>)</span><br></pre></td></tr></table></figure><h3 id="文件错误与异常"><a href="#文件错误与异常" class="headerlink" title="文件错误与异常"></a>文件错误与异常</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(<span class="string">&quot;test1&quot;</span>)</span><br><span class="line"></span><br><span class="line">f = <span class="built_in">open</span>(<span class="string">&quot;123.txt&quot;</span>, <span class="string">&quot;r&quot;</span>)     <span class="comment"># 只读模式打开不存在文件，报错</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;text2&quot;</span>)   <span class="comment">#  这句代码不会执行</span></span><br></pre></td></tr></table></figure><ul><li>捕获异常</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">try:</span><br><span class="line">    print(&quot;test1&quot;)</span><br><span class="line"></span><br><span class="line">    f = open(&quot;123.txt&quot;, &quot;r&quot;)</span><br><span class="line"></span><br><span class="line">    print(&quot;text2&quot;)</span><br><span class="line"></span><br><span class="line">except IOError:    # 文件没找到，属于IO异常（输入输出异常）</span><br><span class="line">    pass  # 捕获异常后，执行的代码</span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    <span class="built_in">print</span>(num)</span><br><span class="line"><span class="keyword">except</span> NameError:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;NameError&quot;</span>)</span><br></pre></td></tr></table></figure><img src="/2022/07/05/Python%E5%9F%BA%E7%A1%80/20220128183247.png" class><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;test1&quot;</span>)</span><br><span class="line"></span><br><span class="line">    f = <span class="built_in">open</span>(<span class="string">&quot;123.txt&quot;</span>, <span class="string">&quot;r&quot;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;text2&quot;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="built_in">print</span>(num)</span><br><span class="line"><span class="keyword">except</span> (NameError,IOError):   <span class="comment"># 将可能出现的错误都放在这里</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;出现错误&quot;</span>)</span><br></pre></td></tr></table></figure><ul><li>获取错误描述</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;test1&quot;</span>)</span><br><span class="line"></span><br><span class="line">    f = <span class="built_in">open</span>(<span class="string">&quot;123.txt&quot;</span>, <span class="string">&quot;r&quot;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;text2&quot;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="built_in">print</span>(num)</span><br><span class="line"><span class="keyword">except</span> (NameError,IOError) <span class="keyword">as</span> result:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;出现错误&quot;</span>)</span><br><span class="line">    <span class="built_in">print</span>(result)</span><br></pre></td></tr></table></figure><ul><li>获取所有异常</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;test1&quot;</span>)</span><br><span class="line"></span><br><span class="line">    f = <span class="built_in">open</span>(<span class="string">&quot;123.txt&quot;</span>, <span class="string">&quot;r&quot;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;text2&quot;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="built_in">print</span>(num)</span><br><span class="line"><span class="keyword">except</span> Exception <span class="keyword">as</span> result:  <span class="comment"># Exception可以承接任何异常</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;出现错误&quot;</span>)</span><br><span class="line">    <span class="built_in">print</span>(result)</span><br></pre></td></tr></table></figure><ul><li>异常处理</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> time</span><br><span class="line"></span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    f = <span class="built_in">open</span>(<span class="string">&quot;123.txt&quot;</span>, <span class="string">&quot;r&quot;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">            content = f.readline()</span><br><span class="line">            <span class="keyword">if</span> <span class="built_in">len</span>(content) == <span class="number">0</span>:</span><br><span class="line">                <span class="keyword">break</span></span><br><span class="line">            time.sleep(<span class="number">2</span>)</span><br><span class="line">            <span class="built_in">print</span>(content)</span><br><span class="line">    <span class="keyword">finally</span>:                                <span class="comment"># 无论如何一定会执行的</span></span><br><span class="line">        f.close()</span><br><span class="line"></span><br><span class="line"><span class="keyword">except</span> Exception <span class="keyword">as</span> result:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;发生异常&quot;</span>)</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;python基础&quot;&gt;&lt;a href=&quot;#python基础&quot; class=&quot;headerlink&quot; title=&quot;python基础&quot;&gt;&lt;/a&gt;python基础&lt;/h1&gt;&lt;h2 id=&quot;python简介&quot;&gt;&lt;a href=&quot;#python简介&quot; class=&quot;head</summary>
      
    
    
    
    <category term="Python篇" scheme="http://bkystop.github.io/categories/Python%E7%AF%87/"/>
    
    
    <category term="Python" scheme="http://bkystop.github.io/tags/Python/"/>
    
  </entry>
  
  <entry>
    <title>PHP基础</title>
    <link href="http://bkystop.github.io/2022/06/15/PHP%E5%9F%BA%E7%A1%80/"/>
    <id>http://bkystop.github.io/2022/06/15/PHP%E5%9F%BA%E7%A1%80/</id>
    <published>2022-06-15T14:06:14.000Z</published>
    <updated>2023-04-09T09:09:51.053Z</updated>
    
    <content type="html"><![CDATA[<h1 id="PHP基础"><a href="#PHP基础" class="headerlink" title="PHP基础"></a>PHP基础</h1><h2 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h2><p>PHP（全称：PHP：Hypertext Preprocessor，即”PHP：超文本预处理器”）是一种通用开源脚本语言。</p><ul><li>PHP 文件的默认文件扩展名是 “.php”</li><li>PHP 文件可包含文本、HTML、JavaScript代码和 PHP 代码</li><li>PHP 代码在服务器上执行，结果以纯 HTML 形式返回给浏览器</li></ul><p>php的应用：<br>1.PHP 可以生成动态页面内容<br>2.PHP 可以创建、打开、读取、写入、关闭服务器上的文件<br>3.PHP 可以收集表单数据<br>4.PHP 可以发送和接收 cookies<br>5.PHP 可以添加、删除、修改您的数据库中的数据<br>6.PHP 可以限制用户访问您的网站上的一些页面<br>7.PHP 可以加密数据</p><h2 id="基本语法"><a href="#基本语法" class="headerlink" title="基本语法"></a>基本语法</h2><h2 id="格式"><a href="#格式" class="headerlink" title="格式"></a>格式</h2><ul><li>PHP 脚本以 <?php 开始，以 ?> 结束</li></ul><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="keyword">echo</span> <span class="string">&#x27;hello world&#x27;</span>;</span><br><span class="line"><span class="meta">?&gt;</span></span><br><span class="line"><span class="comment">//php脚本的基本格式</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * 多行注释</span></span><br><span class="line"><span class="comment"> * */</span></span><br></pre></td></tr></table></figure><h2 id="变量"><a href="#变量" class="headerlink" title="变量"></a>变量</h2><ul><li>变量的命名，变量以 $ 符号开始，后面跟着变量的名称</li><li>变量的命名规则<br>变量名必须以字母或者下划线字符开始<br>变量名只能包含字母数字字符以及下划线（A-z、0-9 和 _ ）<br>变量名不能包含空格</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$num = 1;</span><br><span class="line">$str = &quot;hello&quot;;</span><br></pre></td></tr></table></figure><ul><li>static的关键字的使用</li><li>当一个函数完成时，它的所有变量通常都会被删除。当需要某个局部变量不要被删除。在第一次声明变量时使用 static 关键字。</li></ul><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">test</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">static</span> <span class="variable">$n</span>=<span class="number">0</span>;</span><br><span class="line">    <span class="variable">$n</span>++;</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&quot;调用了一次&quot;</span>.<span class="variable">$n</span>.<span class="string">&quot;\n&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_ invoke__">test</span>();<span class="title function_ invoke__">test</span>();<span class="title function_ invoke__">test</span>();</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><h2 id="数据类型"><a href="#数据类型" class="headerlink" title="数据类型"></a>数据类型</h2><p>php有5种数据类型：String（字符串）, Integer（整型）, Float（浮点型）, Boolean（布尔型）, Array（数组）, Object（对象）, NULL（空值）。</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span> </span><br><span class="line"><span class="variable">$a</span> = <span class="string">&quot;字符串类型&quot;</span>;</span><br><span class="line"><span class="variable">$b</span> = <span class="number">1234</span>;<span class="comment">//整形</span></span><br><span class="line"><span class="variable">$c</span> = -<span class="number">3.1415</span>;<span class="comment">//浮点型</span></span><br><span class="line"><span class="variable">$d</span> = <span class="number">8E-3</span>;</span><br><span class="line"><span class="variable">$e</span> = <span class="literal">true</span>;<span class="comment">//boolean类型</span></span><br><span class="line"><span class="variable">$f</span> = <span class="keyword">array</span>(<span class="string">&quot;A&quot;</span>,<span class="string">&quot;B&quot;</span>,<span class="string">&quot;C&quot;</span>);<span class="comment">//数组类型</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">obj</span></span>&#123;<span class="comment">//php对象的声明</span></span><br><span class="line">    <span class="keyword">var</span> <span class="variable">$num</span>;</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">name</span>(<span class="params"></span>) </span>&#123; &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="variable">$o</span> = <span class="keyword">new</span> <span class="title function_ invoke__">obj</span>();<span class="comment">//对象实例化类型</span></span><br><span class="line"><span class="variable">$g</span> = <span class="literal">NULL</span>;<span class="comment">//NULL</span></span><br><span class="line"><span class="title function_ invoke__">var_dump</span>(<span class="variable">$a</span>);<span class="title function_ invoke__">var_dump</span>(<span class="variable">$b</span>);<span class="title function_ invoke__">var_dump</span>(<span class="variable">$c</span>);<span class="title function_ invoke__">var_dump</span>(<span class="variable">$d</span>);</span><br><span class="line"><span class="title function_ invoke__">var_dump</span>(<span class="variable">$e</span>);<span class="title function_ invoke__">var_dump</span>(<span class="variable">$f</span>);<span class="title function_ invoke__">var_dump</span>(<span class="variable">$o</span>);<span class="title function_ invoke__">var_dump</span>(<span class="variable">$g</span>);</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><h2 id="常量"><a href="#常量" class="headerlink" title="常量"></a>常量</h2><p>常量是一个简单值的标识符。该值在脚本中不能改变。（在整个脚本中都能使用）</p><p>一个常量由英文字母、下划线、和数字组成,但数字不能作为首字母出现。 (常量名不需要加 $ 修饰符)。<br>设置常量，使用 define() 函数，函数语法如下：</p><p>bool define ( string $name , mixed $value [, bool $case_insensitive = false ] )<br>　　该函数有三个参数:<br>name：必选参数，常量名称，即标志符。<br>value：必选参数，常量的值。<br>case_insensitive ：可选参数，如果设置为 TRUE，该常量则大小写不敏感。默认是大小写敏感的。<br><?php // 常量define("CL", "这是一个全局常量", true);echo CL; // 默认false，变量名区分大小写echo cl; // true不区分大小写?></p><ul><li>预定义常量<br>PHP预定义了许多常量，这些常量无需使用define()函数定义，可直接在程序中使用。下面列举了一些常用的PHP预定义常量。</li></ul><p>（1）<strong>FILE</strong>(FILE前后分别是两个下画线)：当前正在处理的脚本文件名，若使用在一个被引用的文件中（include或require），那么它的值就是被引用的文件，而不是引用它的那个文件。</p><p>（2）<strong>LINE</strong>(LINE前后分别是两个下画线)：正在处理的脚本文件的当前行数。</p><p>（3）PHP_VERSION：当前PHP预处理器的版本。</p><p>（4）PHP_OS: PHP所在的操作系统的类型。如Linux。</p><p>（5）TRUE：表示逻辑真。FALSE：表示逻辑假。NULL：表示没有值或值不确定。</p><p>（6）DIRECTORY_SEPARATOR: 表示目录分隔符，UNIX或Linux操作系统环境时的值为“ / ”, Window操作系统环境时的值为 “ \ ”。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line">echo __FILE__;</span><br><span class="line">echo &quot;&lt;br/&gt;&quot;;</span><br><span class="line">echo __LINE__;</span><br><span class="line">echo &quot;&lt;br/&gt;&quot;;</span><br><span class="line">echo PHP_VERSION;</span><br><span class="line">echo &quot;&lt;br/&gt;&quot;;</span><br><span class="line">echo PHP_OS;</span><br><span class="line">echo &quot;&lt;br/&gt;&quot;;</span><br><span class="line">echo DIRECTORY_SEPARATOR;</span><br><span class="line">?&gt;</span><br></pre></td></tr></table></figure><h3 id="整型"><a href="#整型" class="headerlink" title="整型"></a>整型</h3><p>整数类型：保存整数数值（范围限制），4个字节存储数据。PHP中默认为有符号。<br>在PHP中提供四种整形的定义方式，十进制定义，二进制定义，八进制定义和十六进制定义</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$a</span> = <span class="number">120</span> <span class="comment">//十进制</span></span><br><span class="line"><span class="variable">$a</span> = <span class="number">0b110</span> <span class="comment">//二进制</span></span><br><span class="line"><span class="variable">$a</span> = <span class="number">0120</span> <span class="comment">//八进制</span></span><br><span class="line"><span class="variable">$a</span> = <span class="number">0x120</span><span class="comment">//十六进制</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 使用echo输出时。默认输出为十进制</span></span><br><span class="line"><span class="title function_ invoke__">decbin</span>() <span class="comment">// 十进制转二进制</span></span><br><span class="line"><span class="title function_ invoke__">decoct</span>() <span class="comment">// 十进制转八进制</span></span><br><span class="line"><span class="title function_ invoke__">dechex</span>() <span class="comment">// 十进制转十六进制</span></span><br><span class="line"><span class="title function_ invoke__">bindec</span>() <span class="comment">// 二进制转十进制</span></span><br><span class="line"><span class="title function_ invoke__">bin2hex</span>() <span class="comment">//二进制转十六进制    </span></span><br></pre></td></tr></table></figure><h3 id="字符串"><a href="#字符串" class="headerlink" title="字符串"></a>字符串</h3><ul><li>字符串变量用于存储并处理文本。</li></ul><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span> </span><br><span class="line"><span class="comment">// 字符串</span></span><br><span class="line"><span class="variable">$text1</span> = <span class="string">&quot;hello&quot;</span>;</span><br><span class="line"><span class="variable">$text2</span> = <span class="string">&quot;world&quot;</span>;</span><br><span class="line"><span class="keyword">echo</span> <span class="variable">$text1</span> . <span class="string">&quot; &quot;</span> . <span class="variable">$text2</span>; <span class="comment">// &quot;.&quot;是并置运算符（连接）</span></span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;返回字符串的长度：&quot;</span>, <span class="title function_ invoke__">strlen</span>(<span class="variable">$text1</span>);</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;返回子串的第一次位置：&quot;</span>, <span class="title function_ invoke__">strpos</span>(<span class="variable">$text1</span>, <span class="string">&quot;l&quot;</span>);</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><ul><li>字符的操作函数</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br></pre></td><td class="code"><pre><span class="line">addcslashes — 以 C 语言风格使用反斜线转义字符串中的字符</span><br><span class="line">addslashes — 使用反斜线引用字符串</span><br><span class="line">bin2hex — 函数把包含数据的二进制字符串转换为十六进制值</span><br><span class="line">chop — rtrim 的别名</span><br><span class="line">chr — 返回指定的字符</span><br><span class="line">chunk_split — 将字符串分割成小块</span><br><span class="line">convert_cyr_string — 将字符由一种 Cyrillic 字符转换成另一种</span><br><span class="line">convert_uudecode — 解码一个 uuencode 编码的字符串</span><br><span class="line">convert_uuencode — 使用 uuencode 编码一个字符串</span><br><span class="line">count_chars — 返回字符串所用字符的信息</span><br><span class="line">crc32 — 计算一个字符串的 crc32 多项式</span><br><span class="line">crypt — 单向字符串散列</span><br><span class="line">echo — 输出一个或多个字符串</span><br><span class="line">explode — 使用一个字符串分割另一个字符串</span><br><span class="line">fprintf — 将格式化后的字符串写入到流</span><br><span class="line">get_html_translation_table — 返回使用 htmlspecialchars 和 htmlentities 后的转换表</span><br><span class="line">hebrev — 将逻辑顺序希伯来文（logical-Hebrew）转换为视觉顺序希伯来文（visual-Hebrew）</span><br><span class="line">hebrevc — 将逻辑顺序希伯来文（logical-Hebrew）转换为视觉顺序希伯来文（visual-Hebrew），并且转换换行符</span><br><span class="line">hex2bin — 转换十六进制字符串为二进制字符串</span><br><span class="line">html_entity_decode — Convert HTML entities to their corresponding characters</span><br><span class="line">htmlentities — 将字符转换为 HTML 转义字符</span><br><span class="line">htmlspecialchars_decode — 将特殊的 HTML 实体转换回普通字符</span><br><span class="line">htmlspecialchars — 将特殊字符转换为 HTML 实体</span><br><span class="line">implode — 将一个一维数组的值转化为字符串</span><br><span class="line">join — 别名 implode</span><br><span class="line">lcfirst — 使一个字符串的第一个字符小写</span><br><span class="line">levenshtein — 计算两个字符串之间的编辑距离</span><br><span class="line">localeconv — Get numeric formatting information</span><br><span class="line">ltrim — 删除字符串开头的空白字符（或其他字符）</span><br><span class="line">md5_file — 计算指定文件的 MD5 散列值</span><br><span class="line">md5 — 计算字符串的 MD5 散列值</span><br><span class="line">metaphone — Calculate the metaphone key of a string</span><br><span class="line">money_format — 将数字格式化成货币字符串</span><br><span class="line">nl_langinfo — Query language and locale information</span><br><span class="line">nl2br — 在字符串所有新行之前插入 HTML 换行标记</span><br><span class="line">number_format — 以千位分隔符方式格式化一个数字</span><br><span class="line">ord — 转换字符串第一个字节为 0-255 之间的值</span><br><span class="line">parse_str — 将字符串解析成多个变量</span><br><span class="line">print — 输出字符串</span><br><span class="line">printf — 输出格式化字符串</span><br><span class="line">quoted_printable_decode — 将 quoted-printable 字符串转换为 8-bit 字符串</span><br><span class="line">quoted_printable_encode — 将 8-bit 字符串转换成 quoted-printable 字符串</span><br><span class="line">quotemeta — 转义元字符集</span><br><span class="line">rtrim — 删除字符串末端的空白字符（或者其他字符）</span><br><span class="line">setlocale — 设置地区信息</span><br><span class="line">sha1_file — 计算文件的 sha1 散列值</span><br><span class="line">sha1 — 计算字符串的 sha1 散列值</span><br><span class="line">similar_text — 计算两个字符串的相似度</span><br><span class="line">soundex — Calculate the soundex key of a string</span><br><span class="line">sprintf — Return a formatted string</span><br><span class="line">sscanf — 根据指定格式解析输入的字符</span><br><span class="line">str_contains — Determine if a string contains a given substring</span><br><span class="line">str_ends_with — Checks if a string ends with a given substring</span><br><span class="line">str_getcsv — 解析 CSV 字符串为一个数组</span><br><span class="line">str_ireplace — str_replace 的忽略大小写版本</span><br><span class="line">str_pad — 使用另一个字符串填充字符串为指定长度</span><br><span class="line">str_repeat — 重复一个字符串</span><br><span class="line">str_replace — 子字符串替换</span><br><span class="line">str_rot13 — 对字符串执行 ROT13 转换</span><br><span class="line">str_shuffle — 随机打乱一个字符串</span><br><span class="line">str_split — 将字符串转换为数组</span><br><span class="line">str_starts_with — Checks if a string starts with a given substring</span><br><span class="line">str_word_count — 返回字符串中单词的使用情况</span><br><span class="line">strcasecmp — 二进制安全比较字符串（不区分大小写）</span><br><span class="line">strchr — 别名 strstr</span><br><span class="line">strcmp — 二进制安全字符串比较</span><br><span class="line">strcoll — 基于区域设置的字符串比较</span><br><span class="line">strcspn — 获取不匹配遮罩的起始子字符串的长度</span><br><span class="line">strip_tags — 从字符串中去除 HTML 和 PHP 标记</span><br><span class="line">stripcslashes — 反引用一个使用 addcslashes 转义的字符串</span><br><span class="line">stripos — 查找字符串首次出现的位置（不区分大小写）</span><br><span class="line">stripslashes — 反引用一个引用字符串</span><br><span class="line">stristr — strstr 函数的忽略大小写版本</span><br><span class="line">strlen — 获取字符串长度</span><br><span class="line">strnatcasecmp — 使用“自然顺序”算法比较字符串（不区分大小写）</span><br><span class="line">strnatcmp — 使用自然排序算法比较字符串</span><br><span class="line">strncasecmp — 二进制安全比较字符串开头的若干个字符（不区分大小写）</span><br><span class="line">strncmp — 二进制安全比较字符串开头的若干个字符</span><br><span class="line">strpbrk — 在字符串中查找一组字符的任何一个字符</span><br><span class="line">strpos — 查找字符串首次出现的位置</span><br><span class="line">strrchr — 查找指定字符在字符串中的最后一次出现</span><br><span class="line">strrev — 反转字符串</span><br><span class="line">strripos — 计算指定字符串在目标字符串中最后一次出现的位置（不区分大小写）</span><br><span class="line">strrpos — 计算指定字符串在目标字符串中最后一次出现的位置</span><br><span class="line">strspn — 计算字符串中全部字符都存在于指定字符集合中的第一段子串的长度。</span><br><span class="line">strstr — 查找字符串的首次出现</span><br><span class="line">strtok — 标记分割字符串</span><br><span class="line">strtolower — 将字符串转化为小写</span><br><span class="line">strtoupper — 将字符串转化为大写</span><br><span class="line">strtr — 转换指定字符</span><br><span class="line">substr_compare — 二进制安全比较字符串（从偏移位置比较指定长度）</span><br><span class="line">substr_count — 计算字串出现的次数</span><br><span class="line">substr_replace — 替换字符串的子串</span><br><span class="line">substr — 返回字符串的子串</span><br><span class="line">trim — 去除字符串首尾处的空白字符（或者其他字符）</span><br><span class="line">ucfirst — 将字符串的首字母转换为大写</span><br><span class="line">ucwords — 将字符串中每个单词的首字母转换为大写</span><br><span class="line">vfprintf — 将格式化字符串写入流</span><br><span class="line">vprintf — 输出格式化字符串</span><br><span class="line">vsprintf — 返回格式化字符串</span><br><span class="line">wordwrap — 打断字符串为指定数量的字串</span><br></pre></td></tr></table></figure><h2 id="运算符"><a href="#运算符" class="headerlink" title="运算符"></a>运算符</h2><ul><li>基本运算符</li><li>赋值运算符</li><li>递增/递减运算符</li><li>比较运算符</li><li>逻辑运算符</li></ul><h2 id="控制语句"><a href="#控制语句" class="headerlink" title="控制语句"></a>控制语句</h2><ul><li>条件控制语句</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">if 语句 - 在条件成立时执行代码</span><br><span class="line">if...else 语句 - 在条件成立时执行一块代码，条件不成立时执行另一块代码</span><br><span class="line">if...elseif....else 语句 - 在若干条件之一成立时执行一个代码块</span><br><span class="line">switch 语句 - 在若干条件之一成立时执行一个代码块</span><br></pre></td></tr></table></figure><ul><li>循环控制语句</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">while - 只要指定的条件成立，则循环执行代码块</span><br><span class="line">do...while - 首先执行一次代码块，然后在指定的条件成立时重复这个循环</span><br><span class="line">for - 循环执行代码块指定的次数</span><br><span class="line">foreach - 根据数组中每个元素来循环代码块</span><br></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">break语句用于终止本次循环</span><br><span class="line">continue语句的作用是跳出本次循环，接着执行下一次循环</span><br></pre></td></tr></table></figure><h2 id="php数组"><a href="#php数组" class="headerlink" title="php数组"></a>php数组</h2><ul><li>数组是一个能在单个变量中存储多个值的特殊变量。<br>在 PHP 中，array() 函数用于创建数组：array();</li></ul><p>在 PHP 中，有三种类型的数组：</p><ul><li>数值数组 - 带有数字 ID 键的数组</li><li>关联数组 - 带有指定的键的数组，每个键关联一个值</li><li>多维数组 - 包含一个或多个数组的数组<br>数组的声明<br>$array1 = array();</li></ul><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="variable">$cars</span>=<span class="keyword">array</span>(<span class="string">&quot;Volvo&quot;</span>,<span class="string">&quot;BMW&quot;</span>,<span class="string">&quot;Toyota&quot;</span>);<span class="comment">//简单的数组</span></span><br><span class="line"><span class="keyword">echo</span> <span class="title function_ invoke__">count</span>(<span class="variable">$cars</span>);<span class="comment">//count()返回数组的长度</span></span><br><span class="line"><span class="variable">$age</span>=<span class="keyword">array</span>(<span class="string">&quot;Peter&quot;</span>=&gt;<span class="string">&quot;35&quot;</span>,<span class="string">&quot;Ben&quot;</span>=&gt;<span class="string">&quot;37&quot;</span>,<span class="string">&quot;Joe&quot;</span>=&gt;<span class="string">&quot;43&quot;</span>);<span class="comment">//关联数组</span></span><br><span class="line"><span class="comment">//其中包含多个键值对</span></span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;Peter is &quot;</span> . <span class="variable">$age</span>[<span class="string">&#x27;Peter&#x27;</span>] . <span class="string">&quot; years old.&quot;</span>;</span><br><span class="line"><span class="keyword">foreach</span>(<span class="variable">$age</span> <span class="keyword">as</span> <span class="variable">$x</span>=&gt;<span class="variable">$x_value</span>)<span class="comment">//关联数组的遍历方法</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&quot;Key=&quot;</span> . <span class="variable">$x</span> . <span class="string">&quot;, Value=&quot;</span> . <span class="variable">$x_value</span>;</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&quot;&lt;br&gt;&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><p>在PHP 中定义了多个数组排序的内置函数：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">sort() - 对数组进行升序排列</span><br><span class="line">rsort() - 对数组进行降序排列</span><br><span class="line">asort() - 根据关联数组的值，对数组进行升序排列</span><br><span class="line">ksort() - 根据关联数组的键，对数组进行升序排列</span><br><span class="line">arsort() - 根据关联数组的值，对数组进行降序排列</span><br><span class="line">krsort() - 根据关联数组的键，对数组进行降序排列</span><br></pre></td></tr></table></figure><h3 id="数组的操作"><a href="#数组的操作" class="headerlink" title="数组的操作"></a>数组的操作</h3><ul><li>数组的合拼</li></ul><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$array1</span> =<span class="keyword">array</span>(<span class="string">&#x27;a&#x27;</span>,<span class="string">&#x27;b&#x27;</span>,<span class="string">&#x27;c&#x27;</span>);</span><br><span class="line"><span class="variable">$array2</span> = <span class="keyword">array</span>(<span class="string">&#x27;a1&#x27;</span>=&gt;<span class="string">&#x27;php&#x27;</span>,<span class="string">&#x27;a2&#x27;</span>=&gt;<span class="string">&#x27;python&#x27;</span>,<span class="string">&#x27;a3&#x27;</span>=&gt;<span class="string">&#x27;java&#x27;</span>);</span><br><span class="line"><span class="variable">$array3</span> = <span class="title function_ invoke__">array_merge</span>(<span class="variable">$array1</span>,<span class="variable">$array2</span>);</span><br></pre></td></tr></table></figure><ul><li>添加数组元素</li></ul><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_ invoke__">array_push</span>() 函数向第一个参数的数组尾部添加一个或多个元素（入栈），然后返回新数组的长度。</span><br><span class="line"><span class="title function_ invoke__">array_push</span>(<span class="variable">$array1</span>,<span class="string">&#x27;d&#x27;</span>,<span class="string">&#x27;e&#x27;</span>);</span><br><span class="line"><span class="title function_ invoke__">print_r</span>(<span class="variable">$array1</span>);</span><br><span class="line">下表为空 自动添加参数</span><br><span class="line"><span class="variable">$array1</span>[]=<span class="string">&#x27;d&#x27;</span>;</span><br><span class="line">有键值的</span><br><span class="line"><span class="variable">$array1</span>[<span class="string">&#x27;a4&#x27;</span>]=<span class="string">&#x27;javasciprt&#x27;</span>;</span><br></pre></td></tr></table></figure><ul><li>添加到指定位置<br>array_splice(数组，位置，删除几个，增加元素）</li></ul><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="variable">$array1</span> = <span class="keyword">array</span>(<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;c&#x27;</span>, <span class="string">&#x27;d&#x27;</span>, <span class="string">&#x27;e&#x27;</span>);</span><br><span class="line"><span class="variable">$array2</span> = <span class="keyword">array</span>(<span class="string">&#x27;x&#x27;</span>);</span><br><span class="line"><span class="title function_ invoke__">array_splice</span>(<span class="variable">$array1</span>, <span class="number">3</span>, <span class="number">0</span>, <span class="variable">$array2</span>); <span class="comment">// 插入到位置3且删除0个 </span></span><br><span class="line"><span class="title function_ invoke__">print_r</span>(<span class="variable">$array1</span>);</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><ul><li>删除某一个元素</li></ul><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="variable">$array1</span> = <span class="keyword">array</span>(<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;c&#x27;</span>, <span class="string">&#x27;d&#x27;</span>, <span class="string">&#x27;e&#x27;</span>);</span><br><span class="line"><span class="variable">$array2</span> = <span class="keyword">array</span>(<span class="string">&#x27;x&#x27;</span>);</span><br><span class="line"><span class="title function_ invoke__">array_splice</span>(<span class="variable">$array1</span>, <span class="number">3</span>, <span class="number">1</span>); </span><br><span class="line"><span class="title function_ invoke__">print_r</span>(<span class="variable">$array1</span>);</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><p>unset 销毁指定的元素</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$array1</span> = <span class="keyword">array</span>(<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;c&#x27;</span>, <span class="string">&#x27;d&#x27;</span>, <span class="string">&#x27;e&#x27;</span>);</span><br><span class="line"><span class="keyword">unset</span>(<span class="variable">$array1</span>[<span class="number">0</span>]);</span><br><span class="line"><span class="title function_ invoke__">print_r</span>(<span class="variable">$array1</span>);</span><br></pre></td></tr></table></figure><ul><li>修改数组中某个元素</li></ul><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$array1</span> = <span class="keyword">array</span>(<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;c&#x27;</span>, <span class="string">&#x27;d&#x27;</span>, <span class="string">&#x27;e&#x27;</span>);</span><br><span class="line"><span class="variable">$array1</span>[<span class="number">0</span>]=<span class="string">&#x27;aa&#x27;</span>;</span><br><span class="line"><span class="title function_ invoke__">print_r</span>(<span class="variable">$array1</span>);</span><br></pre></td></tr></table></figure><p>常用的数组函数</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">is_array 判断是否为数组</span><br><span class="line">count 数组的元素数目</span><br><span class="line">array_search — 在数组中搜索给定的值，如果成功则返回相应的键名</span><br><span class="line">array_key_exists()在给定的 key 存在于数组中时返回 TRUE</span><br><span class="line">array_unshift()  将传入的单元插入到 array 数组的开头。注意单元是作为整体被插入的，因此传入单元将保持同样的顺序。所有的数值键名将修改为从零开始重新计数，所有的文字键名保持不变</span><br><span class="line">array_shift()  将array 的第一个单元移出并作为结果返回，将 array 的长度减一并将所有其它单元向前移动一位。所有的数字键名将改为从零开始计数，文字键名将不变。</span><br><span class="line">array_unique()  接受 array 作为输入并返回没有重复值的新数组。注意键名保留不变。 array_unique()  先将值作为字符串排序，然后对每个值只保留第一个遇到的键名，接着忽略所有后面的键名。这并不意味着在未排序的 array 中同一个值的第一个出现的键名会被保留。 </span><br><span class="line">in_array — 检查数组中是否存在某个值  如果找到指定的值则返回 TRUE，否则返回 FALSE 。in_array()是区分大小写的。</span><br></pre></td></tr></table></figure><h2 id="PHP-函数"><a href="#PHP-函数" class="headerlink" title="PHP 函数"></a>PHP 函数</h2><p>PHP 拥有超过 1000 个内建的函数。<br>PHP 用户定义函数:除了内建的 PHP 函数，我们可以创建我们自己的函数。</p><p><strong>函数是可以在程序中重复使用的语句块。<br>页面加载时函数不会立即执行。<br>函数只有在被调用时才会执行。</strong></p><p>在 PHP 创建用户定义函数<br>用户定义的函数声明以单词 “function” 开头：</p><ul><li>语法</li></ul><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">functionName</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  被执行的代码;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>注释：</p><ul><li>函数名能够以字母或下划线开头（而非数字）。</li><li>函数名对大小写不敏感。<br>提示：函数名应该能够反映函数所执行的任务。</li></ul><p>实例</p><ul><li>在下面的例子中，我们创建名为 “writeMsg()” 的函数。打开的花括号（{）指示函数代码的开始，而关闭的花括号（}）指示函数的结束。此函数输出 “Hello world!”。如需调用该函数，只要使用函数名即可：</li></ul><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">sayHi</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">echo</span> <span class="string">&quot;Hello world!&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_ invoke__">sayhi</span>(); <span class="comment">// 调用函数</span></span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><ul><li>PHP 函数参数<br>可以通过参数向函数传递信息。参数类似变量。<br>参数被定义在函数名之后，括号内部。您可以添加任意多参数，只要用逗号隔开即可。</li></ul><p>实例<br>下面的例子中的函数有一个参数（$fname）。当调用 familyName() 函数时，我们同时要传递一个名字（例如 Bill），这样会输出不同的名字，但是姓氏相同：</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">familyName</span>(<span class="params"><span class="variable">$fname</span></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">echo</span> <span class="string">&quot;<span class="subst">$fname</span> Zhang.&lt;br&gt;&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_ invoke__">familyName</span>(<span class="string">&quot;Li&quot;</span>);</span><br><span class="line"><span class="title function_ invoke__">familyName</span>(<span class="string">&quot;Hong&quot;</span>);</span><br><span class="line"><span class="title function_ invoke__">familyName</span>(<span class="string">&quot;Tao&quot;</span>);</span><br><span class="line"><span class="title function_ invoke__">familyName</span>(<span class="string">&quot;Xiao Mei&quot;</span>);</span><br><span class="line"><span class="title function_ invoke__">familyName</span>(<span class="string">&quot;Jian&quot;</span>);</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><ul><li>PHP 默认参数值</li></ul><p>实例一<br>下面的例子展示了如何使用默认参数。如果我们调用没有参数的 setHeight() 函数，它的参数会取默认值：</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">setHeight</span>(<span class="params"><span class="variable">$minheight</span>=<span class="number">50</span></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">echo</span> <span class="string">&quot;The height is : <span class="subst">$minheight</span> &lt;br&gt;&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_ invoke__">setHeight</span>(<span class="number">350</span>);</span><br><span class="line"><span class="title function_ invoke__">setHeight</span>(); <span class="comment">// 将使用默认值 50</span></span><br><span class="line"><span class="title function_ invoke__">setHeight</span>(<span class="number">135</span>);</span><br><span class="line"><span class="title function_ invoke__">setHeight</span>(<span class="number">80</span>);</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><p>实例二<br>PHP 函数 - 返回值<br>如需使函数返回值，请使用 return 语句：</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">sum</span>(<span class="params"><span class="variable">$x</span>,<span class="variable">$y</span></span>) </span>&#123;</span><br><span class="line">  <span class="variable">$z</span>=<span class="variable">$x</span>+<span class="variable">$y</span>;</span><br><span class="line">  <span class="keyword">return</span> <span class="variable">$z</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;5 + 10 = &quot;</span> . <span class="title function_ invoke__">sum</span>(<span class="number">5</span>,<span class="number">10</span>) . <span class="string">&quot;&lt;br&gt;&quot;</span>;</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;7 + 13 = &quot;</span> . <span class="title function_ invoke__">sum</span>(<span class="number">7</span>,<span class="number">13</span>) . <span class="string">&quot;&lt;br&gt;&quot;</span>;</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;2 + 4 = &quot;</span> . <span class="title function_ invoke__">sum</span>(<span class="number">2</span>,<span class="number">4</span>);</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><ul><li>匿名函数<br>匿名函数就是没有名字的函数。<br>将一个匿名函数”赋值”给一个变量——此时该变量就代表该匿名函数了！</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$callfunction=function($name)&#123;</span><br><span class="line">    return $name;</span><br><span class="line">&#125;;</span><br><span class="line">echo $callfunction(&#x27;moonsec&#x27;);</span><br></pre></td></tr></table></figure><ul><li>回调函数<br>回调函数是指调用函数的时候将另一个函数作为参数传递到调用的函数中，而不是传递一个普通的变量作为参数<br>使用回调函数是为了可以将一段自己定义的功能传到函数内部使用</li></ul><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">Speak</span>(<span class="params"><span class="variable">$a</span>,<span class="variable">$b</span></span>)</span>&#123;</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">&quot;He can speak &quot;</span>.<span class="variable">$a</span>;</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">&quot;&lt;br&gt;&quot;</span>;</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">&quot;She can speak &quot;</span>.<span class="variable">$b</span>;</span><br><span class="line">    &#125;</span><br><span class="line">     </span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">Speak_Test</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="title function_ invoke__">call_user_func_array</span>(<span class="string">&#x27;Speak&#x27;</span>,<span class="keyword">array</span>(<span class="string">&#x27;Chinese&#x27;</span>,<span class="string">&#x27;English&#x27;</span>));   </span><br><span class="line">    &#125;</span><br><span class="line">     </span><br><span class="line">    <span class="title function_ invoke__">Speak_Test</span>()</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><h2 id="PHP-变量作用域"><a href="#PHP-变量作用域" class="headerlink" title="PHP 变量作用域"></a>PHP 变量作用域</h2><p>在 PHP 中，可以在脚本的任意位置对变量进行声明。<br>变量的作用域指的是变量能够被引用/使用的那部分脚本。<br>PHP 有三种不同的变量作用域：<br>local（局部）<br>global（全局）<br>static（静态）<br>Local 和 Global 作用域<br>函数之外声明的变量拥有 Global 作用域，只能在函数以外进行访问。<br>函数内部声明的变量拥有 LOCAL 作用域，只能在函数内部进行访问。<br>下面的例子测试了带有局部和全局作用域的变量：</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="variable">$x</span>=<span class="number">5</span>; <span class="comment">// 全局作用域</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">myTest</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="variable">$y</span>=<span class="number">10</span>; <span class="comment">// 局部作用域</span></span><br><span class="line">  <span class="keyword">echo</span> <span class="string">&quot;&lt;p&gt;测试函数内部的变量：&lt;/p&gt;&quot;</span>;</span><br><span class="line">  <span class="keyword">echo</span> <span class="string">&quot;变量 x 是：<span class="subst">$x</span>&quot;</span>;</span><br><span class="line">  <span class="keyword">echo</span> <span class="string">&quot;&lt;br&gt;&quot;</span>;</span><br><span class="line">  <span class="keyword">echo</span> <span class="string">&quot;变量 y 是：<span class="subst">$y</span>&quot;</span>;</span><br><span class="line">&#125; </span><br><span class="line"></span><br><span class="line"><span class="title function_ invoke__">myTest</span>();</span><br><span class="line"></span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;&lt;p&gt;测试函数之外的变量：&lt;/p&gt;&quot;</span>;</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;变量 x 是：<span class="subst">$x</span>&quot;</span>;</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;&lt;br&gt;&quot;</span>;</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;变量 y 是：<span class="subst">$y</span>&quot;</span>;</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><p>在上例中，有两个变量 $x 和 $y，以及一个函数 myTest()。$x 是全局变量，因为它是在函数之外声明的，而 $y 是局部变量，因为它是在函数内声明的。</p><p>如果我们在 myTest() 函数内部输出两个变量的值，$y 会输出在本地声明的值，但是无法 $x 的值，因为它在函数之外创建。</p><p>然后，如果在 myTest() 函数之外输出两个变量的值，那么会输出 $x 的值，但是不会输出 $y 的值，因为它是局部变量，并且在 myTest() 内部创建。</p><p>注释：您可以在不同的函数中创建名称相同的局部变量，因为局部变量只能被在其中创建它的函数识别。</p><h3 id="global-关键词"><a href="#global-关键词" class="headerlink" title="global 关键词"></a>global 关键词</h3><p>global 关键词用于在函数内访问全局变量。<br>要做到这一点，请在（函数内部）变量前面使用 global 关键词：<br>实例</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="variable">$x</span>=<span class="number">5</span>;</span><br><span class="line"><span class="variable">$y</span>=<span class="number">10</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">myTest</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">global</span> <span class="variable">$x</span>,<span class="variable">$y</span>;</span><br><span class="line">  <span class="variable">$y</span>=<span class="variable">$x</span>+<span class="variable">$y</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_ invoke__">myTest</span>();</span><br><span class="line"><span class="keyword">echo</span> <span class="variable">$y</span>; <span class="comment">// 输出 15</span></span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><p>PHP 同时在名为 $GLOBALS[index] 的数组中存储了所有的全局变量。下标存有变量名。这个数组在函数内也可以访问，并能够用于直接更新全局变量。<br>上面的例子可以这样重写：</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="variable">$x</span>=<span class="number">5</span>;</span><br><span class="line"><span class="variable">$y</span>=<span class="number">10</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">myTest</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="variable">$GLOBALS</span>[<span class="string">&#x27;y&#x27;</span>]=<span class="variable">$GLOBALS</span>[<span class="string">&#x27;x&#x27;</span>]+<span class="variable">$GLOBALS</span>[<span class="string">&#x27;y&#x27;</span>];</span><br><span class="line">&#125; </span><br><span class="line"></span><br><span class="line"><span class="title function_ invoke__">myTest</span>();</span><br><span class="line"><span class="keyword">echo</span> <span class="variable">$y</span>; <span class="comment">// 输出 15</span></span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><h3 id="static-关键词"><a href="#static-关键词" class="headerlink" title="static 关键词"></a>static 关键词</h3><p>通常，当函数完成/执行后，会删除所有变量。不过，有时需要不删除某个局部变量在您首次声明变量时使用 static 关键词：<br>实例</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">myTest</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">static</span> <span class="variable">$x</span>=<span class="number">0</span>;</span><br><span class="line">  <span class="keyword">echo</span> <span class="variable">$x</span>;</span><br><span class="line">  <span class="variable">$x</span>++;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_ invoke__">myTest</span>();</span><br><span class="line"><span class="title function_ invoke__">myTest</span>();</span><br><span class="line"><span class="title function_ invoke__">myTest</span>();</span><br><span class="line"></span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><p>然后，每当函数被调用时，这个变量所存储的信息都是函数最后一次被调用时所包含的信息。///<br>注释：该变量仍然是函数的局部变量。</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;PHP基础&quot;&gt;&lt;a href=&quot;#PHP基础&quot; class=&quot;headerlink&quot; title=&quot;PHP基础&quot;&gt;&lt;/a&gt;PHP基础&lt;/h1&gt;&lt;h2 id=&quot;简介&quot;&gt;&lt;a href=&quot;#简介&quot; class=&quot;headerlink&quot; title=&quot;简介&quot;&gt;&lt;/a&gt;简</summary>
      
    
    
    
    <category term="前端篇" scheme="http://bkystop.github.io/categories/%E5%89%8D%E7%AB%AF%E7%AF%87/"/>
    
    
    <category term="PHP" scheme="http://bkystop.github.io/tags/PHP/"/>
    
  </entry>
  
  <entry>
    <title>JavaScript基础</title>
    <link href="http://bkystop.github.io/2022/05/30/JavaScript%E5%9F%BA%E7%A1%80/"/>
    <id>http://bkystop.github.io/2022/05/30/JavaScript%E5%9F%BA%E7%A1%80/</id>
    <published>2022-05-30T13:47:14.000Z</published>
    <updated>2023-04-09T09:08:36.551Z</updated>
    
    <content type="html"><![CDATA[<h1 id="javascript基础"><a href="#javascript基础" class="headerlink" title="javascript基础"></a>javascript基础</h1><p>JavaScript是目前web开发中不可缺少的脚本语言，js不需要编译即可运行，运行在客户端，需要通过浏览器来解析执行JavaScript代码。诞生于1995年，当时的主要目的是验证表单的数据是否合法。<br>javaScript 被用来改进设计、验证表单、检测浏览器、创建cookies，等等。JavaScript 是因特网上最流行的脚本语言，并且可在所有主要的浏览器中运行，比如： Internet Explorer、 Maxthon、Mozilla、Firefox、Netscape、Chrome和 Opera等。</p><h2 id="使用方法"><a href="#使用方法" class="headerlink" title="使用方法"></a>使用方法</h2><ul><li>内嵌式<br>理论上js可以写在任何第一个地方 但是一般写在head标签里或者 body下</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;js/javascript&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="title function_">alert</span>(<span class="string">&quot;内嵌式&quot;</span>);</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"><span class="title function_">alert</span>(<span class="string">&quot;内嵌式&quot;</span>);</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li>外链式<br>首先新建一个文件类型为.js的文件，然后在该文件中写js语句，通过script标签对引入到html页面中。</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;js文件路径地址&quot;</span>&gt;</span>这里不能写js语句<span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><p>1.3.行内式<br>直接书写在标签身上，是一个简写的事件，所以又称之为事件属性。onclick单击事件</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;input type=&quot;button&quot; value=&quot;点我呀!&quot; onclick=&quot;alert(&#x27;点击显示弹窗&#x27;);&quot;&gt;</span><br><span class="line">&lt;button onclick=&quot;alert(&#x27;点击&#x27;);&quot;&gt;点我呀!&lt;/button&gt;</span><br></pre></td></tr></table></figure><h2 id="语句"><a href="#语句" class="headerlink" title="语句"></a>语句</h2><p>在编程语言中，这些编程指令被称为语句。JavaScript 程序就是一系列的编程语句。在 HTML 中，JavaScript 程序由 web 浏览器执行。<br>JavaScript 语句构成：</p><ul><li>值</li><li>运算符</li><li>表达式</li><li>关键词</li><li>注释。<br>单行注释：        //    注释语句        快捷键ctrl+/<br>多行注释：        /* 注释语句 */    快捷键ctrl+shift+/<br>注意：多行注释相互不能嵌套使用，只能在多行注释里面使用单行注释！</li></ul><p><em><strong>JavaScript语句用分号<code>;</code>分隔</strong></em></p><h2 id="变量"><a href="#变量" class="headerlink" title="变量"></a>变量</h2><ul><li><p>变量是用于存储信息的”容器”<br><strong>javascript中单双引号没区别</strong><br>var a=’moonsec’;</p></li><li><p>JavaScript 保留关键字<br>Javascript 的保留关键字不可以用作变量、标签或者函数名。有些保留关键字是作为 Javascript 以后扩展使用。</p><img src="/2022/05/30/JavaScript%E5%9F%BA%E7%A1%80/0f7c3180ec6f41cea97b56a36a16ac85.png" class title="在这里插入图片描述"></li></ul><h3 id="JavaScript-作用域"><a href="#JavaScript-作用域" class="headerlink" title="JavaScript 作用域"></a>JavaScript 作用域</h3><h4 id="局部变量"><a href="#局部变量" class="headerlink" title="局部变量"></a>局部变量</h4><ul><li>局部作用域 变量在函数内声明，变量为局部作用域。</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">myFunction</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">var</span> carName = <span class="string">&quot;Volvo&quot;</span>;</span><br><span class="line">    <span class="comment">// 函数内可调用 carName 变量</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="全局变量"><a href="#全局变量" class="headerlink" title="全局变量"></a>全局变量</h3><ul><li>变量在函数外定义，即为全局变量。<br>全局变量有<strong>全局作用域</strong>: 网页中所有脚本和函数均可使用。 </li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> carName = <span class="string">&quot; Volvo&quot;</span>;</span><br><span class="line"><span class="comment">// 此处可调用 carName 变量</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">myFunction</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">// 函数内可调用 carName 变量</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="数据类型"><a href="#数据类型" class="headerlink" title="数据类型"></a>数据类型</h3><p>数值型：number（凡是数字都是数值型，不区分整数和小数）<br>字符串：string（凡是引号包裹起来的内容全部都是字符串）<br>布尔：boolean（true、false）<br>对象类型：object（特殊取值null）<br>未定义型：undefined<br>对象类型 数组 字典</p><ul><li>判断类型</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="string">&quot;iamstring.&quot;</span>;</span><br><span class="line"><span class="keyword">var</span> b = <span class="number">222</span>;</span><br><span class="line"><span class="keyword">var</span> c= [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>];</span><br><span class="line"><span class="keyword">var</span> d = <span class="keyword">new</span> <span class="title class_">Date</span>();</span><br><span class="line"><span class="keyword">var</span> e = <span class="keyword">function</span>(<span class="params"></span>)&#123;<span class="title function_">alert</span>(<span class="number">111</span>);&#125;;</span><br><span class="line"><span class="keyword">var</span> f = <span class="keyword">function</span>(<span class="params"></span>)&#123;<span class="variable language_">this</span>.<span class="property">name</span>=<span class="string">&quot;22&quot;</span>;&#125;;　</span><br><span class="line"></span><br><span class="line"><span class="title function_">alert</span>(<span class="keyword">typeof</span> a)  ------------&gt; string</span><br><span class="line"><span class="title function_">alert</span>(<span class="keyword">typeof</span> b)  ------------&gt; number</span><br><span class="line"><span class="title function_">alert</span>(<span class="keyword">typeof</span> c)  ------------&gt; object</span><br><span class="line"><span class="title function_">alert</span>(<span class="keyword">typeof</span> d)  ------------&gt; object</span><br><span class="line"><span class="title function_">alert</span>(<span class="keyword">typeof</span> e)  ------------&gt; <span class="keyword">function</span></span><br><span class="line"><span class="title function_">alert</span>(<span class="params"><span class="keyword">typeof</span> f</span>)  ------------&gt; <span class="keyword">function</span></span><br></pre></td></tr></table></figure><h3 id="数字类型（Number）"><a href="#数字类型（Number）" class="headerlink" title="数字类型（Number）"></a>数字类型（Number）</h3><p>只有一种数字类型，数字 可以是小数 ，也可以的整数</p><ul><li>以0开头 默认使用8进制来表示我的这个数字</li><li>以0x开头 默认使用16进制来表述我的这个数字</li><li>如果以-开头 默认以负数</li><li>如果带有e：以科学计数法来解析我的这个数字</li></ul><p>parseInt(..)    将某值转换成数字，不成功则NaN<br>parseFloat(..) 将某值转换成浮点数，不成功则NaN<br>特殊值：<br>NaN，非数字。可使用 isNaN(num) 来判断。<br>Infinity，无穷大。可使用 isFinite(num) 来判断。</p><h3 id="字符串型（string）"><a href="#字符串型（string）" class="headerlink" title="字符串型（string）"></a>字符串型（string）</h3><p>字符串是存储字符的变量，用来表示文本的数据类型，程序中的字符串是包含单引号/双引号的，由单引号来界定我双引号中包含的字符串 </p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">obj.<span class="property">length</span>                           长度</span><br><span class="line"> </span><br><span class="line">obj.<span class="title function_">trim</span>()                           移除空白</span><br><span class="line">obj.<span class="title function_">trimLeft</span>()</span><br><span class="line">obj.<span class="property">trimRight</span>)</span><br><span class="line">obj.<span class="title function_">charAt</span>(n)                        返回字符串中的第n个字符</span><br><span class="line">obj.<span class="title function_">concat</span>(value, ...)               拼接</span><br><span class="line">obj.<span class="title function_">indexOf</span>(substring,start)         子序列位置</span><br><span class="line">obj.<span class="title function_">lastIndexOf</span>(substring,start)     子序列位置</span><br><span class="line">obj.<span class="title function_">substring</span>(<span class="keyword">from</span>, to)              根据索引获取子序列</span><br><span class="line">obj.<span class="title function_">slice</span>(</span><br><span class="line">, end)                切片</span><br><span class="line">obj.<span class="title function_">toLowerCase</span>()                    大写</span><br><span class="line">obj.<span class="title function_">toUpperCase</span>()                    小写</span><br><span class="line">obj.<span class="title function_">split</span>(delimiter, limit)          分割</span><br><span class="line">obj.<span class="title function_">search</span>(regexp)                   从头开始匹配，返回匹配成功的第一个位置(g无效)</span><br><span class="line">obj.<span class="title function_">match</span>(regexp)                    全局搜索，如果正则中有g表示找到全部，否则只找到第一个。</span><br><span class="line">obj.<span class="title function_">replace</span>(regexp, replacement)     替换，正则中有g则替换所有，否则只替换第一个匹配项，</span><br><span class="line">                                     $数字：匹配的第n个组内容；</span><br><span class="line">                                     $&amp;：当前匹配的内容；</span><br><span class="line">                                     $<span class="string">`：位于匹配子串左侧的文本；</span></span><br><span class="line"><span class="string">                                     $&#x27;：位于匹配子串右侧的文本</span></span><br><span class="line"><span class="string">                                     $$：直接量$符号</span></span><br></pre></td></tr></table></figure><h3 id="布尔类型（boolean）"><a href="#布尔类型（boolean）" class="headerlink" title="布尔类型（boolean）"></a>布尔类型（boolean）</h3><p>一般是用在流程控制语句中，字符串和数字类型都是无穷多个，然而我们的布尔数据类型只有两个：true 和 false<br>这两个个值一般用于说明某个事物是真或者假<br>js一般用布尔类型来比较所得到的结果</p><p>布尔类型仅包含真假</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">== 比较值相等</span><br><span class="line">!= 比较值不相等</span><br><span class="line">=== 比较值和类型相等</span><br><span class="line">!=== 比较值和类型不相等</span><br><span class="line">||        或</span><br><span class="line">&amp;&amp;      且</span><br></pre></td></tr></table></figure><h3 id="null和空"><a href="#null和空" class="headerlink" title="null和空"></a>null和空</h3><ul><li><p>null（空）<br>关键字null是一个特殊的值，它表示变量为空值，用来定义空的或者是不存在的引用。<br>如果试图去引用一个没有定义的值，就会返回一个null。<br>这里注意一点：null并不等于” “ 或者0</p></li><li><p>undefined（未定义）<br>这个值表示变量不含有值，没有定义的值，或者被定义了一个不存在的属性值</p></li><li><p>！null和undefined区别：<br>null它表示一个变量被赋予一个空值，而undefined是表示变量还没有被赋值</p></li></ul><h3 id="数组"><a href="#数组" class="headerlink" title="数组"></a>数组</h3><p>1、数组内可以存放任意数据类型的数据（本质上它也是对象）<br>2、数组元素不赋值的情况下 值为undefined<br>3、如果数组打印的时候，元素不赋值””<br>4、访问数组范围之外的元素，不会出现越界的问题，undefined<br>5、定义数组大小，照样可以添加更多元素</p><ul><li><p>定义数组的方法：<br>1、var arr=[]//定义一个空数组<br>2、var arr=[10,20,{“name”:”tomy”,”age”:19},0.1,”string”,true,[“aaa”,”bbb”]]//定义的同时赋值<br>3、var arr=new Array();//定义一个空数组<br>4、var arr = new Array(10,20,{“name”:”tomy”,”age”:19},0.1,”string”,true,[“aaa”,”bbb”])//定义的同时赋值<br>5、var arr=new Array(10)//定义一个长度为10的数组</p></li><li><p>数组的操作</p></li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">obj.<span class="property">length</span>          数组的大小</span><br><span class="line">obj.<span class="title function_">push</span>(ele)       尾部追加元素</span><br><span class="line">obj.<span class="title function_">pop</span>()           尾部获取一个元素</span><br><span class="line">obj.<span class="title function_">unshift</span>(ele)    头部插入元素</span><br><span class="line">obj.<span class="title function_">shift</span>()         头部移除元素</span><br><span class="line">obj.<span class="title function_">splice</span>(start, deleteCount, value, ...)  插入、删除或替换数组的元素</span><br><span class="line">                    obj.<span class="title function_">splice</span>(n,<span class="number">0</span>,val) 指定位置插入元素</span><br><span class="line">                    obj.<span class="title function_">splice</span>(n,<span class="number">1</span>,val) 指定位置替换元素</span><br><span class="line">                    obj.<span class="title function_">splice</span>(n,<span class="number">1</span>)     指定位置删除元素</span><br><span class="line">obj.<span class="title function_">slice</span>( )        切片</span><br><span class="line">obj.<span class="title function_">reverse</span>( )      反转</span><br><span class="line">obj.<span class="title function_">join</span>(sep)       将数组元素连接起来以构建一个字符串</span><br><span class="line">obj.<span class="title function_">concat</span>(val,..)  连接数组</span><br><span class="line">obj.<span class="title function_">sort</span>( )         对数组元素进行排序</span><br></pre></td></tr></table></figure><h3 id="函数"><a href="#函数" class="headerlink" title="函数"></a>函数</h3><ul><li>JavaScript 函数通过 function 关键词进行定义，其后是函数名和括号 ()。<br>函数名可包含字母、数字、下划线和美元符号（规则与变量名相同）。<br>圆括号可包括由逗号分隔的参数：</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> x = <span class="title function_">myFunction</span>(<span class="number">7</span>, <span class="number">8</span>);        <span class="comment">// 调用函数，返回值被赋值给 x</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">myFunction</span>(<span class="params">a, b</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> a * b;                <span class="comment">// 函数返回 a 和 b 的乘积</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//普通函数：</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">func</span>(<span class="params">arg</span>)&#123;</span><br><span class="line"><span class="keyword">return</span> arg+<span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> result = <span class="title function_">func</span>(<span class="number">1</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(result);<span class="keyword">var</span> result = <span class="title function_">func</span>(<span class="number">1</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(result);</span><br><span class="line"><span class="comment">//匿名函数（没有名字的函数称为匿名函数）</span></span><br><span class="line"><span class="built_in">setInterval</span>(<span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">123</span>);</span><br><span class="line">&#125;,<span class="number">500</span>)</span><br><span class="line"><span class="comment">//自执行函数 （创建函数并且自动执行）</span></span><br><span class="line">(<span class="keyword">function</span>(<span class="params">arg</span>)&#123;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(arg);</span><br><span class="line">&#125;)(<span class="number">1</span>);</span><br></pre></td></tr></table></figure><h3 id="字典"><a href="#字典" class="headerlink" title="字典"></a>字典</h3><p>字典 是一种以键-值对形式存储数据的数据结构<br><code>var dict = &#123;&#39;k1&#39;:&quot;moonsec&quot;,&#39;k2&#39;:&#39;moon&#39;,&#39;age&#39;:18&#125;;</code><br>输出字典元素</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span>(<span class="keyword">var</span> item <span class="keyword">in</span> dict)&#123;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(dict[item]);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>获取指定元素<br>dict[‘age’] 获取key为age的元素<br>赋值<br><code>dict[&#39;age&#39;]=10</code><br>删除元素</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">delete dict[&#x27;one&#x27;];</span><br><span class="line">delete dict.age;</span><br></pre></td></tr></table></figure><h2 id="js的序列化和反序列化"><a href="#js的序列化和反序列化" class="headerlink" title="js的序列化和反序列化"></a>js的序列化和反序列化</h2><p>Json与字符串的转换<br>把对象转为字符串<br><code>JSON.stringify()</code><br>把字符串转为数组<br><code>newli = JSON.parse()</code></p><p>序列化 即js中的Object转化为字符串<br>使用toJSONString</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> last=obj.<span class="title function_">toJSONString</span>(); <span class="comment">//将JSON对象转化为JSON字符  </span></span><br></pre></td></tr></table></figure><p>使用stringify</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> last=<span class="title class_">JSON</span>.<span class="title function_">stringify</span>(obj); <span class="comment">//将JSON对象转化为JSON字符  </span></span><br></pre></td></tr></table></figure><p>反序列化   即js中JSON字符串转化为Object</p><h2 id="转义"><a href="#转义" class="headerlink" title="转义"></a>转义</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">decodeURI( )                   URl中未转义的字符</span><br><span class="line">decodeURIComponent( )   URI组件中的未转义字符</span><br><span class="line">encodeURI( )                   URI中的转义字符</span><br><span class="line">encodeURIComponent( )   转义URI组件中的字符</span><br><span class="line">escape( )                         对字符串转义</span><br><span class="line">unescape( )                     给转义字符串解码</span><br><span class="line">URIError                         由URl的编码和解码方法抛出</span><br></pre></td></tr></table></figure><h2 id="时间"><a href="#时间" class="headerlink" title="时间"></a>时间</h2><p>Date 对象</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> myDate = <span class="keyword">new</span> <span class="title class_">Date</span>();  </span><br><span class="line">myDate.<span class="title function_">getYear</span>(); <span class="comment">//获取当前年份(2位)  </span></span><br><span class="line">myDate.<span class="title function_">getFullYear</span>(); <span class="comment">//获取完整的年份(4位,1970-????)  </span></span><br><span class="line">myDate.<span class="title function_">getMonth</span>(); <span class="comment">//获取当前月份(0-11,0代表1月) 所以获取当前月份是 myDate.getMonth()+1;   </span></span><br><span class="line">myDate.<span class="title function_">getDate</span>(); <span class="comment">//获取当前日(1-31)  </span></span><br><span class="line">myDate.<span class="title function_">getDay</span>(); <span class="comment">//获取当前星期X(0-6,0代表星期天)  </span></span><br><span class="line">myDate.<span class="title function_">getTime</span>(); <span class="comment">//获取当前时间(从1970.1.1开始的毫秒数)  </span></span><br><span class="line">myDate.<span class="title function_">getHours</span>(); <span class="comment">//获取当前小时数(0-23)  </span></span><br><span class="line">myDate.<span class="title function_">getMinutes</span>(); <span class="comment">//获取当前分钟数(0-59)  </span></span><br><span class="line">myDate.<span class="title function_">getSeconds</span>(); <span class="comment">//获取当前秒数(0-59)  </span></span><br><span class="line">myDate.<span class="title function_">getMilliseconds</span>(); <span class="comment">//获取当前毫秒数(0-999)  </span></span><br><span class="line">myDate.<span class="title function_">toLocaleDateString</span>(); <span class="comment">//获取当前日期  </span></span><br><span class="line"><span class="keyword">var</span> mytime = myDate.<span class="title function_">toLocaleTimeString</span>(); <span class="comment">//获取当前时间  </span></span><br><span class="line">myDate.<span class="title function_">toLocaleString</span>( ); <span class="comment">//获取日期与时间  </span></span><br><span class="line">加一天 </span><br><span class="line"><span class="keyword">var</span> dateTime = <span class="keyword">new</span> <span class="title class_">Date</span>();  </span><br><span class="line">dateTime=dateTime.<span class="title function_">setDate</span>(dateTime.<span class="title function_">getDate</span>()+<span class="number">1</span>);</span><br><span class="line">dateTime=<span class="keyword">new</span> <span class="title class_">Date</span>(dateTime);</span><br><span class="line">dateTime=dateTime.<span class="title function_">setDate</span>(dateTime.<span class="title function_">getDate</span>()+<span class="number">1</span>);</span><br></pre></td></tr></table></figure><h2 id="面向对象"><a href="#面向对象" class="headerlink" title="面向对象"></a>面向对象</h2><p>JavaScript是一种基于原型的语言，它没类的声明语句，比如C+ +或Java中用的。这有时会对习惯使用有类申明语句语言的程序员产生困扰。相反，JavaScript可用方法作类。定义一个类跟定义一个函数一样简单。在下面的例子中，我们定义了一个新类Person。</p><ul><li>第一种方法</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">Person</span>(<span class="params">name</span>) &#123;</span><br><span class="line">     <span class="comment">//构造函数里面的方法和属性</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">_name</span> = name;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">getName</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">         <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">_name</span>);</span><br><span class="line">     &#125;;</span><br><span class="line">     <span class="variable language_">this</span>.<span class="property">setName</span> = <span class="keyword">function</span> (<span class="params">name</span>) &#123;</span><br><span class="line">         <span class="variable language_">this</span>.<span class="property">_name</span> = name;</span><br><span class="line">     &#125;;</span><br><span class="line"> &#125;</span><br><span class="line"> </span><br><span class="line"> <span class="keyword">var</span> p = <span class="keyword">new</span> <span class="title class_">Person</span>(<span class="string">&quot;张三&quot;</span>);</span><br><span class="line"> p.<span class="title function_">getName</span>();  <span class="comment">// 张三</span></span><br><span class="line"> p.<span class="title function_">setName</span>(<span class="string">&quot;李四&quot;</span>);</span><br><span class="line"> p.<span class="title function_">getName</span>();  <span class="comment">// 李四</span></span><br></pre></td></tr></table></figure><p>对于上述代码需要注意：<br>Person充当的构造函数<br>this代指对象<br>创建对象时需要使用 new</p><ul><li>第二方法</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 定义类class Person &#123;</span></span><br><span class="line">     <span class="comment">//类的构造函数，实例化的时候执行，new的时候执行</span></span><br><span class="line">     <span class="title function_">constructor</span>(<span class="params">name</span>) &#123;</span><br><span class="line">         <span class="variable language_">this</span>.<span class="property">_name</span> = name;</span><br><span class="line">     &#125;</span><br><span class="line">     <span class="title function_">getName</span>(<span class="params"></span>) &#123;</span><br><span class="line">         <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">_name</span>);</span><br><span class="line">     &#125;</span><br><span class="line">     <span class="title function_">setName</span>(<span class="params">name</span>) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">_name</span> = name</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"> <span class="keyword">let</span> p = <span class="keyword">new</span> <span class="title class_">Preson</span>(<span class="string">&#x27;张三&#x27;</span>)</span><br><span class="line"> p.<span class="title function_">getName</span>();  <span class="comment">// 张三</span></span><br><span class="line"> p.<span class="title function_">setName</span>(<span class="string">&#x27;李四&#x27;</span>);</span><br><span class="line"> p.<span class="title function_">getName</span>();  <span class="comment">// 李四</span></span><br></pre></td></tr></table></figure><h2 id="原型"><a href="#原型" class="headerlink" title="原型"></a>原型</h2><p>我们所创建的每一个函数，解析器都会向函数中添加一个属性prototype<br>这个属性对应着一个对象，这个对象就是我们所谓的原型对象<br>如果函数作为普通函数调用时 prototype没有任何作用<br>当函数以构造函数调用时，它所创建的对象中都会有一个隐含的的属性<br>指向该构造函数的原型 我们可以通过__proto__来访问该属性<br>我们可以将对象中公有的内容，统一设置到原型对象中</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">Persion</span>(<span class="params">username,age</span>)&#123;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//console.log(Persion.prototype);</span></span><br><span class="line"><span class="keyword">var</span> p = <span class="keyword">new</span> <span class="title class_">Persion</span>();</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(p.<span class="property">__proto__</span> == <span class="title class_">Persion</span>.<span class="property"><span class="keyword">prototype</span></span>);</span><br></pre></td></tr></table></figure><p>定义原型变量和原型变量</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">function Persion(username,age)&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">//console.log(Persion.prototype);</span><br><span class="line">Persion.prototype.a = &#x27;女&#x27;;</span><br><span class="line">Persion.prototype.Sayname=function()&#123;</span><br><span class="line">return Persion.name;</span><br><span class="line">&#125;</span><br><span class="line">var p1 = new Persion(&#x27;moonsec&#x27;);</span><br><span class="line">var p2 = new Persion();</span><br><span class="line">alert(p1.Sayname());</span><br></pre></td></tr></table></figure><h2 id="运算符"><a href="#运算符" class="headerlink" title="运算符"></a>运算符</h2><p>用于执行程序代码运算，会针对一个以上操作数来进行</p><ul><li>算术运算符</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">+   -   *   /   %  ++  --</span><br></pre></td></tr></table></figure><p>字符串拼接使用“+”</p><ul><li>比较运算符</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;</span><br><span class="line">&gt;</span><br><span class="line">==</span><br><span class="line">！=</span><br><span class="line">&lt;=</span><br><span class="line">&gt;=</span><br><span class="line">=== 全等于：将数值以及数据类型一并比较</span><br><span class="line">!== 不全等于：将数值以及数据类型一并比较</span><br></pre></td></tr></table></figure><ul><li>赋值运算符</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">=</span><br><span class="line">+= </span><br><span class="line"></span><br><span class="line">-=</span><br><span class="line">*=</span><br><span class="line">/=</span><br><span class="line">%=</span><br><span class="line">a=a+2;==&gt;a+=2</span><br><span class="line">a=a-2;==&gt;a-=2</span><br><span class="line">a=a*2;==&gt;a*=2</span><br><span class="line">a=a/2;==&gt;a/=2</span><br><span class="line">a=a%2;==&gt;a%=2</span><br></pre></td></tr></table></figure><ul><li>逻辑运算符</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&amp;&amp;  全真为真</span><br><span class="line">||  一个为真就是真</span><br><span class="line">！  取反</span><br></pre></td></tr></table></figure><ul><li>三元运算符（三目运算符）</li><li>表达式1?表达式2:表达式3<br>当我的表达式1成立时  执行表达式2  否则执行表达式3<br>var max = 2&gt;1?’&gt;’:’&lt;’;<br>console.log(max);</li></ul><h2 id="流程控制语句"><a href="#流程控制语句" class="headerlink" title="流程控制语句"></a>流程控制语句</h2><h3 id="条件语句"><a href="#条件语句" class="headerlink" title="条件语句"></a>条件语句</h3><p>+if语句</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">if(条件)&#123;</span><br><span class="line">函数体</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>if else语句</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">if(条件)&#123;</span><br><span class="line">函数体1</span><br><span class="line">&#125;else&#123;</span><br><span class="line">函数体2</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>if…..else if……else语句</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">if(条件1)&#123;</span><br><span class="line"></span><br><span class="line">&#125;else if(条件2)&#123;</span><br><span class="line"></span><br><span class="line">&#125;else if(条件n)&#123;</span><br><span class="line"></span><br><span class="line">&#125;else&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>switch语句:多分支语句</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">switch(表达式) &#123;</span><br><span class="line">     case n:</span><br><span class="line">        代码块</span><br><span class="line">        break;</span><br><span class="line">     case n:</span><br><span class="line">        代码块</span><br><span class="line">        break;</span><br><span class="line">     default:</span><br><span class="line">        默认代码块</span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">switch (new Date().getDay()) &#123;</span><br><span class="line">    case 6:</span><br><span class="line">        text = &quot;今天是周六&quot;;</span><br><span class="line">        break; </span><br><span class="line">    case 0:</span><br><span class="line">        text = &quot;今天是周日&quot;;</span><br><span class="line">        break; </span><br><span class="line">    default: </span><br><span class="line">        text = &quot;期待周末~&quot;;</span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure><h3 id="循环结构："><a href="#循环结构：" class="headerlink" title="循环结构："></a>循环结构：</h3><ul><li>while循环：先判断条件 当条件成立 再执行</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">while(循环成立条件)&#123;</span><br><span class="line">....</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>do…while循环：不论条件成不成立 先执行一遍 再判断</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">do&#123;</span><br><span class="line">.....</span><br><span class="line">&#125;while(循环成立条件)</span><br></pre></td></tr></table></figure><ul><li>for循环: 多次遍历代码块</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">for (语句 1; 语句 2; 语句 3) &#123;</span><br><span class="line">     要执行的代码块</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">continue：</span><br><span class="line">跳过当前循环，直接进入循环的下一个步骤</span><br><span class="line">break:</span><br><span class="line">结束循环</span><br></pre></td></tr></table></figure><ul><li>语句 1 在循环开始之前设置了一个变量（var i = 0）。<br>语句 2 定义运行循环的条件（i 必须小于 5）。<br>语句 3 会在代码块每次执行之后对值进行递增（i++）。</li></ul><h2 id="JS操作DOM"><a href="#JS操作DOM" class="headerlink" title="JS操作DOM"></a>JS操作DOM</h2><ul><li>DOM（document object model）文档对象模型，是针对HTML和XML的一个API（应用程序接口）。DOM给我们描述了一个具有层次化特点的节点树，允许开发人员增删改查页面的某些部分。</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">JavaScript 能够改变页面中的所有 HTML 元素</span><br><span class="line">JavaScript 能够改变页面中的所有 HTML 属性</span><br><span class="line">JavaScript 能够改变页面中的所有 CSS 样式</span><br><span class="line">JavaScript 能够对页面中的所有事件做出反应</span><br></pre></td></tr></table></figure><h3 id="DOM查找元素"><a href="#DOM查找元素" class="headerlink" title="DOM查找元素"></a>DOM查找元素</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">document获取节点的基本方法</span><br><span class="line">document.getElementById(&#x27;id&#x27;);  //通过id来获取元素,返回指定的唯一元素。</span><br><span class="line">document.getElementsByName(&quot;name&quot;); //通过name来获取元素，返回name=&#x27;name&#x27;的集合。</span><br><span class="line">.document.getElementsByClassName(&quot;classname&quot;)  //用classname来获取元素，返回的是一个class=&quot;classname&quot;的集合(不兼容IE8及以下)。</span><br><span class="line">document.getElementsByTagName(&#x27;div&#x27;); //用元素的标签获取元素，返回所有标签=“div”的集合。</span><br></pre></td></tr></table></figure><ul><li>直接查找<br><code>var obj = document.getElementById(&#39;id&#39;);</code></li><li>间接查找</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">文件内容操作</span><br><span class="line">innerText 仅文本</span><br><span class="line">innerHTML 全内容</span><br></pre></td></tr></table></figure><p>value</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">input value 获取当前的值</span><br><span class="line">select 获取选中的value的值 document.getElementById(&#x27;s1&#x27;).selectedIndex=1</span><br><span class="line">Textarea 获取value的值</span><br></pre></td></tr></table></figure><h3 id="操作"><a href="#操作" class="headerlink" title="操作"></a>操作</h3><ul><li>样式操作</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">className 列出样式 字符串</span><br><span class="line">classList 列出样式 返回数组</span><br><span class="line">classList.add 增加样式</span><br><span class="line">classList.remove 删除样式</span><br></pre></td></tr></table></figure><div class="c1 c2" styple="font-size:16px"></div><p>obj.style.fontSize=’16px’;</p><ul><li>属性操作</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">获取属性</span><br><span class="line">getAttribute()</span><br><span class="line">增加设置一个属性</span><br><span class="line">添加属性</span><br><span class="line">setAttribute(&#x27;xxx&#x27;,&#x27;alexe&#x27;)</span><br><span class="line">删除属性</span><br><span class="line">removeAttribute(value)</span><br></pre></td></tr></table></figure><h3 id="创建标签并添加到html中"><a href="#创建标签并添加到html中" class="headerlink" title="创建标签并添加到html中"></a>创建标签并添加到html中</h3><ul><li>第一种方式 字符串方式</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">insertAdjacentHTML</span>()</span><br><span class="line"></span><br><span class="line">&lt;input type=<span class="string">&quot;button&quot;</span> value=<span class="string">&quot;+&quot;</span> onclick=<span class="string">&quot;add();&quot;</span>/&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;div1&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">p</span>&gt;</span><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span>/&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">function</span> <span class="title function_">add</span>(<span class="params"></span>)&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">var</span> tag=<span class="string">&quot;&lt;p&gt;&lt;input type=&#x27;text&#x27;&gt;&lt;/p&gt;&quot;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;div1&#x27;</span>).<span class="title function_">insertAdjacentHTML</span>(<span class="string">&#x27;beforeEnd&#x27;</span>,tag);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">&#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span></span><br></pre></td></tr></table></figure><p>有四种值可用：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">beforeBegin: 插入到标签开始前</span><br><span class="line">afterBegin:插入到标签开始标记之后</span><br><span class="line">beforeEnd:插入到标签结束标记前</span><br><span class="line">afterEnd:插入到标签结束标记后</span><br></pre></td></tr></table></figure><ul><li>第二种方式 对象的方式<br>document.createElement</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">&lt;input type=<span class="string">&quot;button&quot;</span> value=<span class="string">&quot;+&quot;</span> onclick=<span class="string">&quot;add2();&quot;</span>/&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;div1&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">p</span>&gt;</span><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span>/&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">function</span> <span class="title function_">add</span>(<span class="params"></span>)&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">var</span> tag=<span class="string">&quot;&lt;p&gt;&lt;input type=&#x27;text&#x27;&gt;&lt;/p&gt;&quot;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;div1&#x27;</span>).<span class="title function_">insertAdjacentHTML</span>(<span class="string">&#x27;beforeEnd&#x27;</span>,tag);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">&#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">function</span> <span class="title function_">add2</span>(<span class="params"></span>)&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">var</span> tag =<span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&#x27;input&#x27;</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">tag.<span class="title function_">setAttribute</span>(<span class="string">&#x27;type&#x27;</span>,<span class="string">&#x27;text&#x27;</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">tag.<span class="property">style</span>.<span class="property">color</span>=<span class="string">&#x27;red&#x27;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">var</span> p =<span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&#x27;p&#x27;</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">p.<span class="title function_">appendChild</span>(tag)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;div1&#x27;</span>).<span class="title function_">appendChild</span>(p);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">&#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure><p>appendChild 在节点后面增加一个子节点</p><h3 id="提交表单"><a href="#提交表单" class="headerlink" title="提交表单"></a>提交表单</h3><p>任何标签都可以通过dom提交</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">getElementById</span>(<span class="string">&#x27;id&#x27;</span>).<span class="title function_">submit</span>()</span><br><span class="line">&lt;form id=<span class="string">&#x27;f1&#x27;</span> action=<span class="string">&quot;https://www.moonsec.com/&quot;</span>&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">value</span>=<span class="string">&quot;提交&quot;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">value</span>=<span class="string">&quot;botton&quot;</span> <span class="attr">onclick</span>=<span class="string">&quot;Sub();&quot;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">a</span> <span class="attr">onclick</span>=<span class="string">&quot;Sub();&quot;</span>&gt;</span>提交<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span></span><br><span class="line">&lt;/form&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">function</span> <span class="title function_">Sub</span>(<span class="params"></span>)&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;f1&#x27;</span>).<span class="title function_">submit</span>();</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">&#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure><p>其他<br>console.log 终端输出<br>alert 弹出框<br>confirm 确认框 标题 true false</p><p>url和刷新<br>location.href  获取url<br>location.href =’url’ 重定向<br>location.reload() 重新加载</p><p>定时器</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">setInterval</span>()</span><br><span class="line"><span class="built_in">clearInterval</span>()</span><br><span class="line"></span><br><span class="line">&lt;input id=<span class="string">&quot;i1&quot;</span> type=<span class="string">&quot;text&quot;</span> /&gt;</span><br><span class="line">&lt;input type=&quot;button&quot; value=&quot;停止&quot; onclick=&quot;stop();&quot;&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">function setTime()&#123;</span><br><span class="line">var tag = new Date();</span><br><span class="line">document.getElementById(&#x27;i1&#x27;).value=tag;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">var obj=setInterval(&#x27;setTime()&#x27;,&#x27;500&#x27;);</span><br><span class="line"></span><br><span class="line">function stop()&#123;</span><br><span class="line">clearInterval(obj);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>只执行一次</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">setTimeout</span>()</span><br><span class="line"><span class="built_in">clearTimeout</span>()</span><br><span class="line">&lt;div id=<span class="string">&quot;status&quot;</span>&gt;&lt;/div&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">value</span>=<span class="string">&quot;删除&quot;</span> <span class="attr">onclick</span>=<span class="string">&quot;Delele();&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">function</span> <span class="title function_">Delele</span>(<span class="params"></span>)&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;status&#x27;</span>).<span class="property">innerText</span>=<span class="string">&quot;已删除&quot;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="built_in">setTimeout</span>(<span class="keyword">function</span>(<span class="params"></span>)&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;status&#x27;</span>).<span class="property">innerText</span>=<span class="string">&quot;&quot;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">&#125;,<span class="number">5000</span>)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">&#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure><p> 事件<br>绑定事件两种方式<br>a.直接标签绑定 直接标签绑定 onclick=’’<br>先获取dom对象，然后进行绑定<br>document.getElementById(‘xxx’).onclick()</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;javascript基础&quot;&gt;&lt;a href=&quot;#javascript基础&quot; class=&quot;headerlink&quot; title=&quot;javascript基础&quot;&gt;&lt;/a&gt;javascript基础&lt;/h1&gt;&lt;p&gt;JavaScript是目前web开发中不可缺少的脚本语言，j</summary>
      
    
    
    
    <category term="前端篇" scheme="http://bkystop.github.io/categories/%E5%89%8D%E7%AB%AF%E7%AF%87/"/>
    
    
    <category term="JavaScript" scheme="http://bkystop.github.io/tags/JavaScript/"/>
    
  </entry>
  
  <entry>
    <title>CSS基础</title>
    <link href="http://bkystop.github.io/2022/05/07/CSS%E5%9F%BA%E7%A1%80/"/>
    <id>http://bkystop.github.io/2022/05/07/CSS%E5%9F%BA%E7%A1%80/</id>
    <published>2022-05-07T13:44:28.000Z</published>
    <updated>2023-04-09T09:05:46.791Z</updated>
    
    <content type="html"><![CDATA[<h1 id="css样式"><a href="#css样式" class="headerlink" title="css样式"></a>css样式</h1><ul><li>CSS样式</li></ul><p>层叠样式表(英文全称：Cascading Style Sheets)是一种用来表现HTML（标准通用标记语言的一个应用）或XML（标准通用标记语言的一个子集）等文件样式的计算机语言。CSS不仅可以静态地修饰网页，还可以配合各种脚本语言动态地对网页各元素进行格式化。CSS 能够对网页中元素位置的排版进行像素级精确控制，支持几乎所有的字体字号样式，拥有对网页对象和模型样式编辑的能力。</p><h2 id="样式表类型"><a href="#样式表类型" class="headerlink" title="样式表类型"></a>样式表类型</h2><ol><li>行内样式表（内联式样式）</li></ol><p>利用style属性将样式写在HTML标签中。</p><ol start="2"><li>内部样式表：</li></ol><p>将样式代码写在页面<code>&lt;style&gt;...&lt;/style&gt;</code>标签之中</p><p><code>&lt;style&gt;...&lt;/style&gt;</code>标签结构可以位于页面<code>&lt;HTML&gt;</code>标签中的任何位置，也可以多次出现。通常是将整个<code>&lt;style&gt;...&lt;/style&gt;</code>结构写在页面的<code>&lt;head&gt;...&lt;/head&gt;</code>部分中。这种引入CSS方式的特点是每个页面的CSS代码可能具有统一性和规划性，一个页面内部便于复用和维护，但多个页面之间的CSS代码复用仍然不够。</p><ol start="3"><li>外部样式表（.css文件）：</li></ol><p>css代码写一个单独的外部文件中，这个css样式文件以“.css”为扩展名，在<code>&lt;head&gt;</code>内（不是在<code>&lt;style&gt;</code>标签内）使用<code>&lt;link&gt;</code>标签将css样式文件链接到HTML文件内，如下面代码：</p><h2 id="注释"><a href="#注释" class="headerlink" title="注释"></a>注释</h2><p>/* */ 注释内容</p><h2 id="样式选择器"><a href="#样式选择器" class="headerlink" title="样式选择器"></a>样式选择器</h2><p>元素选择器   div{属性:值}</p><p>ID选择器  #id{属性:值}</p><p>class选择器  .类名{属性:值}</p><p>子选择器</p><p>后代选择器  </p><p>属性选择器  </p><p>通配符选择器  </p><p>群组选择器</p><h2 id="背景"><a href="#背景" class="headerlink" title="背景"></a>背景</h2><p>background-color ：规定要使用的背景颜色。<br>background-position：规定背景图像的位置。<br>background-size ：规定背景图片的尺寸。<br>background-repeat ：规定如何重复背景图像。<br>background-origin ：规定背景图片的定位区域。<br>background-clip ：规定背景的绘制区域。</p><p>repea：默认。背景图像将在垂直方向和水平方向重复。<br>repeat-x：背景图像将在水平方向重复。<br>repeat-y：背景图像将在垂直方向重复。<br>no-repeat：背景图像将仅显示一次。<br>inherit：规定应该从父元素继承 background-repeat 属性的设置。</p><p>background-attachment：规定背景图像是否固定或者随着页面的其余部分滚动。<br>background-image：规定要使用的背景图像。</p><p>inherit ：规定应该从父元素继承 background 属性的设置。<br>left top<br>left center<br>left bottom<br>right top<br>right center<br>right bottom<br>center top<br>center center<br>center bottom</p><p>背景图片的滚动</p><p>背景图片是否随着内容的滚动而滚动由background-attachment设置</p><p>background-attachment:fixed; 固定，不随内容的滚动而滚动</p><p>background-attachment:scroll; 滚动，随内容的滚动而滚动</p><h2 id="边框"><a href="#边框" class="headerlink" title="边框"></a>边框</h2><p>边框颜色 border-color:#000</p><p>边框宽度 border-width:1px;</p><p>border-left 设置左边框，一般单独设置左边框样式使用<br>border-right 设置右边框，一般单独设置右边框样式使用<br>border-top 设置上边框，一般单独设置上边框样式使用<br>border-bottom 设置下边框，一般单独设置下边框样式使用,有时可将下边框样式作为css下划线效果应用。</p><p>边框样式值如下：<br>none : 　无边框。与任何指定的border-width值无关<br>hidden : 　隐藏边框。IE不支持<br>dotted : 　在MAC平台上IE4+与WINDOWS和UNIX平台上IE5.5+为点线。否则为实线（常用）<br>dashed : 　在MAC平台上IE4+与WINDOWS和UNIX平台上IE5.5+为虚线。否则为实线（常用）<br>solid : 　实线边框（常用）<br>double : 　双线边框。两条单线与其间隔的和等于指定的border-width值</p><p>上 右  下左<br>groove : 　根据border-color的值画3D凹槽<br>ridge : 　根据border-color的值画菱形边框<br>inset : 　根据border-color的值画3D凹边<br>outset : 　根据border-color的值画3D凸边</p><h2 id="文字属性"><a href="#文字属性" class="headerlink" title="文字属性"></a>文字属性</h2><p>color:red; 文字颜色 #ffeeees<br>font-size:12px; 文字大小<br>font-weight:bolds 文字粗细(bold/normal)<br>font-family:”宋体”文字字体<br>font-variant:small-caps小写字母以大写字母显示</p><h2 id="文本属性"><a href="#文本属性" class="headerlink" title="文本属性"></a>文本属性</h2><p>text-align:center; 文本对齐(right/left/center)<br>line-height:10px; 行间距(可通过它实现文本的垂直居中)<br>text-indent:20px; 首行缩进<br>text-decoration:none;<br>文本线(none/underline/overline/line-through) underline/overline/line-through; 定义文本上的下划线/上划线/中划线<br>letter-spacing: 字间距</p><h2 id="列表"><a href="#列表" class="headerlink" title="列表"></a>列表</h2><p>list-style-type：设置列表项标记的类型。<br>list-style-position ：设置在何处放置列表项标记。<br>list-style-image：使用图像来替换列表项的标记。<br>inherit：规定应该从父元素继承 list-style 属性的值</p><p>取值:disc | circle | square | decimal | decimal-leading-zero | lower-roman | upper-roman | lower-greek | lower-latin | upper-latin | armenian | georgian | lower-alpha | upper-alpha | none | inherit</p><pre><code>    disc: 点    circle: 圆圈    square: 正方形    decimal: 数字    decimal-leading-zero: 十进制数，不足两位的补齐前导0，例如: 01, 02, 03, ..., 98, 99    lower-roman: 小写罗马文字，例如: i, ii, iii, iv, v, ...    upper-roman: 大写罗马文字，例如: I, II, III, IV, V, ...    lower-greek: 小写希腊字母，例如: α(alpha), β(beta), γ(gamma), ...    lower-latin: 小写拉丁文，例如: a, b, c, ... z    upper-latin: 大写拉丁文，例如: A, B, C, ... Z    armenian: 亚美尼亚数字    georgian: 乔治亚数字，例如: an, ban, gan, ..., he, tan, in, in-an, ...    lower-alpha: 小写拉丁文，例如: a, b, c, ... z    upper-alpha: 大写拉丁文，例如: A, B, C, ... Z    none: 无(取消所有的list样式)    inherit:继承</code></pre><p>list-style-position </p><ul><li><p>nside:列表项目标记放置在文本以内，且环绕文本根据标记对齐。</p></li><li><p>outside:默认值。保持标记位于文本的左侧。列表项目标记放置在文本以外，且环绕文本不根据标记对齐。</p></li></ul><h2 id="超链接"><a href="#超链接" class="headerlink" title="超链接"></a>超链接</h2><p>a{text-decoration: none;}<br>a:link {color:#FF0000;} /* 未访问的链接 <em>/<br>a:visited {color:#00FF00;} /</em> 已访问的链接 <em>/<br>a:hover {color:#FF00FF;} /</em> 鼠标划过链接 <em>/<br>a:active {color:#0000FF;} /</em> 已选中的链接 */</p><h2 id="盒子模型"><a href="#盒子模型" class="headerlink" title="盒子模型"></a>盒子模型</h2><p>盒子模型的组成部分：外边距（margin）、边框（border）、内边距（padding）、内容（content）四个属性</p><p>自身的身高 width height </p><p>内边距 padding</p><p>盒子边框 border</p><p>与其他盒子的距离 margin 外边距</p><h3 id="Border-边框"><a href="#Border-边框" class="headerlink" title="Border 边框"></a>Border 边框</h3><p>常见的写法 border:1px solid #foo;</p><p>单独属性:<br>border-widh:<br>border-style:<br>dotted 点状虚线<br>dashed（虚线）<br>solid（实线）<br>double（双实线）<br>border-color(颜色)</p><h3 id="margin-padding"><a href="#margin-padding" class="headerlink" title="margin padding"></a>margin padding</h3><p>padding:内边距<br>值：像素/厘米等长度单位、百分比<br>padding:10px; 上下左右<br>padding:10px 10px; 上下 左右<br>padding:10px 10px 10px; 上 左右 下<br>padding:10px 10px 10px 10px; 上 右 下 左（设置4个点–&gt;顺时针方向）<br>单独属性</p><p>padding-top:<br>padding-right:<br>padding-bottom:<br>padding-left:</p><p>当设置内边距的时候会把盒子撑大，为了保持盒子原来的大小，应该高度和宽度进行减小，根据width和height减小</p><p>margin 外边距</p><p>值：与padding相同</p><p>单独属性：与padding相同</p><p>外边距合并：两个盒子同时设置了外边距，会进行一个外边距合并</p><p>margin<br>margin:10px  上下左右都会腾出10px出来<br>margin:0px auto; 居中</p><h3 id="float-脱离文档流浮动"><a href="#float-脱离文档流浮动" class="headerlink" title="float  脱离文档流浮动"></a>float  脱离文档流浮动</h3><p>float属性会引起父容器高度塌陷的问题，因此我们需要清除浮动</p><p>left  元素向左浮动。<br>right 元素向右浮动</p><p>清除浮动</p><p>clear: both;<br>left<br>right</p><h2 id="行内元素与块级元素"><a href="#行内元素与块级元素" class="headerlink" title="行内元素与块级元素"></a>行内元素与块级元素</h2><h3 id="块级元素"><a href="#块级元素" class="headerlink" title="块级元素"></a>块级元素</h3><ul><li>他会独占一行，在默认情况下，其宽度自动填满其父元素的宽度；</li><li>块级元素可以设置width、height属性；</li><li>块级元素即使设置了宽度也是独占一行；</li><li>块级元素可以设置margin、padding属性；</li></ul><p>块级元素(block element）</p><p>address 地址<br>center 举中对齐块<br>div- 常用块级容易<br>dl 定义列表<br>form 交互表单 （只能用来容纳其它块元素）<br>h标签<br>hr 水平分隔线<br>ol 无需列表<br>ul有序列表<br>p 段落<br>pre 格式化文本</p><h3 id="行内元素："><a href="#行内元素：" class="headerlink" title="行内元素："></a>行内元素：</h3><ul><li>行内元素不会独占一行，相邻的行内元素会排列在同一行里，直到行排不下，就自动换行，其宽度随内容而变化；</li><li>行内元素的width、height属性则无效；</li><li>行内元素的margin、padding属性，水平方向的padding-left、padding-rigtht、margin-left、padding-right都会产生边距效果，但是竖直方向的padding-top、padding-bottom、margin-top、margin-bottom却不产生边距效果。</li></ul><p>行内元素：</p><p>a - 锚点<br>b - 粗体(不推荐)<br>br- 换行<br>code - 计算机代码(在引用源码的时候需要)<br>em - 强调<br>i - 斜体<br>img - 图片（特殊的内联元素，同时是内联替换元素，替换元素可以设置宽高）<br>当图片和DIV在一起时，图片周围会出现margin现象，即元素不重合贴在一起，为了解决这个问题，设置img的css为{margin：0；display：block；border：0px}<br>input - 输入框<br>label - 表格标签<br>select - 项目选择<br>strong - 粗体强调<br>textarea - 多行文本输入框<br>u - 下划线<br>var - 定义变量</p><h3 id="行内元素转换"><a href="#行内元素转换" class="headerlink" title="行内元素转换"></a>行内元素转换</h3><p>display:none; 不显示<br>display:block;变成块级元素<br>display:inline; 变成行内元素<br>display:inline-block;以块级元素样式展示，以行级元素样式排列</p><h3 id="溢出"><a href="#溢出" class="headerlink" title="溢出"></a>溢出</h3><p>overflow：属性规定当内容溢出元素框时发生的事情。<br>visible：默认值。内容不会被修剪，会呈现在元素框之外。<br>hidden：内容会被修剪，并且其余内容是不可见的。<br>scroll：内容会被修剪，但是浏览器会显示滚动条以便查看其余的内容。<br>auto：如果内容被修剪，则浏览器会显示滚动条以便查看其余的内容。<br>inherit：规定应该从父元素继承 overflow 属性的值。</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;css样式&quot;&gt;&lt;a href=&quot;#css样式&quot; class=&quot;headerlink&quot; title=&quot;css样式&quot;&gt;&lt;/a&gt;css样式&lt;/h1&gt;&lt;ul&gt;
&lt;li&gt;CSS样式&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;层叠样式表(英文全称：Cascading Style Sheet</summary>
      
    
    
    
    <category term="前端篇" scheme="http://bkystop.github.io/categories/%E5%89%8D%E7%AB%AF%E7%AF%87/"/>
    
    
    <category term="CSS" scheme="http://bkystop.github.io/tags/CSS/"/>
    
  </entry>
  
  <entry>
    <title>HTML基础</title>
    <link href="http://bkystop.github.io/2022/05/07/HTML%E5%9F%BA%E7%A1%80/"/>
    <id>http://bkystop.github.io/2022/05/07/HTML%E5%9F%BA%E7%A1%80/</id>
    <published>2022-05-07T13:41:30.000Z</published>
    <updated>2023-04-09T09:08:23.637Z</updated>
    
    <content type="html"><![CDATA[<h2 id="html简介"><a href="#html简介" class="headerlink" title="html简介"></a>html简介</h2><ul><li>HTML，全称“Hyper Text Markup Language（超文本标记语言）” 。</li></ul><h2 id="html基本的标签"><a href="#html基本的标签" class="headerlink" title="html基本的标签"></a>html基本的标签</h2><h3 id="head标签"><a href="#head标签" class="headerlink" title="head标签"></a>head标签</h3><p><code>&lt;title&gt;</code> 定义网页的标题</p><p><code>&lt;meta&gt;</code> 定义网页的基本信息</p><p><code>&lt;style&gt;</code> 定义css样式</p><p> <code>&lt;link&gt;</code> 链接外部css文件或脚本文件</p><p><code>&lt;script&gt;</code> 定义脚本语言</p><p><code>&lt;base&gt;</code> 定义页面所有链接的基础定位</p><h3 id="body标签"><a href="#body标签" class="headerlink" title="body标签"></a>body标签</h3><h4 id="段落与文字"><a href="#段落与文字" class="headerlink" title="段落与文字"></a>段落与文字</h4><p><code>&lt;h1&gt;&lt;h1&gt;~&lt;h6&gt;&lt;h6&gt;</code> 标题（header）</p><p><code>&lt;p&gt;</code> 段落（paragraph）</p><p><code>&lt;br&gt;</code> 换行（break）</p><p><code>&lt;hr&gt;</code> 水平线（horizontal rule）</p><p><code>&lt;div&gt;</code> 分割 [块元素]（divsion）</p><p><code>&lt;span&gt;</code> 区域[行内元素]（span）</p><ul><li><p>块元素：<code>&lt;h1&gt;~&lt;h6&gt;,p,hr,div</code></p><p>特点：</p><ol><li>独占一行，排斥其他元素与其同一行，包块块元素与行内元素。</li><li>块元素内部可以容纳其他块元素或行元素。</li></ol></li><li><p>行内元素：<code>&lt;strong&gt;,&lt;em&gt;,&lt;span&gt;</code></p><p>特点：</p><ol><li>可以与其他行内元素同一行。</li><li>行内内部可以容纳其他行内元素，但不可以容纳块元素。</li></ol></li><li><p>标签分类：一般标签：有开始符号和结束符号（有始有终） <code>&lt;body&gt;&lt;body&gt;</code> </p></li></ul><p>​                           自闭合标签：只有开始符号没有结束符号<code>&lt;br/&gt;</code></p><h4 id="文本格式化标签"><a href="#文本格式化标签" class="headerlink" title="文本格式化标签"></a>文本格式化标签</h4><p><code>&lt;strong&gt;</code> 字体加粗</p><p><code>em</code> 斜体</p><p><code>cite</code> 引用</p><p><code>&lt;sup&gt;</code> 上标</p><p><code>&lt;sub&gt;</code> 下标</p><h4 id="列表"><a href="#列表" class="headerlink" title="列表"></a>列表</h4><h5 id="lt-ol-gt-有序列表（ordered-list）"><a href="#lt-ol-gt-有序列表（ordered-list）" class="headerlink" title="&lt;ol&gt; 有序列表（ordered list）"></a><code>&lt;ol&gt;</code> 有序列表（ordered list）</h5><p>type值属性：1   数字1，2，3</p><p>a  小写字母a，b，c</p><p>A  大写字母A,   B,  C</p><p>i   小写罗马数字</p><p>I   大写罗马数字</p><h5 id="lt-ul-gt-无序列表（unordered-list）"><a href="#lt-ul-gt-无序列表（unordered-list）" class="headerlink" title="&lt;ul&gt; 无序列表（unordered list）"></a><code>&lt;ul&gt;</code> 无序列表（unordered list）</h5><p>type值属性：disc   默认值，实心原点</p><p>circle   空心圆</p><p>square   实心正方形</p><h5 id="lt-dl-gt-定义列表（definition-list）"><a href="#lt-dl-gt-定义列表（definition-list）" class="headerlink" title="&lt;dl&gt; 定义列表（definition list）:"></a><code>&lt;dl&gt;</code> 定义列表（definition list）:</h5><p><code>&lt;dl&gt;</code> 定义列表（definition list) :定义列表的开始和结束</p><p><code>&lt;dt&gt;</code> 定义名词（definition term) ：后面添加要解释的名词</p><p><code>&lt;dd&gt;</code> 定义描述  (definition description) ：后面添加该名词的具体描述</p><p><strong>列表内放 <code>&lt;li&gt;</code> 标签：列表项（list ltem)</strong></p><h4 id="表格"><a href="#表格" class="headerlink" title="表格"></a>表格</h4><h5 id="表格基本标签"><a href="#表格基本标签" class="headerlink" title="表格基本标签"></a>表格基本标签</h5><p><code>&lt;table&gt;</code> 表格</p><p><code>&lt;tr&gt;</code> 表格行（table row）</p><p><code>&lt;td&gt;</code> 表格单元格（table data）</p><h5 id="表格基本结构"><a href="#表格基本结构" class="headerlink" title="表格基本结构"></a>表格基本结构</h5><p><code>&lt;thead&gt;</code> 表头</p><p><code>&lt;tbody&gt;</code> 表身</p><p><code>&lt;tfoot&gt;</code> 表教</p><p><code>&lt;th&gt;</code> 表头单元格 （table header）</p><ul><li>在表格钟，合并行，合并列也是我们常用的方法。</li></ul><h4 id="图像标签"><a href="#图像标签" class="headerlink" title="图像标签"></a>图像标签</h4><h5 id="img-常用属性"><a href="#img-常用属性" class="headerlink" title="img 常用属性"></a>img 常用属性</h5><p><code>&lt;src&gt;</code> 图像的文件地址</p><p><code>&lt;alt&gt;</code> 图片显示不出来时的提示文字</p><p><code>&lt;title&gt;</code> 鼠标移动到图片的提示文字</p><ul><li>相对路径： 引用的文件位置是相对当前文件的位置而言 </li><li>绝对路径： 指的是文件的完整路径</li><li>图片格式：<ol><li>jpg ： 可以较好的处理大面积色调的图像</li><li>png： 图片体积小，可以无损压缩</li><li>gitf：图像效果较差，可以制作动画</li></ol></li></ul><h4 id="链接"><a href="#链接" class="headerlink" title="链接"></a>链接</h4><h5 id="超链接使用a标签"><a href="#超链接使用a标签" class="headerlink" title="超链接使用a标签"></a>超链接使用a标签</h5><p><code>&lt;a href=&quot;链接地址&quot; target=&quot;目标窗口的打开方式&quot;&gt;</code> </p><ul><li>target属性值：<ol><li>_self：默认方式，当前窗口打开链接。</li><li>_blank: 在一个新窗口中打开链接 </li><li>_top: 在顶层框架中打开链接 </li><li>_parent: 在当前框架的上一层里打开链接 </li></ol></li></ul><h4 id="表单"><a href="#表单" class="headerlink" title="表单"></a>表单</h4><h5 id="input-表单"><a href="#input-表单" class="headerlink" title="input 表单"></a>input 表单</h5><p>type属性值：</p><ol><li>text：单行文本框<ol><li>password：密码文本框<ol><li>button：按钮</li><li>reset： 重置按钮</li><li>image： 图像形式的提交按钮</li><li>radio： 单选按钮</li><li>checkbok： 复选按钮、</li><li>gidden：隐藏字段</li><li>files： 文件上传</li><li><code>&lt;textarea rows=&quot;行数&quot; cols=&quot;列数&quot;&gt;多行文本框内容&lt;/textarea&gt; </code> :多行文本框</li></ol></li></ol></li></ol><h4 id="音频"><a href="#音频" class="headerlink" title="音频"></a>音频</h4><h5 id="插入音频："><a href="#插入音频：" class="headerlink" title="插入音频："></a>插入音频：</h5><p><code>&lt;embed src=&quot;多媒体文件地址&quot; width=&quot;播放界面的宽度&quot; height=&quot;播放界面的高度&quot;&gt;&lt;/embed&gt;</code> </p><h5 id="插入背景音乐"><a href="#插入背景音乐" class="headerlink" title="插入背景音乐"></a>插入背景音乐</h5><p><code>&lt;bgsound src=&quot;背景音乐的地址&quot;/&gt; </code> </p><p><code>loop=&quot;2&quot;</code>表示重复2次，<code>loop=&quot;infinite&quot;</code>或者<code>loop=&quot;-1&quot;</code>表示无限次循环播放</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;html简介&quot;&gt;&lt;a href=&quot;#html简介&quot; class=&quot;headerlink&quot; title=&quot;html简介&quot;&gt;&lt;/a&gt;html简介&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;HTML，全称“Hyper Text Markup Language（超文本标记语言）” 。&lt;/</summary>
      
    
    
    
    <category term="前端篇" scheme="http://bkystop.github.io/categories/%E5%89%8D%E7%AB%AF%E7%AF%87/"/>
    
    
    <category term="HTML" scheme="http://bkystop.github.io/tags/HTML/"/>
    
  </entry>
  
  <entry>
    <title>C语言</title>
    <link href="http://bkystop.github.io/2022/04/07/C%E8%AF%AD%E8%A8%80/"/>
    <id>http://bkystop.github.io/2022/04/07/C%E8%AF%AD%E8%A8%80/</id>
    <published>2022-04-07T12:56:40.000Z</published>
    <updated>2023-04-09T09:06:08.138Z</updated>
    
    <content type="html"><![CDATA[<h1 id="浅谈C语言入门"><a href="#浅谈C语言入门" class="headerlink" title="浅谈C语言入门"></a>浅谈C语言入门</h1><h2 id="计算机和编程语言"><a href="#计算机和编程语言" class="headerlink" title="计算机和编程语言"></a>计算机和编程语言</h2><h3 id="计算机"><a href="#计算机" class="headerlink" title="计算机"></a>计算机</h3><p> 现在我们见到的计算机（电脑），都是由硬件部分和软件部分组成</p><ul><li>硬件部分：运算器、控制器、存储器、输入设备和输出设备。</li><li>软件部分：分为系统软件和应用软件。<br>如果把计算机比喻为一个人的话，那么硬件就表示人的身躯，而软件则表示人的思想、灵魂。二者相互依存，缺一不可，共同构成一个完整的计算机系统。</li></ul><h2 id="编程语言"><a href="#编程语言" class="headerlink" title="编程语言"></a>编程语言</h2><ul><li>程序就是用特殊的编程语言告诉计算机如何做一件事，计算机能懂的只有二进制，如果我们需要让计算机去做一件事，就需要先找出计算的步骤，计算的步骤即算法，而计算机做的事情就是计算。</li><li>首先，把表示计算步骤的程序和计算中需要的原始数据，在控制器输入命令的控制下，通过输入设备送入计算机的存储器存储。其次当计算开始时，在取指令作用下把程序指令送入控制器。控制器对指令进行译码，在经过运算器计算并把结果存放在存储器内。在控制器的取数和输出命令作用下，最后通过输出设备输出计算结果。</li></ul><h2 id="为什么要学习算法"><a href="#为什么要学习算法" class="headerlink" title="为什么要学习算法"></a>为什么要学习算法</h2><p>人在计算的时候会有各种各样的方式，例如明朝时万户上天，亚历山大斩断绳索之类，但对于计算机来说，他们的智慧并不高，正如其名只是具有极高的计算能力，它们更喜欢枚举，枚举的缺陷就是在大量数据面前极其缓慢，所以为了使其计算的更快，所以我们需要设计算法。</p><h3 id="解释与编译"><a href="#解释与编译" class="headerlink" title="解释与编译"></a>解释与编译</h3><p>解释：借助某个程序，由这个程序读懂你的程序，按照你所设定的步骤执行。</p><ul><li>这个程序会一条一条的执行你的源代码</li></ul><p>编译：借助某个程序，由这个程序把你的程序翻译成计算机能懂的语言（机器语言），由计算机执行。</p><ul><li>这个程序相当于一个翻译，会一次将你的所有源代码翻译成机器代码，然后再去执行这个机器代码。</li></ul><h3 id="如何看待解释语言与编译语言"><a href="#如何看待解释语言与编译语言" class="headerlink" title="如何看待解释语言与编译语言"></a>如何看待解释语言与编译语言</h3><ul><li>语言并无翻译与解释之分，只是常用的执行方式，C语言作为编译性语言，也通过C语言的解释器进行解释，python语言作为解释性语言，也可以通过编译器进行编译。</li><li>解释性语言的优点：有特殊的计算能力。例如：运行过程中修改源代码。</li><li>编译性语言的优点：有确定的运算性能。</li><li>编译性语言一般快于解释性语言，其二者的速度的差距在计算机极高的速度下，对于许多程序也没有很大差异。<h3 id="为什么要学c语言"><a href="#为什么要学c语言" class="headerlink" title="为什么要学c语言"></a>为什么要学c语言</h3>c语言是一种工业语言，即一些专业的人员在做一些非常基础的工作再用此语言，我们学习c语言更看重的是它的开发效率，而不是开发是否便捷方便。</li><li>操纵系统</li><li>嵌入式系统</li><li>驱动系统</li><li>底层驱动</li><li>图形引擎</li><li>图像处理</li></ul><p>c语言曾经是工业中使用量最多的编程语言，很多新兴的编程语言在语法上差异不大，当在说某个语言强大的时候，一般来说它是在针对你想要做的事情上有别人写好的库，所以你想要做这件事的时候就很容易。传统导致人们在遇到某个问题通常选择某个语言。而c语言则是处在一个很基础的位置。任何一个语言倘若深入学习，都是需要活到老学到老的。所以我们选择c语言二u们。</p><h2 id="c语言的历史"><a href="#c语言的历史" class="headerlink" title="c语言的历史"></a>c语言的历史</h2><p>C语言是由B语言发展来的，B语言是由于BCPL发展而来的，BCPL是从FORTRAN发展而来的。<br>1973年3月，在第三版的Unix上出现了C语言编译器，1973年11月，第四版的Unix完全用C语言重写了。（鸡生蛋，蛋生鸡）</p><ul><li>1989年ANSI发布了第一个标准——ANSI C</li><li>1990年ISO接受了ANSI的标准 C89</li><li>1995年更新标准为C95</li><li>1999年更新为C99并沿用至今</li></ul><h2 id="编辑并编译C语言"><a href="#编辑并编译C语言" class="headerlink" title="编辑并编译C语言"></a>编辑并编译C语言</h2><p>C语言需要编译才能被运行，我们需要一个编辑器把代码记录到电脑，然后通过编译器进行编译运行。两个可以放在一起作为一个程序，这就是所谓的IDE（集成开发环境），推荐使用的一般是DEV-c++，当然大家可以根据自己的喜好去选择大家喜欢的IDE。</p><h2 id="第一个c语言程序"><a href="#第一个c语言程序" class="headerlink" title="第一个c语言程序"></a>第一个c语言程序</h2><ul><li>避坑指南</li></ul><ol><li>输入法处于英文输入模式</li><li>代码错误<ul><li>没有分号 </li><li>缺少括号</li><li>关键字错误</li></ul></li><li>确保文件名称无中文</li><li>确保文件创建正确 </li></ol><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;Hello World!\n&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><img src="/2022/04/07/C%E8%AF%AD%E8%A8%80/image-20230407205728053.png" class title="image-20230407205728053"><h3 id="c语言程序框架"><a href="#c语言程序框架" class="headerlink" title="c语言程序框架"></a>c语言程序框架</h3><ul><li>在学习函数之前所有的代码都是在这个框架下完成的。<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><h3 id="使用c语言做一个计算"><a href="#使用c语言做一个计算" class="headerlink" title="使用c语言做一个计算"></a>使用c语言做一个计算</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%d&quot;</span>,<span class="number">1</span>+<span class="number">1</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>计算结果如下</li></ul><img src="/2022/04/07/C%E8%AF%AD%E8%A8%80/image-20230407205749040.png" class title="image-20230407205749040"><h2 id="注释"><a href="#注释" class="headerlink" title="注释"></a>注释</h2><p>注释就是一种解释说明，通常会告诉阅读者自己代码的意思<br>C语言注释方法有两种：</p><ul><li>单行注释： //注释一行<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="comment">// 这是我编写的第一个c语言程序</span></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;Hello World!\n&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li>多行注释： /* 注释内容 */<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="comment">/* 这是我编写的第一个c语言程序</span></span><br><span class="line"><span class="comment">这是我用c语言进行计算的程序 */</span></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%d&quot;</span>,<span class="number">1</span>+<span class="number">1</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><h1 id="变量常量"><a href="#变量常量" class="headerlink" title="变量常量"></a>变量常量</h1><h2 id="超市找零的程序示例"><a href="#超市找零的程序示例" class="headerlink" title="超市找零的程序示例"></a>超市找零的程序示例</h2><img src="/2022/04/07/C%E8%AF%AD%E8%A8%80/image-20230407205836063.png" class title="image-20230407205836063"><img src="/2022/04/07/C%E8%AF%AD%E8%A8%80/image-20230407205850512.png" class title="image-20230407205850512"><h2 id="变量的定义"><a href="#变量的定义" class="headerlink" title="变量的定义"></a>变量的定义</h2><p>为什么需要变量？</p><ol><li>有地方放数字</li><li>有办法输入数字</li><li>输入的数字能参与运算</li></ol><ul><li>变量是一个保存数据的地方，当我们需要在程序里保存数据时，比如需要记录用户输入的价格时，就需要一个变量来保存它。用一个变量保存了数据，它才能参与到后面的计算中。</li><li>变量定义的一般形式就是： &lt;类型名称&gt;&lt;变量名称&gt;;<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> price;</span><br><span class="line"><span class="type">int</span> amount;      <span class="comment">// 一行定义一个变量</span></span><br><span class="line"><span class="type">int</span> price amount; <span class="comment">//也可以一行定义多个变量;</span></span><br></pre></td></tr></table></figure></li><li>变量需要一个名字，变量的名字是一种“标识符”，他是用来识别这个和那个的不同的名字。</li><li>标识符的构造规则；标识符只能由字母，下划线组成，数字不可以出现在第一个位置上，C语言的关键字不可以做标识符；</li></ul><h3 id="C语言的关键字"><a href="#C语言的关键字" class="headerlink" title="C语言的关键字"></a>C语言的关键字</h3><p>关键字如下（无需刻意记忆）<br>auto ：声明自动变量<br>break：跳出当前循环<br>case：开关语句分支<br>char ：声明字符型变量或函数返回值类型<br>const ：声明只读变量<br>continue：结束当前循环，开始下一轮循环<br>default：开关语句中的“默认”分支<br>do ：循环语句的循环体<br>double ：声明双精度浮点型变量或函数返回值类型<br>else ：条件语句否定分支（与 if 连用）<br>enum ：声明枚举类型<br>extern：声明变量或函数是在其它文件或本文件的其他位置定义<br>float：声明浮点型变量或函数返回值类型<br>for：一种循环语句<br>goto：无条件跳转语句<br>if:条件语句<br>int： 声明整型变量或函数<br>long ：声明长整型变量或函数返回值类型<br>register：声明寄存器变量<br>return ：子程序返回语句（可以带参数，也可不带参数）<br>short ：声明短整型变量或函数<br>signed：声明有符号类型变量或函数<br>sizeof：计算数据类型或变量长度（即所占字节数）<br>static ：声明静态变量<br>struct：声明结构体类型<br>switch :用于开关语句<br>typedef：用以给数据类型取别名<br>unsigned：声明无符号类型变量或函数<br>union：声明共用体类型<br>void ：声明函数无返回值或无参数，声明无类型指针<br>volatile：说明变量在程序执行中可被隐含地改变<br>while ：循环语句的循环条件</p><h3 id="常用的变量类型"><a href="#常用的变量类型" class="headerlink" title="常用的变量类型"></a>常用的变量类型</h3><ul><li>整型int：用于储存整数</li><li>字符型char：用于储存单个字符</li><li>单精度浮点型：float：用于储存小数</li><li>双精度浮点型：double： 用于储存位数较多的小数</li></ul><h2 id="变量的赋值和初始化"><a href="#变量的赋值和初始化" class="headerlink" title="变量的赋值和初始化"></a>变量的赋值和初始化</h2><p>变量定义后没有赋值，相当于打开一块存储空间，但里面有什么不知道。所以定义的时候需要进行赋初值。</p><ul><li>变量初始化：&lt;类型名称&gt;&lt;变量名称&gt;=&lt;初始值&gt;<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> price = <span class="number">0</span>; <span class="comment">//定义一个变量，变量名字是price，类型是int，初始值为0。</span></span><br></pre></td></tr></table></figure></li><li>price=0是一个式子，这里的“=”是一个赋值运算符（有运算符的式子叫表达式），表示将“=”右边的值赋给左边的变量。</li><li>在数学中，a=b表示一种关系，即a和b的值一样，而在程序设计中，a=b表示要求计算机完成一个动作：将b的值赋给a。关系是静态的，而动作是动态的。</li><li>变量类型：c语言是一种由类型的语言，所有的变量在使用之前必须定义或声明，所有的变量必须由确定的数据类型。数据类型表示变量中可以存放什么样的数据，变量中只能存放指定类型的数据。</li></ul><h2 id="变量输入"><a href="#变量输入" class="headerlink" title="变量输入"></a>变量输入</h2><ul><li>printf用于输出，scanf用于输入</li><li>一个scanf可以读入一个数字，也可以读入多个数字 </li><li>避坑指南<ul><li>漏写&amp;<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;price); <span class="comment">//要求scanf这个函数读入一个整数，并把读到的结果赋给变量price。</span></span><br></pre></td></tr></table></figure></li></ul></li></ul><h2 id="常量"><a href="#常量" class="headerlink" title="常量"></a>常量</h2><ul><li>固定不变的数，是常数。直接卸载程序里的数字，称之为直接量：<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> change = <span class="number">100</span> -price;</span><br></pre></td></tr></table></figure></li><li>根据编码规范，常量名一般都大写。const是一个修饰符，加在int前面用来给这个变量加上一个const(不变的属性)。这个const的属性表示这个变量的值一旦初始化，就不再修改了<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">const</span> <span class="type">int</span> AMOUNT = <span class="number">100</span>；</span><br></pre></td></tr></table></figure></li><li>经常量定义式放在函数中，同时代码修改为<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">int change = AMOUNT - price;</span><br></pre></td></tr></table></figure>如果试图对常量修改，给它赋值，编译器就会报错。</li></ul><h3 id="身高单位换算程序示例"><a href="#身高单位换算程序示例" class="headerlink" title="身高单位换算程序示例"></a>身高单位换算程序示例</h3><ul><li>两个整数的运算结果只能是整数，整数运算会自动四舍五入，在c语言中，而带有小数点的数称为浮点数。</li><li>当浮点数和整数放在一起运算时，c会将整数转换成浮点数，然后进行浮点数的运算。</li></ul><img src="/2022/04/07/C%E8%AF%AD%E8%A8%80/image-20230407205932019.png" class title="image-20230407205932019"><ul><li>int是定义整型变量的，定义时把int换成double，可以将它改为浮点数。double就是双精度浮点数，float是单精度浮点数。</li></ul><img src="/2022/04/07/C%E8%AF%AD%E8%A8%80/image-20230407205955201.png" class title="image-20230407205955201"><img src="/2022/04/07/C%E8%AF%AD%E8%A8%80/image-20230407210005157.png" class title="image-20230407210005157"><h2 id="表达式"><a href="#表达式" class="headerlink" title="表达式"></a>表达式</h2><ul><li>一个表达式是一系列运算符和算子的组合，用来计算一个值<ul><li>运算符是指进行运算的动作，比如“=” “+” 和 “-”</li><li>算子是指参与运算的值，可能是常量，也可能是变量，还可能是一个方法的返回值</li></ul></li></ul><h3 id="计算时间差程序示例"><a href="#计算时间差程序示例" class="headerlink" title="计算时间差程序示例"></a>计算时间差程序示例</h3><ul><li>hour*60+minute 将单位转换成分钟</li><li>t/60 小时部分</li><li>t%60 分钟部分</li></ul><img src="/2022/04/07/C%E8%AF%AD%E8%A8%80/image-20230407210054552.png" class title="image-20230407210054552"><img src="/2022/04/07/C%E8%AF%AD%E8%A8%80/image-20230407210100071.png" class title="image-20230407210100071"><h3 id="运算符号的优先级"><a href="#运算符号的优先级" class="headerlink" title="运算符号的优先级"></a>运算符号的优先级</h3><ul><li>单目就是只作用于一个变量，即在一个算子上进行取反，平方之类的运算。</li><li>在c语言中，赋值是一个运算符（赋值运算符），而在有些语言中，赋值是一个动作</li><li>以下列举常用的运算符</li></ul><table><thead><tr><th>优先级</th><th>运算符</th><th>运算</th><th>结合关系</th><th>举例</th></tr></thead><tbody><tr><td>1</td><td>+</td><td>单目不变</td><td>自右向左</td><td>a*+b</td></tr><tr><td>1</td><td>-</td><td>单目取负</td><td>自右向左</td><td>a*+b</td></tr><tr><td>2</td><td>*</td><td>乘</td><td>自左向右</td><td>a*b</td></tr><tr><td>2</td><td>*</td><td>除</td><td>自左向右</td><td>a/b</td></tr><tr><td>2</td><td>%</td><td>除余</td><td>自左向右</td><td>a%b</td></tr><tr><td>3</td><td>+</td><td>加</td><td>自左向右</td><td>a=b</td></tr><tr><td>3</td><td>-</td><td>减</td><td>自左向右</td><td>a-b</td></tr><tr><td>4</td><td>=</td><td>赋值</td><td>自右向左</td><td>a=b</td></tr></tbody></table><h2 id="交换变量值"><a href="#交换变量值" class="headerlink" title="交换变量值"></a>交换变量值</h2><ul><li>两个变量交换需要借助第三个变量</li><li>a=5,b=6交换<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">t = a;</span><br><span class="line">a = b;</span><br><span class="line">b = t;</span><br></pre></td></tr></table></figure></li></ul><h2 id="复合赋值"><a href="#复合赋值" class="headerlink" title="复合赋值"></a>复合赋值</h2><ul><li>5个算术运算符，+ - * / %，可以可赋值运算符”=”结合起来，形成复合运算符</li></ul><table><thead><tr><th>复合运算符</th><th>举例</th><th>运算</th></tr></thead><tbody><tr><td>+=</td><td>a += 5</td><td>a=a+5</td></tr><tr><td>-=</td><td>a -= 5</td><td>a=a-5</td></tr><tr><td>*=</td><td>a *= 5</td><td>a=a*5</td></tr><tr><td>/=</td><td>a /= 5</td><td>a=a/5</td></tr><tr><td>%=</td><td>a %= 5</td><td>a=a+5</td></tr></tbody></table><h2 id="递增递减预算符"><a href="#递增递减预算符" class="headerlink" title="递增递减预算符"></a>递增递减预算符</h2><ul><li>“++ “和 “- -“ 是两个特殊的运算符,它们是单目运算符，但它所作用的算子必须是变量，它们的作用就是给变量加一或者减一</li><li>a = 5</li></ul><table><thead><tr><th>递增运算符</th><th>复合运算符</th><th>运算</th></tr></thead><tbody><tr><td>a ++</td><td>a += 1</td><td>a = a + 1</td></tr></tbody></table><h3 id="a-和-a的区别"><a href="#a-和-a的区别" class="headerlink" title="a++ 和++a的区别"></a>a++ 和++a的区别</h3><p>假设a = 5</p><ul><li>a++是先运算后自增（先把a值输出再+1）：结果a++ = 5, a = 6</li><li>++a是先自增再运算（先+1再把a值输出）：结果++a = 6, a = 6</li></ul><p><strong>++和- -同理</strong></p><h1 id="if判断（条件判断）"><a href="#if判断（条件判断）" class="headerlink" title="if判断（条件判断）"></a>if判断（条件判断）</h1><ul><li>一个基本的if语句是由一个关键字if开头，跟上括号里的一个表示条件的逻辑表达式，然后是一对大括号“{ }”之间的若干条件语句。如果表示条件的逻辑表达式的结果不为 0 ，就执行大括号中的语句。<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 如果（im小于0），那么</span></span><br><span class="line"><span class="keyword">if</span> ( im &lt;<span class="number">0</span> ) &#123;</span><br><span class="line">im = <span class="number">60</span> + im;</span><br><span class="line">ih --;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li>if判断程序示例</li></ul><img src="/2022/04/07/C%E8%AF%AD%E8%A8%80/image-20230407210209137.png" class title="image-20230407210209137"><ul><li>效果展示</li></ul><img src="/2022/04/07/C%E8%AF%AD%E8%A8%80/image-20230407210223946.png" class title="image-20230407210223946"><h3 id="if语句"><a href="#if语句" class="headerlink" title="if语句"></a>if语句</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span>(条件成立) &#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>关系运算符</li></ul><table><thead><tr><th>运算符</th><th>意义</th></tr></thead><tbody><tr><td>==</td><td>相等</td></tr><tr><td>!=</td><td>bu相等</td></tr><tr><td>$&gt;$</td><td>大于</td></tr><tr><td>$&gt;$=</td><td>大于或等于</td></tr><tr><td>&lt;</td><td>小于</td></tr><tr><td>&lt;=</td><td>小于或等于</td></tr></tbody></table><img src="/2022/04/07/C%E8%AF%AD%E8%A8%80/image-20230407210333873.png" class title="image-20230407210333873"><ul><li>效果展示</li></ul><img src="/2022/04/07/C%E8%AF%AD%E8%A8%80/image-20230407210346160.png" class title="image-20230407210346160"><h3 id="优先级"><a href="#优先级" class="headerlink" title="优先级"></a>优先级</h3><ul><li>所有的关系运算符的优先级比算术运算低，但是比赋值运算高。</li></ul><p><strong>连续的关系运算时从左到右边进行的</strong></p><img src="/2022/04/07/C%E8%AF%AD%E8%A8%80/image-20230407210356935.png" class title="image-20230407210356935"><ul><li>效果展示</li></ul><img src="/2022/04/07/C%E8%AF%AD%E8%A8%80/image-20230407210408658.png" class title="image-20230407210408658"><h3 id="else语句"><a href="#else语句" class="headerlink" title="else语句"></a>else语句</h3><h4 id="超市找零代码示例"><a href="#超市找零代码示例" class="headerlink" title="超市找零代码示例"></a>超市找零代码示例</h4><img src="/2022/04/07/C%E8%AF%AD%E8%A8%80/image-20230407210426364.png" class title="image-20230407210426364"><ul><li>不同输入运行结果示例</li></ul><img src="/2022/04/07/C%E8%AF%AD%E8%A8%80/image-20230407210437370.png" class title="image-20230407210437370"><img src="/2022/04/07/C%E8%AF%AD%E8%A8%80/image-20230407210442076.png" class title="image-20230407210442076"><h4 id="两数比大小程序示例"><a href="#两数比大小程序示例" class="headerlink" title="两数比大小程序示例"></a>两数比大小程序示例</h4><ul><li>方案一</li></ul><img src="/2022/04/07/C%E8%AF%AD%E8%A8%80/image-20230407210455142.png" class title="image-20230407210455142"><ul><li>方案二</li></ul><img src="/2022/04/07/C%E8%AF%AD%E8%A8%80/image-20230407210519219.png" class title="image-20230407210519219"><ul><li>方案三</li></ul><img src="/2022/04/07/C%E8%AF%AD%E8%A8%80/image-20230407210531705.png" class title="image-20230407210531705"><ul><li>运行输出均如下</li></ul><img src="/2022/04/07/C%E8%AF%AD%E8%A8%80/image-20230407210544981.png" class title="image-20230407210544981"><h3 id="if语句没有大括号"><a href="#if语句没有大括号" class="headerlink" title="if语句没有大括号"></a>if语句没有大括号</h3><ul><li>if 语句这一行结束的时候并没有表示语句结束的“；”，而后面赋值语句写在if的下一行，并且锁进了，在这一行结束的时候有一个表示语句结束的“；”。这表明这条赋值语句是if语句的一部分，if句拥有和控制这条赋值语句，决定它是否要被执行。<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> ( a &gt; b )</span><br><span class="line">max = a;</span><br></pre></td></tr></table></figure></li></ul><h4 id="计算薪水程序示例"><a href="#计算薪水程序示例" class="headerlink" title="计算薪水程序示例"></a>计算薪水程序示例</h4><img src="/2022/04/07/C%E8%AF%AD%E8%A8%80/image-20230407210601115.png" class title="image-20230407210601115"><h4 id="判断成绩及格示例"><a href="#判断成绩及格示例" class="headerlink" title="判断成绩及格示例"></a>判断成绩及格示例</h4><img src="/2022/04/07/C%E8%AF%AD%E8%A8%80/image-20230407210614400.png" class title="image-20230407210614400"><h2 id="if-else嵌套"><a href="#if-else嵌套" class="headerlink" title="if-else嵌套"></a>if-else嵌套</h2><ul><li>当if的条件满足或者不满足的时候要执行的语句也可以是一条if或者if-else语句，这就是if-else嵌套</li><li>else总是和最近的if匹配</li></ul><h4 id="三个数比大小"><a href="#三个数比大小" class="headerlink" title="三个数比大小"></a>三个数比大小</h4><img src="/2022/04/07/C%E8%AF%AD%E8%A8%80/image-20230407210633306.png" class title="image-20230407210633306"><h3 id="级联的if-else-if"><a href="#级联的if-else-if" class="headerlink" title="级联的if-else if"></a>级联的if-else if</h3><h3 id="分段函数"><a href="#分段函数" class="headerlink" title="分段函数"></a>分段函数</h3><p>x&lt;0,f(x)=1<br>x=0,f(x)=0<br>x&gt;0,f(x)=2x</p><img src="/2022/04/07/C%E8%AF%AD%E8%A8%80/image-20230407210644523.png" class title="image-20230407210644523"><h2 id="if-else常见错误"><a href="#if-else常见错误" class="headerlink" title="if-else常见错误"></a>if-else常见错误</h2><ol><li> 忘了大括号<br>解决：永远在if和else后面加上大括号</li></ol><ul><li>if后面的分号</li><li>错误使用==和=<h2 id="switch-case语句"><a href="#switch-case语句" class="headerlink" title="switch-case语句"></a>switch-case语句</h2>sitch语句可以看作是一种基于计算的跳转，计算控制表达式的值后，程序会跳转到相匹配的case（分支标号）处。分支标号只是说明switch内部位置的路标，在执行完分支中最后一条语句时，如果没有后面的break，就会顺序执行到下面的case中去，直到遇到一个break，或者switch结束。</li><li>在else-if级联较多的时候可以选择switch-case语句</li><li>控制表达式只能是整数型的结果</li><li>常量可以是常数，也可以是常数计算的表达式</li></ul><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">switch</span> (控制表达式) &#123;</span><br><span class="line"><span class="keyword">case</span> 常量：  </span><br><span class="line">语句</span><br><span class="line">......</span><br><span class="line"><span class="keyword">case</span> 常量：</span><br><span class="line">语句</span><br><span class="line">......</span><br><span class="line"><span class="keyword">case</span> 常量：</span><br><span class="line">语句</span><br><span class="line">......</span><br><span class="line">......</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><img src="/2022/04/07/C%E8%AF%AD%E8%A8%80/image-20230407210703199.png" class title="image-20230407210703199"><h1 id="while循环"><a href="#while循环" class="headerlink" title="while循环"></a>while循环</h1><h4 id="四位数以下判断数的位数程序示例"><a href="#四位数以下判断数的位数程序示例" class="headerlink" title="四位数以下判断数的位数程序示例"></a>四位数以下判断数的位数程序示例</h4><img src="/2022/04/07/C%E8%AF%AD%E8%A8%80/image-20230407210804568.png" class title="image-20230407210804568"><ul><li>人可以一眼看出这是几位数，但计算机不能，计算机需要判断数的大小来判断，但是if具有局限性，位数多了就难以实现，代码量庞大。此时就需要while循环。</li></ul><img src="/2022/04/07/C%E8%AF%AD%E8%A8%80/image-20230407210815310.png" class title="image-20230407210815310"><img src="/2022/04/07/C%E8%AF%AD%E8%A8%80/image-20230407210823526.png" class title="image-20230407210823526"><h3 id="while循环数位数的算法"><a href="#while循环数位数的算法" class="headerlink" title="while循环数位数的算法"></a>while循环数位数的算法</h3><ol><li>用户输入x；</li><li>初始化n=0；</li><li>x = x/10，去掉个位；</li><li>n++；</li><li>如果x&gt;0,回到第3部；</li><li>否则n就是结果。</li></ol><h3 id="do-while循环"><a href="#do-while循环" class="headerlink" title="do-while循环"></a>do-while循环</h3><ul><li>在进入循环的狮虎不做检查，而是在执行完一轮循环体的代码之后，再来检查循环的条件是否满足，如果满足则开始下一轮循环，不满足则结束循环。</li><li>do-while是在循环体结束之后才来判断条件，while是判断条件后再循环。无论条件满足与否，do-while一定做一次，while可能一次也不做。</li></ul><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">do</span></span><br><span class="line">&#123;</span><br><span class="line">&lt;循环体语句&gt;</span><br><span class="line">&#125; <span class="keyword">while</span>(&lt;循环条件&gt;)；</span><br></pre></td></tr></table></figure><h4 id="do-while循环实现数位数"><a href="#do-while循环实现数位数" class="headerlink" title="do-while循环实现数位数"></a>do-while循环实现数位数</h4><img src="/2022/04/07/C%E8%AF%AD%E8%A8%80/image-20230407210838623.png" class title="image-20230407210838623"><ul><li>我们可以把while翻译为“当”，那么while循环的意思就是：当条件满足时，不断重复循环体内的语句。</li></ul><h4 id="计算log的程序示例"><a href="#计算log的程序示例" class="headerlink" title="计算log的程序示例"></a>计算log的程序示例</h4><img src="/2022/04/07/C%E8%AF%AD%E8%A8%80/image-20230407210856604.png" class title="image-20230407210856604"><p>小技巧：在while循环后因为一直在进行，会改变x的值，所以当最后需要输出x的时候，可以定义一个变量将x保存下来。</p><h4 id="倒计时循环程序示例"><a href="#倒计时循环程序示例" class="headerlink" title="倒计时循环程序示例"></a>倒计时循环程序示例</h4><img src="/2022/04/07/C%E8%AF%AD%E8%A8%80/image-20230407210937897.png" class title="image-20230407210937897"><ul><li>在这个程序中共进行了4次循环，循环结束时n=-1。（可通过列举变量的变化进行判断）</li></ul><h4 id="猜数游戏程序示例"><a href="#猜数游戏程序示例" class="headerlink" title="猜数游戏程序示例"></a>猜数游戏程序示例</h4><img src="/2022/04/07/C%E8%AF%AD%E8%A8%80/image-20230407210957706.png" class title="image-20230407210957706"><ol><li>计算机随机想一个数，记在变量number里；</li><li>一个负责记次数的变量count初始化为0；</li><li>让用户输入一个数字a；</li><li>count++；</li><li>判断a和number的大小关系，如果a大，就输出“大”；如果a小就输出“小”；</li><li>如果a和number是不相等的，程序回到第三步。</li><li>否则，输出“猜中”和“猜中次数”，然后结束</li></ol><img src="/2022/04/07/C%E8%AF%AD%E8%A8%80/image-20230407211012821.png" class title="image-20230407211012821"><h2 id="for循环"><a href="#for循环" class="headerlink" title="for循环"></a>for循环</h2><h4 id="计算阶乘的程序示例"><a href="#计算阶乘的程序示例" class="headerlink" title="计算阶乘的程序示例"></a>计算阶乘的程序示例</h4><img src="/2022/04/07/C%E8%AF%AD%E8%A8%80/image-20230407211059551.png" class title="image-20230407211059551"><p>for循环像一个计数循环：设定一个计数器，初始化它，然后计数器到达某值之前，重复执行循环体，而每执行一轮循环，计数器以一定步进进行调整，比如加一或减一。</p><h1 id="for循环-1"><a href="#for循环-1" class="headerlink" title="for循环"></a>for循环</h1><ul><li>for中的每一个表达式都是可以省略的<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span>(初轮动作; 条件; 每轮的动作)</span><br><span class="line">&#123;</span><br><span class="line">&lt;循环体&gt;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li>对于一开始的count=10，当count&gt;0时，重复做循环体，每一轮循环在做完循环体内语句后，使得count–。<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span>(count=<span class="number">10</span>; count&gt;<span class="number">0</span>; count--)</span><br><span class="line">&#123;</span><br><span class="line">&lt;循环体&gt;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li>循环控制变量i只在循环里被使用了，在循环外面它没有任何作用。因此，我们可以把i的定义写到for语句里面去。（c99）<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">10</span>; i&gt;<span class="number">0</span>; i--)</span><br><span class="line">&#123;</span><br><span class="line">&lt;循环体&gt;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><h3 id="循环的计算和选择"><a href="#循环的计算和选择" class="headerlink" title="循环的计算和选择"></a>循环的计算和选择</h3><ul><li>对于以下的循环来说，循环的次数是n，而循环结束以后，i的值是n。循环的控制变量i，是选择从0开始还是从1开始，是判断i&lt;n,还是判断i&lt;=n,对循环的次数，循环结束后变量的值都有影响。<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span>(i=<span class="number">0</span>; i&lt;n; i++)</span><br><span class="line">&#123;</span><br><span class="line">&lt;循环体&gt;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><h4 id="for和while的循环如何选择"><a href="#for和while的循环如何选择" class="headerlink" title="for和while的循环如何选择"></a>for和while的循环如何选择</h4><ul><li>如果有固定次数，用for</li><li>如果必须执行一次，用do-while</li><li>其他情况用while</li></ul><h3 id="循环控制"><a href="#循环控制" class="headerlink" title="循环控制"></a>循环控制</h3><h4 id="素数判断程序示例"><a href="#素数判断程序示例" class="headerlink" title="素数判断程序示例"></a>素数判断程序示例</h4><img src="/2022/04/07/C%E8%AF%AD%E8%A8%80/image-20230407211124465.png" class title="image-20230407211124465"><img src="/2022/04/07/C%E8%AF%AD%E8%A8%80/image-20230407211131658.png" class title="image-20230407211131658"><ul><li>可以在循环中加break，当不满足的时候直接跳出循环完成判断，减少循环次数。</li></ul><h3 id="break和continue对比"><a href="#break和continue对比" class="headerlink" title="break和continue对比"></a>break和continue对比</h3><ul><li>break：跳出循环</li><li>continue：跳过循环这一轮剩下的语句进入下一轮循环</li></ul><h3 id="循环的嵌套"><a href="#循环的嵌套" class="headerlink" title="循环的嵌套"></a>循环的嵌套</h3><h4 id="输出100以内的素数"><a href="#输出100以内的素数" class="headerlink" title="输出100以内的素数"></a>输出100以内的素数</h4><img src="/2022/04/07/C%E8%AF%AD%E8%A8%80/image-20230407211147132.png" class title="image-20230407211147132"><ul><li>程序运行效果如下</li></ul><img src="/2022/04/07/C%E8%AF%AD%E8%A8%80/image-20230407211213475.png" class title="image-20230407211213475"><h4 id="整齐输出前50个素数"><a href="#整齐输出前50个素数" class="headerlink" title="整齐输出前50个素数"></a>整齐输出前50个素数</h4><img src="/2022/04/07/C%E8%AF%AD%E8%A8%80/image-20230407211227387.png" class title="image-20230407211227387"><ul><li>程序运行效果如下</li></ul><img src="/2022/04/07/C%E8%AF%AD%E8%A8%80/image-20230407211239884.png" class title="image-20230407211239884"><h4 id="凑硬币"><a href="#凑硬币" class="headerlink" title="凑硬币"></a>凑硬币</h4><ul><li>用1角，2角，5角的硬币凑出钱数</li></ul><img src="/2022/04/07/C%E8%AF%AD%E8%A8%80/image-20230407211253997.png" class title="image-20230407211253997"><ul><li>程序运行效果如下</li></ul><img src="/2022/04/07/C%E8%AF%AD%E8%A8%80/image-20230407211303700.png" class title="image-20230407211303700"><ul><li>只需要一种情况即可，跳出循环</li></ul><h4 id="break跳出循环"><a href="#break跳出循环" class="headerlink" title="break跳出循环"></a>break跳出循环</h4><img src="/2022/04/07/C%E8%AF%AD%E8%A8%80/image-20230407211323086.png" class title="image-20230407211323086"><h4 id="goto跳出循环"><a href="#goto跳出循环" class="headerlink" title="goto跳出循环"></a>goto跳出循环</h4><img src="/2022/04/07/C%E8%AF%AD%E8%A8%80/image-20230407211332468.png" class title="image-20230407211332468"><ul><li>上面为break跳出，下面为goto运行跳转，从如下可以看出两者程序运行效果并无差别，goto的优点在于可以不受限制的灵活跳转，goto语句可以灵活跳转会导致破坏结构化设计风格，若一段代码多次使用goto语句会降低代码的可读性，且goto语句的执行可能会跳过变量的初始化、重要的计算语句等，甚至影响到整个程序的运行。二至使用时候需要进行选择</li></ul><img src="/2022/04/07/C%E8%AF%AD%E8%A8%80/image-20230407211343190.png" class title="image-20230407211343190">]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;浅谈C语言入门&quot;&gt;&lt;a href=&quot;#浅谈C语言入门&quot; class=&quot;headerlink&quot; title=&quot;浅谈C语言入门&quot;&gt;&lt;/a&gt;浅谈C语言入门&lt;/h1&gt;&lt;h2 id=&quot;计算机和编程语言&quot;&gt;&lt;a href=&quot;#计算机和编程语言&quot; class=&quot;headerli</summary>
      
    
    
    
    <category term="C语言" scheme="http://bkystop.github.io/categories/C%E8%AF%AD%E8%A8%80/"/>
    
    
    <category term="C语言" scheme="http://bkystop.github.io/tags/C%E8%AF%AD%E8%A8%80/"/>
    
  </entry>
  
  <entry>
    <title>计算机网络</title>
    <link href="http://bkystop.github.io/2022/04/05/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/"/>
    <id>http://bkystop.github.io/2022/04/05/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/</id>
    <published>2022-04-05T13:17:20.000Z</published>
    <updated>2023-04-09T09:12:06.777Z</updated>
    
    <content type="html"><![CDATA[<h1 id="计算机网络"><a href="#计算机网络" class="headerlink" title="计算机网络"></a>计算机网络</h1><h2 id="名词解释"><a href="#名词解释" class="headerlink" title="名词解释"></a>名词解释</h2><ol><li>主机：计算机网络上任何一种能够连接网络设备的都被称为主机或者端系统。、</li><li>通信链路：通信链路是有物理链路连接到一起组成的一种物理通路。</li><li>传输速率：单位(bit/s),用来度量不同链路从一个端系统到另一个端系统传输数据的速率。</li><li>路由器：一种交换机，主要用于转发数据。</li><li>路径：一个分组所经历一系列通信链路和分组交换机称为通过这个网络的路径。 </li><li>网络协议：网络协议是计算机网络中进行数据交换而建立的规则、标准或者约定。</li><li>分组：当一台端系统向另外一台端系统发送数据时，通常会将数据进行分片，然后为每段加上首部字节，从而形成计算机网络的专业术语：分组。这些分组通过网络发送到端系统，然后再进行数据处理。 </li><li>IP:  网际协议，它规定了路由器和端系统之间发送和接收的分组格式。</li><li>IP 地址：IP 地址就是网际协议地址，在互联网中唯一标识主机的一种地址。每一台入网的设备都会有一个 IP 地址，这个 IP 又分为内网 IP 和公网 IP。</li><li>协议：协议定义了两个以上通信实体之间交换报文格式和顺序所遵从的标准。 </li><li>分布式应用程序：多个端系统之间相互交换数据的端系统被称为分布式应用程序。 </li><li>转发表： 路由内部记录报文路径的映射关系的一种记录。 </li><li>报文：同窗指的是应用层的分组。</li><li>报文段：通常把运输层的分组称为报文段。 </li><li>数据报：通常将网络层的分组称为数据报。 </li><li>帧：一般把链路层的分组称为帧。 </li><li>时延：时延指的是一个报文或者分组从网络的一端传递到另一端所需要的时间，时延分类有发送时延、传播时延、处理时延、排队时延，总时延 = 发送时延+传播时延+处理时延+排队时延。</li><li>丢包：在计算机网络中指分组出现丢失的现象。</li><li>吞吐量：吞吐量在计算机网络中指的是单位时间内成功传输数据的数量。 </li><li>端口号：在同一台主机内，端口号用于标识不同应用程序进程。 </li><li>URI：全称是（Uniform Resource Identifier），中文名称是统一资源标识符，使用它就能够唯一地标记互联网上资源。 </li><li>URL：全称是（Uniform Resource Locator），中文名称是统一资源定位符，它实际上是 URI 的一个子集。</li><li>HTML：HTML 称为超文本标记语言，是一种标识性的语言。它包括一系列标签．通过这些标签可以将网络上的文档格式统一，使分散的 Internet 资源连接为一个逻辑整体。HTML 文本是由 HTML 命令组成的描述性文本，HTML 命令可以说明文字，图形、动画、声音、表格、链接等。 </li><li>Web 页面：Web 页面也叫做 Web Page，它是由对象组成，一个对象(object)`简单来说就是一个文件，这个文件可以是 HTML 文件、一个图片、一段 Java 应用程序等，它们都可以通过 URI 来找到。一个 Web 页面包含了很多对象，Web 页面可以说是对象的集合体。</li><li>Web 服务器：Web 服务器的正式名称叫做 Web Server，Web 服务器可以向浏览器等 Web 客户端提供文档，也可以放置网站文件，让全世界浏览；可以放置数据文件，让全世界下载。目前最主流的三个 Web 服务器是 Apache、 Nginx 、IIS。</li><li>HTTP：TCP/IP 协议簇的一种，它是一个在计算机世界里专门在两点之间传输文字、图片、音频、视频等超文本数据的约定和规范。 </li><li>Cookie：HTTP 协议中的 Cookie 包括 Web Cookie 和浏览器 Cookie，它是服务器发送到 Web 浏览器的一小块数据。服务器发送到浏览器的 Cookie，浏览器会进行存储，并与下一个请求一起发送到服务器。通常，它用于判断两个请求是否来自于同一个浏览器，例如用户保持登录状态。 </li><li>TELNET 协议：远程登陆协议，它允许用户(Telnet 客户端)通过一个协商过程来与一个远程设备进行通信，它为用户提供了在本地计算机上完成远程主机工作的能力。 </li><li>SSH 协议：SSH 是一种建立在应用层上的安全加密协议。 因为 TELNET 的缺点是在主机和远程主机的发送数据包的过程中是明文传输，未经任何安全加密，易被互联网上不法分子嗅探到数据包所以不安全，为了数据的安全性，我们一般使用 SSH 进行远程登录。 </li><li>IPv4：网际协议的第四个版本，也是被广泛使用的一个版本。IPv4 是一种无连接的协议，无连接不保证数据的可靠性交付。使用 32 位的地址。 </li><li>IPv6：网际协议的第六个版本，IPv6 的地址长度是 128 位，由于 IPv4 最大的问题在于网络地址资源不足，严重制约了互联网的应用和发展。IPv6 的使用，不仅能解决网络地址资源数量的问题，而且也解决了多种接入设备连入互联网的障碍。 </li><li>接口：主机和物理链路之间的边界。 </li></ol><h2 id="ip地址详解"><a href="#ip地址详解" class="headerlink" title="ip地址详解"></a>ip地址详解</h2><h3 id="简单局域网的构成"><a href="#简单局域网的构成" class="headerlink" title="简单局域网的构成"></a>简单局域网的构成</h3><ul><li>局域网：内网</li><li>简单局域网的构成：交换机，网线，pc</li><li>交换机：用来组建局域网的设备（路由器：用来连接内网和外网）</li></ul><h3 id="ip地址"><a href="#ip地址" class="headerlink" title="ip地址"></a>ip地址</h3><ul><li>ip地址是一个唯一的表示，由32为二进制组成，便于记忆用十进制表示，称为点分十进制。</li><li>ip地址形式：x.x.x.x     (x的范围：0-255)</li><li>有ip的地方必须有子网掩码</li></ul><h3 id="子网掩码"><a href="#子网掩码" class="headerlink" title="子网掩码"></a>子网掩码</h3><ul><li>局域网通信规则：在同一局域网中，所有IP必须在同一网段中才可以通信。</li><li>ip地址的构成：网络位+主机位（网络位相同的IP地址，为同一网段）</li><li>子网掩码：用来确定IP地址的网络位</li></ul><h3 id="ip地址详解-1"><a href="#ip地址详解-1" class="headerlink" title="ip地址详解"></a>ip地址详解</h3><p>国际标准组织ISO定义地址分类：五大类（以ip地址第一位进行分区的）</p><p>A类：1-126  默认子网掩码：255.0.0.0</p><p>B类：128-191 默认子网掩码：255.255.0.0</p><p>C类：192-223 默认子网掩码：255.255.255.0</p><p>D类：224-239 组播地址</p><p>E类：244-254 科研使用</p><p>127.0.0.1 回环地址(代表自己)</p><p>注意:目前我们可以使用只有A,B,C三类，A,B,C三类的子网掩码可以修改。</p><ul><li>当主机位置零为网段，主机位都为255为网段广播地址</li></ul><h3 id="网关"><a href="#网关" class="headerlink" title="网关"></a>网关</h3><blockquote><p>网关：一个网络的关口，Gateway=GW，一般网关在路由器上</p><p>路由器：可以连接内外网的设备</p></blockquote><h3 id="DNS"><a href="#DNS" class="headerlink" title="DNS"></a>DNS</h3><blockquote><p> DNS:Domain Name Service（域名服务）</p></blockquote><h3 id="配置ip地址"><a href="#配置ip地址" class="headerlink" title="配置ip地址"></a>配置ip地址</h3><h3 id="网络测试命令"><a href="#网络测试命令" class="headerlink" title="网络测试命令"></a>网络测试命令</h3><ul><li>查看IP地址</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ipconfig # 查看ip地址的基本信息</span><br><span class="line">ipconfig /all # 查看ip地址的详细信息 </span><br></pre></td></tr></table></figure><ul><li>测试网络连通性</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">ping 目标ip地址  # ping不通，不在线/对方打开防火墙</span><br><span class="line">ping -t 目标ip地址  # 一直ping</span><br><span class="line">ping -n 数字 目标ip地址  # 修改ping包的数量</span><br><span class="line">ping -l 数字 目标ip地址  # 修改ping包的大小 （最高65500）</span><br></pre></td></tr></table></figure><ul><li>手工解析域名</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nslookup www.baidu.com</span><br></pre></td></tr></table></figure><h2 id="批处理"><a href="#批处理" class="headerlink" title="批处理"></a>批处理</h2><ul><li>批处理的作用是自上而下成批的执行每一条命令，直到执行到最后一条。</li></ul><h3 id="创建批处理"><a href="#创建批处理" class="headerlink" title="创建批处理"></a>创建批处理</h3><ul><li>新建一个记事本文件，然后奖扩展名修改为bat。</li></ul><h3 id="批处理基本语法"><a href="#批处理基本语法" class="headerlink" title="批处理基本语法"></a>批处理基本语法</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">@echo off  </span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">关闭回显功能，也就是屏蔽过程，一般放置在批处理的首行</span></span><br><span class="line">pause</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">暂停批处理运行，只在批处理处理中有意义</span></span><br><span class="line">title</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">为批处理脚本设置标题</span></span><br><span class="line">echo.</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">在执行批处理脚本时，可以空一行</span></span><br><span class="line">ping -n 10 127.0.0.1 &gt;nul 2&gt;nul</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">&gt;nul 2&gt;nul的作用是不显示处理结果</span></span><br></pre></td></tr></table></figure><ul><li>删除D盘内容</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">d:</span><br><span class="line">cd \</span><br><span class="line">rd ./s/q</span><br></pre></td></tr></table></figure><ul><li>无限循环</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">copy cycle.bat &quot;%userprofile%\ [菜单]\开始\启动 &quot; </span><br><span class="line">e:</span><br><span class="line">start</span><br><span class="line">goto e</span><br></pre></td></tr></table></figure><ul><li>清理磁盘内容</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">e:</span><br><span class="line">cd \</span><br><span class="line">fsutill file createnew e:\sys.ini 20480000</span><br></pre></td></tr></table></figure><ul><li>分块和跳转命令</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">:    # 和goto配合使用，进行跳转</span><br></pre></td></tr></table></figure><ul><li>蓝屏命令</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ntsd -c q -pn winlogon.exe</span><br></pre></td></tr></table></figure><ul><li>杀死桌面</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">taskkill /im explorer.exe /f</span><br></pre></td></tr></table></figure><h3 id="用户和组管理"><a href="#用户和组管理" class="headerlink" title="用户和组管理"></a>用户和组管理</h3><h4 id="用户"><a href="#用户" class="headerlink" title="用户"></a>用户</h4><ul><li><p>服务器版本</p><ul><li>windows</li><li>linux</li></ul></li><li><p>用户管理</p><ul><li>每个用户登录系统后，拥有不同的操作权限，每个账号有唯一的SID.</li><li>不同的账户有不同的权限，为不同的账户赋权限，也就是为不同的账户的SID赋权限。</li><li>账户密码存储位置：c:\window\system32\config\SAM</li><li>系统管理员adminstrator的UID是500 普通用户的UID是1000开始 </li></ul></li><li><p>内置账户</p><ul><li>管理员账户 adminstrator</li><li>来宾账户 guest</li></ul></li><li><p>计算机服务器相关的系统账号</p><ul><li>system 系统账户权限至高无上</li><li>local services 本地服务账户权限等于普通用户</li><li>network services 网络服务账户权限等于普通用户</li></ul></li><li><p>配置文件（Linux家目录：home）</p><p>不同操作系统不同</p></li><li><p>用户管理命令</p></li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">net user # 列出当前账户列表</span><br><span class="line">net user xxx # 查看xxx账户的详细信息</span><br><span class="line">net user xxx 1 修改xxx账户密码为1</span><br><span class="line">net user abc 123 /add  新建一个abc账户密码为123</span><br></pre></td></tr></table></figure><h4 id="组管理"><a href="#组管理" class="headerlink" title="组管理"></a>组管理</h4><ul><li>组的作用简化权限的赋予</li><li>赋权限的方式<ul><li>用户-组-赋权限</li><li>用户-赋值权限 </li></ul></li><li>内置组<ul><li>adminstrators 管理员组</li><li>guests 来宾组</li><li>users 普通用户，默认新用户组</li><li>networks 网络配置组 </li><li>prints 打印机组</li><li>Remote Desktop 远程桌面组 </li></ul></li><li>组管理命令</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">net localgroup # 列出组的列表</span><br><span class="line">net localgroup adminstrators # 查看该组成员</span><br><span class="line">net localgroup adminstrators xxx /add 添加xxx用户为管理员（提权）</span><br><span class="line">net localgroup adminstrators xxx /del 删除管理员xxx用户（降权）</span><br><span class="line">net user shimisi /active:yes # 激活账户</span><br><span class="line">net user shimisi /active:no # 禁用账户</span><br></pre></td></tr></table></figure><h2 id="远程管理"><a href="#远程管理" class="headerlink" title="远程管理"></a>远程管理</h2><h3 id="远程管理类型"><a href="#远程管理类型" class="headerlink" title="远程管理类型"></a>远程管理类型</h3><ul><li>远程桌面（图形）</li><li>telnet（命令行）</li></ul><h3 id="远程桌面"><a href="#远程桌面" class="headerlink" title="远程桌面"></a>远程桌面</h3><ol><li>首先将配置网络，并实现客户机与服务器可以互通</li><li>服务器开启允许被远程控制：桌面右键属性–远程设置–选择允许–确定</li><li>客户机上：开始–运行–输入mstsc 打开远程连接工具</li><li>在<code>mstsc</code>工具上输入服务器的IP并点击确定</li><li>输入服务器的账号以及密码</li></ol><ul><li>如果使用非管理员账户登录远程，需要在服务器上将用户加入远程内置组 Remote Desktop Users中</li></ul><h3 id="telnet-不加密"><a href="#telnet-不加密" class="headerlink" title="telnet(不加密)"></a>telnet(不加密)</h3><ol><li>首先将配置网络，并实现客户机与服务器可以互通。</li><li>服务器开启允许被telnet远程控制：开始 – 运行 – 输入services.msc，并开启telnet服务。</li><li>客户机上：开始 – 运行 – 输入cmd。</li><li>在命令行窗口中输入：telnet 10.1.1.2。</li><li>输入服务器的账号及密码。</li></ol><ul><li>如使用非管理员账户登录远程，需要再服务器上将用户加入到远程桌面内置组中</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">netstat -an # 查看本机开放的所有端口</span><br><span class="line">telnet：23</span><br><span class="line">远程桌面协议RDP：3389</span><br></pre></td></tr></table></figure><h2 id="NTFS安全权限"><a href="#NTFS安全权限" class="headerlink" title="NTFS安全权限"></a>NTFS安全权限</h2><h3 id="NTFS权限概述"><a href="#NTFS权限概述" class="headerlink" title="NTFS权限概述"></a>NTFS权限概述</h3><ol><li>通过NTFS权限，实现不同的用户访问不同对象的权限</li><li>分配了正确的访问权限后，用户才能访问其资源</li><li>设置权限防止资源被篡改、删除</li></ol><h3 id="文件系统概述"><a href="#文件系统概述" class="headerlink" title="文件系统概述"></a>文件系统概述</h3><ul><li>文件系统即在外部存储设备上组织文件的方法‘</li><li>常用的文件系统<ul><li>FAT Windows</li><li>NTFS Windows</li><li>EXT Linux常见</li></ul></li><li>FAT转化为NTFS：convert  盘符：/fs：ntfs   （数据不丢失，但不可逆）</li></ul><h3 id="NTFS文件系统特点"><a href="#NTFS文件系统特点" class="headerlink" title="NTFS文件系统特点"></a>NTFS文件系统特点</h3><ul><li>提高磁盘可读性</li><li>可靠性（支持加密），加密文件系统，访问控制列表（设置权限）ACL</li><li>磁盘利用率，压缩，磁盘配额（为不同用户限制空间）</li><li>支持单个文件大于4个G</li></ul><h3 id="修改NTFS权限"><a href="#修改NTFS权限" class="headerlink" title="修改NTFS权限"></a>修改NTFS权限</h3><ol><li>取消权限继承</li></ol><ul><li>作用：取消后，可以任意修改全写列表</li><li>文件夹右键属性—安全—高级—去掉第一个对号—选择赋值</li></ul><ol><li>文件夹及文件夹权限</li></ol><ul><li>完全控制</li><li>修改</li><li>读取和执行</li><li>列举文件夹内容</li><li>读取</li><li>写入</li><li>特殊权限：控制文件权限列表的权限</li></ul><h3 id="权限累加"><a href="#权限累加" class="headerlink" title="权限累加"></a>权限累加</h3><ul><li>当用户同时属于多个组的时候，权限时累加的</li></ul><h3 id="拒绝最大"><a href="#拒绝最大" class="headerlink" title="拒绝最大"></a>拒绝最大</h3><h3 id="取得所有权"><a href="#取得所有权" class="headerlink" title="取得所有权"></a>取得所有权</h3><p>默认只有adminstrator有这个权限</p><ul><li>可以将任何文件夹的所有者改为administrator</li></ul><h3 id="强制继承"><a href="#强制继承" class="headerlink" title="强制继承"></a>强制继承</h3><ul><li>作用：对下强制继承父子关系</li><li>方法：文件夹右键属性—安全—高级—勾上第二个对号</li></ul><h3 id="文件赋值对权限的影响"><a href="#文件赋值对权限的影响" class="headerlink" title="文件赋值对权限的影响"></a>文件赋值对权限的影响</h3><ul><li>文件赋值后，文件的权限会被目标文件夹的权限覆盖，唯一不覆盖的情况时同分区移动</li></ul><h2 id="文件共享服务器"><a href="#文件共享服务器" class="headerlink" title="文件共享服务器"></a>文件共享服务器</h2><h3 id="共享服务器概述"><a href="#共享服务器概述" class="headerlink" title="共享服务器概述"></a>共享服务器概述</h3><ul><li>通过网络提供文件共享服务，提供文件下载和上传服务（cifs)</li></ul><h3 id="创建共享"><a href="#创建共享" class="headerlink" title="创建共享"></a>创建共享</h3><ul><li>方法：文件夹右键属性—共享—开启共享—设置共享名=设置共享访问权限<ol><li>在本地登录我时，只要NTFS权限的影响</li><li>在远程登录时，将受共享及NTFS权限的共同影响，取交集</li><li>建议设置共享权限everyone完全控制，然后集体的权限需求再NTFS权限中设置即可</li></ol></li><li>访问： </li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">\\[ip]   # unc地址</span><br></pre></td></tr></table></figure><h3 id="创建隐藏的共享"><a href="#创建隐藏的共享" class="headerlink" title="创建隐藏的共享"></a>创建隐藏的共享</h3><ul><li>共享名$</li></ul><h3 id="访问隐藏共享文件"><a href="#访问隐藏共享文件" class="headerlink" title="访问隐藏共享文件"></a>访问隐藏共享文件</h3><ul><li>\服务器ip\共享名$</li></ul><h3 id="共享相关命令"><a href="#共享相关命令" class="headerlink" title="共享相关命令"></a>共享相关命令</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">net share  # 列出共享列表</span><br><span class="line">net share 共享名=共享路径   # 创建共享</span><br><span class="line">net share 共享名 /del  # 删除共享</span><br></pre></td></tr></table></figure><h3 id="屏蔽系统隐藏共享自动产生"><a href="#屏蔽系统隐藏共享自动产生" class="headerlink" title="屏蔽系统隐藏共享自动产生"></a>屏蔽系统隐藏共享自动产生</h3><ul><li>打开注册表</li><li>定位共享注册表位置</li></ul><p>HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Services\LanmanServer\Parameters 右键新建DWORD类型的AutoShareServer，值为-0 </p><h3 id="关闭445服务"><a href="#关闭445服务" class="headerlink" title="关闭445服务"></a>关闭445服务</h3><ul><li>通过关闭445端口来屏蔽病毒传入<ul><li>打开services.msc,停止进行通话server服务</li><li>进制被访问455，配置防火墙入站规则</li></ul></li></ul><h2 id="DHCP部署与安全"><a href="#DHCP部署与安全" class="headerlink" title="DHCP部署与安全"></a>DHCP部署与安全</h2><h3 id="DHCP（Dynamic-Host-Configure-Protocol-）"><a href="#DHCP（Dynamic-Host-Configure-Protocol-）" class="headerlink" title="DHCP（Dynamic Host Configure Protocol ）"></a>DHCP（Dynamic Host Configure Protocol ）</h3><ul><li>自动分配ip地址</li></ul><h3 id="DHCP相关概念"><a href="#DHCP相关概念" class="headerlink" title="DHCP相关概念"></a>DHCP相关概念</h3><ul><li>地址池/作用域：（ip,子网掩码，网关，DNS，租期）</li></ul><h3 id="DHCP协议端口"><a href="#DHCP协议端口" class="headerlink" title="DHCP协议端口"></a>DHCP协议端口</h3><ul><li>UDP67，68</li></ul><h3 id="DHCP优点"><a href="#DHCP优点" class="headerlink" title="DHCP优点"></a>DHCP优点</h3><ul><li>减少工作量</li><li>避免IP冲突</li><li>提高地址利用率</li></ul><h3 id="DHCP原理"><a href="#DHCP原理" class="headerlink" title="DHCP原理"></a>DHCP原理</h3><ul><li>DHCP租约过程，分为四个步骤</li></ul><ol><li>客户机发送DHCP Discovery广播包：客户机广播请求IP地址（包含客户机的MAC地址）</li><li>服务器响应DHCP Offer广播包：服务器响应提供的IP地址（但子网掩码，网关等参数无效）</li><li>客户机发送DHCP Request广播包：客户机选择IP（确认使用哪个ip）</li><li>服务器发送DHCP ACK广播包：服务器确认了租约，并提供网卡详细参数IP、子网掩码，网关，DNS，租期等</li></ol><h3 id="DHCP续约"><a href="#DHCP续约" class="headerlink" title="DHCP续约"></a>DHCP续约</h3><ul><li>50%过后，客户机会再次发送DHCP Request包，进行续约，如果服务器无响应，则继续使用并在87.5%，再次发送DCHP Request包，进行续约，如X仍然无响应，并释放IP地址，及重新发送DHCP Discovery 广播包来获取IP地址，当无任何服务器响应是，自动给自己分配一个169.254.x.x，全球同意无效地址，用于临时内网通信！</li></ul><h3 id="部署DHCP服务器"><a href="#部署DHCP服务器" class="headerlink" title="部署DHCP服务器"></a>部署DHCP服务器</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">ipconfig /release  # 释放IP</span><br><span class="line">取消租约，或者改为手动配置IP,也可以释放租约</span><br><span class="line">ipconfig /renew    # 重新获取IP</span><br><span class="line">有IP时发送Request续约，无IP时发送Discovery重新获取</span><br></pre></td></tr></table></figure><h3 id="地址保留"><a href="#地址保留" class="headerlink" title="地址保留"></a>地址保留</h3><ul><li>对指定的MAC地址，固定动态分配IP地址</li></ul><h3 id="选项优先级"><a href="#选项优先级" class="headerlink" title="选项优先级"></a>选项优先级</h3><ul><li>作用域选项&gt;服务器选项</li></ul><p>当服务器上有多个作用域时，也可以在服务器选项上设置DNS服务器</p><h3 id="DHCP备份"><a href="#DHCP备份" class="headerlink" title="DHCP备份"></a>DHCP备份</h3><h3 id="DHCP攻击与防御"><a href="#DHCP攻击与防御" class="headerlink" title="DHCP攻击与防御"></a>DHCP攻击与防御</h3><ol><li>攻击DHCP服务器：频繁的发送伪装DHCP请求，直到将DHCP地址池资源耗尽</li></ol><ul><li>防御：在交换机（管理型）端口上做动态MAC地址绑定</li></ul><ol><li>伪装DHCP 服务器攻击：hack通过将自己部署的DHCP服务器，为客户机提供非法IP</li></ol><ul><li>防御：在交换机上（管理型），除合法的DHCP服务器所在的接口外，全部设置为禁止发送DHCP Offer包</li></ul><h2 id="DNS部署与安全"><a href="#DNS部署与安全" class="headerlink" title="DNS部署与安全"></a>DNS部署与安全</h2><h3 id="DNS（Domain-Name-Service）"><a href="#DNS（Domain-Name-Service）" class="headerlink" title="DNS（Domain Name Service）"></a>DNS（Domain Name Service）</h3><ul><li>域名服务：为客户机提供域名解析服务</li></ul><h3 id="域名组成"><a href="#域名组成" class="headerlink" title="域名组成"></a>域名组成</h3><ul><li><a href="http://www.xxx.com是一个域名,但从严格意义上说“xxx.com”才被称为域名(全球唯一),而“www”是主机名/">www.xxx.com是一个域名，但从严格意义上说“xxx.com”才被称为域名（全球唯一），而“www”是主机名</a></li><li>“主机名.域名”称为完全限定域名（FQDN），一个域名下可以有多个主机，域名全球唯一，那么“主机名 .域名”肯定也全球唯一。 </li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">FQDN=主机名.DNS后缀</span><br><span class="line">FQDN（完整合格的域名）</span><br></pre></td></tr></table></figure><h3 id="监听端口"><a href="#监听端口" class="headerlink" title="监听端口"></a>监听端口</h3><ul><li>TCP53</li><li>UDP53</li></ul><h3 id="DNS解析种类"><a href="#DNS解析种类" class="headerlink" title="DNS解析种类"></a>DNS解析种类</h3><p>按照查询种类</p><ol><li>递归查询：客户机与本地DNS服务器之间</li><li>迭代查询：本地DNS服务器与根等其他DNS服务器的解析过程</li></ol><p>安装查询内容分：</p><ol><li>正向解析：已知域名，解析IP地址</li><li>反向解析：已知IP地址，解析域名</li></ol><h3 id="DNS服务器搭建过程"><a href="#DNS服务器搭建过程" class="headerlink" title="DNS服务器搭建过程"></a>DNS服务器搭建过程</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ipconfig /flushdns     #清空本地缓存DNS</span><br><span class="line">ipcpnfig /displaydns   #查看本地缓存DNS</span><br></pre></td></tr></table></figure><h3 id="DNS请求顺序"><a href="#DNS请求顺序" class="headerlink" title="DNS请求顺序"></a>DNS请求顺序</h3><p>客户机处理dns请求顺序：DNS缓存—本地hosts文件—找本地DNS服务器</p><p>服务器处理DNS请求顺序：DNS高速缓存—本地区域解析文件—转发器—跟</p><ul><li>A记录：正向解析记录</li><li>CNAME：别名</li><li>PTR记录：反向解析记录</li><li>MX：邮件交换记录</li><li>PTR记录：反向解析记录</li><li>MX：邮件交换记录</li><li>NS：域名服务器解析</li></ul><h3 id="DNS服务器分类"><a href="#DNS服务器分类" class="headerlink" title="DNS服务器分类"></a>DNS服务器分类</h3><ul><li>主要名称服务器</li><li>辅助名称服务器</li><li>跟名称服务器</li><li>告诉缓存名称服务器</li></ul><h2 id="WEB-服务器"><a href="#WEB-服务器" class="headerlink" title="WEB 服务器"></a>WEB 服务器</h2><h3 id="web服务器"><a href="#web服务器" class="headerlink" title="web服务器"></a>web服务器</h3><ul><li>网页服务器或HTTP服务器</li><li>web服务器使用的协议是http/https</li></ul><h3 id="端口号"><a href="#端口号" class="headerlink" title="端口号"></a>端口号</h3><ul><li>http协议端口：TCP80</li><li>https协议端口号：TCP443</li></ul><h3 id="web服务器发布软件"><a href="#web服务器发布软件" class="headerlink" title="web服务器发布软件"></a>web服务器发布软件</h3><p>微软：IIS(可发布WEB网站和FTP站点)</p><p>Linux：Apacha/LAMP/Tomcat/Nginx</p><p>第三方：phpstudy，XAMPP</p><h3 id="部署web服务器"><a href="#部署web服务器" class="headerlink" title="部署web服务器"></a>部署web服务器</h3><ol><li>配置静态ip地址</li><li>安装IIS-WEB插件</li><li>停用默认站点</li><li>新建网站-地址端口绑定-指定站点路径-设置权限</li><li>设置默认文档（设置首页）</li><li>一台服务器同时发布多个web站点</li></ol><h3 id="一台服务器发布多个web站点"><a href="#一台服务器发布多个web站点" class="headerlink" title="一台服务器发布多个web站点"></a>一台服务器发布多个web站点</h3><ul><li>不同的IP，相同的端口</li><li>相同的IP，不同的端口</li><li>相同的IP，相同的端口，不同的域名（主机头）</li></ul><p>前两种方法都比较麻烦，不适合对外，适合测试，绑定不同的域名更加方便，需要打开dns服务器。 </p><h3 id="网站类型"><a href="#网站类型" class="headerlink" title="网站类型"></a>网站类型</h3><ul><li>静态网站：一般扩展名为.html/.html（无后台数据库）</li><li>动态网页：一般扩展名为.asp/.php(有后台数据库，asp/php可以连接前台页面与后台数据库)</li></ul><h2 id="FTP服务器"><a href="#FTP服务器" class="headerlink" title="FTP服务器"></a>FTP服务器</h2><h3 id="FTP（File-Transfor-Protocol）"><a href="#FTP（File-Transfor-Protocol）" class="headerlink" title="FTP（File Transfor Protocol）"></a>FTP（File Transfor Protocol）</h3><ul><li>文件传输协议</li></ul><h3 id="端口号-1"><a href="#端口号-1" class="headerlink" title="端口号"></a>端口号</h3><ul><li>TCP20</li><li>TCP21</li></ul><h3 id="FTP工作模式"><a href="#FTP工作模式" class="headerlink" title="FTP工作模式"></a>FTP工作模式</h3><ol><li>主动模式</li></ol><ul><li>21端口：控制端口</li><li>20端口：数据端口</li></ul><p>服务器主动发送</p><ol><li>被动模式</li></ol><ul><li>21端口+随机端口作为数据传输口</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">主被动模式：阐述的是数据传输过程</span><br><span class="line">主被动模式：选择权在客户机上</span><br><span class="line">主被动模式：所谓主或被是站在服务器的角度上</span><br></pre></td></tr></table></figure><h3 id="配置FTP服务器"><a href="#配置FTP服务器" class="headerlink" title="配置FTP服务器"></a>配置FTP服务器</h3><ol><li>配置静态ip</li><li>安装IIS—ftp软件</li><li>使用默认站点或创建新的站点<ul><li>注意：用户最终权限为FTP权限和NTFS权限取交集</li><li>建议：FTP权限全部勾选，然后具体在NFTS里做</li></ul></li><li>去掉匿名登录</li></ol><h2 id="域"><a href="#域" class="headerlink" title="域"></a>域</h2><h3 id="域-Domain"><a href="#域-Domain" class="headerlink" title="域(Domain)"></a>域(Domain)</h3><ol><li>内网环境<ul><li>工作组：默认模式，人人平等，不方便管理</li><li>域：人人不平等，集中管理，同一管理</li></ul></li><li>域的特点<ul><li>集中/统一管理</li></ul></li><li>域的组成<ul><li>域控制器：DC（Domian Controller）</li><li>成员机</li></ul></li></ol><h3 id="域的部署"><a href="#域的部署" class="headerlink" title="域的部署"></a>域的部署</h3><ol><li>安装域控制器，生成域环境</li><li>安装活动目录，生成域控制器</li><li>活动目录：Active Directory = AD</li></ol><h3 id="活动目录"><a href="#活动目录" class="headerlink" title="活动目录"></a>活动目录</h3><ul><li>AD</li><li>集中管理/统一管理 </li></ul><h3 id="组织单位和组策略"><a href="#组织单位和组策略" class="headerlink" title="组织单位和组策略"></a>组织单位和组策略</h3><ol><li>OU：组织单位</li></ol><ul><li>作用：用于归类域资源（域用户、域计算机、域组）</li></ul><ol><li>组策略：Group Policy = GPO</li></ol><ul><li>作用：通过组策略可以修改计算机的各种属性，如开始菜单、桌面背景、网络参数等。</li></ul><p>重点：组策略在域中，是基于OU来下发的！！<br>组策略在域中下发后，用户的应用顺序是：LSDOU<br>L：本地；S：站点；D：域；OU<br>会发生冲突，最后应用的会生效冲突的情况下<br>在应用过程中，如果出现冲突，后应用的生效！</p><ul><li>作用：通过组策略可以修改计算机的各种属性，如开始菜单、桌面背景、网络参数等。</li></ul><p>重点：组策略在域中，是基于OU来下发的！！</p><h3 id="LSDOU（策略优先级"><a href="#LSDOU（策略优先级" class="headerlink" title="LSDOU（策略优先级)"></a>LSDOU（策略优先级)</h3><p>在应用过程中，如果出现冲突，后应用的生效</p><p>组策略的阻止继承及强制！</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">**********正常情况下：LSDOU顺</span><br><span class="line">上级OU： 桌面：aa 运行：删除</span><br><span class="line">下级OU： 桌面：未配置 运行：不删除</span><br><span class="line">下级OU用户结果：桌面：aa 运行：不删除 </span><br><span class="line">*********下级OU设置了组织继承： </span><br><span class="line">下级OU用户结果：桌面：未配置 运行：不删除 </span><br><span class="line">××××××上级设置了强制：</span><br><span class="line">下级OU用户结果：桌面：aa 运行：删除</span><br><span class="line">注意：当上级强制和下级阻止继承同时设置，强制生效！</span><br></pre></td></tr></table></figure><h3 id="部署安装活动目录"><a href="#部署安装活动目录" class="headerlink" title="部署安装活动目录"></a>部署安装活动目录</h3><h4 id="步骤"><a href="#步骤" class="headerlink" title="步骤"></a>步骤</h4><ol><li>开启2008虚拟机，并桥接到vmnet2</li><li>配置静态IP地址10.1.1.1/24</li><li>开始-运行-输入dcpromo,安装活动目录。<ul><li>弹出向导：勾选DNS-新林中新建域-功能级别都设置为2003-域的FQDN（qf.com）–设置目录服务还原密码666.com-勾选安装后重启</li></ul></li><li>在DC上登录域qf\administrator<ul><li>DC的本地管理员升级为域管理员</li></ul></li><li>验证AD是否安装成功：<ul><li>计算机右键属性-所属域</li><li>DNS服务器中是否自动创建qf.com区域文件及</li><li>自动注册DC的域名解析记录</li><li>开始-管理工具-A D 用户和计算机</li></ul></li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">computer：普通域成员机列表</span><br><span class="line">Domain Controller：DC列表</span><br><span class="line">users：域账号</span><br></pre></td></tr></table></figure><h4 id="PC加入域"><a href="#PC加入域" class="headerlink" title="PC加入域"></a>PC加入域</h4><p>操作环境win2008,两个客户机win7和xp </p><ol><li>配置IP，并指DNS </li><li>计算机右键属性–更改–加入qf.com域 </li><li>重启加入域后，成功使用域用户登录成员机 </li></ol><h3 id="常见问题"><a href="#常见问题" class="headerlink" title="常见问题"></a>常见问题</h3><ol><li>加入域不成功<ul><li>网络是不是不通</li><li>解析是否成功解析</li><li>是否为DNS缓存问题</li></ul></li><li>登入域不成功<ul><li>如XP，以勾选登录域QF，不用再写gcd.com\xiaofei.wen</li></ul></li><li>域用户的权限</li></ol><ul><li>建议将域用户加入到普通成员机的本地管理员组中</li></ul><ol><li>加入域不成功</li></ol><p>网络是不是不通</p><p>解析是否成功解析</p><p>是否为DNS缓存问题</p><ol start="2"><li>登入域不成功</li></ol><p>如XP，以勾选登录域QF，不用再写gcd.com\xiaofei.wen</p><ol start="3"><li>域用户的权限</li></ol><p>建议将域用户加入到普通成员机的本地管理员组中</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">×××××××本店管理员组：administrators</span><br><span class="line">×××××××域管理员组：Domain Admins</span><br></pre></td></tr></table></figure><h2 id="PKI"><a href="#PKI" class="headerlink" title="PKI"></a>PKI</h2><h3 id="PKI-1"><a href="#PKI-1" class="headerlink" title="PKI"></a>PKI</h3><ul><li>名称：Public Key Infrastruction 公钥基础设施</li><li>作用：通过加密技术和数字签名保证信息的安全</li><li>组成：公钥机密技术、数字证书、CA、RA</li></ul><h3 id="信息安全三要素"><a href="#信息安全三要素" class="headerlink" title="信息安全三要素"></a>信息安全三要素</h3><p>机密性</p><p>完整性</p><p>身份验证/操作的不可否认性</p><h3 id="哪些IT领域用到PKI："><a href="#哪些IT领域用到PKI：" class="headerlink" title="哪些IT领域用到PKI："></a>哪些IT领域用到PKI：</h3><ol><li><p>SSL/HTTPS</p></li><li><p>IPsecVPN</p></li><li><p>部分远程访问VPN</p></li></ol><h3 id="公钥加密技术"><a href="#公钥加密技术" class="headerlink" title="公钥加密技术"></a>公钥加密技术</h3><p>作用：实现对信息加密、数字签名等安全保障</p><p>加密算法：</p><ol><li>对称加密算法</li></ol><ul><li>加解密道的密钥一致</li><li>DES 3DES AES</li></ul><ol><li>非对称加密算法</li></ol><ul><li><p>通信双方各自产生一对公私钥</p></li><li><p>双方各自交换公钥</p></li><li><p>公钥和私钥互为加解密关系！</p></li><li><p>公私钥不可互相逆推！</p></li></ul><p>RSA DH</p><h3 id="HASH算法"><a href="#HASH算法" class="headerlink" title="HASH算法"></a>HASH算法</h3><ul><li>MD5 SHA（不可逆,验证完整性）</li><li>HASH值 = 摘要</li></ul><h3 id="数字签名"><a href="#数字签名" class="headerlink" title="数字签名"></a>数字签名</h3><ul><li>用自己的私钥对摘要加密得出的密文就是数字签名</li></ul><h3 id="证书："><a href="#证书：" class="headerlink" title="证书："></a>证书：</h3><blockquote><p>证书用于保证公密钥的合法性</p><p>证书格式遵循X.509标准</p><p>数字证书保护信息：</p><p>使用者的公钥值</p><p>使用者标识信息（如名称和电子邮件地址）</p><p>有效期（证书的有效时间）</p><p>颁发者标识信息</p><p>颁发者的数字签名</p><p>数字证书由权威公正的 第三方机构即CA签发</p></blockquote><h3 id="PKI实验"><a href="#PKI实验" class="headerlink" title="PKI实验"></a>PKI实验</h3><p>实验步骤;</p><p>1、配置服务器IP地址10.1.1.2/24</p><p>2、安装IIS服务，并建立站点。</p><p>在xp客户机上验证访问 <a href="http://www.flower.com/">http://www.flower.com</a></p><p>3、安装CA组件</p><p>4、打开IIS，先生成证书申请文件</p><p>5、向CA申请证书：</p><p>打开网页：<a href="http://10.1.1.2.certsrv/">http://10.1.1.2.certsrv</a> 并向CA发送web服务器申请文件</p><p>6、CA颁发证书</p><p>7、在web服务器上下载并完成安装</p><p>8、在web服务器上启用SSL443</p><p>9、在客户端上验证</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;计算机网络&quot;&gt;&lt;a href=&quot;#计算机网络&quot; class=&quot;headerlink&quot; title=&quot;计算机网络&quot;&gt;&lt;/a&gt;计算机网络&lt;/h1&gt;&lt;h2 id=&quot;名词解释&quot;&gt;&lt;a href=&quot;#名词解释&quot; class=&quot;headerlink&quot; title=&quot;名词解释&quot;</summary>
      
    
    
    
    <category term="基础篇" scheme="http://bkystop.github.io/categories/%E5%9F%BA%E7%A1%80%E7%AF%87/"/>
    
    
    <category term="Windows" scheme="http://bkystop.github.io/tags/Windows/"/>
    
  </entry>
  
</feed>
