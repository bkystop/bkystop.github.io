<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Libraの客栈</title>
  
  
  <link href="http://bkystop.github.io/atom.xml" rel="self"/>
  
  <link href="http://bkystop.github.io/"/>
  <updated>2023-05-11T14:27:45.538Z</updated>
  <id>http://bkystop.github.io/</id>
  
  <author>
    <name>Libra</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>编码算法</title>
    <link href="http://bkystop.github.io/2023/05/11/%E7%BC%96%E7%A0%81%E7%AE%97%E6%B3%95/"/>
    <id>http://bkystop.github.io/2023/05/11/%E7%BC%96%E7%A0%81%E7%AE%97%E6%B3%95/</id>
    <published>2023-05-11T14:05:08.000Z</published>
    <updated>2023-05-11T14:27:45.538Z</updated>
    
    <content type="html"><![CDATA[<h2 id="MD5"><a href="#MD5" class="headerlink" title="MD5"></a>MD5</h2><blockquote><p>MD5是一个非常常见的摘要(hash)逻辑。特点就是小巧. 速度快. 难被破解，不可逆。（相同的内容计算出来的摘要应该是一样的）</p></blockquote><ul><li>python实现</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> hashlib <span class="keyword">import</span> md5</span><br><span class="line"></span><br><span class="line">obj = md5()</span><br><span class="line">obj.update(<span class="string">&quot;zhangsan&quot;</span>.encode(<span class="string">&quot;utf-8&quot;</span>))</span><br><span class="line"></span><br><span class="line">bs = obj.hexdigest()</span><br><span class="line"><span class="built_in">print</span>(bs)</span><br></pre></td></tr></table></figure><blockquote><p>把密文丢到网页里，发现有些网站可以直接解密。这里并不是直接解密MD5. 而是”撞库”。网站数据库里存储了大量的MD5的值，需要进行查询的时候. 只需要一条select语句就可以查询到了。</p></blockquote><p><strong>如何避免撞库</strong></p><blockquote><p>md5在进行计算的时候可以加盐</p></blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> hashlib <span class="keyword">import</span> md5</span><br><span class="line"></span><br><span class="line">salt = <span class="string">&quot;我是盐.把我加进去就没人能破解了&quot;</span></span><br><span class="line">obj = md5(salt.encode(<span class="string">&quot;utf-8&quot;</span>))  <span class="comment"># 加盐</span></span><br><span class="line">obj.update(<span class="string">&quot;zhangsan&quot;</span>.encode(<span class="string">&quot;utf-8&quot;</span>))</span><br><span class="line"></span><br><span class="line">bs = obj.hexdigest()</span><br><span class="line"><span class="built_in">print</span>(bs)</span><br></pre></td></tr></table></figure><ul><li>扩展</li></ul><blockquote><p>除了md5，还有sha1, sha256,都属于摘要算法。 都是在计算hash值。只是散列的程度不同而已。 这种算法有一个特性. 他们是散列. 不是加密. 而且, 由于hash算法是不可逆的, 所以不存在解密的逻辑.</p></blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> hashlib <span class="keyword">import</span> sha1, sha256</span><br><span class="line">sha = sha256(<span class="string">b&#x27;salt&#x27;</span>)</span><br><span class="line">sha.update(<span class="string">b&#x27;zhangsan&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(sha.hexdigest())</span><br></pre></td></tr></table></figure><h2 id="base64编码"><a href="#base64编码" class="headerlink" title="base64编码"></a>base64编码</h2><h3 id="base64-编码的优点"><a href="#base64-编码的优点" class="headerlink" title="base64 编码的优点"></a>base64 编码的优点</h3><ul><li>算法是编码，不是压缩，编码后只会增加字节数，算法可逆，解码很=方便，加密后的字符串只有【0-9a-zA-Z+/=】，便于在网络中传输。</li></ul><h3 id="原理"><a href="#原理" class="headerlink" title="原理"></a>原理</h3><blockquote><p>Base64编码，是由64个字符组成编码集：<strong>26个大写字母A<del>Z，26个小写字母a</del>z，10个数字0~9，符号“+”与符号“/”</strong>。Base64编码的基本思路是<strong>将原始数据的三个字节拆分转化为四个字节</strong>，然后根据Base64的对应表。当原始数据凑不够三个字节时，编码结果中会使用额外的<strong>符号“=”</strong>来表示这种情况。</p></blockquote><img src="/2023/05/11/%E7%BC%96%E7%A0%81%E7%AE%97%E6%B3%95/image-20230511222113390.png" class title="image-20230511222113390"><blockquote><p>一个Base64字符实际上代表着6个二进制位(bit)，4个Base64字符对应3字节字符串/二进制数据。</p></blockquote><ul><li>3个字符为一组的的base64编码方式如：</li></ul><img src="/2023/05/11/%E7%BC%96%E7%A0%81%E7%AE%97%E6%B3%95/image-20230511222147543.png" class title="image-20230511222147543"><ul><li>小于3个字符为一组的编码方式如：</li></ul><img src="/2023/05/11/%E7%BC%96%E7%A0%81%E7%AE%97%E6%B3%95/image-20230511222158838.png" class title="image-20230511222158838"><ul><li>示例</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> base64</span><br><span class="line"></span><br><span class="line">bs = <span class="string">&quot;you&quot;</span>.encode(<span class="string">&quot;utf-8&quot;</span>)</span><br><span class="line"><span class="comment"># 把字节转化成b64</span></span><br><span class="line"><span class="built_in">print</span>(base64.b64encode(bs).decode())</span><br><span class="line"></span><br><span class="line">bs = <span class="string">&quot;yo&quot;</span>.encode(<span class="string">&quot;utf-8&quot;</span>)</span><br><span class="line"><span class="comment"># 把字节转化成b64</span></span><br><span class="line"><span class="built_in">print</span>(base64.b64encode(bs).decode())</span><br><span class="line"></span><br><span class="line"><span class="comment"># 猜测结果</span></span><br><span class="line">bs = <span class="string">&quot;y&quot;</span>.encode(<span class="string">&quot;utf-8&quot;</span>)</span><br><span class="line"><span class="comment"># 把字节转化成b64</span></span><br><span class="line"><span class="built_in">print</span>(base64.b64encode(bs).decode())</span><br></pre></td></tr></table></figure><p><strong>base64长度要求. 字符串长度必须是4的倍数</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">s = <span class="string">&quot;qwe2a&quot;</span></span><br><span class="line"><span class="comment"># ret = base64.b64decode(s)</span></span><br><span class="line"><span class="comment"># print(ret)</span></span><br><span class="line"></span><br><span class="line">s += (<span class="string">&quot;=&quot;</span> * (<span class="number">4</span> - <span class="built_in">len</span>(s) % <span class="number">4</span>))</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;填充后&quot;</span>, s)</span><br><span class="line">ret = base64.b64decode(s).decode()</span><br><span class="line"><span class="built_in">print</span>(ret)</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;MD5&quot;&gt;&lt;a href=&quot;#MD5&quot; class=&quot;headerlink&quot; title=&quot;MD5&quot;&gt;&lt;/a&gt;MD5&lt;/h2&gt;&lt;blockquote&gt;
&lt;p&gt;MD5是一个非常常见的摘要(hash)逻辑。特点就是小巧. 速度快. 难被破解，不可逆。（相同的内容计算出</summary>
      
    
    
    
    <category term="安全篇" scheme="http://bkystop.github.io/categories/%E5%AE%89%E5%85%A8%E7%AF%87/"/>
    
    
    <category term="编码算法" scheme="http://bkystop.github.io/tags/%E7%BC%96%E7%A0%81%E7%AE%97%E6%B3%95/"/>
    
  </entry>
  
  <entry>
    <title>JS进阶及逆向</title>
    <link href="http://bkystop.github.io/2023/05/07/JS%E8%BF%9B%E9%98%B6%E5%8F%8A%E9%80%86%E5%90%91/"/>
    <id>http://bkystop.github.io/2023/05/07/JS%E8%BF%9B%E9%98%B6%E5%8F%8A%E9%80%86%E5%90%91/</id>
    <published>2023-05-07T14:42:58.000Z</published>
    <updated>2023-05-11T13:19:30.078Z</updated>
    
    <content type="html"><![CDATA[<h2 id="JavaScript基础"><a href="#JavaScript基础" class="headerlink" title="JavaScript基础"></a>JavaScript基础</h2><h3 id="数据类型"><a href="#数据类型" class="headerlink" title="数据类型"></a>数据类型</h3><p>数值型：number（凡是数字都是数值型，不区分整数和小数）<br>字符串：string（凡是引号包裹起来的内容全部都是字符串）<br>布尔：bool（true、false）<br>对象类型：object（特殊取值null）<br>未定义型：undefined<br><strong>javascript一切皆对象</strong></p><h3 id="object对象"><a href="#object对象" class="headerlink" title="object对象"></a>object对象</h3><h4 id="Date对象"><a href="#Date对象" class="headerlink" title="Date对象"></a>Date对象</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> now=<span class="keyword">new</span> <span class="title class_">Date</span>();</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(now.<span class="title function_">toLocaleString</span>( ));</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">获取日期和时间</span></span><br><span class="line"><span class="comment">now.getDate()                 获取日</span></span><br><span class="line"><span class="comment">now.getDay ()                 获取星期</span></span><br><span class="line"><span class="comment">now.getMonth ()               获取月（0-11）</span></span><br><span class="line"><span class="comment">now.getFullYear ()            获取完整年份</span></span><br><span class="line"><span class="comment">now.getYear ()                获取年</span></span><br><span class="line"><span class="comment">now.getHours ()               获取小时</span></span><br><span class="line"><span class="comment">now.getMinutes ()             获取分钟</span></span><br><span class="line"><span class="comment">now.getSeconds ()             获取秒</span></span><br><span class="line"><span class="comment">now.getMilliseconds ()        获取毫秒</span></span><br><span class="line"><span class="comment">now.getTime ()                返回累计毫秒数(从1970/1/1午夜)</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure><h4 id="Math对象"><a href="#Math对象" class="headerlink" title="Math对象"></a>Math对象</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"> <span class="comment">//  Number对象的内置方法</span></span><br><span class="line"> <span class="comment">//  toFixed(x) 保留小数位</span></span><br><span class="line"> <span class="keyword">var</span> num = <span class="number">100.3</span>;</span><br><span class="line"> <span class="keyword">var</span> ret = num.<span class="title function_">toFixed</span>(<span class="number">2</span>);</span><br><span class="line"> <span class="variable language_">console</span>.<span class="title function_">log</span>(num);  <span class="comment">// 100.3</span></span><br><span class="line"> <span class="variable language_">console</span>.<span class="title function_">log</span>(ret);  <span class="comment">// 100.30</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// Math对象的内置方法</span></span><br><span class="line"><span class="comment">// abs(x)  返回数值的绝对值</span></span><br><span class="line"><span class="comment">// var num = -10;</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>( <span class="title class_">Math</span>.<span class="title function_">abs</span>(num) ); <span class="comment">// 10</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ceil(x)  向上取整</span></span><br><span class="line"><span class="keyword">var</span> num = <span class="number">10.3</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>( <span class="title class_">Math</span>.<span class="title function_">ceil</span>(num) ); <span class="comment">// 11</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// floor(x) 向下取整</span></span><br><span class="line"><span class="keyword">var</span> num = <span class="number">10.3</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>( <span class="title class_">Math</span>.<span class="title function_">floor</span>(num) ); <span class="comment">// 10</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// max(x,y,z,...,n)</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>( <span class="title class_">Math</span>.<span class="title function_">max</span>(<span class="number">3</span>,<span class="number">56</span>,<span class="number">3</span>) ); <span class="comment">// 56</span></span><br><span class="line"><span class="comment">// min(x,y,z,...,n)</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// pow(x,y)</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Math</span>.<span class="title function_">pow</span>(<span class="number">3</span>, <span class="number">2</span>)); <span class="comment">// 相等于 3**2</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>( <span class="number">3</span>**<span class="number">2</span> ); <span class="comment">// 使用这个,上面废弃</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// random()  生成0-1随机数</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Math</span>.<span class="title function_">random</span>());</span><br><span class="line"></span><br><span class="line"><span class="comment">// 生成0-10之间的数值</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>( <span class="title class_">Math</span>.<span class="title function_">random</span>() * <span class="number">10</span> );</span><br><span class="line"></span><br><span class="line"><span class="comment">// round(x) 四舍五入</span></span><br><span class="line"><span class="comment">// 生成0-10之间的整数</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>( <span class="title class_">Math</span>.<span class="title function_">round</span>( <span class="title class_">Math</span>.<span class="title function_">random</span>() * <span class="number">10</span> ) );</span><br></pre></td></tr></table></figure><h3 id="Function对象"><a href="#Function对象" class="headerlink" title="Function对象"></a>Function对象</h3><ul><li>函数作用域</li></ul><blockquote><p>任何程序设计语言都有作用域的概念，简单的说，作用域就是变量与函数的可访问范围，即作用域控制着变量与函数的可见性和生命周期。在JavaScript中，变量的作用域有全局作用域和局部作用域两种。</p><p>局部变量,是在函数内部声明,它的生命周期在当前函数被调用的时候, 当函数调用完毕以后,则内存中自动销毁当前变量.</p><p>全局变量,是在函数外部声明,它的生命周期在当前文件中被声明以后就保存在内存中,直到当前文件执行完毕以后,才会被内存销毁掉。</p></blockquote><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> name = <span class="string">&quot;zhangsan&quot;</span>; <span class="comment">// 声明一个全局变量 name并赋值”zhangsan“</span></span><br><span class="line">name = <span class="string">&quot;张三&quot;</span>;  <span class="comment">// 对已存在的变量name重新赋值 ”张三“</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(name);</span><br><span class="line"></span><br><span class="line">age = <span class="number">18</span>   <span class="comment">// 之前不存在age变量，这里等同于var age = 19 即声明全局变量age并赋值为18</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span>  gender = <span class="string">&quot;man&quot;</span></span><br><span class="line"><span class="keyword">var</span>  gender = <span class="string">&quot;women&quot;</span> <span class="comment">// 原内存释放与新内存开辟，指针指向新开辟的内存</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(gender)</span><br></pre></td></tr></table></figure><blockquote><p>函数内部直接使用变量,则默认调用了全局的变量</p><p>使用变量的时候,解释器会在当前花括号范围值搜索是否有关键字var 或者 let 声明了变量,如果没有,则一层一层往外查找,如最终查找不到,则直接报错! </p><p>变量名 is not define!</p></blockquote><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> num = <span class="number">10</span>; <span class="comment">// 在函数外部声明的变量, 全局变量</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">func</span>(<span class="params"></span>)&#123;</span><br><span class="line">    num = <span class="number">20</span>; <span class="comment">// 函数内部直接使用变量,则默认调用了全局的变量,</span></span><br><span class="line">    <span class="comment">//var num = 20; // 函数内部使用var 或者 let声明的变量则是局部变量</span></span><br><span class="line">              </span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;函数内部num：&quot;</span>,num)</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">func</span>();</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;全局num：&quot;</span>,num);</span><br></pre></td></tr></table></figure><h4 id="匿名函数"><a href="#匿名函数" class="headerlink" title="匿名函数"></a>匿名函数</h4><blockquote><p>匿名函数，即没有变量名的函数</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 匿名函数赋值变量</span></span><br><span class="line"> <span class="keyword">var</span> foo = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">     <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;这是一个匿名函数！&quot;</span>)</span><br><span class="line"> &#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 匿名函数的自执行</span></span><br><span class="line">(<span class="keyword">function</span> (<span class="params">x,y</span>) &#123;</span><br><span class="line">     <span class="variable language_">console</span>.<span class="title function_">log</span>(x+y);</span><br><span class="line"> &#125;)(<span class="number">2</span>,<span class="number">3</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 匿名函数作为一个高阶函数使用</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">bar</span>(<span class="params"></span>) &#123;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;inner函数！&quot;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">bar</span>()()</span><br></pre></td></tr></table></figure><h4 id="闭包函数"><a href="#闭包函数" class="headerlink" title="闭包函数"></a>闭包函数</h4><blockquote><p>闭包（英语：Closure），又称词法闭包（Lexical Closure）或函数闭包（function closures），是引用了自由变量（外部非全局）的函数。</p><p>一个函数定义中引用了函数外定义的变量，并且该函数可以在其定义环境外被执行。</p></blockquote><blockquote><p>分别编写两个js脚本，在运行时, 在同一html内执行。他们拥有相同的作用域。 此时的变量不安全,造成全局变量污染。</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> key = <span class="string">&quot;123456&quot;</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">foo</span>(<span class="params"></span>)&#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(key)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">var</span> key = <span class="string">&quot;abcdefg&quot;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">function</span> <span class="title function_">bar</span>(<span class="params"></span>)&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="variable language_">console</span>.<span class="title function_">log</span>(key)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;test01.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;test02.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><blockquote><p>在函数内和代码块内声明的变量，尤其是函数内。</p><p>声明出来的变量它是一个局部变量. 外界是无法进行访问的，即函数是可以开辟独立的作用域环境的。</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> f = (<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">let</span> key = <span class="string">&quot;123456&quot;</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">function</span> <span class="title function_">foo</span>(<span class="params"></span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> key</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> foo</span><br><span class="line">    &#125;)()</span><br><span class="line"></span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">var</span> b = (<span class="keyword">function</span> (<span class="params"></span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="keyword">let</span> key = <span class="string">&quot;abcdefg&quot;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="keyword">function</span> <span class="title function_">bar</span>(<span class="params"></span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="keyword">return</span> key</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="keyword">return</span> bar</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;)()</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;test01.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;test02.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">     <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">f</span>())</span></span><br><span class="line"><span class="language-javascript">     <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">b</span>())</span></span><br><span class="line"><span class="language-javascript"> </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="prototype-原型对象"><a href="#prototype-原型对象" class="headerlink" title="prototype 原型对象"></a>prototype 原型对象</h4><blockquote><p>prototype(原型对象)就是一个容器，存放公共的方法给对象使用，对象可以直接访问原型对象中的方法和属性，类似Python的类对象</p></blockquote><p><strong>原型对象和函数之间的关系</strong></p><blockquote><p>每个函数都会有一个<code>prototype</code>属性,指向原型对象.</p><p>每个原型对象都会有一个<code>constructor</code>属性,指向函数.</p><p>总结:每个函数与原型对象之间的关系是<code>互相引用</code>.</p></blockquote><img src="/2023/05/07/JS%E8%BF%9B%E9%98%B6%E5%8F%8A%E9%80%86%E5%90%91/image-20230511205511813.png" class title="image-20230511205511813"><p><strong>对象和原型对象和函数之间的关系</strong></p><img src="/2023/05/07/JS%E8%BF%9B%E9%98%B6%E5%8F%8A%E9%80%86%E5%90%91/image-20230511205549668.png" class title="image-20230511205549668"><h4 id="call和apply方法"><a href="#call和apply方法" class="headerlink" title="call和apply方法"></a>call和apply方法</h4><blockquote><p>call，apply都属于Function.prototype的一个方法，它是JavaScript引擎内在实现的，因为属于Function.prototype，所以每个Function对象实例(就是每个方法)都有call，apply属性。</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">foo.<span class="title function_">call</span>(<span class="variable language_">this</span>, arg1,arg2,arg3)</span><br><span class="line">foo.<span class="title function_">apply</span>(<span class="variable language_">this</span>, <span class="variable language_">arguments</span>)</span><br><span class="line"><span class="variable language_">this</span>.<span class="title function_">foo</span>(arg1, arg2, arg3);</span><br></pre></td></tr></table></figure><h3 id="window对象"><a href="#window对象" class="headerlink" title="window对象"></a>window对象</h3><blockquote><p>window 是客户端浏览器对象模型的基类，window 对象是客户端 JavaScript 的全局对象。一个 window 对象实际上就是一个独立的窗口，对于框架页面来说，浏览器窗口每个框架都包含一个 window 对象。</p></blockquote><ul><li>全局作用域</li></ul><blockquote><p>在客户端浏览器中，window 对象是访问 BOM 的接口，如引用 document 对象的 document 属性，引用自身的 window 和 self 属性等。同时 window 也为客户端 JavaScript 提供全局作用域。</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> username = <span class="string">&quot;yuanhao&quot;</span>;  <span class="comment">//全局变量</span></span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">f</span>(<span class="params"></span>) &#123;  <span class="comment">//全局函数</span></span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(username);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">window</span>.<span class="property">username</span>);  <span class="comment">//返回字符串“yuanhao”</span></span><br><span class="line">    <span class="variable language_">window</span>.<span class="title function_">f</span>();  <span class="comment">//返回字符串“yuanhao”</span></span><br><span class="line"></span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><ul><li>使用系统对话框</li></ul><blockquote><p>window 对象定义了 3 个人机交互的方法</p></blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">alert()  # 确定提示框</span><br><span class="line">confirm()  # 选择提示框</span><br><span class="line">prompt()   # 输入提示框</span><br></pre></td></tr></table></figure><ul><li>访问客户端对象</li></ul><blockquote><p>使用 window 对象可以访问客户端其他对象</p><ul><li>window：客户端 JavaScript 顶层对象。每当 <body> 或 <frameset> 标签出现时，window 对象就会被自动创建。</frameset></body></li><li>navigator：包含客户端有关浏览器信息。</li><li>screen：包含客户端屏幕的信息。</li><li>history：包含浏览器窗口访问过的 URL 信息。</li><li>location：包含当前网页文档的 URL 信息。</li><li>document：包含整个 HTML 文档，可被用来访问文档内容及其所有页面元素。</li></ul></blockquote><ul><li>使用定时器</li></ul><blockquote><p>window 对象包含 4 个定时器专用方法</p></blockquote><table><thead><tr><th>方法</th><th>说明</th></tr></thead><tbody><tr><td>setInterval()</td><td>按照执行的周期（单位为毫秒）调用函数或计算表达式</td></tr><tr><td>setTimeout()</td><td>在指定的毫秒数后调用函数或计算表达式</td></tr><tr><td>clearInterval()</td><td>取消由 setInterval() 方法生成的定时器</td></tr><tr><td>clearTimeout()</td><td>取消由 setTimeout() 方法生成的定时器</td></tr></tbody></table><h2 id="ES6新语法"><a href="#ES6新语法" class="headerlink" title="ES6新语法"></a>ES6新语法</h2><h3 id="var、let以及const"><a href="#var、let以及const" class="headerlink" title="var、let以及const"></a>var、let以及const</h3><blockquote><p>ES6 中引入了关键字 let 和 const 作为 var 的替代。与关键字 var 不同，这两个关键字具有块作用域。在块中声明它们时，它们只能在该块 {} 内访问。</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// for (var i=0;i&lt;10;i++)&#123;</span></span><br><span class="line"><span class="comment">//     console.log(i)</span></span><br><span class="line"><span class="comment">// &#125;</span></span><br><span class="line"><span class="comment">// console.log(i)</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> i=<span class="number">0</span>;i&lt;<span class="number">10</span>;i++)&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(i)</span><br><span class="line">&#125;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(i)</span><br></pre></td></tr></table></figure><ul><li>变量提升</li></ul><blockquote><p>实际运行的时候和我们写代码的顺序可能会不一样,把变量提前到代码块第一部分运行的逻辑被称为变量提升</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">fn</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="keyword">var</span> name;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(name);</span><br><span class="line">    name = <span class="string">&#x27;yuan&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">fn</span>()</span><br></pre></td></tr></table></figure><blockquote><p>ES6新语法用let就可以避免此问题,用let声明变量是新版本javascript提倡的一种声明变量的方案</p></blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">function fn()&#123;</span><br><span class="line">    console.log(name);  // 直接报错, let变量不可以变量提升.</span><br><span class="line">    let name = &#x27;yuan&#x27;; </span><br><span class="line">&#125;</span><br><span class="line">fn()</span><br></pre></td></tr></table></figure><h3 id="箭头函数"><a href="#箭头函数" class="headerlink" title="箭头函数"></a>箭头函数</h3><blockquote><p>ES6中简化了函数的声明语法</p></blockquote><ul><li>新写法</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> <span class="title function_">f</span> = v =&gt; v</span><br><span class="line"><span class="keyword">var</span> <span class="title function_">f</span> = (<span class="params"></span>) =&gt; <span class="number">5</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> <span class="title function_">sum</span> = (<span class="params">num1, num2</span>) =&gt; num1 + num2</span><br><span class="line"><span class="comment">// 如果箭头函数的代码块部分多于一条语句，就要使用大括号将它们括起来，并且使用return语句返回。</span></span><br><span class="line"><span class="keyword">var</span> <span class="title function_">sum</span> = (<span class="params">num1, num2</span>) =&gt; &#123;<span class="keyword">return</span> num1 + num2&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 大括号被解释为代码块，所以如果箭头函数直接返回一个对象，必须在对象外面加上括号</span></span><br><span class="line"><span class="comment">// 报错</span></span><br><span class="line"><span class="keyword">let</span> <span class="title function_">getUser</span> = id =&gt; &#123;<span class="attr">id</span>: id, <span class="attr">name</span>: <span class="string">&quot;zhang&quot;</span>&#125;</span><br><span class="line"><span class="comment">// 不报错</span></span><br><span class="line"><span class="keyword">let</span> <span class="title function_">getUser</span> = id =&gt; (&#123;<span class="attr">id</span>: id, <span class="attr">name</span>: <span class="string">&quot;zhang&quot;</span>&#125;)</span><br></pre></td></tr></table></figure><ul><li>普通写法</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> f = <span class="keyword">function</span>(<span class="params">v</span>) &#123;</span><br><span class="line"> <span class="keyword">return</span> v</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> f = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">   <span class="keyword">return</span> <span class="number">5</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> sum = <span class="keyword">function</span>(<span class="params">num1, num2</span>) &#123;</span><br><span class="line">   <span class="keyword">return</span> num1 + num2</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="对象简写"><a href="#对象简写" class="headerlink" title="对象简写"></a>对象简写</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> name = <span class="string">&quot;zhang&quot;</span></span><br><span class="line"><span class="keyword">var</span> age = <span class="number">22</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">run</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">name</span> + <span class="string">&quot; running&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">p1 = &#123;</span><br><span class="line">    name,</span><br><span class="line">    age,</span><br><span class="line">    <span class="attr">eat</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">name</span> + <span class="string">&quot; is eating&quot;</span>)</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">run</span>: run,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">p1.<span class="title function_">eat</span>()</span><br><span class="line">p1.<span class="title function_">run</span>()</span><br></pre></td></tr></table></figure><h3 id="ES6格式化"><a href="#ES6格式化" class="headerlink" title="ES6格式化"></a>ES6格式化</h3><p>S6中允许使用反引号 ` 来创建字符串，<br>此种方法创建的字符串里面可以包含由美元符号加花括号包裹的变量 ${vraible}。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> num = <span class="title class_">Math</span>.<span class="title function_">random</span>()</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`生成一个随机数：<span class="subst">$&#123;num&#125;</span>`</span>)</span><br></pre></td></tr></table></figure><h3 id="eval"><a href="#eval" class="headerlink" title="eval"></a>eval</h3><p>eval() 函数计算 JavaScript 字符串，并把它作为脚本代码来执行。</p><p>如果参数是一个表达式，eval() 函数将执行表达式。如果参数是Javascript语句，eval()将执行 Javascript 语句。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">eval</span>(string)</span><br><span class="line"><span class="comment">// </span></span><br><span class="line"><span class="built_in">eval</span>(<span class="string">&#x27;[1,2,3,4,5].map(x=&gt;x*x)&#x27;</span>)</span><br></pre></td></tr></table></figure><blockquote><p><a href="http://tools.jb51.net/password/evalencode">http://tools.jb51.net/password/evalencode</a></p></blockquote><img src="/2023/05/07/JS%E8%BF%9B%E9%98%B6%E5%8F%8A%E9%80%86%E5%90%91/image-20230425183044546-2418645.png" class title="image-20230425183044546"><h3 id="Hook函数"><a href="#Hook函数" class="headerlink" title="Hook函数"></a>Hook函数</h3><p>在 JS 逆向中，我们通常把替换原函数的过程都称为 Hook。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">foo</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;foo功能...&quot;</span>)</span><br><span class="line">    <span class="keyword">return</span> <span class="number">123</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">foo</span>()</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> _foo = foo</span><br><span class="line"></span><br><span class="line">foo = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;截断开始...&quot;</span>)</span><br><span class="line">    <span class="keyword">debugger</span>;</span><br><span class="line">    <span class="title function_">_foo</span>()</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;截断结束...&quot;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">foo</span>(<span class="params">a, b, c, d, e, f</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;foo功能...&quot;</span>)</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(a, b, c, d, e, f)</span><br><span class="line">    <span class="keyword">return</span> <span class="number">123</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> _foo = foo</span><br><span class="line"></span><br><span class="line">foo = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;截断开始...&quot;</span>)</span><br><span class="line">    <span class="comment">// _foo(arguments)</span></span><br><span class="line">    _foo.<span class="title function_">apply</span>(<span class="variable language_">this</span>,<span class="variable language_">arguments</span>)</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;截断结束...&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">foo</span>(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>)</span><br></pre></td></tr></table></figure><h4 id="案例1-Hook-eval"><a href="#案例1-Hook-eval" class="headerlink" title="案例1: Hook eval"></a>案例1: Hook eval</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;程序开始&quot;</span>)</span><br><span class="line"><span class="comment">// eval(&quot;console.log(&#x27;yuan&#x27;)&quot;)</span></span><br><span class="line"><span class="variable language_">window</span>[<span class="string">&quot;e&quot;</span>+<span class="string">&quot;v&quot;</span>+<span class="string">&quot;a&quot;</span>+<span class="string">&quot;l&quot;</span>](<span class="string">&quot;console.log(&#x27;eval yuan&#x27;)&quot;</span>)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;程序结束&quot;</span>)</span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> _eval = <span class="built_in">eval</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">eval</span> = <span class="keyword">function</span> (<span class="params">src</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;eval截断开始...&quot;</span>)</span><br><span class="line">    <span class="keyword">debugger</span>;</span><br><span class="line">    _eval.<span class="title function_">apply</span>(<span class="variable language_">this</span>, src)</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;eval截断结束...&quot;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="案例2-Hook-JSON-stringify"><a href="#案例2-Hook-JSON-stringify" class="headerlink" title="案例2: Hook JSON.stringify"></a>案例2: Hook JSON.stringify</h4><p>JSON.stringify() 方法用于将 JavaScript 值转换为 JSON 字符串，在某些站点的加密过程中可能会遇到，以下代码演示了遇到 JSON.stringify() 时，则插入断点：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">(<span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">var</span> stringify = <span class="title class_">JSON</span>.<span class="property">stringify</span>;</span><br><span class="line">    <span class="title class_">JSON</span>.<span class="property">stringify</span> = <span class="keyword">function</span>(<span class="params">params</span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;Hook JSON.stringif:::&quot;</span>, params);</span><br><span class="line">        <span class="keyword">debugger</span>;</span><br><span class="line">        <span class="keyword">return</span> <span class="title function_">stringify</span>(params);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)();</span><br></pre></td></tr></table></figure><h4 id="案例3-Hook-JSON-parse"><a href="#案例3-Hook-JSON-parse" class="headerlink" title="案例3: Hook JSON.parse"></a>案例3: Hook JSON.parse</h4><p>JSON.parse() 方法用于将一个 JSON 字符串转换为对象，在某些站点的加密过程中可能会遇到，以下代码演示了遇到 JSON.parse() 时，则插入断点：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">(<span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">var</span> parse = <span class="title class_">JSON</span>.<span class="property">parse</span>;</span><br><span class="line">    <span class="title class_">JSON</span>.<span class="property">parse</span> = <span class="keyword">function</span>(<span class="params">params</span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;Hook JSON.parse::: &quot;</span>, params);</span><br><span class="line">        <span class="keyword">debugger</span>;</span><br><span class="line">        <span class="keyword">return</span> <span class="title function_">parse</span>(params);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)();</span><br></pre></td></tr></table></figure><h4 id="案例4-Hook-Cookie"><a href="#案例4-Hook-Cookie" class="headerlink" title="案例4: Hook Cookie"></a>案例4: Hook Cookie</h4><p>一般使用Object.defineProperty()来进行属性操作的hook。那么我们了解一下该方法的使用。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Object.defineProperty(obj, prop, descriptor)</span><br><span class="line"></span><br><span class="line">// 参数</span><br><span class="line">obj：对象；</span><br><span class="line">prop：对象的属性名；</span><br><span class="line">descriptor：属性描述符；</span><br></pre></td></tr></table></figure><p>一般hook使用的是get和set方法，下边简单演示一下</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> people = &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;张三&#x27;</span>,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="title class_">Object</span>.<span class="title function_">defineProperty</span>(people, <span class="string">&#x27;age&#x27;</span>, &#123;</span><br><span class="line">    <span class="attr">get</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;获取值！&#x27;</span>);</span><br><span class="line">        <span class="keyword">return</span> count;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">set</span>: <span class="keyword">function</span> (<span class="params">val</span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;设置值！&#x27;</span>);</span><br><span class="line">        count = val + <span class="number">1</span>;</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">people.<span class="property">age</span> = <span class="number">18</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(people.<span class="property">age</span>);</span><br></pre></td></tr></table></figure><p>通过这样的方法，我们就可以在设置某个值的时候，添加一些代码，比如 debugger;，让其断下，然后利用调用栈进行调试，找到参数加密、或者参数生成的地方，需要注意的是，网站加载时首先要运行我们的 Hook 代码，再运行网站自己的代码，才能够成功断下，这个过程我们可以称之为 Hook 代码的注入。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">(<span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">   <span class="string">&#x27;use strict&#x27;</span></span><br><span class="line">    <span class="keyword">var</span> _cookie = <span class="string">&quot;&quot;</span>;</span><br><span class="line">    <span class="title class_">Object</span>.<span class="title function_">defineProperty</span>(<span class="variable language_">document</span>, <span class="string">&#x27;cookie&#x27;</span>, &#123;</span><br><span class="line">        <span class="attr">set</span>: <span class="keyword">function</span>(<span class="params">val</span>) &#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(val);</span><br><span class="line">            <span class="keyword">debugger</span></span><br><span class="line">            _cookie = val;</span><br><span class="line">            <span class="keyword">return</span> val;</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">get</span>: <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> _cookie;</span><br><span class="line">        &#125;,</span><br><span class="line">&#125;);</span><br><span class="line">&#125;)()</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;JavaScript基础&quot;&gt;&lt;a href=&quot;#JavaScript基础&quot; class=&quot;headerlink&quot; title=&quot;JavaScript基础&quot;&gt;&lt;/a&gt;JavaScript基础&lt;/h2&gt;&lt;h3 id=&quot;数据类型&quot;&gt;&lt;a href=&quot;#数据类型&quot; cla</summary>
      
    
    
    
    <category term="前端篇" scheme="http://bkystop.github.io/categories/%E5%89%8D%E7%AB%AF%E7%AF%87/"/>
    
    
    <category term="JavaScript" scheme="http://bkystop.github.io/tags/JavaScript/"/>
    
  </entry>
  
  <entry>
    <title>Linux安装Pycharm</title>
    <link href="http://bkystop.github.io/2023/04/26/Linux%E5%AE%89%E8%A3%85Pycharm/"/>
    <id>http://bkystop.github.io/2023/04/26/Linux%E5%AE%89%E8%A3%85Pycharm/</id>
    <published>2023-04-26T10:35:10.000Z</published>
    <updated>2023-04-26T11:26:49.044Z</updated>
    
    <content type="html"><![CDATA[<h2 id="下载Pycharm安装包"><a href="#下载Pycharm安装包" class="headerlink" title="下载Pycharm安装包"></a>下载Pycharm安装包</h2><ul><li>下载Pycharm安装包（tar.gz）</li></ul><p><a href="https://www.jetbrains.com/pycharm/download/#section=linux">https://www.jetbrains.com/pycharm/download/#section=linux</a></p><h2 id="解压"><a href="#解压" class="headerlink" title="解压"></a>解压</h2><ul><li>解压到home目录下的一个pycharm的文件夹</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd /home</span><br><span class="line">mkdir pycharm</span><br></pre></td></tr></table></figure><ul><li>将压缩包移动到此文件夹下</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mv /home/kali/桌面/pycharm/pycharm-2023.1 /home/pycharm</span><br></pre></td></tr></table></figure><ul><li>解压</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tar -zxvf pycharm-professional-2023.1.tar.gz</span><br></pre></td></tr></table></figure><h2 id="更改host文件"><a href="#更改host文件" class="headerlink" title="更改host文件"></a>更改host文件</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/hosts</span><br></pre></td></tr></table></figure><ul><li>在后面添加一行</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">0.0.0.0 account.jetbrains.com</span><br></pre></td></tr></table></figure><h2 id="激活"><a href="#激活" class="headerlink" title="激活"></a>激活</h2><p>原博主教学链接及破解补丁下载<a href="https://segmentfault.com/a/1190000043441773">https://segmentfault.com/a/1190000043441773</a></p><ul><li>将激活包放在和home下，和解压后的pycharm2023.1在同一目录</li></ul><img src="/2023/04/26/Linux%E5%AE%89%E8%A3%85Pycharm/image-20230426190455935.png" class title="image-20230426190455935"><ul><li>修改配置文件pycharm64.exe.vmoptions</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim pycharm64.vmoptions</span><br></pre></td></tr></table></figure><ul><li>在后面添加</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">引用补丁，开头必须以 -javaagent: 开头，后面跟着补丁的绝对路径（可根据你实际的位置进行修改）,注意路径一定要填写正确，且不能包含中文，否则会导致 Pycharm 无法启动</span></span><br><span class="line">-javaagent:/home/ja-netfilter/ja-netfilter.jar</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">最新 Pycharm 版本需要添加下面两行，否则会报 key valid</span></span><br><span class="line">--add-opens=java.base/jdk.internal.org.objectweb.asm=ALL-UNNAMED</span><br><span class="line">--add-opens=java.base/jdk.internal.org.objectweb.asm.tree=ALL-UNNAMED</span><br></pre></td></tr></table></figure><h2 id="安装并启动Pycharm"><a href="#安装并启动Pycharm" class="headerlink" title="安装并启动Pycharm"></a>安装并启动Pycharm</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd /home/pycharm/pycharm-2023.1/bin</span><br><span class="line">sh pycharm.sh</span><br></pre></td></tr></table></figure><p>启动后进入界面在<code>Activation code</code>输入激活码(全部复制粘贴进去)</p><blockquote><p>EUWT4EE9X2-</p><p>eyJsaWNlbnNlSWQiOiJFVVdUNEVFOVgyIiwibGljZW5zZWVOYW1lIjoic2lnbnVwIHNjb290ZXIiLCJhc3NpZ25lZU5h</p><p>bWUiOiIiLCJhc3NpZ25lZUVtYWlsIjoiIiwibGljZW5zZVJlc3RyaWN0aW9uIjoiIiwiY2hlY2tDb25jdXJyZW50VXNlIjpmY</p><p>WxzZSwicHJvZHVjdHMiOlt7ImNvZGUiOiJQU0kiLCJmYWxsYmFja0RhdGUiOiIyMDI1LTA4LTAxIiwicGFpZFVwVG</p><p>8iOiIyMDI1LTA4LTAxIiwiZXh0ZW5kZWQiOnRydWV9LHsiY29kZSI6IlBDIiwiZmFsbGJhY2tEYXRlIjoiMjAyNS0wOC</p><p>0wMSIsInBhaWRVcFRvIjoiMjAyNS0wOC0wMSIsImV4dGVuZGVkIjpmYWxzZX0seyJjb2RlIjoiUFBDIiwiZmFsbGJh</p><p>Y2tEYXRlIjoiMjAyNS0wOC0wMSIsInBhaWRVcFRvIjoiMjAyNS0wOC0wMSIsImV4dGVuZGVkIjp0cnVlfSx7ImNvZ</p><p>GUiOiJQV1MiLCJmYWxsYmFja0RhdGUiOiIyMDI1LTA4LTAxIiwicGFpZFVwVG8iOiIyMDI1LTA4LTAxIiwiZXh0ZW5kZWQiOnRydWV9LHsiY29kZSI6IlBDV01QIiwiZmFsbGJhY2tEYXRlIjoiMjAyNS0wOC0wMSIsInBhaWRVcFRvIjoiMj</p><p>AyNS0wOC0wMSIsImV4dGVuZGVkIjp0cnVlfV0sIm1ldGFkYXRhIjoiMDEyMDIyMDkwMlBTQU4wMDAwMDUiLCJ</p><p>oYXNoIjoiVFJJQUw6MzUzOTQ0NTE3IiwiZ3JhY2VQZXJpb2REYXlzIjo3LCJhdXRvUHJvbG9uZ2F0ZWQiOmZhbHNl</p><p>LCJpc0F1dG9Qcm9sb25nYXRlZCI6ZmFsc2V9-</p><p>FT9l1nyyF9EyNmlelrLP9rGtugZ6sEs3CkYIKqGgSi608LIamge623nLLjI8f6O4EdbCfjJcPXLxklUe1O/5ASO3JnbPFU</p><p>BYUEebCWZPgPfIdjw7hfA1PsGUdw1SBvh4BEWCMVVJWVtc9ktE+gQ8ldugYjXs0s34xaWjjfolJn2V4f4lnnCv0pikF</p><p>7Ig/Bsyd/8bsySBJ54Uy9dkEsBUFJzqYSfR7Z/xsrACGFgq96ZsifnAnnOvfGbRX8Q8IIu0zDbNh7smxOwrz2odmL7</p><p>2UaU51A5YaOcPSXRM9uyqCnSp/ENLzkQa/B9RNO+VA7kCsj3MlJWJp5Sotn5spyV+gA==-</p><p>MIIETDCCAjSgAwIBAgIBDTANBgkqhkiG9w0BAQsFADAYMRYwFAYDVQQDDA1KZXRQcm9maWxlIENBMB4XDT</p><p>IwMTAxOTA5MDU1M1oXDTIyMTAyMTA5MDU1M1owHzEdMBsGA1UEAwwUcHJvZDJ5LWZyb20tMjAyMDEw</p><p>MTkwggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQCUlaUFc1wf+CfY9wzFWEL2euKQ5nswqb57V8</p><p>QZG7d7RoR6rwYUIXseTOAFq210oMEe++LCjzKDuqwDfsyhgDNTgZBPAaC4vUU2oy+XR+Fq8nBixWIsH668He</p><p>OnRK6RRhsr0rJzRB95aZ3EAPzBuQ2qPaNGm17pAX0Rd6MPRgjp75IWwI9eA6aMEdPQEVN7uyOtM5zSsjoj79L</p><p>bu1fjShOnQZuJcsV8tqnayeFkNzv2LTOlofU/Tbx502Ro073gGjoeRzNvrynAP03pL486P3KCAyiNPhDs2z8/COMr</p><p>xRlZW5mfzo0xsK0dQGNH3UoG/9RVwHG4eS8LFpMTR9oetHZBAgMBAAGjgZkwgZYwCQYDVR0TBAIwADAdBg</p><p>NVHQ4EFgQUJNoRIpb1hUHAk0foMSNM9MCEAv8wSAYDVR0jBEEwP4AUo562SGdCEjZBvW3gubSgUouX8bO</p><p>hHKQaMBgxFjAUBgNVBAMMDUpldFByb2ZpbGUgQ0GCCQDSbLGDsoN54TATBgNVHSUEDDAKBggrBgEFBQc</p><p>DATALBgNVHQ8EBAMCBaAwDQYJKoZIhvcNAQELBQADggIBABqRoNGxAQct9dQUFK8xqhiZaYPd30TlmCmSA</p><p>aGJ0eBpvkVeqA2jGYhAQRqFiAlFC63JKvWvRZO1iRuWCEfUMkdqQ9VQPXziE/BlsOIgrL6RlJfuFcEZ8TK3syIfIGQZ</p><p>NCxYhLLUuet2HE6LJYPQ5c0jH4kDooRpcVZ4rBxNwddpctUO2te9UU5/FjhioZQsPvd92qOTsV+8Cyl2fvNhNKD1</p><p>Uu9ff5AkVIQn4JU23ozdB/R5oUlebwaTE6WZNBs+TA/qPj+5/we9NH71WRB0hqUoLI2AKKyiPw++FtN4Su1vsdD</p><p>lrAzDj9ILjpjJKA1ImuVcG329/WTYIKysZ1CWK3zATg9BeCUPAV1pQy8ToXOq+RSYen6winZ2OO93eyHv2Iw5kbn</p><p>1dqfBw1BuTE29V2FJKicJSu8iEOpfoafwJISXmz1wnnWL3V/0NxTulfWsXugOoLfv0ZIBP1xH9kmf22jjQ2JiHhQZP7</p><p>ZDsreRrOeIQ/c4yR8IQvMLfC0WKQqrHu5ZzXTH4NO3CwGWSlTY74kE91zXB5mwWAx1jig+UXYc2w4RkVhy0//l</p><p>OmVya/PEepuuTTI4+UJwC7qbVlh5zfhj8oTNUXgN0AOc+Q0/WFPl1aw5VV/VrO8FCoB15lFVlpKaQ1Yh+DVU8ke</p><p>+rt9Th0BCHXe0uZOEmH0nOnH/0onD</p></blockquote><h2 id="创建桌面快捷方式"><a href="#创建桌面快捷方式" class="headerlink" title="创建桌面快捷方式"></a>创建桌面快捷方式</h2><ul><li>终端输入</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo gedit /usr/share/applications/Pycharm.desktop</span><br></pre></td></tr></table></figure><ul><li>在打开的空文档下输入下面代码</li></ul><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">[Desktop Entry]</span></span><br><span class="line"><span class="attr">Type</span>=Application</span><br><span class="line"><span class="attr">Name</span>=Pycharm</span><br><span class="line"><span class="attr">GenericName</span>=Pycharm3</span><br><span class="line"><span class="attr">Comment</span>=Pycharm3:The Python IDE</span><br><span class="line"><span class="attr">Exec</span>=sh /home/pycharm/pycharm-<span class="number">2023.1</span>/bin/pycharm.sh</span><br><span class="line"><span class="attr">Icon</span>=/home/pycharm/pycharm-<span class="number">2023.1</span>/bin/pycharm.png</span><br><span class="line"><span class="attr">Terminal</span>=pycharm</span><br><span class="line"><span class="attr">Categories</span>=Pycharm<span class="comment">;</span></span><br></pre></td></tr></table></figure><ul><li>进入/usr/share/applications，搜索pycharm 拖拽带桌面</li></ul><img src="/2023/04/26/Linux%E5%AE%89%E8%A3%85Pycharm/image-20230426191008022.png" class title="image-20230426191008022">]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;下载Pycharm安装包&quot;&gt;&lt;a href=&quot;#下载Pycharm安装包&quot; class=&quot;headerlink&quot; title=&quot;下载Pycharm安装包&quot;&gt;&lt;/a&gt;下载Pycharm安装包&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;下载Pycharm安装包（tar.gz）&lt;/li</summary>
      
    
    
    
    <category term="Linux篇" scheme="http://bkystop.github.io/categories/Linux%E7%AF%87/"/>
    
    
    <category term="Linux" scheme="http://bkystop.github.io/tags/Linux/"/>
    
  </entry>
  
  <entry>
    <title>MongoDB数据库</title>
    <link href="http://bkystop.github.io/2023/04/20/MongoDB%E6%95%B0%E6%8D%AE%E5%BA%93/"/>
    <id>http://bkystop.github.io/2023/04/20/MongoDB%E6%95%B0%E6%8D%AE%E5%BA%93/</id>
    <published>2023-04-20T14:26:49.000Z</published>
    <updated>2023-05-11T13:18:55.893Z</updated>
    
    <content type="html"><![CDATA[<h2 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h2><ul><li>MongoDB是一款为web应用程序和互联网基础设施设计的数据库管理系统。是NoSQL类型的数据库</li></ul><blockquote><p>一般爬虫使用的数据库，是根据项目来定的。如需求方指定了使用什么数据库、如果没指定，那么决定权就在爬虫程序员手里，如果自选的话，mysql 和mongodb 用的都是比较多的。但不同的数据库品种有各自的优缺点，不同的场景任何一种数据库都可以用来存储，但是某种可能会更好。比如如果抓取的数据之间的耦合性很高，关系比较复杂的话，那么mysql可能会是更好的选择。如果抓取的数据是分版块的，并且它们之间没有相似性或关联性不强，那么可能mongodb 会更好。</p></blockquote><p>官方文档：<a href="https://docs.mongodb.com/">https://docs.mongodb.com/</a></p><p>中文文档：<a href="https://www.mongodb.org.cn/">https://www.mongodb.org.cn/</a></p><h3 id="类型"><a href="#类型" class="headerlink" title="类型"></a>类型</h3><ul><li>数据库</li></ul><blockquote><p>数据库是用于存储数据的物理容器，每个数据库在文件系统中都有属于自己的文件集。一台 MongoDB 服务器中可以创建多个数据库，并且每个数据库都是独立的，都有属于自己的集合和权限，而且不同数据库中的数据会放置在不同的文件中。</p></blockquote><blockquote><p>MongoDB 的默认数据库为“test”，该数据库存储在 data 目录中，您可以使用<code>show dbs</code>命令来查看所有的数据库列表，如下所示：</p></blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">\&gt; show dbs</span><br><span class="line">admin  0.000GB</span><br><span class="line">config 0.000GB</span><br><span class="line">local  0.000GB</span><br></pre></td></tr></table></figure><p>注意：在使用<code>show dbs</code>命令时，若数据库中没有存储任何数据，则不会在列表中显示出来，也就是说只有非空数据库才能通过<code>show dbs</code>命令查看。</p><ul><li>集合</li></ul><blockquote><p>集合就是一组 MongoDB 文档的组合，类似于关系型数据库（例如 MySQL）中的数据表。集合存在于数据库中，且没有固定的结构，您可以向集合中插入不同格式或类型的数据。</p></blockquote><ul><li>文档</li></ul><blockquote><p>文档是 MongoDB 中数据的基本单位，由 BSON 格式（一种计算机数据交换格式，类似于 JSON）的键/值对组成，类似于关系型数据库中的一行行数据，但要相对复杂一些。</p><p>文档具有动态模式，所谓动态模式就是同一集合中的文档不需要具有相同的字段，即使是相同的字段也可以是不同的类型，这与关系型数据库有很大的区别，也是 MongoDB 最突出的特点之一。</p></blockquote><h3 id="对比"><a href="#对比" class="headerlink" title="对比"></a>对比</h3><table><thead><tr><th>关系型数据库</th><th>MongoDB</th><th>解释说明</th></tr></thead><tbody><tr><td>database</td><td>database</td><td>数据库</td></tr><tr><td>table</td><td>collection</td><td>数据表/集合</td></tr><tr><td>row</td><td>document</td><td>数据行/文档</td></tr><tr><td>column</td><td>field</td><td>字段/域</td></tr><tr><td>index</td><td>index</td><td>索引</td></tr><tr><td>table joins</td><td></td><td>表连接，MongoDB 中不支持</td></tr><tr><td>primary key</td><td>primary key</td><td>主键，MongoDB 会自动将 _id 字段设置为主键</td></tr></tbody></table>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;简介&quot;&gt;&lt;a href=&quot;#简介&quot; class=&quot;headerlink&quot; title=&quot;简介&quot;&gt;&lt;/a&gt;简介&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;MongoDB是一款为web应用程序和互联网基础设施设计的数据库管理系统。是NoSQL类型的数据库&lt;/li&gt;
&lt;/ul&gt;
&lt;bl</summary>
      
    
    
    
    <category term="数据库篇" scheme="http://bkystop.github.io/categories/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%AF%87/"/>
    
    
    <category term="MongoDB" scheme="http://bkystop.github.io/tags/MongoDB/"/>
    
  </entry>
  
  <entry>
    <title>Redis数据库</title>
    <link href="http://bkystop.github.io/2023/04/20/Redis%E6%95%B0%E6%8D%AE%E5%BA%93/"/>
    <id>http://bkystop.github.io/2023/04/20/Redis%E6%95%B0%E6%8D%AE%E5%BA%93/</id>
    <published>2023-04-20T14:04:23.000Z</published>
    <updated>2023-05-11T13:18:40.888Z</updated>
    
    <content type="html"><![CDATA[<h2 id="Redis数据库"><a href="#Redis数据库" class="headerlink" title="Redis数据库"></a>Redis数据库</h2><p>Redis（<strong>Remote Dictionary Server)，即远程字典服务</strong>，是一个使用ANSIC编写的开源、支持网络、基于内存、可选持久性的键值对存储数据库，是NoSQL数据库。</p><p>redis的出现主要是为了替代早期的Memcache缓存系统的。map内存型(数据存放在内存中)的非关系型(nosql)key-value(键值存储)数据库，支持数据的持久化(基于RDB和AOF，注: 数据持久化时将数据存放到文件中，每次启动redis之后会先将文件中数据加载到内存，经常用来做缓存、数据共享、购物车、消息队列、计数器、限流等。(最基本的就是缓存一些经常用到的数据，提高读写速度)。</p><p>redis特性：</p><blockquote><ul><li>速度快</li><li>持久化</li><li>多种数据结构</li><li>支持多种编程语言</li><li>主从复制</li><li>高可用、分布式</li></ul></blockquote><h3 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h3><p>redis的官方只提供了linux版本的redis，window系统的redis是微软团队根据官方的linux版本高仿的。</p><p>官方原版: <a href="https://redis.io/">https://redis.io/</a></p><p>中文官网:<a href="http://www.redis.cn/">http://www.redis.cn</a></p><p>下载地址：<a href="https://github.com/tporadowski/redis/releases">https://github.com/tporadowski/redis/releases</a></p><h3 id="启动"><a href="#启动" class="headerlink" title="启动"></a>启动</h3><ul><li>启动redis服务端</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">redis-server D:/redis/redis.windows.conf</span><br></pre></td></tr></table></figure><img src="/2023/04/20/Redis%E6%95%B0%E6%8D%AE%E5%BA%93/image-20230509221107569.png" class title="启动成功"><p><strong>redis作为windows服务启动方式</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">redis-server --service-install redis.windows.conf</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">redis-server --service-start # 启动服务</span><br><span class="line">redis-server --service-stop # 停止服务</span><br></pre></td></tr></table></figure><h2 id="Redis数据类型"><a href="#Redis数据类型" class="headerlink" title="Redis数据类型"></a>Redis数据类型</h2><p>Redis提供的数据类型主要分为5种自有类型和一种自定义类型，这5种自有类型包括：String类型、哈希类型、列表类型、集合类型和顺序集合类型。</p><blockquote><p>redis可以理解成一个全局的大字典，key就是数据的唯一标识符。根据key对应的值不同，可以划分成5个基本数据类型。</p></blockquote><h3 id="string类型"><a href="#string类型" class="headerlink" title="string类型"></a>string类型</h3><blockquote><p>字符串类型，是 Redis 中最为基础的数据存储类型，它在 Redis 中是二进制安全的，也就是byte类型。<br>单个数据的最大容量是512M。</p></blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">key: 值</span><br></pre></td></tr></table></figure><h3 id="hash类型"><a href="#hash类型" class="headerlink" title="hash类型"></a>hash类型</h3><blockquote><p>哈希类型，用于存储对象/字典，对象/字典的结构为键值对。key、域、值的类型都为string。</p></blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">key:&#123;</span><br><span class="line">            域（属性）: 值，</span><br><span class="line">            域:值，            </span><br><span class="line">            域:值，</span><br><span class="line">            域:值，</span><br><span class="line">            ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="list类型"><a href="#list类型" class="headerlink" title="list类型"></a>list类型</h3><blockquote><p>列表类型，它的子成员类型为string。</p></blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">key: [值1，值2, 值3.....]</span><br></pre></td></tr></table></figure><h3 id="set类型"><a href="#set类型" class="headerlink" title="set类型"></a>set类型</h3><blockquote><p>无序集合，它的子成员类型为string类型，元素唯一不重复，没有修改操作。</p></blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">key: &#123;值1, 值4, 值3, ...., 值5&#125;</span><br></pre></td></tr></table></figure><h3 id="zset类型-sortedSet"><a href="#zset类型-sortedSet" class="headerlink" title="zset类型(sortedSet):"></a>zset类型(sortedSet):</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">有序集合，它的子成员值的类型为string类型，元素唯一不重复，没有修改操作。权重值(score,分数)从小到大排列。</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">key: &#123;</span><br><span class="line">值1 权重值1(数字);</span><br><span class="line">值2 权重值2;</span><br><span class="line">值3 权重值3;</span><br><span class="line">值4 权重值4;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;Redis数据库&quot;&gt;&lt;a href=&quot;#Redis数据库&quot; class=&quot;headerlink&quot; title=&quot;Redis数据库&quot;&gt;&lt;/a&gt;Redis数据库&lt;/h2&gt;&lt;p&gt;Redis（&lt;strong&gt;Remote Dictionary Server)，即远程字典服</summary>
      
    
    
    
    <category term="数据库篇" scheme="http://bkystop.github.io/categories/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%AF%87/"/>
    
    
    <category term="Redis" scheme="http://bkystop.github.io/tags/Redis/"/>
    
  </entry>
  
  <entry>
    <title>scrapy框架</title>
    <link href="http://bkystop.github.io/2023/04/14/scrapy%E6%A1%86%E6%9E%B6/"/>
    <id>http://bkystop.github.io/2023/04/14/scrapy%E6%A1%86%E6%9E%B6/</id>
    <published>2023-04-14T06:18:42.000Z</published>
    <updated>2023-04-16T08:20:44.391Z</updated>
    
    <content type="html"><![CDATA[<h2 id="scrapy框架简介"><a href="#scrapy框架简介" class="headerlink" title="scrapy框架简介"></a>scrapy框架简介</h2><p>​        Scrapy是一个快速、高层次的屏幕抓取和web抓取框架，用于抓取web站点并从页面中提取结构化的数据。Scrapy用途广泛，可以用于数据挖掘、监测和自动化测试，也提供了多种类型爬虫的基类，如BaseSpider、sitemap爬虫等。</p><p>​        Scrapy 是基于twisted框架开发而来，twisted是一个流行的事件驱动的python网络框架。因此Scrapy使用了一种非阻塞（又名异步）的代码来实现并发。</p><img src="/2023/04/14/scrapy%E6%A1%86%E6%9E%B6/image-20230415142159268.png" class title="image-20230415142159268"><blockquote><p>**Engine(引擎)**：负责Spider、Item Pipeline、Downloader、Scheduler中间的通讯，信号、数据传递等。负责控制系统所有组件之间的数据流，并在某些动作发生时触发事件。</p><p>**Scheduler(调度器)**：它负责接受引擎发送过来的Request请求，并按照一定的方式进行整理排列，入队，当引擎需要时，交还给引擎。可以想象成一个URL的优先级队列, 由它来决定下一个要抓取的网址是什么, 同时去除重复的网址。</p><p><strong>Downloader（下载器）</strong>：负责下载Scrapy Engine(引擎)发送的所有Requests请求，并将其获取到的Responses交还给Scrapy Engine(引擎)，由引擎交给Spider来处理。</p><p><strong>Spider（爬虫）</strong>：它负责处理所有Responses,从中分析提取数据，获取Item字段需要的数据，并将需要跟进的URL提交给引擎，再次进入Scheduler(调度器)。</p><p>**Item Pipeline(项目管道)**：它负责处理Spider中获取到的Item，并进行进行后期处理（详细分析、过滤、存储等）的地方。主要包括清理、验证、持久化（比如存到数据库）等操作。</p><p><strong>Spider Middlewares（爬虫中间件）</strong>：一个可以自定扩展和操作引擎和Spider中间通信的功能组件</p></blockquote><ul><li>安装</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip3 install scrapy</span><br></pre></td></tr></table></figure><h2 id="命令行工具"><a href="#命令行工具" class="headerlink" title="命令行工具"></a>命令行工具</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 1 查看帮助</span></span><br><span class="line">    scrapy -h</span><br><span class="line">    scrapy &lt;<span class="built_in">command</span>&gt; -h</span><br><span class="line"></span><br><span class="line"><span class="comment"># 2 有两种命令：其中Project-only必须切到项目文件夹下才能执行，而Global的命令则不需要</span></span><br><span class="line">    Global commands:</span><br><span class="line">        startproject <span class="comment">#创建项目</span></span><br><span class="line">        genspider    <span class="comment">#创建爬虫程序</span></span><br><span class="line">        settings     <span class="comment">#如果是在项目目录下，则得到的是该项目的配置</span></span><br><span class="line">        runspider    <span class="comment">#运行一个独立的python文件，不必创建项目</span></span><br><span class="line">        shell        <span class="comment">#scrapy shell url地址  在交互式调试，如选择器规则正确与否</span></span><br><span class="line">        fetch        <span class="comment">#独立于程单纯地爬取一个页面，可以拿到请求头</span></span><br><span class="line">        view         <span class="comment">#下载完毕后直接弹出浏览器，以此可以分辨出哪些数据是ajax请求</span></span><br><span class="line">        version      <span class="comment">#scrapy version 查看scrapy的版本，scrapy version -v查看scrapy依赖库的版本</span></span><br><span class="line">    Project-only commands:</span><br><span class="line">        crawl        <span class="comment">#运行爬虫，必须创建项目才行，确保配置文件中ROBOTSTXT_OBEY = False</span></span><br><span class="line">        check        <span class="comment">#检测项目中有无语法错误</span></span><br><span class="line">        list         <span class="comment">#列出项目中所包含的爬虫名</span></span><br><span class="line">        edit         <span class="comment">#编辑器，一般不用</span></span><br><span class="line">        parse        <span class="comment">#scrapy parse url地址 --callback 回调函数  #以此可以验证我们的回调函数是否正确</span></span><br><span class="line">        bench        <span class="comment">#scrapy bentch压力测试</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 3 官网链接</span></span><br><span class="line">    https://docs.scrapy.org/en/latest/topics/commands.html</span><br></pre></td></tr></table></figure><h3 id="目录结构"><a href="#目录结构" class="headerlink" title="目录结构"></a>目录结构</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">project_name/</span><br><span class="line">   scrapy.cfg</span><br><span class="line">   project_name/</span><br><span class="line">       __init__.py</span><br><span class="line">       items.py</span><br><span class="line">       pipelines.py</span><br><span class="line">       settings.py</span><br><span class="line">       spiders/</span><br><span class="line">           __init__.py</span><br><span class="line">           爬虫1.py</span><br><span class="line">           爬虫2.py</span><br><span class="line">           爬虫3.py</span><br></pre></td></tr></table></figure><blockquote><p>文件说明</p><ul><li>scrapy.cfg  项目的主配置信息，用来部署scrapy时使用，爬虫相关的配置信息在settings.py文件中。</li><li>items.py   设置数据存储模板，用于结构化数据，如：Django的Model</li><li>pipelines   数据处理行为，如：一般结构化的数据持久化</li><li>settings.py 配置文件，如：递归的层数、并发数，延迟下载等。强调:配置文件的选项必须大写否则视为无效，正确写法USER_AGENT=’xxxx’</li><li>spiders    爬虫目录，如：创建文件，编写爬虫规则</li></ul></blockquote><p>注意：</p><ul><li>一般创建爬虫文件时，以网站域名命名</li><li>默认只能在终端执行命令，为了更便捷操作</li></ul><blockquote><p>在根目录下新建 <code>.py</code> 文件名无规定</p><blockquote><p><strong>在项目根目录下新建：bin.py</strong>, 这就相当于帮助我们在终端执行了<code>scrapy crawl doutu</code></p></blockquote></blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> scrapy.cmdline <span class="keyword">import</span> execute</span><br><span class="line">execute([<span class="string">&#x27;scrapy&#x27;</span>, <span class="string">&#x27;crawl&#x27;</span>, <span class="string">&#x27;doutu&#x27;</span>])</span><br></pre></td></tr></table></figure><h2 id="spider"><a href="#spider" class="headerlink" title="spider"></a>spider</h2><ul><li>spiders是网站爬取，解析页面，定义自定义行为的地方。　</li></ul><blockquote><p>1、 定义在start_requests()方法内的URL，默认从start_urls列表中获得url地址来生成Request请求。用生成的Requests来爬取第一个URL，并且标识一个回调函数(默认的回调函数是parse方法)<br>回调函数在下载完成返回response时自动触发。</p><p>2、 在回调函数中，解析response并且返回值，返回值有四种</p><blockquote><p>解析数据的字典<br>Item对象<br>新的Request对象（新的Requests也需要指定一个回调函数）<br>可迭代对象（包含Items或Request）</p></blockquote><p>3、在回调函数中解析页面内容,通常使用Scrapy自带的Selectors，也可以使用Beutifulsoup，lxml等。</p><p>4、最后，针对返回的Items对象将会被持久化到数据库</p><blockquote><p>通过Item Pipeline组件存到数据库：<a href="https://docs.scrapy.org/en/latest/topics/item-pipeline.html%EF%BC%89">https://docs.scrapy.org/en/latest/topics/item-pipeline.html）</a><br>   或者导出到不同的文件（通过Feed exports：<a href="https://docs.scrapy.org/en/latest/topics/feed-exports.html%EF%BC%89">https://docs.scrapy.org/en/latest/topics/feed-exports.html）</a></p></blockquote></blockquote><h2 id="Item"><a href="#Item" class="headerlink" title="Item"></a>Item</h2><ul><li><p>抓取的主要目标是从非结构化源（通常是网页）中提取结构化数据。Scrapy爬虫可以像Python一样返回提取的数据。但很容易在字段名称中输入拼写错误或返回不一致的数据，尤其是在具有许多爬虫的较大项目中。</p><p>为了定义通用输出数据格式，Scrapy提供了Item类。 Item对象是用于收集抓取数据的简单容器。它们提供类似字典的 API，并具有用于声明其可用字段的方便语法。</p></li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> scrapy</span><br><span class="line"> </span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Product</span>(scrapy.Item):</span><br><span class="line">    name = scrapy.Field()</span><br><span class="line">    price = scrapy.Field()</span><br><span class="line">    stock = scrapy.Field()</span><br><span class="line">    last_updated = scrapy.Field(serializer=<span class="built_in">str</span>)</span><br></pre></td></tr></table></figure><blockquote><p>Scrapy Items类似于Django Models，而Scrapy Items更简单，因为没有不同字段类型的概念</p></blockquote><blockquote><p>Field对象用于指定每个字段的元数据。例如，last_updated上面示例中说明的字段的序列化函数。可以为每个字段指定任何类型的元数据。Field对象接受的值没有限制。出于同样的原因，没有所有可用元数据键的参考列表。</p><p>Field对象中定义的每个键可以由不同的组件使用，只有那些组件知道它。您也可以根据Field自己的需要定义和使用项目中的任何其他键。</p><p>Field对象的主要目标是提供一种在一个地方定义所有字段元数据的方法。通常，行为取决于每个字段的那些组件使用某些字段键来配置该行为。</p></blockquote><h3 id="Item-PipeLine"><a href="#Item-PipeLine" class="headerlink" title="Item PipeLine"></a>Item PipeLine</h3><ul><li>在一个项目被蜘蛛抓取之后，它被发送到项目管道，该项目管道通过顺序执行的几个组件处理它。每个项目管道组件（有时简称为“项目管道”）是一个实现简单方法的Python类。他们收到一个项目并对其执行操作，同时决定该项目是否应该继续通过管道或被丢弃并且不再处理。</li></ul><blockquote><p> 项目管道的典型用途是：</p><ul><li>清洗数据 </li><li>验证数据（检查Item某些字段是否为空） </li><li>数据查重</li><li>写入数据库</li></ul></blockquote><h3 id="Item-PipeLine的方法"><a href="#Item-PipeLine的方法" class="headerlink" title="Item PipeLine的方法"></a>Item PipeLine的方法</h3><ul><li>process_item</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">process_item（self，项目，蜘蛛）</span><br><span class="line">为每个项目管道组件调用此方法。process_item(self, item, spider) </span><br><span class="line">必须要返回带数据的dict，或者返回一个Item （或任何后代类）对象，或者返回Twisted Deferred或引发 DropItem异常。丢弃的项目不再由其他管道组件处理。</span><br></pre></td></tr></table></figure><ul><li>open_spider</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">open_spider（self，蜘蛛）</span><br><span class="line">打开蜘蛛时会调用此方法。</span><br></pre></td></tr></table></figure><ul><li>close_spider</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">close_spider（self，蜘蛛）</span><br><span class="line">当蜘蛛关闭时调用此方法。</span><br></pre></td></tr></table></figure><ul><li>from_crawler</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">from_crawler（cls，crawler ）</span><br><span class="line">如果存在，则调用此方法从爬虫程序Crawler生成实例它必须返回管道的新实例。Crawler对象提供对所有Scrapy核心组件的访问，</span><br><span class="line">如设置和信号; 它是管道访问它们并将其功能挂钩到Scrapy的一种方式。</span><br></pre></td></tr></table></figure><blockquote><p>当使用 <code>settings</code> 对象获取全局变量时，可以在 Scrapy 配置文件中设置该变量的值，然后通过 <code>settings.get(&#39;MY_SETTING&#39;)</code> 方法来访问它。这样做很方便，但也有一些限制：</p><blockquote><ul><li>无法根据特定的 Crawler 实例动态地调整全局变量的值。例如，当您在多个爬虫之间共享同一个 Scrapy 项目时，某些设置可能需要在每个爬虫之间进行微调。</li><li>无法轻松地将其他参数传递给中间件。如果您想基于环境变量、命令行参数或其他外部因素配置中间件，那么使用 <code>settings</code> 对象可能很麻烦。</li></ul></blockquote><p>为了解决这些问题，Scrapy 引入了 <code>from_crawler</code> 方法。这个方法可以让您根据具体的 Crawler 实例创建中间件实例，并动态地向中间件传递其他参数。</p><p>具体来说，<code>from_crawler</code> 方法接收一个 <code>crawler</code> 参数，这是当前 Crawler 实例的引用。可以使用 <code>crawler.settings</code> 访问 Scrapy 的全局配置变量，还可以使用 <code>crawler.signals</code> 注册信号处理程序，以及使用 <code>crawler.engine</code> 和 <code>crawler.spider</code> 访问其他 Scrapy 子系统和资源。因此，在 <code>from_crawler</code> 中，您可以使用更多的 Scrapy 资源，并根据需要动态地配置中间件。这使得中间件更加灵活和可扩展，可以适应多种场景和需求。</p></blockquote><h2 id="start-rquests重写"><a href="#start-rquests重写" class="headerlink" title="start_rquests重写"></a>start_rquests重写</h2><ul><li>scrapy中start_url是通过spider下的start_requests（）来进行处理</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">start_requests</span>(<span class="params">self</span>):</span><br><span class="line">    cls = self.__class__</span><br><span class="line">    <span class="keyword">if</span> method_is_overridden(cls, Spider, <span class="string">&#x27;make_requests_from_url&#x27;</span>):</span><br><span class="line">        warnings.warn(</span><br><span class="line">            <span class="string">&quot;Spider.make_requests_from_url method is deprecated; it &quot;</span></span><br><span class="line">            <span class="string">&quot;won&#x27;t be called in future Scrapy releases. Please &quot;</span></span><br><span class="line">            <span class="string">&quot;override Spider.start_requests method instead (see %s.%s).&quot;</span> % (</span><br><span class="line">                cls.__module__, cls.__name__</span><br><span class="line">            ),</span><br><span class="line">        )</span><br><span class="line">        <span class="keyword">for</span> url <span class="keyword">in</span> self.start_urls:</span><br><span class="line">            <span class="keyword">yield</span> self.make_requests_from_url(url)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="keyword">for</span> url <span class="keyword">in</span> self.start_urls:</span><br><span class="line">            <span class="keyword">yield</span> Request(url, dont_filter=<span class="literal">True</span>)</span><br></pre></td></tr></table></figure><ul><li>有时候,需要重写starte_rquests方法发起首次请求</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> scrapy</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">N17kSpider</span>(scrapy.Spider):</span><br><span class="line">    name = <span class="string">&quot;n_17k&quot;</span></span><br><span class="line">    start_urls = [<span class="string">&quot;https://user.17k.com/ck/author/shelf?page=1&amp;appKey=2406394919&quot;</span>]</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">start_requests</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">        请求登陆的账号和密码</span></span><br><span class="line"><span class="string">        &#x27;&#x27;&#x27;</span></span><br><span class="line">        login_url = <span class="string">&#x27;https://passport.17k.com/ck/user/login&#x27;</span></span><br><span class="line">        <span class="comment"># 使用request进行请求</span></span><br><span class="line">        <span class="comment"># yield scrapy.Request(url=login_url, body=&#x27;loginName=17346570232&amp;password=xlg17346570232&#x27;, callback=self.do_login, method=&#x27;POST&#x27;)</span></span><br><span class="line">        <span class="comment"># 使用Request子类FormRequest进行请求  自动为post请求</span></span><br><span class="line">        <span class="keyword">yield</span> scrapy.FormRequest(</span><br><span class="line">            url=login_url,</span><br><span class="line">            formdata=&#123;<span class="string">&#x27;loginName&#x27;</span>: <span class="string">&#x27;13121758648&#x27;</span>, <span class="string">&#x27;password&#x27;</span>: <span class="string">&#x27;yuan0316&#x27;</span>&#125;,</span><br><span class="line">            callback=self.do_start</span><br><span class="line">        )</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">do_start</span>(<span class="params">self, response</span>):</span><br><span class="line">        <span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">        登陆成功后调用parse进行处理</span></span><br><span class="line"><span class="string">        cookie中间件会帮我们自动处理携带cookie</span></span><br><span class="line"><span class="string">        &#x27;&#x27;&#x27;</span></span><br><span class="line">        <span class="keyword">for</span> url <span class="keyword">in</span> self.start_urls:</span><br><span class="line">            <span class="keyword">yield</span> scrapy.Request(url=url, callback=self.parse)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">parse</span>(<span class="params">self, response, **kwargs</span>):</span><br><span class="line">        <span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&quot;data.json&quot;</span>, <span class="string">&quot;w&quot;</span>) <span class="keyword">as</span> f:</span><br><span class="line">            f.write(response.text)</span><br></pre></td></tr></table></figure><h2 id="全站爬虫-CrawlSpider"><a href="#全站爬虫-CrawlSpider" class="headerlink" title="全站爬虫(CrawlSpider)"></a>全站爬虫(CrawlSpider)</h2><ul><li>Scrapy 的基本使用当中，spider 如果要重新发送请求的话，就需要自己解析页面，然后发送请求。而 CrawlSpider 则可以通过设置 url 条件自动发送请求。</li></ul><h3 id="LinkExtractors"><a href="#LinkExtractors" class="headerlink" title="LinkExtractors"></a>LinkExtractors</h3><p>CrawlSpider 是 Spider 的一个派生类。CrawlSpider 与 spider 不同的是就在于下一次请求的 url 不需要自己手动解析，而这一点则是通过 LinkExtractors 实现的。</p><ul><li>LinkExtractor类的构造方法</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">scrapy</span>.linkextractors.LinkExtractor(</span><br><span class="line">    allow = (),</span><br><span class="line">    deny = (),</span><br><span class="line">    allow_domains = (),</span><br><span class="line">    deny_domains = (),</span><br><span class="line">    restrict_xpaths = (),</span><br><span class="line">    tags = (<span class="string">&#x27;a&#x27;</span>,<span class="string">&#x27;area&#x27;</span>),</span><br><span class="line">    attrs = (<span class="string">&#x27;href&#x27;</span>),</span><br><span class="line">    canonicalize = <span class="literal">False</span>,</span><br><span class="line">    unique = <span class="literal">True</span>,</span><br><span class="line">    process_value = <span class="literal">None</span>,</span><br><span class="line">    deny_extensions = <span class="literal">None</span>,</span><br><span class="line">    restrict_css=(),</span><br><span class="line">   strip=<span class="literal">True</span></span><br><span class="line">)</span><br></pre></td></tr></table></figure><blockquote><p>参数说明</p><p>allow：允许的 url。所有满足这个正则表达式的 url 都会被提取<br>deny：禁止的 url。所有满足这个正则表达式的 url 都不会被提取<br>allow_domains：允许的域名。只有在这个里面指定的域名的 url 才会被提取<br>deny_domains：禁止的域名。所有在这个里面指定的域名的 url 都不会被提取<br>restrict_xpaths：严格的 xpath。和 allow 共同过滤链接</p><p>tags：接收一个标签或标签列表，提取标签内的列表，默认为[‘a’, ‘area’]<br>attrs：接收一个属性或属性列表，提取指定属性内的链接，默认为[‘href’]</p></blockquote><h3 id="Rule"><a href="#Rule" class="headerlink" title="Rule"></a>Rule</h3><ul><li>LinkExtractors 需要传递到 Rule 类对象中才能发挥作用</li></ul><blockquote><p>link_extractors:是一个LinkExtractor对象，用于定义需要提取的链接</p><p>callback：从link_extractor中没获取链接时，参数所制定的值作为回调函数，该回调函数接受一个response作为起第一个参数<br>注意：当编写爬虫规则是，避免使用parse作为回调函数。由于CrawlSpider使用parse方法来实现其逻辑，如果覆盖了parse方法，CrawlSpider将会运行失败</p><p>follow：是一个布尔值(boolean),制定了根据该规则从response提取的链接是需要跟进。如果callback为None，follow默认设置为True，否则默认为Flase</p><p>process_links：指定该Spider中那个的函数将会被调用，从link_extractor中获取到链接列表是将会调用该函数。该方法主要用来过滤。<br>process_request：指定该Spider中哪个的函数将会被调用，该规则提取到每个request是都会调用该函数。(用来过滤request)</p></blockquote><h3 id="CrawlSpider工作流程"><a href="#CrawlSpider工作流程" class="headerlink" title="CrawlSpider工作流程"></a>CrawlSpider工作流程</h3><p> 首先由<code>start_requests</code>对<code>start_urls</code>中的每一个url发起请求（<code>make_requests_from_url</code>)，这个请求会被parse接收。在Spider里面的parse需要我们定义，但CrawlSpider定义<code>parse</code>去解析响应（<code>self._parse_response(response, self.parse_start_url, cb_kwargs=&#123;&#125;, follow=True)</code>）<br> <strong>_parse_response</strong>根据有无<code>callback</code>,<code>follow</code>和<code>self.follow_links</code>执行不同的操作</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">_parse_response</span>(<span class="params">self, response, callback, cb_kwargs, follow=<span class="literal">True</span></span>):</span><br><span class="line">   <span class="comment">##如果传入了callback，使用这个callback解析页面并获取解析得到的reques或item</span></span><br><span class="line">       <span class="keyword">if</span> callback:</span><br><span class="line">           cb_res = callback(response, **cb_kwargs) <span class="keyword">or</span> ()</span><br><span class="line">           cb_res = self.process_results(response, cb_res)</span><br><span class="line">           <span class="keyword">for</span> requests_or_item <span class="keyword">in</span> iterate_spider_output(cb_res):</span><br><span class="line">               <span class="keyword">yield</span> requests_or_item</span><br><span class="line">   <span class="comment">## 其次判断有无follow，用_requests_to_follow解析响应是否有符合要求的link。</span></span><br><span class="line">       <span class="keyword">if</span> follow <span class="keyword">and</span> self._follow_links:</span><br><span class="line">           <span class="keyword">for</span> request_or_item <span class="keyword">in</span> self._requests_to_follow(response):</span><br><span class="line">               <span class="keyword">yield</span> request_or_item</span><br></pre></td></tr></table></figure><p>其中<code>_requests_to_follow</code>又会获取<code>link_extractor</code>（这个是我们传入的LinkExtractor）解析页面得到的link<code>link_extractor.extract_links(response)</code>,对url进行加工（<code>process_links</code>，需要自定义），对符合的link发起Request。使用<code>.process_request</code>(需要自定义）处理响应。</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;scrapy框架简介&quot;&gt;&lt;a href=&quot;#scrapy框架简介&quot; class=&quot;headerlink&quot; title=&quot;scrapy框架简介&quot;&gt;&lt;/a&gt;scrapy框架简介&lt;/h2&gt;&lt;p&gt;​        Scrapy是一个快速、高层次的屏幕抓取和web抓取框架，</summary>
      
    
    
    
    <category term="Python篇" scheme="http://bkystop.github.io/categories/Python%E7%AF%87/"/>
    
    
    <category term="Python" scheme="http://bkystop.github.io/tags/Python/"/>
    
    <category term="Python爬虫" scheme="http://bkystop.github.io/tags/Python%E7%88%AC%E8%99%AB/"/>
    
  </entry>
  
  <entry>
    <title>Web自动化之selenium</title>
    <link href="http://bkystop.github.io/2023/04/11/Web%E8%87%AA%E5%8A%A8%E5%8C%96%E4%B9%8Bselenium/"/>
    <id>http://bkystop.github.io/2023/04/11/Web%E8%87%AA%E5%8A%A8%E5%8C%96%E4%B9%8Bselenium/</id>
    <published>2023-04-11T10:12:11.000Z</published>
    <updated>2023-04-14T11:50:48.325Z</updated>
    
    <content type="html"><![CDATA[<h2 id="Web自动化"><a href="#Web自动化" class="headerlink" title="Web自动化"></a>Web自动化</h2><blockquote><p>有些网站的数据都是通过接口的形式传输或者是一些 JSON 的数据，然后经过 JavaScript 渲染得出来的。用 requests 来爬取内容，爬取下来的只能是服务器端网页的源码，这和浏览器渲染以后的页面内容是不一样的。</p><p>真正的数据是经过 JavaScript 执行后，渲染出来的，数据来源可能是 Ajax，也可能是页面里的某些 Data，或者是一些 ifame 页面等。不过，大多数情况下极有可能是 Ajax 接口获取的。因此我们需要分析Ajax请求，分析这些接口的调用方式，通过抓包工具或者浏览器的“开发者工具”，找到数据的请求链接，然后再用程序来模拟。但是，抓包分析流的方式，也存在一定的缺点。因为有些接口带着加密参数，比如 token、sign 等等，模拟难度较大。</p><p>Puppeteer、Pyppeteer、Selenium、Splash 等自动化框架出现了。使用这些框架获取HTML源码，这样我们爬取到的源代码就是JavaScript 渲染以后的真正的网页代码，便于数据提取。同时，也就绕过分析 Ajax 和一些 JavaScript 逻辑的过程。这种方式就做到了可见即可爬，难度也不大，同时适合大批量的采集。</p></blockquote><h2 id="selenium"><a href="#selenium" class="headerlink" title="selenium"></a>selenium</h2><ul><li>安装selenium（pip安装）</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install selenium</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install selenium -i https://mirrors.aliyun.com/pypi/simple/</span><br></pre></td></tr></table></figure><ul><li>Pycharm安装</li></ul><img src="/2023/04/11/Web%E8%87%AA%E5%8A%A8%E5%8C%96%E4%B9%8Bselenium/image-20230414182021671.png" class title="找到settings"><img src="/2023/04/11/Web%E8%87%AA%E5%8A%A8%E5%8C%96%E4%B9%8Bselenium/image-20230414182105914.png" class title="点击+号"><img src="/2023/04/11/Web%E8%87%AA%E5%8A%A8%E5%8C%96%E4%B9%8Bselenium/image-20230414182208395.png" class title="一定要一模一样"><ul><li>安装chrome驱动（<a href="http://chromedriver.storage.googleapis.com/index.html%EF%BC%89">http://chromedriver.storage.googleapis.com/index.html）</a></li></ul><blockquote><p>这里的版本选择尽量与浏览器版本一致， win64选win32即可，把下载的浏览器驱动放在python解释器所在的文件夹</p></blockquote><h3 id="初识selenium"><a href="#初识selenium" class="headerlink" title="初识selenium"></a>初识selenium</h3><ul><li><p>selenium最初是一个自动化测试工具，而爬虫中使用它主要是为了解决requests无法直接执行JavaScript代码的问题 ，selenium本质是通过驱动浏览器，完全模拟浏览器的操作，比如跳转、输入、点击、下拉等，来拿到网页渲染之后的结果，可支持多种浏览器。</p></li><li><p>安装</p></li></ul><blockquote><p>pip3 install -i <a href="https://pypi.tuna.tsinghua.edu.cn/simple">https://pypi.tuna.tsinghua.edu.cn/simple</a> selenium</p></blockquote><ul><li>以下是一个最简单的案例，通过模拟键盘输入mac book并通过回车进行搜素</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> selenium <span class="keyword">import</span> webdriver</span><br><span class="line"><span class="keyword">from</span> selenium.webdriver.common.by <span class="keyword">import</span> By  <span class="comment"># 按照什么方式查找，By.ID,By.CSS_SELECTOR</span></span><br><span class="line"><span class="keyword">from</span> selenium.webdriver.common.keys <span class="keyword">import</span> Keys  <span class="comment"># 键盘按键操作</span></span><br><span class="line"><span class="keyword">from</span> selenium.webdriver.support <span class="keyword">import</span> expected_conditions <span class="keyword">as</span> EC</span><br><span class="line"><span class="keyword">from</span> selenium.webdriver.support.wait <span class="keyword">import</span> WebDriverWait  <span class="comment"># 等待页面加载某些元素</span></span><br><span class="line"></span><br><span class="line">chrome = webdriver.Chrome()</span><br><span class="line"></span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    chrome.get(<span class="string">&#x27;https://www.jd.com&#x27;</span>)</span><br><span class="line">    input_tag = chrome.find_element(By.ID, <span class="string">&#x27;key&#x27;</span>)</span><br><span class="line">    input_tag.send_keys(<span class="string">&#x27;mac book&#x27;</span>)</span><br><span class="line">    input_tag.send_keys(Keys.ENTER)</span><br><span class="line">    wait = WebDriverWait(chrome, <span class="number">10</span>)</span><br><span class="line">    <span class="comment"># time.sleep(3)</span></span><br><span class="line">    wait.until(EC.presence_of_element_located((By.ID, <span class="string">&#x27;J_goodsList&#x27;</span>)))  <span class="comment"># 等到id为J_goodsList的元素加载完毕,最多等10秒</span></span><br><span class="line">    chrome.save_screenshot(<span class="string">&quot;hellokitty.png&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">finally</span>:</span><br><span class="line">    chrome.close()</span><br></pre></td></tr></table></figure><h3 id="元素定位"><a href="#元素定位" class="headerlink" title="元素定位"></a>元素定位</h3><ul><li>方式一</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">el = driver.find_element_by_xxx(value)</span><br></pre></td></tr></table></figure><ul><li>方式二</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">from selenium.webdriver.common.by import By</span><br><span class="line">driver.find_element(By.xxx,value)</span><br><span class="line">driver.find_elements(By.xxx, value) </span><br></pre></td></tr></table></figure><blockquote><p>xxx 处的方式一共有八种</p><blockquote><p>id<br> name<br> class<br> tag<br> link<br> partial<br> xpath<br> css </p></blockquote></blockquote><h3 id="元素操作"><a href="#元素操作" class="headerlink" title="元素操作"></a>元素操作</h3><blockquote><p>输入文字时用<code>send_keys()</code>方法，清空文字时用<code>clear()</code>方法，点击按钮时用<code>click()</code>方法。示例如下</p><p>find_element方法仅仅能够获取元素对象，接下来就可以对元素执行以下操作 从定位到的元素中提取数据的方法</p></blockquote><ul><li>从定位到的元素中获取数据</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">el.get_attribute(key)           <span class="comment"># 获取key属性名对应的属性值</span></span><br><span class="line">el.text                        <span class="comment"># 获取开闭标签之间的文本内容</span></span><br></pre></td></tr></table></figure><ol start="2"><li>对定位到的元素的操作</li></ol><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">el.click()                      <span class="comment"># 对元素执行点击操作</span></span><br><span class="line">el.submit()                     <span class="comment"># 对元素执行提交操作</span></span><br><span class="line">el.clear()                      <span class="comment"># 清空可输入元素中的数据</span></span><br><span class="line">el.send_keys(data)              <span class="comment"># 向可输入元素输入数据</span></span><br></pre></td></tr></table></figure><h3 id="动作链"><a href="#动作链" class="headerlink" title="动作链"></a>动作链</h3><ul><li>以上动作们都是针对某个节点进行操作，例如点击这些，不能实现拖曳等动作，动作连就是为了帮助完成拖曳等连续动作，实现一个节点的拖曳操作，将某个节点从一处拖曳到另外一处。</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">driver = webdriver.Chrome()</span><br><span class="line"></span><br><span class="line">dragger = driver.find_element(By.ID, <span class="string">&#x27;dragger&#x27;</span>)  <span class="comment"># 被拖拽元素</span></span><br><span class="line">item = driver.find_element(By.XPATH, <span class="string">&#x27;//div[text()=&quot;Item 1&quot;]&#x27;</span>)  <span class="comment"># 目标元素</span></span><br><span class="line">action = ActionChains(driver)  </span><br><span class="line"></span><br><span class="line"><span class="comment"># 以下三种方式均可实现拖曳，使dragger移动到item</span></span><br><span class="line">action.drag_and_drop(dragger, item).perform() </span><br><span class="line">action.click_and_hold(dragger).release(item2).perform() </span><br><span class="line">action.click_and_hold(dragger).move_to_element(item3).release().perform()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 在x轴或y轴移动 </span></span><br></pre></td></tr></table></figure><h3 id="执行js"><a href="#执行js" class="headerlink" title="执行js"></a>执行js</h3><ul><li>selenium有时候页面上操作无法实现的，这时候就需要借助JS来完成</li></ul><blockquote><p>例如，当页面上的元素超过一屏后，想操作屏幕下方的元素，是不能直接定位到，会报元素不可见的。这时候需要借助滚动条来拖动屏幕，使被操作的元素显示在当前的屏幕上。滚动条是无法直接用定位工具来定位的。selenium里面也没有直接的方法去控制滚动条，这时候只能借助Js代码了，selenium提供了一个操作js的方法:execute_script()，可以直接执行js的脚本。</p></blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">import time</span><br><span class="line">from selenium import webdriver</span><br><span class="line"></span><br><span class="line">browser = webdriver.Chrome()</span><br><span class="line">browser.get(&#x27;https://www.jd.com/&#x27;)</span><br><span class="line">browser.execute_script(&#x27;window.scrollTo(0, document.body.scrollHeight)&#x27;)</span><br><span class="line">time.sleep(3)</span><br></pre></td></tr></table></figure><h3 id="页面等待"><a href="#页面等待" class="headerlink" title="页面等待"></a>页面等待</h3><ul><li>如果网站采用了动态html技术，那么页面上的部分元素出现时间便不能确定，这个时候就可以设置一个等待时间，强制等待指定时间，等待结束之后进行元素定位，如果还是无法定位到则报错 </li></ul><ul><li><p>页面等待的三种方法</p><ul><li><p>强制等待</p><p>也叫线程等待, 通过线程休眠的方式完成的等待,如等待5秒: Thread sleep(5000)，一般情况下不太使用强制等待，主要应用的场景在于不同系统交互的地方。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> time</span><br><span class="line">time.sleep(n)      <span class="comment"># 阻塞等待设定的秒数之后再继续往下执行</span></span><br></pre></td></tr></table></figure></li><li><p>显式等待</p><p>也叫智能等待，针对指定元素定位指定等待时间，在指定时间范围内进行元素查找，找到元素则直接返回，如果在超时还没有找到元素，则抛出异常，显示等待是 selenium 当中比较灵活的一种等待方式，他的实现原理其实是通过 while 循环不停的尝试需要进行的操作。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> selenium.webdriver.common.keys <span class="keyword">import</span> Keys</span><br><span class="line"><span class="keyword">from</span> selenium.webdriver.common.by <span class="keyword">import</span> By</span><br><span class="line"><span class="keyword">from</span> selenium.webdriver.support.ui <span class="keyword">import</span> WebDriverWait</span><br><span class="line"><span class="keyword">from</span> selenium.webdriver.support <span class="keyword">import</span> expected_conditions <span class="keyword">as</span> EC</span><br><span class="line"></span><br><span class="line"> <span class="comment"># 每隔 0.5s 检查一次(默认就是 0.5s), 最多等待 10 秒,否则报错。如果定位到元素则直接结束等待，如果在10秒结束之后仍未定位到元素则报错</span></span><br><span class="line"> wait = WebDriverWait(chrome, <span class="number">10</span>,<span class="number">0.5</span>)</span><br><span class="line"> wait.until(EC.presence_of_element_located((By.ID, <span class="string">&#x27;J_goodsList&#x27;</span>))) </span><br><span class="line"></span><br></pre></td></tr></table></figure></li><li><p>隐式等待 隐式等待设置之后代码中的所有元素定位都会做隐式等待</p><p>通过implicitly Wait完成的延时等待，注意这种是针对全局设置的等待，如设置超时时间为10秒，使用了implicitlyWait后，如果第一次没有找到元素，会在10秒之内不断循环去找元素，如果超过10秒还没有找到，则抛出异常，隐式等待比较智能，它可以通过全局配置，但是只能用于元素定位</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">driver.implicitly_wait(<span class="number">10</span>)    <span class="comment"># 在指定的n秒内每隔一段时间尝试定位元素，如果n秒结束还未被定位出来则报错</span></span><br></pre></td></tr></table></figure></li></ul></li></ul><blockquote><p>显示等待和隐式等待的区别<br>selenium显示等待，就是明确要等到某个元素的出现或者是某个元素的可点击等条件，等不到，就一直等，除非在规定的时间之内都没找到，就会跳出异常Exception。</p><p>selenium的隐式等待，就是在创建driver时，为浏览器对象创建一个等待时间，这个方法是得不到某个元素就等待一段时间，直到拿到某个元素位置。在使用隐式等待的时候，实际上浏览器会在你自己设定的时间内部断的刷新页面去寻找我们需要的元素</p></blockquote><h3 id="其他操作"><a href="#其他操作" class="headerlink" title="其他操作"></a>其他操作</h3><ul><li>我们写的是爬虫程序，目的是数据，并不需要看网页。如下可设置浏览器后台运行</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> selenium.webdriver <span class="keyword">import</span> Chrome</span><br><span class="line"><span class="keyword">from</span> selenium.webdriver.chrome.options <span class="keyword">import</span> Options</span><br><span class="line"></span><br><span class="line">opt = Options()</span><br><span class="line">opt.add_argument(<span class="string">&quot;--headless&quot;</span>)</span><br><span class="line">opt.add_argument(<span class="string">&#x27;--disable-gpu&#x27;</span>)</span><br><span class="line">opt.add_argument(<span class="string">&quot;--window-size=4000,1600&quot;</span>)  <span class="comment"># 设置窗口大小</span></span><br><span class="line"></span><br><span class="line">web = Chrome(options=opt)</span><br></pre></td></tr></table></figure><ul><li>selenium 处理cookie</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 通过driver.get_cookies()能够获取所有的cookie</span></span><br><span class="line">dictCookies = driver.get_cookies()</span><br><span class="line"><span class="comment"># 添加cookie</span></span><br><span class="line">driver.add_cookie(dictCookies)</span><br><span class="line"><span class="comment"># 删除一条cookie</span></span><br><span class="line">driver.delete_cookie(<span class="string">&quot;CookieName&quot;</span>)</span><br><span class="line"><span class="comment"># 删除所有的cookie</span></span><br><span class="line">driver.delete_all_cookies()</span><br></pre></td></tr></table></figure><ul><li>页面前进和后退</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">driver.forward()     <span class="comment"># 前进</span></span><br><span class="line">driver.back()        <span class="comment"># 后退</span></span><br><span class="line">driver.refresh()  <span class="comment"># 刷新</span></span><br><span class="line">driver.close()       <span class="comment"># 关闭当前窗口</span></span><br></pre></td></tr></table></figure><h3 id="滑动验证案例"><a href="#滑动验证案例" class="headerlink" title="滑动验证案例"></a>滑动验证案例</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="keyword">from</span> selenium <span class="keyword">import</span> webdriver</span><br><span class="line"><span class="keyword">from</span> selenium.webdriver.common.by <span class="keyword">import</span> By  <span class="comment"># 按照什么方式查找，By.ID,By.CSS_SELECTOR</span></span><br><span class="line"><span class="keyword">from</span> selenium.webdriver.support <span class="keyword">import</span> expected_conditions <span class="keyword">as</span> EC</span><br><span class="line"><span class="keyword">from</span> selenium.webdriver.support.wait <span class="keyword">import</span> WebDriverWait  <span class="comment"># 等待页面加载某些元素</span></span><br><span class="line"><span class="keyword">import</span> cv2</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> urllib <span class="keyword">import</span> request</span><br><span class="line"><span class="keyword">from</span> selenium.webdriver.common.action_chains <span class="keyword">import</span> ActionChains</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">get_distance</span>():</span><br><span class="line">    background = cv2.imread(<span class="string">&quot;background.png&quot;</span>, <span class="number">0</span>)</span><br><span class="line">    gap = cv2.imread(<span class="string">&quot;gap.png&quot;</span>, <span class="number">0</span>)</span><br><span class="line"></span><br><span class="line">    res = cv2.matchTemplate(background, gap, cv2.TM_CCOEFF_NORMED)</span><br><span class="line">    value = cv2.minMaxLoc(res)[<span class="number">2</span>][<span class="number">0</span>]</span><br><span class="line">    <span class="built_in">print</span>(value)</span><br><span class="line">    <span class="keyword">return</span> value * <span class="number">278</span> / <span class="number">360</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">main</span>():</span><br><span class="line">    chrome = webdriver.Chrome()</span><br><span class="line">    chrome.implicitly_wait(<span class="number">5</span>)</span><br><span class="line"></span><br><span class="line">    chrome.get(<span class="string">&#x27;https://passport.jd.com/new/login.aspx?&#x27;</span>)</span><br><span class="line"></span><br><span class="line">    login = chrome.find_element(By.CLASS_NAME, <span class="string">&#x27;login-tab-r&#x27;</span>)</span><br><span class="line">    login.click()</span><br><span class="line"></span><br><span class="line">    loginname = chrome.find_element(By.ID, <span class="string">&#x27;loginname&#x27;</span>)</span><br><span class="line">    loginname.send_keys(<span class="string">&quot;123@qq.com&quot;</span>)</span><br><span class="line"></span><br><span class="line">    nloginpwd = chrome.find_element(By.ID, <span class="string">&#x27;nloginpwd&#x27;</span>)</span><br><span class="line">    nloginpwd.send_keys(<span class="string">&quot;987654321&quot;</span>)</span><br><span class="line"></span><br><span class="line">    loginBtn = chrome.find_element(By.CLASS_NAME, <span class="string">&#x27;login-btn&#x27;</span>)</span><br><span class="line">    loginBtn.click()</span><br><span class="line"></span><br><span class="line">    img_src = chrome.find_element(By.XPATH, <span class="string">&#x27;//*[@class=&quot;JDJRV-bigimg&quot;]/img&#x27;</span>).get_attribute(<span class="string">&quot;src&quot;</span>)</span><br><span class="line">    temp_src = chrome.find_element(By.XPATH, <span class="string">&#x27;//*[@class=&quot;JDJRV-smallimg&quot;]/img&#x27;</span>).get_attribute(<span class="string">&quot;src&quot;</span>)</span><br><span class="line">    request.urlretrieve(img_src, <span class="string">&quot;background.png&quot;</span>)</span><br><span class="line">    request.urlretrieve(temp_src, <span class="string">&quot;gap.png&quot;</span>)</span><br><span class="line"></span><br><span class="line">    distance = <span class="built_in">int</span>(get_distance())</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;distance:&quot;</span>, distance)</span><br><span class="line"></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;第一步,点击滑动按钮&#x27;</span>)</span><br><span class="line">    element = chrome.find_element(By.CLASS_NAME, <span class="string">&#x27;JDJRV-slide-btn&#x27;</span>)</span><br><span class="line">    ActionChains(chrome).click_and_hold(on_element=element).perform()  <span class="comment"># 点击鼠标左键，按住不放</span></span><br><span class="line"></span><br><span class="line">    ActionChains(chrome).move_by_offset(xoffset=distance, yoffset=<span class="number">0</span>).perform()</span><br><span class="line">    ActionChains(chrome).release(on_element=element).perform()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    main()</span><br></pre></td></tr></table></figure><h2 id="pyppeteer"><a href="#pyppeteer" class="headerlink" title="pyppeteer"></a>pyppeteer</h2><ul><li>Selenium流行已久，现在稍微有点反爬的网站都会对selenium和webdriver进行识别，网站只需要在前端js添加一下判断脚本，很容易就可以判断出是真人访问还是webdriver。虽然也可以通过中间代理的方式进行js注入屏蔽webdriver检测，但是webdriver对浏览器的模拟操作（输入、点击等等）都会留下webdriver的标记，同样会被识别出来，要绕过这种检测，只有重新编译webdriver，麻烦自不必说，难度不是一般大。</li><li>pyperteer成为了爬虫界的又一新星。相比于selenium具有异步加载、速度快、具备有界面/无界面模式、伪装性更强不易被识别为机器人，同时可以伪装手机平板等终端；虽然支持的浏览器比较单一，但在安装配置的便利性和运行效率方面都要远胜selenium。</li></ul><blockquote><p>pyppeteer是非官方 Python 版本的 Puppeteer 库，浏览器自动化库。 Puppeteer是谷歌出品的一款基于Node.js开发的一款工具，主要是用来操纵Chrome浏览器的 API，通过Javascript代码来操纵Chrome浏览器，完成数据爬取、Web程序自动测试等任务。Puppeteer是 Google 基于 Node.js 开发的工具，调用 Chrome 的 API，通过 JavaScript 代码来操纵 Chrome 完成一些操作，用于网络爬虫、Web 程序自动测试等。</p></blockquote><ul><li><p>pyppeteer 使用了 Python 异步协程库<a href="https://docs.python.org/3/library/asyncio.html">asyncio</a>，可整合 Scrapy 进行分布式爬虫。</p></li><li><p>安装</p></li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip3 install pyppeteer</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> random</span><br><span class="line"><span class="keyword">from</span> pyppeteer <span class="keyword">import</span> launch</span><br><span class="line"><span class="keyword">import</span> asyncio</span><br><span class="line"><span class="keyword">import</span> cv2</span><br><span class="line"><span class="keyword">from</span> urllib <span class="keyword">import</span> request</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">async</span> <span class="keyword">def</span> <span class="title function_">get_track</span>():</span><br><span class="line">    background = cv2.imread(<span class="string">&quot;background.png&quot;</span>, <span class="number">0</span>)</span><br><span class="line">    gap = cv2.imread(<span class="string">&quot;gap.png&quot;</span>, <span class="number">0</span>)</span><br><span class="line"></span><br><span class="line">    res = cv2.matchTemplate(background, gap, cv2.TM_CCOEFF_NORMED)</span><br><span class="line">    value = cv2.minMaxLoc(res)[<span class="number">2</span>][<span class="number">0</span>]</span><br><span class="line">    <span class="built_in">print</span>(value)</span><br><span class="line">    <span class="keyword">return</span> value * <span class="number">278</span> / <span class="number">360</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">async</span> <span class="keyword">def</span> <span class="title function_">main</span>():</span><br><span class="line">    browser = <span class="keyword">await</span> launch(&#123;</span><br><span class="line">        <span class="string">&quot;headless&quot;</span>: <span class="literal">False</span>,  <span class="comment"># headless指定浏览器是否以无头模式运行，默认是True。</span></span><br><span class="line">        <span class="string">&quot;args&quot;</span>: [<span class="string">&#x27;--window-size=1366,768&#x27;</span>],</span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="comment"># 打开新的标签页</span></span><br><span class="line">    page = <span class="keyword">await</span> browser.newPage()</span><br><span class="line">    <span class="comment"># 设置页面大小一致</span></span><br><span class="line">    <span class="keyword">await</span> page.setViewport(&#123;<span class="string">&quot;width&quot;</span>: <span class="number">1366</span>, <span class="string">&quot;height&quot;</span>: <span class="number">768</span>&#125;)</span><br><span class="line">    <span class="comment"># 访问主页</span></span><br><span class="line">    <span class="keyword">await</span> page.goto(<span class="string">&quot;https://passport.jd.com/new/login.aspx?&quot;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># evaluate()是执行js的方法，js逆向时如果需要在浏览器环境下执行js代码的话可以利用这个方法</span></span><br><span class="line">    <span class="comment"># js为设置webdriver的值，防止网站检测</span></span><br><span class="line">    <span class="comment"># await page.evaluate(&#x27;&#x27;&#x27;alert(&quot;马上输入用户名密码了！&quot;)&#x27;&#x27;&#x27;)</span></span><br><span class="line">    <span class="comment"># await page.evaluate(&#x27;&#x27;&#x27;() =&gt;&#123; Object.defineProperties(navigator,&#123; webdriver:&#123; get: () =&gt; false &#125; &#125;) &#125;&#x27;&#x27;&#x27;)</span></span><br><span class="line">    <span class="comment"># await page.screenshot(&#123;&#x27;path&#x27;: &#x27;./1.jpg&#x27;&#125;)   # 截图保存路径</span></span><br><span class="line">    <span class="comment"># 单击事件</span></span><br><span class="line">    <span class="keyword">await</span> page.click(<span class="string">&#x27;div.login-tab-r&#x27;</span>)</span><br><span class="line">    <span class="comment"># 模拟输入用户名和密码,输入每个字符的间隔时间delay ms</span></span><br><span class="line">    <span class="keyword">await</span> page.<span class="built_in">type</span>(<span class="string">&quot;#loginname&quot;</span>, <span class="string">&#x27;123456@qq.com&#x27;</span>, &#123;</span><br><span class="line">        <span class="string">&quot;c&quot;</span>: random.randint(<span class="number">30</span>, <span class="number">60</span>)</span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="keyword">await</span> page.<span class="built_in">type</span>(<span class="string">&quot;#nloginpwd&quot;</span>, <span class="string">&#x27;1&#x27;</span>, &#123;</span><br><span class="line">        <span class="string">&quot;delay&quot;</span>: random.randint(<span class="number">30</span>, <span class="number">60</span>)</span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># page.waitFor 通用等待方式，如果是数字，则表示等待具体时间（毫秒）: 等待2秒</span></span><br><span class="line">    <span class="keyword">await</span> page.waitFor(<span class="number">2000</span>)</span><br><span class="line">    <span class="keyword">await</span> page.click(<span class="string">&quot;div.login-btn&quot;</span>)</span><br><span class="line">    <span class="keyword">await</span> page.waitFor(<span class="number">2000</span>)</span><br><span class="line">    <span class="comment"># page.jeval（selector，pageFunction）#定位元素，并调用js函数去执行</span></span><br><span class="line">    img_src = <span class="keyword">await</span> page.Jeval(<span class="string">&quot;.JDJRV-bigimg &gt; img&quot;</span>, <span class="string">&quot;el=&gt;el.src&quot;</span>)</span><br><span class="line">    temp_src = <span class="keyword">await</span> page.Jeval(<span class="string">&quot;.JDJRV-smallimg &gt; img&quot;</span>, <span class="string">&quot;el=&gt;el.src&quot;</span>)</span><br><span class="line"></span><br><span class="line">    request.urlretrieve(img_src, <span class="string">&quot;background.png&quot;</span>)</span><br><span class="line">    request.urlretrieve(temp_src, <span class="string">&quot;gap.png&quot;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 获取gap的距离</span></span><br><span class="line">    distance = <span class="keyword">await</span> get_track()</span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">        # Pyppeteer 三种解析方式</span></span><br><span class="line"><span class="string">        Page.querySelector()  # 选择器</span></span><br><span class="line"><span class="string">        Page.querySelectorAll()</span></span><br><span class="line"><span class="string">        Page.xpath()  # xpath  表达式</span></span><br><span class="line"><span class="string">        # 简写方式为：</span></span><br><span class="line"><span class="string">        Page.J(), Page.JJ(), and Page.Jx()</span></span><br><span class="line"><span class="string">        &quot;&quot;&quot;</span></span><br><span class="line">    el = <span class="keyword">await</span> page.J(<span class="string">&quot;div.JDJRV-slide-btn&quot;</span>)</span><br><span class="line">    <span class="comment"># 获取元素的边界框，包含x,y坐标</span></span><br><span class="line">    box = <span class="keyword">await</span> el.boundingBox()</span><br><span class="line">    <span class="keyword">await</span> page.hover(<span class="string">&quot;div.JDJRV-slide-btn&quot;</span>)</span><br><span class="line">    <span class="keyword">await</span> page.mouse.down()</span><br><span class="line">    <span class="comment"># steps 是指分成几步来完成，steps越大，滑动速度越慢</span></span><br><span class="line">    <span class="keyword">await</span> page.mouse.move(box[<span class="string">&quot;x&quot;</span>] + distance + random.uniform(<span class="number">30</span>, <span class="number">33</span>), box[<span class="string">&quot;y&quot;</span>], &#123;<span class="string">&quot;steps&quot;</span>: <span class="number">100</span>&#125;)</span><br><span class="line">    <span class="keyword">await</span> page.waitFor(<span class="number">1000</span>)</span><br><span class="line">    <span class="keyword">await</span> page.mouse.move(box[<span class="string">&quot;x&quot;</span>] + distance + <span class="number">29</span>, box[<span class="string">&quot;y&quot;</span>], &#123;<span class="string">&quot;steps&quot;</span>: <span class="number">100</span>&#125;)</span><br><span class="line">    <span class="keyword">await</span> page.mouse.up()</span><br><span class="line">    <span class="keyword">await</span> page.waitFor(<span class="number">2000</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">loop = asyncio.get_event_loop()</span><br><span class="line">loop.run_until_complete(main())</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;Web自动化&quot;&gt;&lt;a href=&quot;#Web自动化&quot; class=&quot;headerlink&quot; title=&quot;Web自动化&quot;&gt;&lt;/a&gt;Web自动化&lt;/h2&gt;&lt;blockquote&gt;
&lt;p&gt;有些网站的数据都是通过接口的形式传输或者是一些 JSON 的数据，然后经过 Jav</summary>
      
    
    
    
    <category term="工具篇" scheme="http://bkystop.github.io/categories/%E5%B7%A5%E5%85%B7%E7%AF%87/"/>
    
    
    <category term="Python" scheme="http://bkystop.github.io/tags/Python/"/>
    
  </entry>
  
  <entry>
    <title>Python爬取斗图网</title>
    <link href="http://bkystop.github.io/2023/04/09/Python%E7%88%AC%E5%8F%96%E6%96%97%E5%9B%BE%E7%BD%91/"/>
    <id>http://bkystop.github.io/2023/04/09/Python%E7%88%AC%E5%8F%96%E6%96%97%E5%9B%BE%E7%BD%91/</id>
    <published>2023-04-09T09:14:16.000Z</published>
    <updated>2023-04-09T09:16:41.323Z</updated>
    
    <content type="html"><![CDATA[<h2 id="爬取斗图网案例"><a href="#爬取斗图网案例" class="headerlink" title="爬取斗图网案例"></a>爬取斗图网案例</h2><p>本篇以爬取斗图网为案例，分别有单线程爬取斗图网（耗时142秒），多线程爬取斗图网（耗时8秒），以及异步爬取斗图网（不足3秒）。</p><h2 id="单线程爬取斗图王"><a href="#单线程爬取斗图王" class="headerlink" title="单线程爬取斗图王"></a>单线程爬取斗图王</h2><ul><li>单线程版本</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">from</span> lxml <span class="keyword">import</span> etree</span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">get_img_urls</span>():</span><br><span class="line">    headers = &#123;</span><br><span class="line">        <span class="string">&#x27;User-Agent&#x27;</span>: <span class="string">&#x27;Mozilla/5.0 (Linux; Android 6.0; Nexus 5 Build/MRA58N) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/97.0.4692.71 Mobile Safari/537.36&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    res = requests.get(<span class="string">&quot;https://www.pkdoutu.com/photo/list/&quot;</span>, headers=headers, verify=<span class="literal">False</span>)</span><br><span class="line"></span><br><span class="line">    selector = etree.HTML(res.text)</span><br><span class="line">    img_urls = selector.xpath(<span class="string">&#x27;//*[@id=&quot;pic-detail&quot;]/div/div[2]/div[2]/ul/li/div/div/a/img[@data-backup]/@data-backup&#x27;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> img_urls</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 根据img_urls下载</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">download_img</span>(<span class="params">url</span>):</span><br><span class="line">    res = requests.get(url)</span><br><span class="line">    <span class="comment"># img_name = url.split(&quot;/&quot;)[-1]</span></span><br><span class="line">    img_name = os.path.basename(url)</span><br><span class="line">    path = os.path.join(<span class="string">&quot;imgs&quot;</span>, img_name)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> os.path.exists(<span class="string">&quot;imgs&quot;</span>):</span><br><span class="line">        os.mkdir(<span class="string">&quot;imgs&quot;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">with</span> <span class="built_in">open</span>(path, <span class="string">&quot;wb&quot;</span>) <span class="keyword">as</span> f:</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> res.iter_content():</span><br><span class="line">            f.write(i)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&quot;<span class="subst">&#123;img_name&#125;</span>下载完成&quot;</span>)</span><br><span class="line"></span><br><span class="line">start = time.time()</span><br><span class="line"></span><br><span class="line">img_urls = get_img_urls()</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> img_url <span class="keyword">in</span> img_urls:</span><br><span class="line">    download_img(img_url)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&quot;整体耗时<span class="subst">&#123;time.time() - start&#125;</span>秒&quot;</span>)</span><br></pre></td></tr></table></figure><blockquote><p>会有一个警告，这个警告对于后面的代码逻辑没有影响</p><p>requests.get(“<a href="https://www.pkdoutu.com/photo/list/&quot;">https://www.pkdoutu.com/photo/list/&quot;</a>, headers=headers, verify=False)</p><p>这是因为verify关键字设置了False，参数这是因为我们没有配值数字证书，会提示通信不安全</p></blockquote><ul><li>加入如下代码可以忽略警告</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> urllib3</span><br><span class="line">urllib3.disable_warnings() </span><br></pre></td></tr></table></figure><img src="/2023/04/09/Python%E7%88%AC%E5%8F%96%E6%96%97%E5%9B%BE%E7%BD%91/image-20230406203846922.png" class title="耗时142秒"><h2 id="多线程版本"><a href="#多线程版本" class="headerlink" title="多线程版本"></a>多线程版本</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">from</span> lxml <span class="keyword">import</span> etree</span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> threading</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">get_img_urls</span>():</span><br><span class="line">    headers = &#123;</span><br><span class="line">        <span class="string">&#x27;User-Agent&#x27;</span>: <span class="string">&#x27;Mozilla/5.0 (Linux; Android 6.0; Nexus 5 Build/MRA58N) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/97.0.4692.71 Mobile Safari/537.36&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    res = requests.get(<span class="string">&quot;https://www.pkdoutu.com/photo/list/&quot;</span>, headers=headers)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># print(res.text)</span></span><br><span class="line"></span><br><span class="line">    selector = etree.HTML(res.text)</span><br><span class="line">    img_urls = selector.xpath(<span class="string">&#x27;//*[@id=&quot;pic-detail&quot;]/div/div[2]/div[2]/ul/li/div/div/a/img[@data-backup]/@data-backup&#x27;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> img_urls</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 根据img_urls下载</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">download_img</span>(<span class="params">url</span>):</span><br><span class="line">    res = requests.get(url)</span><br><span class="line">    <span class="comment"># img_name = url.split(&quot;/&quot;)[-1]</span></span><br><span class="line">    img_name = os.path.basename(url)</span><br><span class="line">    path = os.path.join(<span class="string">&quot;imgs&quot;</span>, img_name)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> os.path.exists(<span class="string">&quot;imgs&quot;</span>):</span><br><span class="line">        os.mkdir(<span class="string">&quot;imgs&quot;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">with</span> <span class="built_in">open</span>(path, <span class="string">&quot;wb&quot;</span>) <span class="keyword">as</span> f:</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> res.iter_content():</span><br><span class="line">            f.write(i)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&quot;<span class="subst">&#123;img_name&#125;</span>下载完成&quot;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">start = time.time()</span><br><span class="line"></span><br><span class="line">img_urls = get_img_urls()</span><br><span class="line"></span><br><span class="line">t_list = []</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> img_url <span class="keyword">in</span> img_urls:</span><br><span class="line">    t = threading.Thread(target=download_img, args=(img_url,))</span><br><span class="line">    t.start()</span><br><span class="line">    t_list.append(t)</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> t <span class="keyword">in</span> t_list:</span><br><span class="line">    t.join()</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&quot;整体耗时<span class="subst">&#123;time.time() - start&#125;</span>秒&quot;</span>)</span><br></pre></td></tr></table></figure><img src="/2023/04/09/Python%E7%88%AC%E5%8F%96%E6%96%97%E5%9B%BE%E7%BD%91/image-20230406204116619.png" class title="耗时8秒"><h2 id="异步版本"><a href="#异步版本" class="headerlink" title="异步版本"></a>异步版本</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">from</span> lxml <span class="keyword">import</span> etree</span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="keyword">import</span> asyncio</span><br><span class="line"><span class="keyword">import</span> aiohttp</span><br><span class="line"></span><br><span class="line">headers = &#123;</span><br><span class="line">    <span class="string">&#x27;User-Agent&#x27;</span>: <span class="string">&#x27;Mozilla/5.0 (Linux; Android 6.0; Nexus 5 Build/MRA58N) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/97.0.4692.71 Mobile Safari/537.36&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">async</span> <span class="keyword">def</span> <span class="title function_">get_img_urls</span>():</span><br><span class="line"></span><br><span class="line">    <span class="keyword">async</span> <span class="keyword">with</span> aiohttp.ClientSession() <span class="keyword">as</span> session:</span><br><span class="line">        <span class="keyword">async</span> <span class="keyword">with</span> session.get(<span class="string">&quot;https://www.pkdoutu.com/photo/list/&quot;</span>, headers=headers, ssl=<span class="literal">False</span>) <span class="keyword">as</span> response:</span><br><span class="line">            selector = etree.HTML(<span class="keyword">await</span> response.text())</span><br><span class="line">            img_urls = selector.xpath(<span class="string">&#x27;//*[@id=&quot;pic-detail&quot;]/div/div[2]/div[2]/ul/li/div/div/a/img[@data-backup]/@data-backup&#x27;</span>)</span><br><span class="line"></span><br><span class="line">            <span class="keyword">return</span> img_urls</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 根据img_urls下载</span></span><br><span class="line"><span class="keyword">async</span> <span class="keyword">def</span> <span class="title function_">download_img</span>(<span class="params">url</span>):</span><br><span class="line"></span><br><span class="line">    <span class="keyword">async</span> <span class="keyword">with</span> aiohttp.ClientSession() <span class="keyword">as</span> session:</span><br><span class="line">        <span class="keyword">async</span> <span class="keyword">with</span> session.get(url, ssl=<span class="literal">False</span>) <span class="keyword">as</span> response:</span><br><span class="line">            img_name = os.path.basename(url)</span><br><span class="line">            path = os.path.join(<span class="string">&quot;imgs&quot;</span>, img_name)</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> <span class="keyword">not</span> os.path.exists(<span class="string">&quot;imgs&quot;</span>):</span><br><span class="line">                os.mkdir(<span class="string">&quot;imgs&quot;</span>)</span><br><span class="line"></span><br><span class="line">            <span class="keyword">with</span> <span class="built_in">open</span>(path, <span class="string">&quot;wb&quot;</span>) <span class="keyword">as</span> f:</span><br><span class="line">                f.write(<span class="keyword">await</span> response.content.read())</span><br><span class="line"></span><br><span class="line">            <span class="built_in">print</span>(<span class="string">f&quot;<span class="subst">&#123;img_name&#125;</span>下载完成&quot;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">async</span> <span class="keyword">def</span> <span class="title function_">main</span>():</span><br><span class="line">    <span class="comment"># 爬取所有img_url</span></span><br><span class="line">    img_urls = <span class="keyword">await</span> get_img_urls()</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 根据url下载所有图片</span></span><br><span class="line">    tasks = [asyncio.create_task(download_img(url)) <span class="keyword">for</span> url <span class="keyword">in</span> img_urls]</span><br><span class="line"></span><br><span class="line">    <span class="keyword">await</span> asyncio.wait(tasks)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># for img_url in img_urls:</span></span><br><span class="line">    <span class="comment">#     download_img(img_url)</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 主逻辑</span></span><br><span class="line">start = time.time()</span><br><span class="line"></span><br><span class="line">asyncio.run(main())</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&quot;整体耗时<span class="subst">&#123;time.time() - start&#125;</span>秒&quot;</span>)</span><br></pre></td></tr></table></figure><img src="/2023/04/09/Python%E7%88%AC%E5%8F%96%E6%96%97%E5%9B%BE%E7%BD%91/image-20230406204239962.png" class title="耗时不到3秒">]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;爬取斗图网案例&quot;&gt;&lt;a href=&quot;#爬取斗图网案例&quot; class=&quot;headerlink&quot; title=&quot;爬取斗图网案例&quot;&gt;&lt;/a&gt;爬取斗图网案例&lt;/h2&gt;&lt;p&gt;本篇以爬取斗图网为案例，分别有单线程爬取斗图网（耗时142秒），多线程爬取斗图网（耗时8秒），以及异</summary>
      
    
    
    
    <category term="Python篇" scheme="http://bkystop.github.io/categories/Python%E7%AF%87/"/>
    
    
    <category term="Python" scheme="http://bkystop.github.io/tags/Python/"/>
    
    <category term="Python爬虫" scheme="http://bkystop.github.io/tags/Python%E7%88%AC%E8%99%AB/"/>
    
  </entry>
  
  <entry>
    <title>Ubuntu+Gunicorn部署Django</title>
    <link href="http://bkystop.github.io/2023/03/28/Ubuntu-Gunicorn%E9%83%A8%E7%BD%B2Django/"/>
    <id>http://bkystop.github.io/2023/03/28/Ubuntu-Gunicorn%E9%83%A8%E7%BD%B2Django/</id>
    <published>2023-03-28T09:55:52.000Z</published>
    <updated>2023-04-12T10:51:54.991Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Ubuntu-Gunicorn部署Django"><a href="#Ubuntu-Gunicorn部署Django" class="headerlink" title="Ubuntu+Gunicorn部署Django"></a>Ubuntu+Gunicorn部署Django</h1><ul><li>服务器</li></ul><blockquote><p>先安装一些依赖包</p></blockquote><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get update</span><br><span class="line">sudo apt-get upgrade</span><br><span class="line">sudo apt-get install nginx</span><br><span class="line">sudo apt-get install python3</span><br><span class="line">sudo apt-get install python3-pip</span><br><span class="line">sudo pip3 install virtualenv</span><br><span class="line">sudo apt install mysql-server</span><br></pre></td></tr></table></figure><blockquote><p>测试MySQL能否运行并创建数据库</p></blockquote><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">sudo mysql</span><br><span class="line"></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">ALTER</span> <span class="keyword">USER</span> <span class="string">&#x27;root&#x27;</span>@<span class="string">&#x27;localhost&#x27;</span> IDENTIFIED <span class="keyword">WITH</span> mysql_native_password <span class="keyword">BY</span> <span class="string">&#x27;newpassword&#x27;</span>;</span><br><span class="line"> </span><br><span class="line">mysql<span class="operator">&gt;</span> FLUSH PRIVILEGES;</span><br><span class="line"></span><br><span class="line">exit;</span><br><span class="line"></span><br><span class="line">mysql <span class="operator">-</span>u root <span class="operator">-</span>p  # 测试链接</span><br><span class="line"></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">CREATE</span> DATABASE IF <span class="keyword">NOT</span> <span class="keyword">EXISTS</span> n <span class="keyword">DEFAULT</span> CHARSET utf8; # 创建表</span><br></pre></td></tr></table></figure><ul><li>本地文件配置</li></ul><blockquote><p>在<code>djangoProject1/settings.py</code>修改以下配置。</p></blockquote><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">DEBUG = False</span><br><span class="line"> </span><br><span class="line">ALLOWED_HOSTS = [&#x27;*&#x27;]</span><br><span class="line"><span class="meta prompt_"> </span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">静态文件收集目录</span></span><br><span class="line">STATIC_ROOT = os.path.join(BASE_DIR, &#x27;nb_static&#x27;)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">INSTALLED_APPS = [</span><br><span class="line">    ......</span><br><span class="line">    <span class="string">&#x27;corsheaders&#x27;</span>,  <span class="comment">#解决浏览器跨域问题</span></span><br><span class="line">    ......</span><br><span class="line">]</span><br><span class="line"> </span><br><span class="line">MIDDLEWARE = [</span><br><span class="line">    ......</span><br><span class="line">    <span class="string">&#x27;corsheaders.middleware.CorsMiddleware&#x27;</span>,  <span class="comment">#解决浏览器跨域问题</span></span><br><span class="line">    <span class="string">&#x27;django.middleware.common.CommonMiddleware&#x27;</span>, <span class="comment">#解决浏览器跨域问题</span></span><br><span class="line">    ......</span><br><span class="line">]</span><br><span class="line"> </span><br><span class="line">CORS_ORIGIN_ALLOW_ALL = <span class="literal">True</span> <span class="comment">#解决浏览器跨域问题</span></span><br><span class="line">CORS_ALLOW_CREDENTIALS = <span class="literal">True</span> <span class="comment">#解决浏览器跨域问题</span></span><br><span class="line"> </span><br><span class="line">SECURE_CROSS_ORIGIN_OPENER_POLICY = <span class="string">&#x27;None&#x27;</span>  <span class="comment">#Django4 特定解决浏览器跨域问题</span></span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">DATABASES = &#123;</span><br><span class="line">    <span class="string">&#x27;default&#x27;</span>: &#123;</span><br><span class="line">        <span class="string">&#x27;ENGINE&#x27;</span>: <span class="string">&#x27;django.db.backends.mysql&#x27;</span>,    <span class="comment"># 数据库引擎</span></span><br><span class="line">        <span class="string">&#x27;NAME&#x27;</span>: <span class="string">&#x27;djtest&#x27;</span>, <span class="comment"># 数据库名称</span></span><br><span class="line">        <span class="string">&#x27;HOST&#x27;</span>: <span class="string">&#x27;127.0.0.1&#x27;</span>, <span class="comment"># 数据库地址，本机 ip 地址 127.0.0.1</span></span><br><span class="line">        <span class="string">&#x27;PORT&#x27;</span>: <span class="number">3306</span>, <span class="comment"># 端口</span></span><br><span class="line">        <span class="string">&#x27;USER&#x27;</span>: <span class="string">&#x27;root&#x27;</span>,  <span class="comment"># 数据库用户名</span></span><br><span class="line">        <span class="string">&#x27;PASSWORD&#x27;</span>: <span class="string">&#x27;123456&#x27;</span>, <span class="comment"># 数据库密码 修改为服务器数据库密码</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip freeze &gt; requirements.txt  # 本地导出环境</span><br></pre></td></tr></table></figure><ul><li>将项目上传到服务器<ul><li>xshell(通过Xftp直接传)</li></ul><img src="/2023/03/28/Ubuntu-Gunicorn%E9%83%A8%E7%BD%B2Django/image-20230412184503819.png" class><ul><li>git()</li></ul></li><li>进入服务器项目文件夹</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">cd /</span><br><span class="line">mkdir /envs</span><br><span class="line">virtualenv /envs/nb --python=python3.10  # 创建虚拟环境</span><br><span class="line"></span><br><span class="line">source /envs/nb/bin/activate  # 启动虚拟环境</span><br></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip3 install -r requirements.txt  # 安装python库，如无法成功可逐一安装</span><br></pre></td></tr></table></figure><blockquote><p>安装库慢的时候可通过豆瓣源（将xxxx处替换为包名也可以加版本）</p><p>pip install xxxx -i <a href="http://pypi.douban.com/simple/">http://pypi.douban.com/simple/</a> –trusted-host  pypi.douban.com</p></blockquote><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">python3 manage.py collectstatic  # 收集静态文件</span><br><span class="line">python3 manage.py migrate  # 创建数据库</span><br></pre></td></tr></table></figure><ul><li><p>配置nginx</p><ul><li>分别进入<code>/etc/nginx/sites-available</code>，<code>/etc/nginx/sites-enabled</code>两个文件夹输入命令：<code>sudo rm -r default</code>删除<code>default</code>文件。</li></ul></li><li><p>修改为root</p></li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd /etc/nginx</span><br><span class="line">vim nginx.conf</span><br></pre></td></tr></table></figure><img src="/2023/03/28/Ubuntu-Gunicorn%E9%83%A8%E7%BD%B2Django/image-20230331202558990.png" class title="image-20230331202558990"><ul><li>新建配置</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">cd /etc/nginx/sites-available</span><br><span class="line"></span><br><span class="line">vim nbiot</span><br></pre></td></tr></table></figure><ul><li>输入以下内容</li></ul><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">server &#123;</span><br><span class="line">  charset utf-8<span class="comment">;</span></span><br><span class="line">  listen 80<span class="comment">;</span></span><br><span class="line">  server_name 47.109.35.113<span class="comment">;  # 改成你的 IP</span></span><br><span class="line"> </span><br><span class="line">  location /static &#123;</span><br><span class="line">    alias /root/nbiot/nb_static<span class="comment">;   # 收集的的静态文件地址</span></span><br><span class="line">  &#125;</span><br><span class="line"> </span><br><span class="line">  location / &#123;</span><br><span class="line">    proxy_set_header Host $host<span class="comment">;</span></span><br><span class="line">    proxy_pass http://unix:/tmp/47.109.35.113.socket<span class="comment">;  # 改成你的 IP</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>执行</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo ln -s /etc/nginx/sites-available/nbiot /etc/nginx/sites-enabled</span><br><span class="line"></span><br><span class="line">sudo service nginx reload  # 刷新nginx配置</span><br></pre></td></tr></table></figure><img src="/2023/03/28/Ubuntu-Gunicorn%E9%83%A8%E7%BD%B2Django/image-20230331203032753.png" class><ul><li>启用Gunicorn(先进入项目文件夹)</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">source /envs/nb/bin/activate</span><br><span class="line">python manage.py createsuperuser</span><br><span class="line">pip3 install gunicorn</span><br><span class="line">gunicorn --bind unix:/tmp/47.109.35.113.socket djangoProject1.wsgi:application</span><br></pre></td></tr></table></figure><ul><li>停止gunicorn</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">pstree -ap|grep gunicorn</span><br><span class="line">kill -9 进程号</span><br></pre></td></tr></table></figure><ul><li>报错</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python3 manage.py runserver  # 命令运行程序并测试</span><br></pre></td></tr></table></figure><h1 id="https部署"><a href="#https部署" class="headerlink" title="https部署"></a>https部署</h1><ul><li>先在云服务器官网完成ssl申请并下载验证文件，将key文件放在下面目录</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cd /usr/share/nginx/ssl</span><br></pre></td></tr></table></figure><ul><li>删除原来的配置文件<code>/etc/nginx/sites-available</code>，<code>/etc/nginx/sites-enabled</code>两个文件</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">cd /etc/nginx/sites-available</span><br><span class="line"></span><br><span class="line">vim nbiot</span><br></pre></td></tr></table></figure><ul><li>输入以下内容</li></ul><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">server</span> &#123;</span><br><span class="line">    <span class="attribute">listen</span> <span class="number">80</span>;</span><br><span class="line">    <span class="attribute">server_name</span> aiold.cloud;</span><br><span class="line">    <span class="attribute">return</span> <span class="number">301</span> https://<span class="variable">$server_name</span><span class="variable">$request_uri</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="section">server</span> &#123;</span><br><span class="line">    <span class="attribute">listen</span> <span class="number">443</span> ssl;</span><br><span class="line">    <span class="attribute">server_name</span> aiold.cloud www.aiold.cloud;</span><br><span class="line"></span><br><span class="line">    <span class="attribute">ssl_certificate</span> /usr/share/nginx/ssl/www.aiold.cloud.pem;  <span class="comment"># ssl文件目录</span></span><br><span class="line">    <span class="attribute">ssl_certificate_key</span> /usr/share/nginx/ssl/www.aiold.cloud.key; <span class="comment"># ssl文件目录</span></span><br><span class="line"></span><br><span class="line">    <span class="section">location</span> / &#123;</span><br><span class="line">        <span class="attribute">proxy_pass</span> http://unix:/tmp/47.109.35.113.socket;</span><br><span class="line">        <span class="attribute">proxy_set_header</span> Host <span class="variable">$host</span>;</span><br><span class="line">        <span class="attribute">proxy_set_header</span> X-Real-IP <span class="variable">$remote_addr</span>;</span><br><span class="line">        <span class="attribute">proxy_set_header</span> X-Forwarded-Proto https;</span><br><span class="line">        <span class="attribute">proxy_redirect</span> <span class="literal">off</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="section">location</span> /static &#123;</span><br><span class="line">        <span class="attribute">alias</span> /root/nbiot/nb_static/;</span><br><span class="line">        <span class="attribute">expires</span> <span class="number">1d</span>;</span><br><span class="line">        <span class="attribute">add_header</span> Cache-Control <span class="string">&quot;public&quot;</span>;</span><br><span class="line">        <span class="attribute">add_header</span> Vary <span class="string">&quot;Accept-Encoding&quot;</span>;</span><br><span class="line">        <span class="attribute">try_files</span> <span class="variable">$uri</span> <span class="variable">$uri</span>/ =<span class="number">404</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 以下不需要配置，这是我写的的其他配置</span></span><br><span class="line">    <span class="section">location</span> /MO7Xwo9amq.txt &#123;</span><br><span class="line">        <span class="attribute">alias</span> /var/www/html/MO7Xwo9amq.txt;    </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install python3-openssl # 安装python3-openssl包</span><br></pre></td></tr></table></figure><ul><li>启用nginx配置文件</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo ln -s /etc/nginx/sites-available/nbiot /etc/nginx/sites-enabled/</span><br></pre></td></tr></table></figure><ul><li>重启nginx</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo systemctl restart nginx</span><br></pre></td></tr></table></figure><blockquote><p>若部署为https后前端样式丢失，可能是一些静态文件没有成功加载，对此将其导入修改为CDN</p></blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;link rel=&quot;stylesheet&quot; href=&quot;https://cdn.staticfile.org/twitter-bootstrap/3.3.7/css/bootstrap.min.css&quot;&gt;</span><br><span class="line">&lt;script src=&quot;https://cdn.bootcdn.net/ajax/libs/jquery/3.6.4/jquery.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">&lt;script src=&quot;https://cdn.staticfile.org/twitter-bootstrap/3.3.7/js/bootstrap.min.js&quot;&gt;&lt;/script&gt;</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;Ubuntu-Gunicorn部署Django&quot;&gt;&lt;a href=&quot;#Ubuntu-Gunicorn部署Django&quot; class=&quot;headerlink&quot; title=&quot;Ubuntu+Gunicorn部署Django&quot;&gt;&lt;/a&gt;Ubuntu+Gunicorn部署</summary>
      
    
    
    
    <category term="Python篇" scheme="http://bkystop.github.io/categories/Python%E7%AF%87/"/>
    
    
    <category term="Linux" scheme="http://bkystop.github.io/tags/Linux/"/>
    
    <category term="Python" scheme="http://bkystop.github.io/tags/Python/"/>
    
    <category term="Django" scheme="http://bkystop.github.io/tags/Django/"/>
    
  </entry>
  
  <entry>
    <title>并发爬虫</title>
    <link href="http://bkystop.github.io/2023/03/22/%E5%B9%B6%E5%8F%91%E7%88%AC%E8%99%AB/"/>
    <id>http://bkystop.github.io/2023/03/22/%E5%B9%B6%E5%8F%91%E7%88%AC%E8%99%AB/</id>
    <published>2023-03-22T07:48:04.000Z</published>
    <updated>2023-04-09T09:11:44.052Z</updated>
    
    <content type="html"><![CDATA[<h1 id="并发爬虫"><a href="#并发爬虫" class="headerlink" title="并发爬虫"></a>并发爬虫</h1><p>并发是指在一台处理器上“同时”处理多个任务。并发是在同一实体上的多个事件<strong>。强调多个事件在同一时间间隔发生。</strong></p><h2 id="进程、线程以及协程"><a href="#进程、线程以及协程" class="headerlink" title="进程、线程以及协程"></a>进程、线程以及协程</h2><h3 id="进程概念"><a href="#进程概念" class="headerlink" title="进程概念"></a>进程概念</h3><p>计算机的核心是CPU，承担了所有的计算任务；而操作系统是计算机的管理者，它负责任务的调度、资源的分配和管理，安排所有计算机硬件；应用程序则是具有某种功能的程序，程序是运行于操作系统之上的。</p><blockquote><p>进程是一个具有一定独立功能的程序在一个数据集上的一次动态执行的<strong>过程</strong>，是操作系统进行资源分配和调度的一个独立单位，是应用程序运行的载体。</p></blockquote><p>多道技术：空间复用+时间复用，于是有了进程！</p><p><a href="https://baike.baidu.com/item/%E8%BF%9B%E7%A8%8B/382503?fromModule=lemma_inlink">进程</a>状态反映进程执行过程的变化。这些状态随着进程的执行和外界条件的变化而转换。在三态模型中，进程状态分为三个基本状态，即运行态，就绪态，阻塞态。在五态模型中，进程分为<a href="https://baike.baidu.com/item/%E6%96%B0%E5%BB%BA/6015276?fromModule=lemma_inlink">新建</a>态、终止态，运行态，就绪态，阻塞态。</p><img src="/2023/03/22/%E5%B9%B6%E5%8F%91%E7%88%AC%E8%99%AB/u=3524969454,1048049783&fm=253&fmt=auto&app=138&f=JPEG-8788665.jpeg" class title="img"><h3 id="线程的概念"><a href="#线程的概念" class="headerlink" title="线程的概念"></a>线程的概念</h3><p>早期的操作系统中并没有线程的概念，进程是<strong>能拥有资源和独立运行的最小单位</strong>，也是程序执行的最小单位。任务调度采用的是时间片轮转的抢占式调度方式，而进程是任务调度的最小单位，每个进程有各自独立的一块内存，使得各个进程之间内存地址相互隔离。后来，随着计算机的发展，对CPU的要求越来越高，进程之间的切换开销较大，已经无法满足越来越复杂的程序的要求了。于是就发明了线程。</p><p>线程是程序执行中一个单一的顺序控制流程，是<strong>程序执行流的最小单元</strong>，是处理器调度和分派的基本单位。</p><p>一个进程可以有一个或多个线程，各个线程之间共享程序的内存空间(也就是所在进程的内存空间)。一个标准的线程由线程ID、当前指令指针(PC)、寄存器和堆栈组成。而进程由内存空间(代码、数据、进程空间、打开的文件)和一个或多个线程组成。</p><ul><li> 线程的生命周期</li></ul><p>当线程的数量小于处理器的数量时，线程的并发是真正的并发，不同的线程运行在不同的处理器上。但当线程的数量大于处理器的数量时，线程的并发会受到一些阻碍，此时并不是真正的并发，因为此时至少有一个处理器会运行多个线程。</p><p>在单个处理器运行多个线程时，并发是一种模拟出来的状态。操作系统采用时间片轮转的方式轮流执行每一个线程。现在，几乎所有的现代操作系统采用的都是时间片轮转的抢占式调度方式，如我们熟悉的Unix、Linux、Windows及macOS等流行的操作系统。</p><p>我们知道线程是程序执行的最小单位，也是任务执行的最小单位。在早期只有进程的操作系统中，进程有五种状态，创建、就绪、运行、阻塞(等待)、退出。早期的进程相当于现在的只有单个线程的进程，那么现在的多线程也有五种状态，现在的多线程的生命周期与早期进程的生命周期类似。</p><img src="/2023/03/22/%E5%B9%B6%E5%8F%91%E7%88%AC%E8%99%AB/%E5%B9%B6%E5%8F%917.png" class><blockquote><p>线程的生命周期</p><p>创建：一个新的线程被创建，等待该线程被调用执行；</p><p>就绪：时间片已用完，此线程被强制暂停，等待下一个属于它的时间片到来；</p><p>运行：此线程正在执行，正在占用时间片；</p><p>阻塞：也叫等待状态，等待某一事件(如IO或另一个线程)执行完；</p><p>退出：一个线程完成任务或者其他终止条件发生，该线程终止进入退出状态，退出状态释放该线程所分配的资源。</p></blockquote><ul><li>进程与线程的区别</li></ul><blockquote><ol><li>线程是程序执行的最小单位，而进程是操作系统分配资源的最小单位；</li><li>一个进程由一个或多个线程组成，线程是一个进程中代码的不同执行路线；</li><li>进程之间相互独立，但同一进程下的各个线程之间共享程序的内存空间(包括代码段、数据集、堆等)及一些进程级的资源(如打开文件和信号)，某进程内的线程在其它进程不可见；</li><li>调度和切换：线程上下文切换比进程上下文切换要快得多。</li></ol></blockquote><h3 id="协程"><a href="#协程" class="headerlink" title="协程"></a>协程</h3><p><a href="https://so.csdn.net/so/search?q=%E5%8D%8F%E7%A8%8B&spm=1001.2101.3001.7020">协程</a>（Co-routine），也可称为微线程，或非抢占式的多任务子例程，一种用户态的上下文切换技术（通过一个线程实现代码块间的相互切换执行）。这种由程序员自己写程序来管理的轻量级线程叫做<strong>用户空间线程</strong>，具有对内核来说不可见的特性。正如一个进程可以拥有多个线程一样，一个线程也可以拥有多个协程。</p><blockquote><p>协程解决的是线程的切换和内存开销的问题</p><ul><li>用户空间 首先是在用户空间, 避免内核态和用户态的切换导致的成本。</li><li>由语言或者框架层调度</li><li>更小的栈空间允许创建大量实例（百万级别）</li></ul></blockquote><h2 id="多线程"><a href="#多线程" class="headerlink" title="多线程"></a>多线程</h2><h3 id="threading模块"><a href="#threading模块" class="headerlink" title="threading模块"></a>threading模块</h3><ul><li>Python提供两个模块进行多线程的操作，分别是<code>thread</code>和<code>threading</code>，前者是比较低级的模块，用于更底层的操作，一般应用级别的开发不常用。</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> time</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">foo</span>():</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;foo start...&quot;</span>)</span><br><span class="line">    time.sleep(<span class="number">5</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;foo end...&quot;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">bar</span>():</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;bar start...&quot;</span>)</span><br><span class="line">    time.sleep(<span class="number">3</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;bar end...&quot;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 串行版本</span></span><br><span class="line"><span class="comment"># start = time.time()</span></span><br><span class="line"><span class="comment"># foo()</span></span><br><span class="line"><span class="comment"># bar()</span></span><br><span class="line"><span class="comment"># end = time.time()</span></span><br><span class="line"><span class="comment"># print(&quot;cost timer:&quot;, end - start)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 多线程并发版本</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> threading</span><br><span class="line"></span><br><span class="line">start = time.time()</span><br><span class="line">t1 = threading.Thread(target=foo, args=())</span><br><span class="line">t1.start()</span><br><span class="line">t2 = threading.Thread(target=bar, args=())</span><br><span class="line">t2.start()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 等待所有子线程结束</span></span><br><span class="line"><span class="comment"># t1.join()  # 等待子线程t1</span></span><br><span class="line"><span class="comment"># t2.join()  # 等待子线程t2</span></span><br><span class="line">end = time.time()</span><br><span class="line"><span class="built_in">print</span>(end - start)</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="互斥锁"><a href="#互斥锁" class="headerlink" title="互斥锁"></a>互斥锁</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="keyword">import</span> threading</span><br><span class="line"></span><br><span class="line">Lock = threading.Lock()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">addNum</span>():</span><br><span class="line">    <span class="keyword">global</span> num  <span class="comment"># 在每个线程中都获取这个全局变量</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># 上锁</span></span><br><span class="line">    Lock.acquire()</span><br><span class="line">    t = num - <span class="number">1</span></span><br><span class="line">    time.sleep(<span class="number">0.0001</span>)</span><br><span class="line">    num = t</span><br><span class="line">    Lock.release()</span><br><span class="line">    <span class="comment"># 放锁</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">num = <span class="number">100</span>  <span class="comment"># 设定一个共享变量</span></span><br><span class="line"></span><br><span class="line">thread_list = []</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">100</span>):</span><br><span class="line">    t = threading.Thread(target=addNum)</span><br><span class="line">    t.start()</span><br><span class="line">    thread_list.append(t)</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> t <span class="keyword">in</span> thread_list:  <span class="comment"># 等待所有线程执行完毕</span></span><br><span class="line">    t.join()</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;Result: &#x27;</span>, num)</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="线程池"><a href="#线程池" class="headerlink" title="线程池"></a>线程池</h3><p>系统启动一个新线程的成本是比较高的，因为它涉及与操作系统的交互。在这种情形下，使用线程池可以很好地提升性能，尤其是当程序中需要创建大量生存期很短暂的线程时，更应该考虑使用线程池。</p><p>线程池在系统启动时即创建大量空闲的线程，程序只要将一个函数提交给线程池，线程池就会启动一个空闲的线程来执行它。当该函数执行结束后，该线程并不会死亡，而是再次返回到线程池中变成空闲状态，等待执行下一个函数。</p><p>此外，使用线程池可以有效地控制系统中并发线程的数量。当系统中包含有大量的并发线程时，会导致系统性能急剧下降，甚至导致解释器崩溃，而线程池的最大线程数参数可以控制系统中并发线程的数量不超过此数。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="keyword">from</span> concurrent.futures <span class="keyword">import</span> ThreadPoolExecutor</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">task</span>(<span class="params">i</span>):</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&#x27;任务<span class="subst">&#123;i&#125;</span>开始！&#x27;</span>)</span><br><span class="line">    time.sleep(i)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&#x27;任务<span class="subst">&#123;i&#125;</span>结束！&#x27;</span>)</span><br><span class="line">    <span class="keyword">return</span> i</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">start = time.time()</span><br><span class="line">pool = ThreadPoolExecutor(<span class="number">3</span>)</span><br><span class="line"></span><br><span class="line">future01 = pool.submit(task, <span class="number">1</span>)</span><br><span class="line"><span class="comment"># print(&quot;future01是否结束&quot;, future01.done())</span></span><br><span class="line"><span class="comment"># 当程序使用 Future 的 result() 方法来获取结果时，该方法会阻塞当前线程，如果没有指定 timeout 参数，当前线程将一直处于阻塞状态，直到 Future 代表的任务返回。</span></span><br><span class="line"><span class="comment"># print(&quot;future01的结果&quot;, future01.result())  # 同步等待</span></span><br><span class="line">future02 = pool.submit(task, <span class="number">2</span>)</span><br><span class="line">future03 = pool.submit(task, <span class="number">3</span>)</span><br><span class="line">pool.shutdown()  <span class="comment"># 阻塞等待</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&quot;程序耗时<span class="subst">&#123;time.time() - start&#125;</span>秒钟&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;future01的结果&quot;</span>, future01.result())</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;future02的结果&quot;</span>, future02.result())</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;future03的结果&quot;</span>, future03.result())</span><br></pre></td></tr></table></figure><blockquote><p>使用线程池来执行线程任务的步骤如下：</p><ol><li>调用 ThreadPoolExecutor 类的构造器创建一个线程池。</li><li>定义一个普通函数作为线程任务。</li><li>调用 ThreadPoolExecutor 对象的 submit() 方法来提交线程任务。</li><li>当不想提交任何任务时，调用 ThreadPoolExecutor 对象的 shutdown() 方法来关闭线程池。</li></ol></blockquote><h3 id="线程应用"><a href="#线程应用" class="headerlink" title="线程应用"></a>线程应用</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">from</span> lxml <span class="keyword">import</span> etree</span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">import</span> asyncio</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="keyword">import</span> threading</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">get_img_urls</span>():</span><br><span class="line">    res = requests.get(<span class="string">&quot;https://www.pkdoutu.com/photo/list/&quot;</span>, headers=&#123;</span><br><span class="line">        <span class="string">&quot;User-Agent&quot;</span>: <span class="string">&quot;Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/110.0.0.0 Safari/537.36&quot;</span></span><br><span class="line">    &#125;)</span><br><span class="line">    </span><br><span class="line">    selector = etree.HTML(res.text)</span><br><span class="line">    img_urls = selector.xpath(<span class="string">&#x27;//li[@class=&quot;list-group-item&quot;]/div/div/a/img[@data-backup]/@data-backup&#x27;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="built_in">print</span>(img_urls)</span><br><span class="line">    <span class="keyword">return</span> img_urls</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">save_img</span>(<span class="params">url</span>):</span><br><span class="line">    res = requests.get(url)</span><br><span class="line">    name = os.path.basename(url)</span><br><span class="line">    <span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&quot;imgs/&quot;</span> + name, <span class="string">&quot;wb&quot;</span>) <span class="keyword">as</span> f:</span><br><span class="line">        f.write(res.content)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&quot;<span class="subst">&#123;name&#125;</span>下载完成！&quot;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">main</span>():</span><br><span class="line">    img_urls = get_img_urls()</span><br><span class="line">    <span class="comment"># 串行</span></span><br><span class="line">    [save_img(url) <span class="keyword">for</span> url <span class="keyword">in</span> img_urls]</span><br><span class="line">    <span class="comment"># 协程并发</span></span><br><span class="line">    t_list = []</span><br><span class="line">    <span class="keyword">for</span> url <span class="keyword">in</span> img_urls:</span><br><span class="line">        t = threading.Thread(target=save_img, args=(url,))</span><br><span class="line">        t.start()</span><br><span class="line">        t_list.append(t)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> t <span class="keyword">in</span> t_list:</span><br><span class="line">        t.join()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    start = time.time()</span><br><span class="line">    main()</span><br><span class="line">    end = time.time()</span><br><span class="line">    <span class="built_in">print</span>(end - start)</span><br><span class="line"></span><br></pre></td></tr></table></figure><blockquote><p>针对IO密集型任务，Python多线程可以发挥出不错的并发作用</p></blockquote><h2 id="多进程"><a href="#多进程" class="headerlink" title="多进程"></a>多进程</h2><p>由于GIL的存在，python中的多线程其实并不是真正的多线程，如果想要充分地使用多核CPU的资源，在python中大部分情况需要使用多进程。</p><p>multiprocessing包是Python中的多进程管理包。与threading.Thread类似，它可以利用multiprocessing.Process对象来创建一个进程。该进程可以运行在Python程序内部编写的函数。该Process对象与Thread对象的用法相同，也有start(), run(), join()的方法。此外multiprocessing包中也有Lock/Event/Semaphore/Condition类 (这些对象可以像多线程那样，通过参数传递给各个进程)，用以同步进程，其用法与threading包中的同名类一致。所以，multiprocessing的很大一部份与threading使用同一套API，只不过换到了多进程的情境。</p><p>python的进程调用:</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> multiprocessing</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">foo</span>():</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;foo start...&quot;</span>)</span><br><span class="line">    time.sleep(<span class="number">5</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;foo end...&quot;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">bar</span>():</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;bar start...&quot;</span>)</span><br><span class="line">    time.sleep(<span class="number">3</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;bar end...&quot;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">  </span><br><span class="line">    start = time.time()</span><br><span class="line">    t1 = multiprocessing.Process(target=foo, args=())</span><br><span class="line">    t1.start()</span><br><span class="line">    t2 = multiprocessing.Process(target=bar, args=())</span><br><span class="line">    t2.start()</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 等待所有子线程结束</span></span><br><span class="line">    t1.join()  <span class="comment"># 等待子线程t1</span></span><br><span class="line">    t2.join()  <span class="comment"># 等待子线程t2</span></span><br><span class="line">    end = time.time()</span><br><span class="line">    <span class="built_in">print</span>(end - start)</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="协程-1"><a href="#协程-1" class="headerlink" title="协程"></a>协程</h2><p>协程，又称微线程。英文名Coroutine。协程是一种用户态的轻量级线程。</p><p>协程拥有自己的寄存器上下文和栈。协程调度切换时，将寄存器上下文和栈保存到其他地方，在切回来的时候，恢复先前保存的寄存器上下文和栈。因此：</p><p>协程能保留上一次调用时的状态（即所有局部状态的一个特定组合），每次过程序重新进入时，就相当于进入上一次调用的状态，换种说法：进入上一次离开时所处逻辑流的位置。</p><ul><li>yield与协程</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">foo</span>():</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;OK1&quot;</span>)</span><br><span class="line">    <span class="keyword">yield</span> <span class="number">100</span>  <span class="comment"># 切换: 保存/恢复的功能</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;OK2&quot;</span>)</span><br><span class="line">    <span class="keyword">yield</span> <span class="number">1000</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">bar</span>():</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;OK3&quot;</span>)</span><br><span class="line">    <span class="keyword">yield</span> <span class="number">200</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;OK4&quot;</span>)</span><br><span class="line">    <span class="keyword">yield</span> <span class="number">2000</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">gen = foo()</span><br><span class="line">ret = <span class="built_in">next</span>(gen)    <span class="comment"># gen.__next__()</span></span><br><span class="line"><span class="built_in">print</span>(ret)</span><br><span class="line"></span><br><span class="line">gen2 = bar()</span><br><span class="line">ret2 = <span class="built_in">next</span>(gen2)  <span class="comment"># gen.__next__()</span></span><br><span class="line"><span class="built_in">print</span>(ret2)</span><br><span class="line"></span><br><span class="line">ret = <span class="built_in">next</span>(gen)    <span class="comment"># gen.__next__()</span></span><br><span class="line"><span class="built_in">print</span>(ret)</span><br><span class="line"></span><br><span class="line">ret2 = <span class="built_in">next</span>(gen2)  <span class="comment"># gen.__next__()</span></span><br><span class="line"><span class="built_in">print</span>(ret2)</span><br></pre></td></tr></table></figure><ul><li>asyncio模块</li></ul><p>asyncio即Asynchronous I/O是python一个用来处理并发(concurrent)事件的包，是很多python异步架构的基础，多用于处理高并发网络请求方面的问题。</p><p>为了简化并更好地标识异步IO，从<a href="http://www.zzvips.com/article/123934.html">Python</a> 3.5开始引入了新的语法<a href="http://www.zzvips.com/article/98814.html">async</a>和<a href="http://www.zzvips.com/article/120838.html">await</a>，可以让coroutine的代码更简洁易读。</p><p>asyncio 被用作多个提供高性能 Python 异步框架的基础，包括网络和网站服务，数据库连接库，分布式任务队列等等。</p><p>asyncio 往往是构建 IO 密集型和高层级 <strong>结构化</strong> 网络代码的最佳选择。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> asyncio</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">async</span> <span class="keyword">def</span> <span class="title function_">task</span>(<span class="params">i</span>):</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&quot;task <span class="subst">&#123;i&#125;</span> start&quot;</span>)</span><br><span class="line">    <span class="keyword">await</span> asyncio.sleep(<span class="number">1</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&quot;task <span class="subst">&#123;i&#125;</span> end&quot;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建事件循环对象</span></span><br><span class="line">loop = asyncio.get_event_loop()</span><br><span class="line"><span class="comment"># 直接将协程对象加入时间循环中</span></span><br><span class="line">tasks = [task(<span class="number">1</span>), task(<span class="number">2</span>)]</span><br><span class="line"><span class="comment"># asyncio.wait:将协程任务进行收集，功能类似后面的asyncio.gather</span></span><br><span class="line"><span class="comment"># run_until_complete阻塞调用，直到协程全部运行结束才返回</span></span><br><span class="line">loop.run_until_complete(asyncio.wait(tasks))</span><br><span class="line">loop.close()</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><code>task</code>: 任务,对<strong>协程对象</strong>的进一步封装,包含任务的各个状态;asyncio.Task是Future的一个子类，用于实现协作式多任务的库，且Task对象不能用户手动实例化，通过下面2个函数<code>loop.create_task() 或 asyncio.ensure_future()</code>创建。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> asyncio, time</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">async</span> <span class="keyword">def</span> <span class="title function_">work</span>(<span class="params">i, n</span>):  <span class="comment"># 使用async关键字定义异步函数</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;任务&#123;&#125;等待: &#123;&#125;秒&#x27;</span>.<span class="built_in">format</span>(i, n))</span><br><span class="line">    <span class="keyword">await</span> asyncio.sleep(n)  <span class="comment"># 休眠一段时间</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;任务&#123;&#125;在&#123;&#125;秒后返回结束运行&#x27;</span>.<span class="built_in">format</span>(i, n))</span><br><span class="line">    <span class="keyword">return</span> i + n</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">start_time = time.time()  <span class="comment"># 开始时间</span></span><br><span class="line"></span><br><span class="line">tasks = [asyncio.ensure_future(work(<span class="number">1</span>, <span class="number">1</span>)),</span><br><span class="line">         asyncio.ensure_future(work(<span class="number">2</span>, <span class="number">2</span>)),</span><br><span class="line">         asyncio.ensure_future(work(<span class="number">3</span>, <span class="number">3</span>))]</span><br><span class="line"></span><br><span class="line">loop = asyncio.get_event_loop()</span><br><span class="line">loop.run_until_complete(asyncio.wait(tasks))</span><br><span class="line">loop.close()</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;运行时间: &#x27;</span>, time.time() - start_time)</span><br><span class="line"><span class="keyword">for</span> task <span class="keyword">in</span> tasks:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;任务执行结果: &#x27;</span>, task.result())</span><br></pre></td></tr></table></figure><blockquote><p>3.8版本之后</p><p><code>async.run()</code> 运行协程<br><code>async.create_task()</code>创建task<br><code>async.gather()</code>获取返回值</p></blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> asyncio, time</span><br><span class="line"></span><br><span class="line"><span class="keyword">async</span> <span class="keyword">def</span> <span class="title function_">work</span>(<span class="params">i, n</span>):  <span class="comment"># 使用async关键字定义异步函数</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;任务&#123;&#125;等待: &#123;&#125;秒&#x27;</span>.<span class="built_in">format</span>(i, n))</span><br><span class="line">    <span class="keyword">await</span> asyncio.sleep(n)  <span class="comment"># 休眠一段时间</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;任务&#123;&#125;在&#123;&#125;秒后返回结束运行&#x27;</span>.<span class="built_in">format</span>(i, n))</span><br><span class="line">    <span class="keyword">return</span> i + n</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">tasks = []</span><br><span class="line"><span class="keyword">async</span> <span class="keyword">def</span> <span class="title function_">main</span>():</span><br><span class="line">    <span class="keyword">global</span> tasks</span><br><span class="line">    tasks = [asyncio.create_task(work(<span class="number">1</span>, <span class="number">1</span>)),</span><br><span class="line">             asyncio.create_task(work(<span class="number">2</span>, <span class="number">2</span>)),</span><br><span class="line">             asyncio.create_task(work(<span class="number">3</span>, <span class="number">3</span>))]</span><br><span class="line"></span><br><span class="line">    <span class="keyword">await</span> asyncio.wait(tasks) <span class="comment"># 阻塞</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">start_time = time.time()  <span class="comment"># 开始时间</span></span><br><span class="line">asyncio.run(main())</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;运行时间: &#x27;</span>, time.time() - start_time)</span><br><span class="line"><span class="keyword">for</span> task <span class="keyword">in</span> tasks:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;任务执行结果: &#x27;</span>, task.result())</span><br><span class="line"></span><br></pre></td></tr></table></figure><blockquote><p>asyncio.create_task() 函数在 Python 3.7 中被加入。</p></blockquote><p><code>asyncio.gather</code>方法</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 用gather()收集返回值</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> asyncio, time</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">async</span> <span class="keyword">def</span> <span class="title function_">work</span>(<span class="params">i, n</span>):  <span class="comment"># 使用async关键字定义异步函数</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;任务&#123;&#125;等待: &#123;&#125;秒&#x27;</span>.<span class="built_in">format</span>(i, n))</span><br><span class="line">    <span class="keyword">await</span> asyncio.sleep(n)  <span class="comment"># 休眠一段时间</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;任务&#123;&#125;在&#123;&#125;秒后返回结束运行&#x27;</span>.<span class="built_in">format</span>(i, n))</span><br><span class="line">    <span class="keyword">return</span> i + n</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">async</span> <span class="keyword">def</span> <span class="title function_">main</span>():</span><br><span class="line">    tasks = [asyncio.create_task(work(<span class="number">1</span>, <span class="number">1</span>)),</span><br><span class="line">             asyncio.create_task(work(<span class="number">2</span>, <span class="number">2</span>)),</span><br><span class="line">             asyncio.create_task(work(<span class="number">3</span>, <span class="number">3</span>))]</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 将task作为参数传入gather，等异步任务都结束后返回结果列表</span></span><br><span class="line">    response = <span class="keyword">await</span> asyncio.gather(tasks[<span class="number">0</span>], tasks[<span class="number">1</span>], tasks[<span class="number">2</span>])</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;异步任务结果：&quot;</span>, response)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">start_time = time.time()  <span class="comment"># 开始时间</span></span><br><span class="line"></span><br><span class="line">asyncio.run(main())</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;运行时间: &#x27;</span>, time.time() - start_time)</span><br></pre></td></tr></table></figure><h3 id="aiohttp"><a href="#aiohttp" class="headerlink" title="aiohttp"></a>aiohttp</h3><p>爬虫的requests模块，它是阻塞式的发起请求，每次请求发起后需阻塞等待其返回响应，不能做其他的事情。aiohttp模块可以理解成是和requests对应Python异步网络请求库，它是基于 asyncio 的异步模块，可用于实现异步爬虫，有点就是更快于 requests 的同步爬虫。</p><ul><li>安装方式<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install aiohttp</span><br></pre></td></tr></table></figure></li></ul><p>aiohttp是一个为Python提供异步HTTP 客户端/服务端编程，基于<code>asyncio</code>的异步库。asyncio可以实现单线程并发IO操作，其实现了TCP、UDP、SSL等协议，aiohttp就是基于asyncio实现的http框架。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> aiohttp</span><br><span class="line"><span class="keyword">import</span> asyncio</span><br><span class="line"></span><br><span class="line"><span class="keyword">async</span> <span class="keyword">def</span> <span class="title function_">main</span>():</span><br><span class="line">    <span class="keyword">async</span> <span class="keyword">with</span> aiohttp.ClientSession() <span class="keyword">as</span> session:</span><br><span class="line">        <span class="keyword">async</span> <span class="keyword">with</span> session.get(<span class="string">&quot;http://httpbin.org/headers&quot;</span>) <span class="keyword">as</span> response:</span><br><span class="line">            <span class="built_in">print</span>(<span class="keyword">await</span> response.text())</span><br><span class="line"></span><br><span class="line">asyncio.run(main())</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;并发爬虫&quot;&gt;&lt;a href=&quot;#并发爬虫&quot; class=&quot;headerlink&quot; title=&quot;并发爬虫&quot;&gt;&lt;/a&gt;并发爬虫&lt;/h1&gt;&lt;p&gt;并发是指在一台处理器上“同时”处理多个任务。并发是在同一实体上的多个事件&lt;strong&gt;。强调多个事件在同一时间间隔发生。&lt;</summary>
      
    
    
    
    <category term="Python篇" scheme="http://bkystop.github.io/categories/Python%E7%AF%87/"/>
    
    
    <category term="Python" scheme="http://bkystop.github.io/tags/Python/"/>
    
    <category term="Python爬虫" scheme="http://bkystop.github.io/tags/Python%E7%88%AC%E8%99%AB/"/>
    
  </entry>
  
  <entry>
    <title>MySQL数据库</title>
    <link href="http://bkystop.github.io/2023/02/17/MySQL%E6%95%B0%E6%8D%AE%E5%BA%93/"/>
    <id>http://bkystop.github.io/2023/02/17/MySQL%E6%95%B0%E6%8D%AE%E5%BA%93/</id>
    <published>2023-02-17T11:57:39.000Z</published>
    <updated>2023-05-09T13:58:51.714Z</updated>
    
    <content type="html"><![CDATA[<h2 id="MySQL数据库"><a href="#MySQL数据库" class="headerlink" title="MySQL数据库"></a>MySQL数据库</h2><h3 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h3><ul><li>MySQL是一个开源免费的关系型数据库管理系统，由瑞典MySQL AB 公司开发，目前属于 Oracle 旗下公司。MySQL 最流行的关系型数据库管理系统，在 WEB 应用方面MySQL是最好的 RDBMS (Relational Database Management System，关系数据库管理系统) 应用软件之一，具有成本低、速度快、体积小且开放源代码等优点。</li></ul><h3 id="下载及安装"><a href="#下载及安装" class="headerlink" title="下载及安装"></a>下载及安装</h3><ul><li>打开官网，<a href="https://www.mysql.com,点击`downloads`,进行下载(enterprise企业版,和/">https://www.mysql.com，点击`DOWNLOADS`,进行下载（Enterprise企业版，和</a> Community社区版）我们选择社区版，安装成功后记得配置<strong>环境变量</strong></li></ul><h3 id="创建配置文件"><a href="#创建配置文件" class="headerlink" title="创建配置文件"></a>创建配置文件</h3><ul><li>mysql在windows下的配置文件，叫 mysql.ini（MySQL安装目录即可），默认是没有的，我们需要手动创建。</li></ul>  <figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">[mysqld]</span></span><br><span class="line"><span class="comment">; 设置3306端口</span></span><br><span class="line"><span class="attr">port</span>=<span class="number">3306</span></span><br><span class="line"><span class="comment">; 设置mysql的安装目录</span></span><br><span class="line"><span class="attr">basedir</span>=<span class="string">&quot;D:mysql&quot;</span></span><br><span class="line"><span class="comment">; 设置mysql数据库的数据的存放目录，就是前面手动创建的data目录</span></span><br><span class="line"><span class="attr">datadir</span>=<span class="string">&quot;D:/mysql&quot;</span></span><br><span class="line"><span class="comment">; 允许最大连接数</span></span><br><span class="line"><span class="attr">max_connections</span>=<span class="number">200</span></span><br><span class="line"><span class="comment">; 允许连接失败的次数。</span></span><br><span class="line"><span class="attr">max_connect_errors</span>=<span class="number">10</span></span><br><span class="line"><span class="comment">; 服务端使用的字符集默认为utf8mb4</span></span><br><span class="line"><span class="attr">character-set-server</span>=utf8mb4</span><br><span class="line"><span class="comment">; 创建新表时将使用的默认存储引擎</span></span><br><span class="line"><span class="attr">default-storage-engine</span>=INNODB</span><br><span class="line"><span class="comment">; 默认使用“mysql_native_password”插件认证, mysql_native_password</span></span><br><span class="line"><span class="attr">default_authentication_plugin</span>=mysql_native_password</span><br><span class="line"><span class="section">[mysql]</span></span><br><span class="line"><span class="comment">; 设置mysql网络通信的默认字符集</span></span><br><span class="line"><span class="attr">default-character-set</span>=utf8mb4</span><br><span class="line"><span class="section">[client]</span></span><br><span class="line"><span class="comment">; 设置mysql客户端连接服务端时默认使用的端口</span></span><br><span class="line"><span class="attr">port</span>=<span class="number">3306</span></span><br><span class="line"><span class="comment">; 设置mysql客户端的默认字符集</span></span><br><span class="line"><span class="attr">default-character-set</span>=utf8mb4</span><br></pre></td></tr></table></figure><blockquote><p>每次修改配置文件后，都需要重启MySQL服务才有用</p></blockquote><ul><li>初始化数据库</li></ul>  <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysqld --initialize --console</span><br></pre></td></tr></table></figure><ul><li>注册系统服务</li></ul>  <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">mysqld --install mysql80 # mysql80就是自己取的服务名</span><br><span class="line"><span class="meta prompt_"> </span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">注销服务，用于卸载mysql的</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">mysqld --remove mysql80</span></span><br></pre></td></tr></table></figure><h2 id="MYSQL指令"><a href="#MYSQL指令" class="headerlink" title="MYSQL指令"></a>MYSQL指令</h2><ul><li>启动&amp;停止&amp;重启</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">net start mysql80  # 启动</span><br><span class="line">net stop mysql80  # 停止</span><br><span class="line">net start mysql80  # 重启</span><br></pre></td></tr></table></figure><ul><li>登录</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">启动本地MySQL，回车后输入初始密码</span></span><br><span class="line">mysql -u root -p</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">使用远程MySQL，-h参数后加主机名</span></span><br><span class="line">mysql -u root -h [ip] -p</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">退出</span></span><br><span class="line">exit</span><br></pre></td></tr></table></figure><h3 id="进入MySQL"><a href="#进入MySQL" class="headerlink" title="进入MySQL"></a>进入MySQL</h3><blockquote><p> 类比理解数据库：数据库（文件夹），数据表（excel文件）</p><p>MySQL是关系型数据库，我们操作MySQL就要使用SQL（结构化查询语言）。</p></blockquote><ul><li>以下命令都是在MySQL下完成</li></ul><blockquote><p>SQL规范</p><ol><li>在数据库管理系统中，SQL语句关键字不区分大小写(建议用大写) ，参数区分大小写。建议命令大写，数据库名、数据表名、字段名统一小写，如数据库名、数据表名、字段名与关键字同名，使用反引号圈起来，避免冲突。</li><li>SQL语句可单行或多行书写，默认以英文分号（;）结尾，关键词不能跨多行或简写。</li><li>字符串跟日期类型的值都要以 单引号括起来，单词之间需要使用半角的空格隔开。</li><li>用空格和缩进来提高SQL语句的可读性。</li></ol></blockquote><ul><li>SQL类型</li></ul><blockquote><p>根据不同的用途，SQL语句通常分3大类型：</p><ol><li><p>数据定义语言（Data Definition Language，DDL）</p><p>用于创建或删除数据库以及数据表的语句，DDL包含以下几种指令：</p><p>​    CREATE:                   创建数据库和表等对象<br>​    DROP:                      删除数据库和表等对象<br>​    ALTER:                     修改数据库和表等对象的结构</p></li><li><p>数据操纵语言（Data Manipulation Language，DML）</p><p>用于对数据表中的数据进行增删查改的。</p><p>​    SELECT:                  查询表中的数据<br>​    INSERT:                  向表中插入新数据<br>​    UPDATE:                 变更表中的数据<br>​    DELETE:                  删除表中的数据</p></li><li><p>数据控制语言（Data Control Language，DCL）</p><p>用于对控制数据库的操作权限的，包括用户权限以及数据操作权限。</p><p>​    COMMIT:               确认对数据库中的数据进行的变更<br>​    ROLLBACK:            取消对数据库中的数据进行的变更<br>​    GRANT:                  赋予用户操作权限<br>​    REMOVE:               取消用户的操作权限</p></li></ol></blockquote><ul><li> 注释</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">第一种：</span><br><span class="line"><span class="comment">-- 单行注释</span></span><br><span class="line"></span><br><span class="line">第二种：</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">   多行注释</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line">第三种：</span><br><span class="line"># mysql支持单行注释</span><br></pre></td></tr></table></figure><ul><li>登陆后修改用户名密码</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">alter</span> <span class="keyword">user</span> <span class="string">&#x27;root&#x27;</span>@<span class="string">&#x27;localhost&#x27;</span> identified <span class="keyword">by</span> <span class="string">&#x27;123456&#x27;</span>;</span><br><span class="line"># <span class="string">&#x27;root&#x27;</span> 就是要修改密码的用户名</span><br><span class="line"># <span class="string">&#x27;localhost&#x27;</span> 表示允许用户在什么地址下可以使用密码登陆到数据库服务器，localhost表示本地登陆</span><br><span class="line"># <span class="string">&#x27;123456&#x27;</span>  新的密码了</span><br></pre></td></tr></table></figure><h3 id="数据库管理"><a href="#数据库管理" class="headerlink" title="数据库管理"></a>数据库管理</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">show</span> databases;  # 查看已有的数据库</span><br><span class="line"><span class="keyword">create</span> database <span class="operator">&lt;</span>数据库名字<span class="operator">&gt;</span>; # 创建数据库</span><br><span class="line"># 存在就不重复创建，编码类型utf8</span><br><span class="line"><span class="keyword">create</span> database [if <span class="keyword">not</span> <span class="keyword">exists</span>] <span class="operator">&lt;</span>数据库名字<span class="operator">&gt;</span> [<span class="type">character</span> <span class="keyword">set</span> utf8]  </span><br><span class="line"><span class="keyword">drop</span> database <span class="operator">&lt;</span>数据库名字<span class="operator">&gt;</span>; # 删除数据库</span><br><span class="line">use <span class="operator">&lt;</span>数据库名字<span class="operator">&gt;</span>; # 进入数据库</span><br><span class="line"><span class="keyword">alter</span> database  <span class="operator">&lt;</span>数据库名字<span class="operator">&gt;</span> [<span class="type">character</span> <span class="keyword">set</span> xxx] # 修改当前使用数据库</span><br><span class="line"><span class="keyword">select</span> database(); # 查看当前使用的数据库</span><br><span class="line"><span class="keyword">show</span> tables; # 查看数据库下的数据表</span><br></pre></td></tr></table></figure><h3 id="数据表管理"><a href="#数据表管理" class="headerlink" title="数据表管理"></a>数据表管理</h3><ul><li><p>数据表中的一条记录就相当于excel的一行内容。</p></li><li><p>查看表</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">use <span class="operator">&lt;</span>数据库名字<span class="operator">&gt;</span>; # 进入数据库</span><br><span class="line"><span class="keyword">show</span> tables; # 查看数据库下的数据表</span><br></pre></td></tr></table></figure></li><li><p>创建表（字段名就是列名词）</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> [if <span class="keyword">not</span> <span class="keyword">exists</span>] <span class="operator">&lt;</span>表名称号<span class="operator">&gt;</span>(</span><br><span class="line">字段名，数据类型[ ( 存储空间 )    字段约束 ],</span><br><span class="line">字段名，数据类型[ ( 存储空间 )    字段约束 ],</span><br><span class="line">字段名，数据类型[ ( 存储空间 )    字段约束 ]，</span><br><span class="line">)<span class="keyword">default</span> charset<span class="operator">=</span>utf8</span><br></pre></td></tr></table></figure><p>注意：</p></li></ul><blockquote><ol><li>上面SQL语句中，小括号中的定义字段语句后面必须以英文逗号结尾，而最后一个字段的定义语句不能有英文逗号出现，否则报错。</li><li>在同一张数据表中，字段名是不能相同，否则报错！</li><li>创建数据表的SQL语句中，存储空间和字段约束是选填的，而字段名和数据类型则是必须填写的。</li></ol></blockquote><ul><li>可以写一行</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> tb1(id <span class="type">int</span>, name <span class="type">varchar</span>(<span class="number">16</span>), age <span class="type">int</span>)<span class="keyword">default</span> charset<span class="operator">=</span>utf8;</span><br></pre></td></tr></table></figure><ul><li><p>也可以分开写（直到分号才结束）</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> tb2(</span><br><span class="line">id <span class="type">int</span>, </span><br><span class="line">name <span class="type">varchar</span>(<span class="number">16</span>), </span><br><span class="line">age <span class="type">int</span></span><br><span class="line">)<span class="keyword">default</span> charset<span class="operator">=</span>utf8;</span><br></pre></td></tr></table></figure></li><li><p>两种创建方式均可</p><img src="/2023/02/17/MySQL%E6%95%B0%E6%8D%AE%E5%BA%93/image-20230407203149778.png" class title="image-20230407203149778"></li><li><p>此时show tables就可以看到创建的两张表了</p><img src="/2023/02/17/MySQL%E6%95%B0%E6%8D%AE%E5%BA%93/image-20230407203208994.png" class title="image-20230407203208994"></li><li><p>不允许为空</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> tb2(</span><br><span class="line">id <span class="type">int</span>,</span><br><span class="line">name <span class="type">varchar</span>(<span class="number">16</span>) <span class="keyword">not</span> <span class="keyword">null</span>,  # 不允许此列为空 </span><br><span class="line">age <span class="type">int</span>  <span class="keyword">null</span> # 允许此列为空（默认）</span><br><span class="line">)<span class="keyword">default</span> charset<span class="operator">=</span>utf8;</span><br></pre></td></tr></table></figure></li><li><p>插入时，写默认值</p></li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> tb2(</span><br><span class="line">id <span class="type">int</span>, </span><br><span class="line">name <span class="type">varchar</span>(<span class="number">16</span>), </span><br><span class="line">age <span class="type">int</span> <span class="keyword">default</span> <span class="number">18</span>  # 插入数据时，age列的值默认为<span class="number">18</span></span><br><span class="line">)<span class="keyword">default</span> charset<span class="operator">=</span>utf8;</span><br></pre></td></tr></table></figure><ul><li><p>主键一般表示当前行的数据的编码</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> tb2(</span><br><span class="line">id <span class="type">int</span> <span class="keyword">primary</span> key,  # 主键，不允许为空，不能重复 </span><br><span class="line">name <span class="type">varchar</span>(<span class="number">16</span>), </span><br><span class="line">age <span class="type">int</span></span><br><span class="line">)<span class="keyword">default</span> charset<span class="operator">=</span>utf8;</span><br></pre></td></tr></table></figure></li><li><p>内部维护，自增 </p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> tb2(</span><br><span class="line">id <span class="type">int</span> auto_increment <span class="keyword">primary</span> key,  # 内部维护，自增 </span><br><span class="line">name <span class="type">varchar</span>(<span class="number">16</span>), </span><br><span class="line">age <span class="type">int</span></span><br><span class="line">)<span class="keyword">default</span> charset<span class="operator">=</span>utf8;</span><br></pre></td></tr></table></figure></li><li><p>一般创建不允许id为空</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> tb2(</span><br><span class="line">id <span class="type">int</span> <span class="keyword">not</span> <span class="keyword">null</span> auto_increment <span class="keyword">primary</span> key,  </span><br><span class="line">name <span class="type">varchar</span>(<span class="number">16</span>), </span><br><span class="line">age <span class="type">int</span></span><br><span class="line">)<span class="keyword">default</span> charset<span class="operator">=</span>utf8;</span><br></pre></td></tr></table></figure></li><li><p>删除表</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">drop</span> <span class="keyword">table</span> <span class="operator">&lt;</span>表名称<span class="operator">&gt;</span>;</span><br></pre></td></tr></table></figure></li><li><p>展示表格的属性</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">desc</span> <span class="operator">&lt;</span>表名称<span class="operator">&gt;</span>;</span><br></pre></td></tr></table></figure><img src="/2023/02/17/MySQL%E6%95%B0%E6%8D%AE%E5%BA%93/image-20230407203240780.png" class title="image-20230407203240780"></li></ul><h3 id="数据类型"><a href="#数据类型" class="headerlink" title="数据类型"></a>数据类型</h3><p>以下列举常用的数据类型，更多参考官方文档</p><ul><li><p>tinyint</p><blockquote><p>有符号：取值范围：-128<del>127（有正负）默认<br>无符号：取值范围：0</del>255（只有正）</p></blockquote></li><li><p>以下就是创建无符号的表</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> tb2(</span><br><span class="line">id <span class="type">int</span> <span class="keyword">not</span> <span class="keyword">null</span> auto_increment <span class="keyword">primary</span> key,  </span><br><span class="line">age tinyint unsigned</span><br><span class="line">)<span class="keyword">default</span> charset<span class="operator">=</span>utf8;</span><br></pre></td></tr></table></figure></li><li><p>int</p><blockquote><p>int                有符号：取值范围：-2147483648<del>2147483647（有正负）默认<br>int unsigned无符号：取值范围：0</del>4294967296（只有正）</p></blockquote></li><li><p>bigint</p><blockquote><p>这个的范围比int还大的多</p></blockquote></li><li><p>float</p></li><li><p>double</p></li><li><p>decimal</p><blockquote><p>准确的小数值，m是数字总个数（负号不算），d是小数点后放两位，m最大值为65，d最大值为30</p></blockquote></li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> tb3(</span><br><span class="line">id <span class="type">int</span> <span class="keyword">not</span> <span class="keyword">null</span> auto_increment <span class="keyword">primary</span> key,  </span><br><span class="line">salary <span class="type">decimal</span>(m,d)</span><br><span class="line">)<span class="keyword">default</span> charset<span class="operator">=</span>utf8;</span><br></pre></td></tr></table></figure><ul><li><p>char，速度快</p><blockquote><p>定长字符串(固定用11个字符存储) ，最多可容纳255个字符</p></blockquote><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> tb4(</span><br><span class="line">id <span class="type">int</span> <span class="keyword">not</span> <span class="keyword">null</span> auto_increment <span class="keyword">primary</span> key,  </span><br><span class="line">moble <span class="type">char</span>(<span class="number">11</span>)</span><br><span class="line">)<span class="keyword">default</span> charset<span class="operator">=</span>utf8;</span><br></pre></td></tr></table></figure></li><li><p>varchar ，节省时间 </p><blockquote><p>变长字符串，真实数据多长，就按照多长存储。最大根据编码最大字节/3</p></blockquote><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> tb5(</span><br><span class="line">id <span class="type">int</span> <span class="keyword">not</span> <span class="keyword">null</span> auto_increment <span class="keyword">primary</span> key,  </span><br><span class="line">moble <span class="type">varchar</span>(<span class="number">11</span>)</span><br><span class="line">)<span class="keyword">default</span> charset<span class="operator">=</span>utf8;</span><br></pre></td></tr></table></figure></li><li><p>text</p><blockquote><p>text数据类型用于保存变长的最大字符串，则可以多达六万多字符，mediumtext， longtext更多<br>一般，长文本用text，</p></blockquote></li><li><p>mediumtext</p></li><li><p>longtext</p></li><li><p>datatime</p><blockquote><p>YYYY-MM-DD HH:MM:SS</p></blockquote></li><li><p>data</p><blockquote><p>YYYY-MM-DD</p></blockquote></li></ul><h3 id="数据行操作"><a href="#数据行操作" class="headerlink" title="数据行操作"></a>数据行操作</h3><ul><li>新增数据<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> 表名(<span class="operator">&lt;</span>字段名<span class="operator">&gt;</span>,<span class="operator">&lt;</span>字段名<span class="operator">&gt;</span>) <span class="keyword">values</span>(值,值);</span><br></pre></td></tr></table></figure></li><li>删除数据</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">delete</span> <span class="keyword">from</span> 表名;</span><br><span class="line"><span class="keyword">delete</span> <span class="keyword">from</span> 表名 <span class="keyword">where</span> 条件;</span><br></pre></td></tr></table></figure><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">delete</span> <span class="keyword">from</span> usertable <span class="keyword">where</span> id <span class="operator">=</span> <span class="number">3</span>;</span><br><span class="line"><span class="keyword">delete</span> <span class="keyword">from</span> usertable <span class="keyword">where</span> id <span class="operator">=</span> <span class="number">3</span> <span class="keyword">and</span> name <span class="operator">=</span> &quot;王&quot;;</span><br><span class="line"><span class="keyword">delete</span> <span class="keyword">from</span> usertable <span class="keyword">where</span> id <span class="operator">!=</span> <span class="number">3</span>;</span><br><span class="line"><span class="keyword">delete</span> <span class="keyword">from</span> usertable <span class="keyword">where</span> id <span class="operator">&gt;</span> <span class="number">3</span>;</span><br><span class="line"><span class="keyword">delete</span> <span class="keyword">from</span> usertable <span class="keyword">where</span> id <span class="keyword">in</span> (<span class="number">3</span>,<span class="number">5</span>); # 产出<span class="number">3</span>和<span class="number">4</span></span><br></pre></td></tr></table></figure><ul><li><p>修改数据</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">update</span> 表名 <span class="keyword">set</span> 列<span class="operator">=</span>值;</span><br><span class="line"><span class="keyword">update</span> 表名 <span class="keyword">set</span> 列<span class="operator">=</span>值,列<span class="operator">=</span>值;</span><br><span class="line"><span class="keyword">update</span> 表名 <span class="keyword">set</span> 列<span class="operator">=</span>值 wherr 条件;</span><br></pre></td></tr></table></figure></li><li><p>查询数据</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> 表名称;</span><br><span class="line"><span class="keyword">select</span> 列名称 <span class="keyword">from</span> 表名称;</span><br><span class="line"><span class="keyword">select</span> 列名称 <span class="keyword">from</span> 表名称 <span class="keyword">where</span> 条件;</span><br></pre></td></tr></table></figure></li><li><p>创建用户表（练习）</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> usertable(</span><br><span class="line">id <span class="type">int</span> <span class="keyword">not</span> <span class="keyword">null</span> auto_increment <span class="keyword">primary</span> key,  </span><br><span class="line">name <span class="type">varchar</span>(<span class="number">64</span>) <span class="keyword">not</span> <span class="keyword">null</span>,</span><br><span class="line">password <span class="type">char</span>(<span class="number">64</span>) <span class="keyword">not</span> <span class="keyword">null</span>,</span><br><span class="line">email <span class="type">varchar</span>(<span class="number">64</span>) <span class="keyword">not</span> <span class="keyword">null</span>,</span><br><span class="line">age tinyint,</span><br><span class="line">salary <span class="type">decimal</span>(<span class="number">10</span>,<span class="number">2</span>),</span><br><span class="line">ctime datetime</span><br><span class="line">)<span class="keyword">default</span> charset<span class="operator">=</span>utf8;</span><br></pre></td></tr></table></figure></li></ul><h3 id="查询数据"><a href="#查询数据" class="headerlink" title="查询数据"></a>查询数据</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span><span class="operator">|</span><span class="operator">&lt;</span>字段名<span class="operator">&gt;</span>,<span class="operator">&lt;</span>字段名<span class="operator">&gt;</span> ...   <span class="keyword">FROM</span> <span class="operator">&lt;</span>数据表名<span class="operator">&gt;</span></span><br><span class="line">                 <span class="keyword">WHERE</span> 条件</span><br><span class="line">                 <span class="keyword">GROUP</span> <span class="keyword">BY</span> field</span><br><span class="line">                 <span class="keyword">HAVING</span> 筛选</span><br><span class="line">                 <span class="keyword">ORDER</span> <span class="keyword">BY</span> field</span><br><span class="line">                 LIMIT 限制条数</span><br></pre></td></tr></table></figure><ul><li>where</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"># 比较运算符：</span><br><span class="line"><span class="operator">&gt;</span> <span class="operator">&lt;</span> <span class="operator">&gt;=</span> <span class="operator">&lt;=</span> <span class="operator">&lt;&gt;</span> <span class="operator">!=</span></span><br><span class="line"><span class="keyword">between</span> <span class="number">80</span> <span class="keyword">and</span> <span class="number">100</span> 值在<span class="number">10</span>到<span class="number">20</span>之间</span><br><span class="line"><span class="keyword">in</span>(<span class="number">80</span>,<span class="number">90</span>,<span class="number">100</span>) 值是<span class="number">10</span>或<span class="number">20</span>或<span class="number">30</span></span><br><span class="line"><span class="keyword">like</span> <span class="string">&#x27;a%&#x27;</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">pattern可以是%或者_，</span></span><br><span class="line"><span class="comment">如果是%则表示任意多字符</span></span><br><span class="line"><span class="comment">如果是_则表示一个字符_，两个_则表示两个字符：__</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"># 逻辑运算符</span><br><span class="line">在多个条件直接可以使用逻辑运算符 <span class="keyword">and</span> <span class="keyword">or</span> <span class="keyword">not</span></span><br><span class="line"></span><br><span class="line"># 正则 </span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> emp <span class="keyword">WHERE</span> emp_name REGEXP <span class="string">&#x27;^yu&#x27;</span>;</span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> emp <span class="keyword">WHERE</span> name REGEXP <span class="string">&#x27;n$&#x27;</span>;</span><br></pre></td></tr></table></figure><ul><li>orde</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="operator">*</span><span class="operator">|</span><span class="operator">&lt;</span>字段名<span class="operator">&gt;</span>,<span class="operator">&lt;</span>字段名<span class="operator">&gt;</span>... <span class="keyword">from</span> tab_name <span class="keyword">order</span> <span class="keyword">by</span> field [<span class="keyword">Asc</span><span class="operator">|</span><span class="keyword">Desc</span>]</span><br><span class="line"># <span class="keyword">Asc</span> 升序、<span class="keyword">Desc</span> 降序，其中<span class="keyword">asc</span>为默认值 <span class="keyword">ORDER</span> <span class="keyword">BY</span> 子句应位于<span class="keyword">SELECT</span>语句的结尾。</span><br></pre></td></tr></table></figure><ul><li>group by：分组查询</li></ul><p>GROUP BY 语句根据某个列对结果集进行分组。分组一般配合着聚合函数完成查询。</p><p><strong>常用聚合(统计)函数</strong></p><blockquote><ul><li><code>max()</code>：最大值。</li><li><code>min()</code>：最小值。</li><li><code>avg()</code>：平均值。</li><li><code>sum()</code>：总和。</li><li><code>count()</code>：个数。</li></ul></blockquote><p>在MySQL的SQL执行逻辑中，where条件必须放在group by前面,也就是先通过where条件将结果查询出来，再交给group by去分组进行统计，统计之后的查询用having。</p><ul><li>limit：记录条数限制</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">from</span> <span class="operator">&lt;</span>数据表名<span class="operator">&gt;</span> limit <span class="number">1</span>;</span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">from</span> <span class="operator">&lt;</span>数据表名<span class="operator">&gt;</span> limit <span class="number">2</span>,<span class="number">5</span>; # 跳过前两条显示接下来的五条纪录</span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">from</span> <span class="operator">&lt;</span>数据表名<span class="operator">&gt;</span> limit <span class="number">2</span>,<span class="number">2</span>;</span><br></pre></td></tr></table></figure><ul><li>distinct：查询去重</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="keyword">distinct</span> salary <span class="keyword">from</span> <span class="operator">&lt;</span>数据表名<span class="operator">&gt;</span> <span class="keyword">order</span> <span class="keyword">by</span> salary;</span><br></pre></td></tr></table></figure><ul><li>更新记录</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">UPDATE</span> <span class="operator">&lt;</span>表名<span class="operator">&gt;</span> <span class="keyword">SET</span> 字段 <span class="number">1</span><span class="operator">=</span>值 <span class="number">1</span> [,字段 <span class="number">2</span><span class="operator">=</span>值 <span class="number">2</span>… ] [<span class="keyword">WHERE</span> 子句 ]</span><br></pre></td></tr></table></figure><ul><li>删除记录</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">DELETE</span> <span class="keyword">FROM</span> <span class="operator">&lt;</span>表名<span class="operator">&gt;</span> [<span class="keyword">WHERE</span> 子句] [<span class="keyword">ORDER</span> <span class="keyword">BY</span> 子句] [LIMIT 子句]</span><br></pre></td></tr></table></figure><h3 id="关联表"><a href="#关联表" class="headerlink" title="关联表"></a>关联表</h3><blockquote><p>创建两张表，第二个表的单行/多行与第一张表的一行相关，但第二个表中的一个行只可以与第一个表中的一个行相关。这是为了节约数据库存储空间。</p></blockquote>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;MySQL数据库&quot;&gt;&lt;a href=&quot;#MySQL数据库&quot; class=&quot;headerlink&quot; title=&quot;MySQL数据库&quot;&gt;&lt;/a&gt;MySQL数据库&lt;/h2&gt;&lt;h3 id=&quot;简介&quot;&gt;&lt;a href=&quot;#简介&quot; class=&quot;headerlink&quot; titl</summary>
      
    
    
    
    <category term="数据库篇" scheme="http://bkystop.github.io/categories/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%AF%87/"/>
    
    
    <category term="MySQL" scheme="http://bkystop.github.io/tags/MySQL/"/>
    
  </entry>
  
  <entry>
    <title>Python爬虫基础</title>
    <link href="http://bkystop.github.io/2023/02/06/Python%E7%88%AC%E8%99%AB%E5%9F%BA%E7%A1%80/"/>
    <id>http://bkystop.github.io/2023/02/06/Python%E7%88%AC%E8%99%AB%E5%9F%BA%E7%A1%80/</id>
    <published>2023-02-06T06:23:42.000Z</published>
    <updated>2023-04-09T09:10:25.981Z</updated>
    
    <content type="html"><![CDATA[<h2 id="爬虫是什么"><a href="#爬虫是什么" class="headerlink" title="爬虫是什么"></a>爬虫是什么</h2><ul><li>爬虫的本质：模拟浏览器打开网页，捕获网页中我们想要的那部分数据。</li><li>入门：爬虫是一种自动抓取互联网信息的程序或脚本。主要用于搜索引擎，对一些网站的数据进行大量解析和收集。简单的爬虫程序通过request模块几行就可以对收据进行批量收集，，</li><li>进阶学习：想要学习好并没有那么简单。它关系到了计算机网络，前端开发，后端编程。对于爬取到的数据进行存储还需要学习数据库，对于有反爬措施的网站还需要进行反反爬，逆向等。为了能快速准确的采集到我们需要的数据，爬虫的核心在于并发和逆向，这将大大提高我们的效率。在人工智能时代，模型的训练是需要大量数据的，爬虫与机器学习，数据分析更是有密不可分的关系。</li></ul><h2 id="网络基础"><a href="#网络基础" class="headerlink" title="网络基础"></a>网络基础</h2><h3 id="http协议"><a href="#http协议" class="headerlink" title="http协议"></a>http协议</h3><ol><li>简介</li></ol><p> HTTP协议是Hyper Text Transfer Protocol（超文本传输协议）的缩写,是用于万维网（WWW:World Wide Web ）服务器与本地浏览器之间传输超文本的传送协议。HTTP是一个属于应用层的面向对象的协议，由于其简捷、快速的方式，适用于分布式超媒体信息系统。它于1990年提出，经过几年的使用与发展，得到不断地完善和扩展。HTTP协议工作于客户端-服务端架构为上。浏览器作为HTTP客户端通过URL向HTTP服务端即WEB服务器发送所有请求。Web服务器根据接收到的请求后，向客户端发送响应信息。</p><ol start="2"><li>http协议的特性</li></ol><blockquote><ol><li>基于TCP/IP协议</li></ol><p>http协议是基于TCP/IP协议之上的应用层协议。</p><ol start="2"><li> 基于请求－响应模式</li></ol><p>HTTP协议规定,请求从客户端发出,最后服务器端响应该请求并返回。换句话说,肯定是先从客户端开始建立通信的,服务器端在没有接收到请求之前不会发送响应</p><ol start="3"><li>无状态保存</li></ol><p>HTTP是一种不保存状态,即无状态(stateless)协议。HTTP协议自身不对请求和响应之间的通信状态进行保存。也就是说在HTTP这个级别,协议对于发送过的请求或响应都不做持久化处理。</p><p>使用HTTP协议,每当有新的请求发送时,就会有对应的新响应产生。协议本身并不保留之前一切的请求或响应报文的信息。这是为了更快地处理大量事务,确保协议的可伸缩性,而特意把HTTP协议设计成如此简单的。</p><ol start="4"><li> 短连接和长连接</li></ol><p>HTTP1.0默认使用的是短连接。浏览器和服务器每进行一次HTTP操作，就建立一次连接，任务结束就中断连接。<br>HTTP/1.1起，默认使用长连接。要使用长连接，客户端和服务器的HTTP首部的Connection都要设置为keep-alive，才能支持长连接。<br>HTTP长连接，指的是复用TCP连接。多个HTTP请求可以复用同一个TCP连接，这就节省了TCP连接建立和断开的消耗。</p></blockquote><ol start="3"><li>http请求协议与响应协议</li></ol><img src="/2023/02/06/Python%E7%88%AC%E8%99%AB%E5%9F%BA%E7%A1%80/image-20230406143839579.png" class><blockquote><p>http协议包含由浏览器发送数据到服务器需要遵循的请求协议与服务器发送数据到浏览器需要遵循的请求协议。用于HTTP协议交互的信被为HTTP报文。请求端(客户端)的HTTP报文 做请求报文,响应端(服务器端)的 做响应报文。HTTP报文本身是由多行数据构成的字文本。</p></blockquote><img src="/2023/02/06/Python%E7%88%AC%E8%99%AB%E5%9F%BA%E7%A1%80/image-20230406143917589.png" class><p>一个完整的URL包括：协议、ip、端口、路径、参数  </p><p>例如： <a href="https://www.baidu.com/s?wd=yuan">https://www.baidu.com/s?wd=yuan</a>     其中https是协议，<a href="http://www.baidu.com/">www.baidu.com</a> 是IP，端口默认80，/s是路径，参数是wd=yuan</p><p>请求方式: get与post请求</p><ul><li>GET提交的数据会放在URL之后，以?分割URL和传输数据，参数之间以&amp;相连，如EditBook?name=test1&amp;id=123456. POST方法是把提交的数据放在HTTP包的请求体中.</li><li>GET提交的数据大小有限制（因为浏览器对URL的长度有限制），而POST方法提交的数据没有限制</li></ul><p>响应状态码：状态码的职 是当客户端向服务器端发送请求时, 返回的请求 结果。借助状态码,用户可以知道服务器端是正常 理了请求,还是出 现了 。状态码如200 OK,以3位数字和原因组成。</p><ol start="4"><li>浏览器开发者工具</li></ol><p>在网页时通过F12即可进入开发者模式。</p><h2 id="前端基础"><a href="#前端基础" class="headerlink" title="前端基础"></a>前端基础</h2><h3 id="html基础-HTML基础-bkys的客栈-bkystop-github-io"><a href="#html基础-HTML基础-bkys的客栈-bkystop-github-io" class="headerlink" title="html基础(HTML基础 | bkys的客栈 (bkystop.github.io))"></a>html基础(<a href="https://bkystop.github.io/2022/05/07/HTML%E5%9F%BA%E7%A1%80/">HTML基础 | bkys的客栈 (bkystop.github.io)</a>)</h3><h3 id="css基础-CSS基础-bkys的客栈-bkystop-github-io"><a href="#css基础-CSS基础-bkys的客栈-bkystop-github-io" class="headerlink" title="css基础(CSS基础 | bkys的客栈 (bkystop.github.io))"></a>css基础(<a href="https://bkystop.github.io/2022/05/07/CSS%E5%9F%BA%E7%A1%80/">CSS基础 | bkys的客栈 (bkystop.github.io)</a>)</h3><h3 id="JavaScript基础-JavaScript基础-bkys的客栈-bkystop-github-io"><a href="#JavaScript基础-JavaScript基础-bkys的客栈-bkystop-github-io" class="headerlink" title="JavaScript基础(JavaScript基础 | bkys的客栈 (bkystop.github.io))"></a>JavaScript基础(<a href="https://bkystop.github.io/2022/05/30/JavaScript%E5%9F%BA%E7%A1%80/">JavaScript基础 | bkys的客栈 (bkystop.github.io)</a>)</h3><h2 id="数据解析"><a href="#数据解析" class="headerlink" title="数据解析"></a>数据解析</h2><h3 id="正则表达式"><a href="#正则表达式" class="headerlink" title="正则表达式"></a>正则表达式</h3><p>Regular Expression，译作正则表达式或正规表示法，表示有规则的表达式，正则表达式就是描述一段文本排列规则的表达式。</p><p>正则表达式是用于处理复杂文本信息的强大的高级文本操作工具。正则表达式拥有自己独特的规则语法以及一个独立的正则处理引擎，我们根据正则语法编写好规则（模式）以后，引擎不仅能够根据规则进行模糊文本查找，还可以进行模糊分割，替换等复杂的文本操作，能让开发者随心所欲地处理文本信息。正则引擎一般由编程语言提供操作，像python就提供了re模块或regex模块来调用正则处理引擎。</p><p>这是一套独立的编程语言，我们学习python的正则以后，也可以在java，php，go，javascript，sql等编程语言中使用。</p><p>正则对字符串或文本的操作，无非是分割、匹配、查找和替换。</p><p>在线测试工具  <a href="http://tool.chinaz.com/regex/">http://tool.chinaz.com/regex/</a></p><ol><li>元字符(Metacharacters)</li></ol><p>元字符是具有特殊含义的字符。</p><table><thead><tr><th>元字符</th><th align="left">描述</th></tr></thead><tbody><tr><td><strong>.</strong></td><td align="left">叫通配符、万能通配符或通配元字符，匹配1个除了换行符\n以外任何原子</td></tr><tr><td><strong>[]</strong></td><td align="left">匹配一个中括号中出现的任意原子</td></tr><tr><td><strong>[^原子]</strong></td><td align="left">匹配一个没有在中括号出现的任意原子</td></tr><tr><td><strong>+</strong></td><td align="left">叫加号贪婪符，指定左边原子出现1次或多次</td></tr><tr><td>*****</td><td align="left">叫星号贪婪符，指定左边原子出现0次或多次</td></tr><tr><td><strong>?</strong></td><td align="left">叫非贪婪符，指定左边原子出现0次或1次</td></tr><tr><td><strong>{n,m}</strong></td><td align="left">叫数量范围贪婪符，指定左边原子的数量范围，有{n}，{n, }, {,m}, {n,m}四种写法，其中n与m必须是非负整数。</td></tr><tr><td><strong>^</strong></td><td align="left">叫开始边界符或开始锚点符，匹配一行的开头位置</td></tr><tr><td><strong>$</strong></td><td align="left">叫结束边界符或结束锚点符，匹配一行的结束位置</td></tr><tr><td><strong>|</strong></td><td align="left">指定原子或正则模式进行二选一或多选一</td></tr><tr><td><strong>()</strong></td><td align="left">对原子或正则模式进行捕获提取和分组划分整体操作，</td></tr><tr><td>*<em>\*</em></td><td align="left">转义字符，可以把原子转换特殊元字符，也可以把特殊元字符转成原子。</td></tr></tbody></table><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> re</span><br><span class="line"><span class="string">&quot;&quot;&quot;re.findall(正则模式, 文本)  基于正则模式查找所有匹配的文本内容&quot;&quot;&quot;</span></span><br><span class="line"><span class="comment"># part1: 通配符-&gt;.  字符集-&gt; []</span></span><br><span class="line">ret1 = re.findall(<span class="string">&quot;a&quot;</span>, <span class="string">&quot;a,b,c,d,e&quot;</span>)</span><br><span class="line">ret1 = re.findall(<span class="string">&quot;.&quot;</span>, <span class="string">&quot;a,b,c,d,e&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># part2:重复元字符-&gt; + * &#123;&#125; ?</span></span><br><span class="line">ret2 = re.findall(<span class="string">&quot;[0-9a-zA-Z]&quot;</span>, <span class="string">&quot;apple,banana,orange,melon&quot;</span>)</span><br><span class="line">ret2 = re.findall(<span class="string">&quot;\w&quot;</span>, <span class="string">&quot;apple,banana,orange,melon&quot;</span>)</span><br><span class="line">ret2 = re.findall(<span class="string">&quot;\w+&quot;</span>, <span class="string">&quot;apple,banana,orange,melon&quot;</span>)</span><br><span class="line">ret2 = re.findall(<span class="string">&quot;\w+?&quot;</span>, <span class="string">&quot;apple,banana,orange,melon&quot;</span>)  <span class="comment"># 取消贪婪匹配</span></span><br><span class="line">ret2 = re.findall(<span class="string">&quot;\w*&quot;</span>, <span class="string">&quot;apple,banana,orange,melon&quot;</span>)</span><br><span class="line">ret2 = re.findall(<span class="string">&quot;\w&#123;6&#125;&quot;</span>, <span class="string">&quot;apple,banana,orange,melon&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># part3: 位置元字符-&gt; ^ $</span></span><br><span class="line">ret3 = re.findall(<span class="string">&quot;^\w&#123;5&#125;&quot;</span>, <span class="string">&quot;apple,banana,peach,orange,melon&quot;</span>)</span><br><span class="line">ret3 = re.findall(<span class="string">&quot;\w&#123;5&#125;$&quot;</span>, <span class="string">&quot;apple,banana,peach,orange,melon&quot;</span>)</span><br><span class="line">ret3 = re.findall(<span class="string">&quot;^\w&#123;5&#125;$&quot;</span>, <span class="string">&quot;apple,banana,peach,orange,melon&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(ret3)</span><br><span class="line"></span><br><span class="line"><span class="comment"># part4:</span></span><br><span class="line"><span class="comment"># | 指定原子或正则模式进行二选一或多选一</span></span><br><span class="line"><span class="comment"># () 具备模式捕获的能力，也就是优先提取数据的能力，通过(?:) 可以取消模式捕获</span></span><br><span class="line">ret4 = re.findall(<span class="string">&quot;,\w&#123;5&#125;,&quot;</span>, <span class="string">&quot;,apple,banana,peach,orange,melon,&quot;</span>)  <span class="comment"># 筛选出5个字符的单词</span></span><br><span class="line">ret4 = re.findall(<span class="string">&quot;,(\w&#123;5&#125;),&quot;</span>, <span class="string">&quot;,apple,banana,peach,orange,melon,&quot;</span>)  <span class="comment"># 筛选出5个字符的单词</span></span><br><span class="line">ret4 = re.findall(<span class="string">&quot;\w+@\w+\.com&quot;</span>, <span class="string">&quot;123abc@163.com,....234xyz@qq.com,....&quot;</span>)  <span class="comment"># 筛选出5个字符的单词</span></span><br><span class="line">ret4 = re.findall(<span class="string">&quot;(\w+)@qq\.com&quot;</span>, <span class="string">&quot;123abc@163.com,....234xyz@qq.com,....&quot;</span>)  <span class="comment"># 筛选出5个字符的单词</span></span><br><span class="line">ret4 = re.findall(<span class="string">&quot;(?:\w+)@(?:qq|163)\.com&quot;</span>, <span class="string">&quot;123abc@163.com,....234xyz@qq.com,....&quot;</span>)  <span class="comment"># 筛选出5个字符的单词</span></span><br><span class="line"><span class="built_in">print</span>(ret4)</span><br><span class="line"></span><br><span class="line"><span class="comment"># part5:  转义符-&gt; \d \D  \w \W      \n    \s \S  \b \B</span></span><br><span class="line"><span class="string">&quot;&quot;&quot; \b 1个单词边界原子 &quot;&quot;&quot;</span></span><br><span class="line">txt = <span class="string">&quot;my name is nana. nihao,nana&quot;</span></span><br><span class="line">ret = re.findall(<span class="string">r&quot;na&quot;</span>, txt)</span><br><span class="line">ret = re.findall(<span class="string">r&quot;\bna&quot;</span>, txt)</span><br><span class="line">ret = re.findall(<span class="string">r&quot;\bna\w&#123;2&#125;&quot;</span>, txt)</span><br><span class="line"><span class="built_in">print</span>(ret)  <span class="comment"># [&#x27;na&#x27;, &#x27;na&#x27;, &#x27;na&#x27;]</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>转义元字符是<code>\</code>开头的元字符，由于某些正则模式会在开发中反复被用到，所以正则语法预定义了一些特殊正则模式以方便我们简写。</p><table><thead><tr><th>元字符</th><th>描述</th><th>示例</th></tr></thead><tbody><tr><td><strong>\d</strong></td><td>匹配一个数字原子，等价于<code>[0-9]</code>。</td><td>\d</td></tr><tr><td>\D</td><td>匹配一个非数字原子。等价于<code>[^0-9]</code>或<code>[^\d]</code>。</td><td>“\D”</td></tr><tr><td>\b</td><td>匹配一个单词边界原子，也就是指单词和空格间的位置。</td><td>er\b</td></tr><tr><td>\B</td><td>匹配一个非单词边界原子，等价于 <code>[^\b]</code></td><td>r”\Bain”r”ain\B”</td></tr><tr><td><strong>\n</strong></td><td>匹配一个换行符</td><td></td></tr><tr><td>\t</td><td>匹配一个制表符，tab键</td><td></td></tr><tr><td><strong>\s</strong></td><td>匹配一个任何空白字符原子，包括空格、制表符、换页符等等。等价于<code>[ \f\n\r\t\v]</code>。</td><td>“\s”</td></tr><tr><td>\S</td><td>匹配一个任何非空白字符原子。等价于<code>[^ \f\n\r\t\v]</code>或 <code>[^\s]</code>。</td><td>“\S”</td></tr><tr><td><strong>\w</strong></td><td>匹配一个包括下划线的单词原子。等价于<code>[A-Za-z0-9_]</code>。</td><td>“\w”</td></tr><tr><td>\W</td><td>匹配任何非单词字符。等价于<code>[^A-Za-z0-9_]</code> 或 <code>[^\w]</code>。</td><td>“\W”</td></tr></tbody></table><blockquote><p>注意：python本身没有内置正则处理的，python中的正则就是一段字符串，我们需要使用python模块中提供的函数把字符串发送给正则引擎，正则引擎会把字符串转换成真正的正则表达式来处理文本内容。</p></blockquote><h4 id="re模块中的常用函数"><a href="#re模块中的常用函数" class="headerlink" title="re模块中的常用函数"></a>re模块中的常用函数</h4><p><code>re</code>模块提供了一组正则处理函数，使我们可以在字符串中搜索匹配项：</p><table><thead><tr><th>函数</th><th>描述</th></tr></thead><tbody><tr><td><strong>findall</strong></td><td>按指定的正则模式查找文本中所有符合正则模式的匹配项，以列表格式返回结果。</td></tr><tr><td><strong>search</strong></td><td>在字符串中<strong>任何位置</strong>查找首个符合正则模式的匹配项，存在则返回re.Match对象，不存在返回None</td></tr><tr><td><strong>match</strong></td><td>判定字符串<strong>开始位置</strong>是否匹配正则模式的规则，匹配则返回re.Match对象，不匹配返回None</td></tr><tr><td><strong>split</strong></td><td>按指定的正则模式来分割字符串，返回一个分割后的列表</td></tr><tr><td><strong>sub</strong></td><td>把字符串按指定的正则模式来查找符合正则模式的匹配项，并可以替换一个或多个匹配项成其他内容。</td></tr></tbody></table><ul><li>如果一个正则表达式要使用几千遍，每一次都会编译，出于效率的考虑进行正则表达式的编译，就不需要每次都编译了，节省了编译的时间，从而提升效率</li><li>对于多次使用正则表达式，每一次编译都会浪费时间，为了提高效率，使用compile,不用每次都编译</li></ul><p><code>compile()</code></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> re</span><br><span class="line"></span><br><span class="line">re_email = re.<span class="built_in">compile</span>(<span class="string">r&quot;(?:\+86)?1[3-9]\d&#123;9&#125;&quot;</span>)</span><br><span class="line">ret = re_email.findall(<span class="string">&quot;15100649928,123@qq.com,13653287791,666@163.com&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(ret)</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>如果一个正则表达式要使用几千遍，每一次都会编译，出于效率的考虑进行正则表达式的编译，就不需要每次都编译了，节省了编译的时间，从而提升效率</p><h4 id="正则进阶"><a href="#正则进阶" class="headerlink" title="正则进阶"></a>正则进阶</h4><h4 id><a href="#" class="headerlink" title=".*?"></a><code>.*?</code></h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> re</span><br><span class="line"></span><br><span class="line">text = <span class="string">&#x27;&lt;12&gt; &lt;xyz&gt; &lt;!@#$%&gt; &lt;1a!#e2&gt; &lt;&gt;&#x27;</span></span><br><span class="line"></span><br><span class="line">ret = re.findall(<span class="string">&quot;&lt;\d+&gt;&quot;</span>, text)</span><br><span class="line">ret = re.findall(<span class="string">&quot;&lt;\w+&gt;&quot;</span>, text)</span><br><span class="line">ret = re.findall(<span class="string">&quot;&lt;.+&gt;&quot;</span>, text)</span><br><span class="line">ret = re.findall(<span class="string">&quot;&lt;.+?&gt;&quot;</span>, text)</span><br><span class="line">ret = re.findall(<span class="string">&quot;&lt;.*?&gt;&quot;</span>, text)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(ret)</span><br></pre></td></tr></table></figure><ul><li>模式修正符</li></ul><p>模式修正符，也叫正则修饰符，模式修正符就是给正则模式增强或增加功能的。</p><p><strong>通用flags（修正符）</strong></p><table><thead><tr><th align="left">值</th><th align="left">说明</th></tr></thead><tbody><tr><td align="left">re.I</td><td align="left">是匹配对大小写不敏感</td></tr><tr><td align="left">re.L</td><td align="left">做本地化识别匹配</td></tr><tr><td align="left">re.M</td><td align="left">多行匹配，影响到^和$</td></tr><tr><td align="left">re.S</td><td align="left">使.匹配包括换行符在内的所有字符</td></tr><tr><td align="left">re.U</td><td align="left">根据Unicode字符集解析字符，影响\w、\W、\b、\B</td></tr><tr><td align="left">re.X</td><td align="left">通过给予我们功能灵活的格式以便更好的理解正则表达式</td></tr></tbody></table><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> re</span><br><span class="line"></span><br><span class="line">text = <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">&lt;12</span></span><br><span class="line"><span class="string">&gt;</span></span><br><span class="line"><span class="string"> </span></span><br><span class="line"><span class="string"> &lt;x</span></span><br><span class="line"><span class="string"> yz&gt; </span></span><br><span class="line"><span class="string"> </span></span><br><span class="line"><span class="string"> &lt;!@#$%&gt; </span></span><br><span class="line"><span class="string"> </span></span><br><span class="line"><span class="string"> &lt;1a!#</span></span><br><span class="line"><span class="string"> e2&gt; </span></span><br><span class="line"><span class="string"> </span></span><br><span class="line"><span class="string"> &lt;&gt;</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line">ret = re.findall(<span class="string">&quot;&lt;.*?&gt;&quot;</span>, text)</span><br><span class="line">ret = re.findall(<span class="string">&quot;&lt;.*?&gt;&quot;</span>, text, re.S)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(ret)</span><br></pre></td></tr></table></figure><ul><li>常用的正则表达式</li></ul><table><thead><tr><th align="left">场景</th><th>正则表达式</th></tr></thead><tbody><tr><td align="left">用户名</td><td><code>^[a-z0-9_-]&#123;3,16&#125;$</code></td></tr><tr><td align="left">密码</td><td><code>^[a-z0-9_-]&#123;6,18&#125;$</code></td></tr><tr><td align="left">手机号码</td><td><code>^(?:\+86)?1[3-9]\d&#123;9&#125;$</code></td></tr><tr><td align="left">颜色的十六进制值</td><td>`^#?([a-f0-9]{6}</td></tr><tr><td align="left">电子邮箱</td><td><code>^[a-z\d]+(\.[a-z\d]+)*@([\da-z](-[\da-z])?)+\.[a-z]+$</code></td></tr><tr><td align="left">URL</td><td>`^(?:https://</td></tr><tr><td align="left">IP 地址</td><td>`((2[0-4]\d</td></tr><tr><td align="left"><strong>HTML 标签</strong></td><td><code>^&lt;([a-z]+)([^&lt;]+)*(?:&gt;(.*)&lt;\/\1&gt;</code></td></tr><tr><td align="left">utf-8编码下的汉字范围</td><td><code>^[\u2E80-\u9FFF]+$</code></td></tr></tbody></table><h3 id="BS4"><a href="#BS4" class="headerlink" title="BS4"></a>BS4</h3><h4 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h4><p>简单来说，Beautiful Soup是python的一个库，最主要的功能是从网页抓取数据。官方解释如下：</p><blockquote><p>Beautiful Soup提供一些简单的、python式的函数用来处理导航、搜索、修改分析树等功能。<br>它是一个工具箱，通过解析文档为用户提供需要抓取的数据，因为简单，所以不需要多少代码就可以写出一个完整的应用程序。</p></blockquote><p>Beautiful Soup 是一个可以从HTML或XML文件中提取数据的Python库.它能够通过你喜欢的转换器实现惯用的文档导航,查找,修改文档的方式.Beautiful Soup会帮你节省数小时甚至数天的工作时间.你可能在寻找 Beautiful Soup3 的文档,Beautiful Soup 3 目前已经停止开发,官网推荐在现在的项目中使用Beautiful Soup 4。</p><blockquote><p>官方文档: <a href="https://beautifulsoup.readthedocs.io/zh_CN/v4.4.0/">https://beautifulsoup.readthedocs.io/zh_CN/v4.4.0/</a></p></blockquote><p>导入模块</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># pip install bs4 安装</span></span><br><span class="line"> </span><br><span class="line"><span class="keyword">from</span> bs4 <span class="keyword">import</span> BeautifulSoup</span><br></pre></td></tr></table></figure><p>Beautiful Soup支持Python标准库中的HTML解析器,还支持一些第三方的解析器，如果我们不安装它，则 Python 会使用 Python默认的解析器，lxml 解析器更加强大，速度更快，推荐安装。</p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip3 install lxml</span><br></pre></td></tr></table></figure><p>另一个可供选择的解析器是纯Python实现的 html5lib , html5lib的解析方式与浏览器相同,可以选择下列方法来安装html5lib:</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip3 install html5lib</span><br></pre></td></tr></table></figure><p>解析器对比：</p><img src="/2023/02/06/Python%E7%88%AC%E8%99%AB%E5%9F%BA%E7%A1%80/877318-20180816151649680-1825192992.png" class><p>简单使用：</p><ul><li>从一个<code>soup</code>对象开始，以下两种方式生成一个soup对象</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> bs4 <span class="keyword">import</span> BeautifulSoup</span><br><span class="line">soup = BeautifulSoup(<span class="built_in">open</span>(<span class="string">&quot;index.html&quot;</span>))    <span class="comment">##传入文件</span></span><br><span class="line">soup = BeautifulSoup(<span class="string">&quot;&lt;html&gt;data&lt;/html&gt;&quot;</span>)   <span class="comment">##文本</span></span><br></pre></td></tr></table></figure><blockquote><p>构造soup对象时，可以传入解析器参数，如果不传入的话，会以最好的方式去解析</p></blockquote><p>下面的一段HTML代码将作为例子被多次用到.这是 <em>爱丽丝梦游仙境的</em> 的一段内容(以后内容中简称为 <em>爱丽丝</em> 的文档):</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">html_doc = <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">&lt;html&gt;&lt;head&gt;&lt;title&gt;The Dormouse&#x27;s story&lt;/title&gt;&lt;/head&gt;</span></span><br><span class="line"><span class="string">&lt;body&gt;</span></span><br><span class="line"><span class="string">&lt;p class=&quot;title&quot;&gt;&lt;b&gt;The Dormouse&#x27;s story&lt;/b&gt;&lt;/p&gt;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">&lt;p class=&quot;story&quot;&gt;Once upon a time there were three little sisters; and their names were</span></span><br><span class="line"><span class="string">&lt;a href=&quot;http://example.com/elsie&quot; class=&quot;sister&quot; id=&quot;link1&quot;&gt;Elsie&lt;/a&gt;,</span></span><br><span class="line"><span class="string">&lt;a href=&quot;http://example.com/lacie&quot; class=&quot;sister&quot; id=&quot;link2&quot;&gt;Lacie&lt;/a&gt; and</span></span><br><span class="line"><span class="string">&lt;a href=&quot;http://example.com/tillie&quot; class=&quot;sister&quot; id=&quot;link3&quot;&gt;Tillie&lt;/a&gt;;</span></span><br><span class="line"><span class="string">and they lived at the bottom of a well.&lt;/p&gt;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">&lt;p class=&quot;story&quot;&gt;...&lt;/p&gt;</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br></pre></td></tr></table></figure><p>使用BeautifulSoup解析这段代码,能够得到一个 <code>BeautifulSoup</code> 的对象</p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> bs4 <span class="keyword">import</span> BeautifulSoup</span><br><span class="line">soup = BeautifulSoup(html_doc, <span class="string">&#x27;html.parser&#x27;</span>)</span><br></pre></td></tr></table></figure><p>从文档中找到所有<a>标签的链接:</a></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> link <span class="keyword">in</span> soup.find_all(<span class="string">&#x27;a&#x27;</span>):</span><br><span class="line">    <span class="built_in">print</span>(link.get(<span class="string">&#x27;href&#x27;</span>))</span><br></pre></td></tr></table></figure><p>从文档中获取所有文字内容:</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(soup.get_text())</span><br></pre></td></tr></table></figure><h4 id="四种对象"><a href="#四种对象" class="headerlink" title="四种对象"></a>四种对象</h4><p>Beautiful Soup将复杂HTML文档转换成一个复杂的树形结构,每个节点都是Python对象,所有对象可以归纳为4种<code>BeautifulSoup</code>， <code>Tag</code> , <code>NavigableString</code> ,   <code>Comment</code></p><p>tag对象，同网页中的<strong>标签</strong>的意思</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> bs4 <span class="keyword">import</span> BeautifulSoup</span><br><span class="line"></span><br><span class="line">html_doc = <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">&lt;html&gt;&lt;head&gt;&lt;title&gt;The Dormouse&#x27;s story&lt;/title&gt;&lt;/head&gt;</span></span><br><span class="line"><span class="string">&lt;body&gt;</span></span><br><span class="line"><span class="string">&lt;p class=&quot;title&quot;&gt;&lt;b&gt;The Dormouse&#x27;s story&lt;/b&gt;&lt;/p&gt;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">&lt;p class=&quot;story&quot;&gt;Once upon a time there were three little sisters; and their names were</span></span><br><span class="line"><span class="string">&lt;a href=&quot;http://example.com/elsie&quot; class=&quot;sister&quot; id=&quot;link1&quot;&gt;Elsie&lt;/a&gt;,</span></span><br><span class="line"><span class="string">&lt;a href=&quot;http://example.com/lacie&quot; class=&quot;sister&quot; id=&quot;link2&quot;&gt;Lacie&lt;/a&gt; and</span></span><br><span class="line"><span class="string">&lt;a href=&quot;http://example.com/tillie&quot; class=&quot;sister&quot; id=&quot;link3&quot;&gt;Tillie&lt;/a&gt;;</span></span><br><span class="line"><span class="string">and they lived at the bottom of a well.&lt;/p&gt;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">&lt;p class=&quot;story&quot;&gt;...&lt;/p&gt;</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 一、查找tag对象</span></span><br><span class="line">soup = BeautifulSoup(html_doc, <span class="string">&#x27;html.parser&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(soup.head, <span class="built_in">type</span>(soup.head))</span><br><span class="line"><span class="built_in">print</span>(soup.title, <span class="built_in">type</span>(soup.title))</span><br><span class="line"><span class="built_in">print</span>(soup.a, <span class="built_in">type</span>(soup.a))  <span class="comment"># 第一个a标签，如果想获取所有a标签要用到soup.find_all(&#x27;a&#x27;)</span></span><br><span class="line"><span class="built_in">print</span>(soup.p.b)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 二、查找tag对象的标签名和属性</span></span><br><span class="line"><span class="built_in">print</span>(soup.a.name)  <span class="comment"># a</span></span><br><span class="line"><span class="built_in">print</span>(soup.p.b.name)  <span class="comment"># b</span></span><br><span class="line"><span class="built_in">print</span>(soup.a[<span class="string">&quot;href&quot;</span>])</span><br><span class="line"><span class="built_in">print</span>(soup.a.attrs)</span><br><span class="line"></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">三、</span></span><br><span class="line"><span class="string">HTML 4定义了一系列可以包含多个值的属性.在HTML5中移除了一些,却增加更多.</span></span><br><span class="line"><span class="string">最常见的多值的属性是 class (一个tag可以有多个CSS的class). </span></span><br><span class="line"><span class="string">还有一些属性 rel , rev , accept-charset , headers , accesskey . </span></span><br><span class="line"><span class="string">在Beautiful Soup中多值属性的返回类型是list</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(soup.a[<span class="string">&quot;class&quot;</span>])  <span class="comment"># 返回列表</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 四、tag的属性可以被添加,删除或修改(tag的属性操作方法与字典一样)</span></span><br><span class="line"><span class="comment"># soup.a[&quot;class&quot;] = [&quot;sister c1&quot;]</span></span><br><span class="line"><span class="comment"># del soup.a[&quot;id&quot;]</span></span><br><span class="line"><span class="comment"># print(soup)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 五、获取标签对象的文本内容</span></span><br><span class="line"><span class="built_in">print</span>(soup.p.string)  <span class="comment"># p下的文本只有一个时，取到，否则为None</span></span><br><span class="line"><span class="built_in">print</span>(soup.p.strings)  <span class="comment"># 拿到一个生成器对象, 取到p下所有的文本内容</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> soup.p.strings:</span><br><span class="line">    <span class="built_in">print</span>(i)</span><br><span class="line"><span class="comment"># 如果tag包含了多个子节点,tag就无法确定 .string 方法应该调用哪个子节点的内容, .string 的输出结果是 None，如果只有一个子节点那么就输出该子节点的文本，比如下面的这种结构，soup.p.string 返回为None,但soup.p.strings就可以找到所有文本</span></span><br><span class="line">p2 = soup.find_all(<span class="string">&quot;p&quot;</span>)[<span class="number">1</span>]</span><br><span class="line"><span class="built_in">print</span>(p2.string)</span><br><span class="line"><span class="built_in">print</span>(p2.strings)</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> p2.strings:</span><br><span class="line">    <span class="built_in">print</span>(i)</span><br><span class="line"><span class="comment"># text 和 string</span></span><br><span class="line"><span class="built_in">print</span>(soup.p.string)</span><br><span class="line"><span class="built_in">print</span>(soup.p.text)  <span class="comment"># 取到p下所有的文本内容,text属性更常用，并且它可以直接过滤掉注释</span></span><br><span class="line"><span class="built_in">print</span>(p2.text)</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>这种情况下，会产生Comment对象</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">markup = &quot;<span class="tag">&lt;<span class="name">b</span>&gt;</span><span class="comment">&lt;!--Hey, buddy. Want to buy a used parser?--&gt;</span><span class="tag">&lt;/<span class="name">b</span>&gt;</span>&quot;</span><br><span class="line">soup = BeautifulSoup(markup,&quot;html.parser&quot;)</span><br><span class="line">comment = soup.b.string</span><br><span class="line">print(comment)</span><br><span class="line">print(type(comment))</span><br></pre></td></tr></table></figure><p><strong>结果为：</strong></p><figure class="highlight vbnet"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Hey, buddy. Want <span class="keyword">to</span> buy a used parser?</span><br><span class="line">&lt;<span class="keyword">class</span> <span class="comment">&#x27;bs4.element.Comment&#x27;&gt;</span></span><br></pre></td></tr></table></figure><p>我们可以看到这时候.string返回的对象不再是<code>bs4.element.NavigableString</code>，而是<code>Comment</code></p><h4 id="遍历文档树（导航文档树）"><a href="#遍历文档树（导航文档树）" class="headerlink" title="遍历文档树（导航文档树）"></a>遍历文档树（导航文档树）</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> bs4 <span class="keyword">import</span> BeautifulSoup</span><br><span class="line"></span><br><span class="line">html_doc = <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">&lt;html&gt;&lt;head&gt;&lt;title&gt;The Dormouse&#x27;s story&lt;/title&gt;&lt;/head&gt;</span></span><br><span class="line"><span class="string">&lt;body&gt;</span></span><br><span class="line"><span class="string">&lt;p class=&quot;title&quot;&gt;&lt;b&gt;The Dormouse&#x27;s story&lt;/b&gt;&lt;/p&gt;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">&lt;p class=&quot;story&quot;&gt;Once upon a time there were three little sisters; and their names were</span></span><br><span class="line"><span class="string">&lt;a href=&quot;http://example.com/elsie&quot; class=&quot;sister&quot; id=&quot;link1&quot;&gt;Elsie&lt;/a&gt;,</span></span><br><span class="line"><span class="string">&lt;a href=&quot;http://example.com/lacie&quot; class=&quot;sister&quot; id=&quot;link2&quot;&gt;Lacie&lt;/a&gt; and</span></span><br><span class="line"><span class="string">&lt;a href=&quot;http://example.com/tillie&quot; class=&quot;sister&quot; id=&quot;link3&quot;&gt;Tillie&lt;/a&gt;;</span></span><br><span class="line"><span class="string">and they lived at the bottom of a well.&lt;/p&gt;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">&lt;p class=&quot;story&quot;&gt;...&lt;/p&gt;</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line">soup = BeautifulSoup(html_doc, <span class="string">&#x27;html.parser&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 1、嵌套选择</span></span><br><span class="line"><span class="built_in">print</span>(soup.head.title.text)</span><br><span class="line"><span class="built_in">print</span>(soup.body.a.text)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 2、子节点、子孙节点</span></span><br><span class="line"><span class="built_in">print</span>(soup.p.contents)  <span class="comment"># p下所有子节点</span></span><br><span class="line"><span class="built_in">print</span>(soup.p.children)  <span class="comment"># 得到一个迭代器,包含p下所有子节点</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i, child <span class="keyword">in</span> <span class="built_in">enumerate</span>(soup.p.children, <span class="number">1</span>):</span><br><span class="line">    <span class="built_in">print</span>(i, child)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(soup.p.descendants)  <span class="comment"># 获取子孙节点,p下所有的标签都会选择出来</span></span><br><span class="line"><span class="keyword">for</span> i, child <span class="keyword">in</span> <span class="built_in">enumerate</span>(soup.p.descendants, <span class="number">1</span>):</span><br><span class="line">    <span class="built_in">print</span>(i, child)</span><br><span class="line"><span class="keyword">for</span> i, child <span class="keyword">in</span> <span class="built_in">enumerate</span>(soup.find_all(<span class="string">&quot;p&quot;</span>)[<span class="number">1</span>].descendants, <span class="number">1</span>):</span><br><span class="line">    <span class="built_in">print</span>(i, child)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 3、父节点、祖先节点</span></span><br><span class="line"><span class="built_in">print</span>(soup.a.parent)  <span class="comment"># 获取a标签的父节点</span></span><br><span class="line"><span class="built_in">print</span>(soup.a.parent.text)  <span class="comment"># 获取a标签的父节点</span></span><br><span class="line"><span class="built_in">print</span>(soup.a.parents)  <span class="comment"># 找到a标签所有的祖先节点，父亲的父亲，父亲的父亲的父亲...</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 4、兄弟节点</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;===&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(soup.a.next_sibling)  <span class="comment"># 下一个兄弟,类型：&lt;class &#x27;bs4.element.NavigableString&#x27;&gt;</span></span><br><span class="line"><span class="built_in">print</span>(soup.a.next_sibling.next_sibling)</span><br><span class="line"><span class="built_in">print</span>(soup.a.previous_sibling.previous_sibling)</span><br><span class="line"><span class="built_in">print</span>(soup.a.previous_siblings)  <span class="comment"># 上面的兄弟们=&gt;生成器对象</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="搜索文档树"><a href="#搜索文档树" class="headerlink" title="搜索文档树"></a>搜索文档树</h4><ul><li>recursive 是否从当前位置递归往下查询，如果不递归，只会查询当前<code>soup</code>文档的子元素</li><li>string 这里是通过tag的内容来搜索，并且<strong>返回的是类容，而不是tag类型的元素</strong></li><li><code>**kwargs</code> 自动拆包接受属性值，所以才会有<code>soup.find_all(&#39;a&#39;,id=&#39;title&#39;)</code> ，id=’title’为<code>**kwargs</code>自动拆包掺入</li></ul><p>BeautifulSoup定义了很多搜索方法,这里着重介绍2个: find() 和 find_all() .其它方法的参数和用法类似</p><p>参数列表解读</p><ul><li> <code>find_all</code></li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find_all( name , attrs , recursive , string , **kwargs )</span><br></pre></td></tr></table></figure><ul><li><strong>name参数</strong></li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">soup = BeautifulSoup(html_doc, <span class="string">&#x27;lxml&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 一、 name 四种过滤器: 字符串、正则表达式、列表、方法</span></span><br><span class="line"><span class="comment"># 1、字符串：即标签名</span></span><br><span class="line"><span class="built_in">print</span>(soup.find_all(name=<span class="string">&#x27;a&#x27;</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment"># 2、正则表达式</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(soup.find_all(name=re.<span class="built_in">compile</span>(<span class="string">&#x27;^b&#x27;</span>)))  <span class="comment"># 找出b开头的标签，结果有body和b标签</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 3、列表：如果传入列表参数,Beautiful Soup会将与列表中任一元素匹配的内容返回.下面代码找到文档中所有&lt;a&gt;标签和&lt;b&gt;标签:</span></span><br><span class="line"><span class="built_in">print</span>(soup.find_all(name=[<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>]))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 4、方法:如果没有合适过滤器,那么还可以定义一个方法,方法只接受一个元素参数 ,如果这个方法返回 True 表示当前元素匹配并且被找到,如果不是则反回 False</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">has_class_but_no_id</span>(<span class="params">tag</span>):</span><br><span class="line">    <span class="keyword">return</span> tag.has_attr(<span class="string">&#x27;class&#x27;</span>) <span class="keyword">and</span> tag.has_attr(<span class="string">&#x27;id&#x27;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(soup.find_all(name=has_class_but_no_id))</span><br><span class="line"></span><br></pre></td></tr></table></figure><ul><li><strong>keyword 参数</strong></li></ul><p>如果一个指定名字的参数不是搜索内置的参数名,搜索时会把该参数当作指定名字tag的属性来搜索,如果包含一个名字为 <code>id</code> 的参数,Beautiful Soup会搜索每个tag的”id”属性.</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(soup.find_all(href=<span class="string">&quot;http://example.com/tillie&quot;</span>))</span><br><span class="line"><span class="built_in">print</span>(soup.find_all(href=re.<span class="built_in">compile</span>(<span class="string">&quot;^http://&quot;</span>)))</span><br><span class="line"><span class="built_in">print</span>(soup.find_all(<span class="built_in">id</span>=<span class="literal">True</span>)) <span class="comment"># 拥有id属性的tag</span></span><br><span class="line"><span class="built_in">print</span>(soup.find_all(href=re.<span class="built_in">compile</span>(<span class="string">&quot;http://&quot;</span>), <span class="built_in">id</span>=<span class="string">&#x27;link1&#x27;</span>) <span class="comment"># 多个属性</span></span><br><span class="line"><span class="built_in">print</span>(soup.find_all(<span class="string">&quot;a&quot;</span>, class_=<span class="string">&quot;sister&quot;</span>)) <span class="comment"># 注意，class是Python的关键字，所以class属性用class_</span></span><br><span class="line"><span class="built_in">print</span>(soup.find_all(<span class="string">&quot;a&quot;</span>,attrs=&#123;<span class="string">&quot;href&quot;</span>: re.<span class="built_in">compile</span>(<span class="string">&quot;^http://&quot;</span>), <span class="string">&quot;id&quot;</span>: re.<span class="built_in">compile</span>(<span class="string">&quot;^link[12]&quot;</span>)&#125;))      </span><br><span class="line"><span class="comment"># 通过 find_all() 方法的 attrs 参数定义一个字典参数来搜索包含特殊属性的tag:</span></span><br><span class="line">data_soup.find_all(attrs=&#123;<span class="string">&quot;data-foo&quot;</span>: <span class="string">&quot;value&quot;</span>&#125;)    </span><br></pre></td></tr></table></figure><ul><li><strong>text参数</strong></li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> re</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(soup.find_all(text=<span class="string">&quot;Elsie&quot;</span>))</span><br><span class="line"><span class="comment"># [&#x27;Elsie&#x27;]</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(soup.find_all(text=[<span class="string">&quot;Tillie&quot;</span>, <span class="string">&quot;Elsie&quot;</span>, <span class="string">&quot;Lacie&quot;</span>]))</span><br><span class="line"><span class="comment"># [&#x27;Elsie&#x27;, &#x27;Lacie&#x27;, &#x27;Tillie&#x27;]</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 只要包含Dormouse就可以</span></span><br><span class="line"><span class="built_in">print</span>(soup.find_all(text=re.<span class="built_in">compile</span>(<span class="string">&quot;Dormouse&quot;</span>)))</span><br><span class="line"><span class="comment"># [&quot;The Dormouse&#x27;s story&quot;, &quot;The Dormouse&#x27;s story&quot;]</span></span><br></pre></td></tr></table></figure><ul><li><strong>limit参数</strong></li></ul><p><code>find_all()</code> 方法返回全部的搜索结构,如果文档树很大那么搜索会很慢.如果我们不需要全部结果,可以使用 <code>limit</code> 参数限制返回结果的数量.效果与SQL中的limit关键字类似,当搜索到的结果数量达到 <code>limit</code> 的限制时,就停止搜索返回结果.</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(soup.find_all(<span class="string">&quot;a&quot;</span>,limit=<span class="number">2</span>))</span><br></pre></td></tr></table></figure><ul><li><strong>recursive 参数</strong></li></ul><p>调用tag的 <code>find_all()</code> 方法时,Beautiful Soup会检索当前tag的所有子孙节点,如果只想搜索tag的直接子节点,可以使用参数 <code>recursive=False</code> </p><ul><li><code>find</code></li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find( name , attrs , recursive , string , **kwargs )</span><br></pre></td></tr></table></figure><p><code>find_all()</code> 方法将返回文档中符合条件的所有tag,尽管有时候我们只想得到一个结果.比如文档中只有一个<body>标签,那么使用 <code>find_all()</code> 方法来查找<body>标签就不太合适, 使用 <code>find_all</code> 方法并设置 <code>limit=1</code> 参数不如直接使用 <code>find()</code> 方法.下面两行代码是等价的:</body></body></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">soup.find_all(<span class="string">&#x27;title&#x27;</span>, limit=<span class="number">1</span>)</span><br><span class="line"><span class="comment"># [&lt;title&gt;The Dormouse&#x27;s story&lt;/title&gt;]</span></span><br><span class="line"></span><br><span class="line">soup.find(<span class="string">&#x27;title&#x27;</span>)</span><br><span class="line"><span class="comment"># &lt;title&gt;The Dormouse&#x27;s story&lt;/title&gt;</span></span><br></pre></td></tr></table></figure><p><strong>唯一的区别是 <code>find_all()</code> 方法的返回结果是值包含一个元素的列表,而 <code>find()</code> 方法直接返回结果.<code>find_all()</code> 方法没有找到目标是返回空列表, <code>find()</code> 方法找不到目标时,返回 <code>None</code> .</strong></p><p><code>soup.head.title</code> 是 tag的名字 方法的简写.这个简写的原理就是多次调用当前tag的 <code>find()</code> 方法:</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">soup.head.title</span><br><span class="line"><span class="comment"># &lt;title&gt;The Dormouse&#x27;s story&lt;/title&gt;</span></span><br><span class="line"></span><br><span class="line">soup.find(<span class="string">&quot;head&quot;</span>).find(<span class="string">&quot;title&quot;</span>)</span><br><span class="line"><span class="comment"># &lt;title&gt;The Dormouse&#x27;s story&lt;/title&gt;</span></span><br></pre></td></tr></table></figure><ul><li><code>其它方法</code></li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#（1） find_parents() 和 find_parent()</span></span><br><span class="line">a_string = soup.find(text=<span class="string">&quot;Lacie&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(a_string)  <span class="comment"># Lacie</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(a_string.find_parent())</span><br><span class="line"><span class="comment"># &lt;a class=&quot;sister&quot; href=&quot;http://example.com/lacie&quot; id=&quot;link2&quot;&gt;Lacie&lt;/a&gt;</span></span><br><span class="line"><span class="built_in">print</span>(a_string.find_parents())</span><br><span class="line"><span class="built_in">print</span>(a_string.find_parent(<span class="string">&quot;p&quot;</span>))</span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">&lt;p class=&quot;story&quot;&gt;</span></span><br><span class="line"><span class="string">    Once upon a time there were three little sisters; and their names were</span></span><br><span class="line"><span class="string">    &lt;a class=&quot;sister&quot; href=&quot;http://example.com/elsie&quot; id=&quot;link1&quot;&gt;Elsie&lt;/a&gt;,</span></span><br><span class="line"><span class="string">    &lt;a class=&quot;sister&quot; href=&quot;http://example.com/lacie&quot; id=&quot;link2&quot;&gt;Lacie&lt;/a&gt; and</span></span><br><span class="line"><span class="string">    &lt;a class=&quot;sister&quot; href=&quot;http://example.com/tillie&quot; id=&quot;link3&quot;&gt;Tillie&lt;/a&gt;;</span></span><br><span class="line"><span class="string">    and they lived at the bottom of a well.</span></span><br><span class="line"><span class="string">&lt;/p&gt;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># （2）find_next_siblings() 和 find_next_sibling()</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">这2个方法通过 .next_siblings 属性对当tag的所有后面解析的兄弟tag节点进行迭代, find_next_siblings() 方法返回所有符合条件的后面的兄弟节点, find_next_sibling() 只返回符合条件的后面的第一个tag节点.</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"></span><br><span class="line">first_link = soup.a</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(first_link.find_next_sibling(<span class="string">&quot;a&quot;</span>))</span><br><span class="line"><span class="comment"># &lt;a class=&quot;sister&quot; href=&quot;http://example.com/lacie&quot; id=&quot;link2&quot;&gt;Lacie&lt;/a&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(first_link.find_next_siblings(<span class="string">&quot;a&quot;</span>))</span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">[&lt;a class=&quot;sister&quot; href=&quot;http://example.com/lacie&quot; id=&quot;link2&quot;&gt;Lacie&lt;/a&gt;,</span></span><br><span class="line"><span class="string">&lt;a class=&quot;sister&quot; href=&quot;http://example.com/tillie&quot; id=&quot;link3&quot;&gt;Tillie&lt;/a&gt;</span></span><br><span class="line"><span class="string">]</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="comment"># find_previous_siblings() 和 find_previous_sibling()的使用类似于find_next_sibling和find_next_siblings。</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># （3）find_all_next() 和 find_next()</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">这2个方法通过 .next_elements 属性对当前tag的之后的tag和字符串进行迭代, find_all_next() 方法返回所有符合条件的节点, find_next() 方法返回第一个符合条件的节点:　</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line">first_link = soup.a</span><br><span class="line"><span class="built_in">print</span>(first_link.find_all_next(string=<span class="literal">True</span>))</span><br><span class="line"><span class="comment"># [&#x27;Elsie&#x27;, &#x27;,\n&#x27;, &#x27;Lacie&#x27;, &#x27; and\n&#x27;, &#x27;Tillie&#x27;, &#x27;;\nand they lived at the bottom of a well.&#x27;, &#x27;\n&#x27;, &#x27;...&#x27;, &#x27;\n&#x27;]</span></span><br><span class="line"><span class="built_in">print</span>(first_link.find_next(string=<span class="literal">True</span>)) <span class="comment"># Elsie</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># find_all_previous() 和 find_previous()的使用类似于find_all_next() 和 find_next()。</span></span><br></pre></td></tr></table></figure><h4 id="Css选择器"><a href="#Css选择器" class="headerlink" title="Css选择器"></a>Css选择器</h4><ul><li>select</li></ul><p>css选择器的方法为select(css_selector)<br>目前支持的选择器如下案例，css选择器可以参考<a href="https://www.w3school.com.cn/cssref/css_selectors.ASP">https://www.w3school.com.cn/cssref/css_selectors.ASP</a></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br></pre></td><td class="code"><pre><span class="line">soup.select(&quot;title&quot;)</span><br><span class="line"># [<span class="tag">&lt;<span class="name">title</span>&gt;</span>The Dormouse&#x27;s story<span class="tag">&lt;/<span class="name">title</span>&gt;</span>]</span><br><span class="line"></span><br><span class="line">soup.select(&quot;p nth-of-type(3)&quot;)</span><br><span class="line"># [<span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">&quot;story&quot;</span>&gt;</span>...<span class="tag">&lt;/<span class="name">p</span>&gt;</span>]</span><br><span class="line"></span><br><span class="line">soup.select(&quot;body a&quot;)</span><br><span class="line"># [<span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">&quot;sister&quot;</span> <span class="attr">href</span>=<span class="string">&quot;http://example.com/elsie&quot;</span> <span class="attr">id</span>=<span class="string">&quot;link1&quot;</span>&gt;</span>Elsie<span class="tag">&lt;/<span class="name">a</span>&gt;</span>,</span><br><span class="line">#  <span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">&quot;sister&quot;</span> <span class="attr">href</span>=<span class="string">&quot;http://example.com/lacie&quot;</span>  <span class="attr">id</span>=<span class="string">&quot;link2&quot;</span>&gt;</span>Lacie<span class="tag">&lt;/<span class="name">a</span>&gt;</span>,</span><br><span class="line">#  <span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">&quot;sister&quot;</span> <span class="attr">href</span>=<span class="string">&quot;http://example.com/tillie&quot;</span> <span class="attr">id</span>=<span class="string">&quot;link3&quot;</span>&gt;</span>Tillie<span class="tag">&lt;/<span class="name">a</span>&gt;</span>]</span><br><span class="line"></span><br><span class="line">soup.select(&quot;html head title&quot;)</span><br><span class="line"># [<span class="tag">&lt;<span class="name">title</span>&gt;</span>The Dormouse&#x27;s story<span class="tag">&lt;/<span class="name">title</span>&gt;</span>]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">soup.select(&quot;head &gt; title&quot;)</span><br><span class="line"># [<span class="tag">&lt;<span class="name">title</span>&gt;</span>The Dormouse&#x27;s story<span class="tag">&lt;/<span class="name">title</span>&gt;</span>]</span><br><span class="line"></span><br><span class="line">soup.select(&quot;p &gt; a&quot;)</span><br><span class="line"># [<span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">&quot;sister&quot;</span> <span class="attr">href</span>=<span class="string">&quot;http://example.com/elsie&quot;</span> <span class="attr">id</span>=<span class="string">&quot;link1&quot;</span>&gt;</span>Elsie<span class="tag">&lt;/<span class="name">a</span>&gt;</span>,</span><br><span class="line">#  <span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">&quot;sister&quot;</span> <span class="attr">href</span>=<span class="string">&quot;http://example.com/lacie&quot;</span>  <span class="attr">id</span>=<span class="string">&quot;link2&quot;</span>&gt;</span>Lacie<span class="tag">&lt;/<span class="name">a</span>&gt;</span>,</span><br><span class="line">#  <span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">&quot;sister&quot;</span> <span class="attr">href</span>=<span class="string">&quot;http://example.com/tillie&quot;</span> <span class="attr">id</span>=<span class="string">&quot;link3&quot;</span>&gt;</span>Tillie<span class="tag">&lt;/<span class="name">a</span>&gt;</span>]</span><br><span class="line"></span><br><span class="line">soup.select(&quot;p &gt; a:nth-of-type(2)&quot;)</span><br><span class="line"># [<span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">&quot;sister&quot;</span> <span class="attr">href</span>=<span class="string">&quot;http://example.com/lacie&quot;</span> <span class="attr">id</span>=<span class="string">&quot;link2&quot;</span>&gt;</span>Lacie<span class="tag">&lt;/<span class="name">a</span>&gt;</span>]</span><br><span class="line"></span><br><span class="line">soup.select(&quot;p &gt; #link1&quot;)</span><br><span class="line"># [<span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">&quot;sister&quot;</span> <span class="attr">href</span>=<span class="string">&quot;http://example.com/elsie&quot;</span> <span class="attr">id</span>=<span class="string">&quot;link1&quot;</span>&gt;</span>Elsie<span class="tag">&lt;/<span class="name">a</span>&gt;</span>]</span><br><span class="line"></span><br><span class="line">soup.select(&quot;body &gt; a&quot;)</span><br><span class="line"></span><br><span class="line">soup.select(&quot;#link1 ~ .sister&quot;)</span><br><span class="line"># [<span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">&quot;sister&quot;</span> <span class="attr">href</span>=<span class="string">&quot;http://example.com/lacie&quot;</span> <span class="attr">id</span>=<span class="string">&quot;link2&quot;</span>&gt;</span>Lacie<span class="tag">&lt;/<span class="name">a</span>&gt;</span>,</span><br><span class="line">#  <span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">&quot;sister&quot;</span> <span class="attr">href</span>=<span class="string">&quot;http://example.com/tillie&quot;</span>  <span class="attr">id</span>=<span class="string">&quot;link3&quot;</span>&gt;</span>Tillie<span class="tag">&lt;/<span class="name">a</span>&gt;</span>]</span><br><span class="line"></span><br><span class="line">soup.select(&quot;#link1 + .sister&quot;)</span><br><span class="line"># [<span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">&quot;sister&quot;</span> <span class="attr">href</span>=<span class="string">&quot;http://example.com/lacie&quot;</span> <span class="attr">id</span>=<span class="string">&quot;link2&quot;</span>&gt;</span>Lacie<span class="tag">&lt;/<span class="name">a</span>&gt;</span>]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">soup.select(&quot;.sister&quot;)</span><br><span class="line"># [<span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">&quot;sister&quot;</span> <span class="attr">href</span>=<span class="string">&quot;http://example.com/elsie&quot;</span> <span class="attr">id</span>=<span class="string">&quot;link1&quot;</span>&gt;</span>Elsie<span class="tag">&lt;/<span class="name">a</span>&gt;</span>,</span><br><span class="line">#  <span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">&quot;sister&quot;</span> <span class="attr">href</span>=<span class="string">&quot;http://example.com/lacie&quot;</span> <span class="attr">id</span>=<span class="string">&quot;link2&quot;</span>&gt;</span>Lacie<span class="tag">&lt;/<span class="name">a</span>&gt;</span>,</span><br><span class="line">#  <span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">&quot;sister&quot;</span> <span class="attr">href</span>=<span class="string">&quot;http://example.com/tillie&quot;</span> <span class="attr">id</span>=<span class="string">&quot;link3&quot;</span>&gt;</span>Tillie<span class="tag">&lt;/<span class="name">a</span>&gt;</span>]</span><br><span class="line"></span><br><span class="line">soup.select(&quot;[class~=sister]&quot;)</span><br><span class="line"># [<span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">&quot;sister&quot;</span> <span class="attr">href</span>=<span class="string">&quot;http://example.com/elsie&quot;</span> <span class="attr">id</span>=<span class="string">&quot;link1&quot;</span>&gt;</span>Elsie<span class="tag">&lt;/<span class="name">a</span>&gt;</span>,</span><br><span class="line">#  <span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">&quot;sister&quot;</span> <span class="attr">href</span>=<span class="string">&quot;http://example.com/lacie&quot;</span> <span class="attr">id</span>=<span class="string">&quot;link2&quot;</span>&gt;</span>Lacie<span class="tag">&lt;/<span class="name">a</span>&gt;</span>,</span><br><span class="line">#  <span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">&quot;sister&quot;</span> <span class="attr">href</span>=<span class="string">&quot;http://example.com/tillie&quot;</span> <span class="attr">id</span>=<span class="string">&quot;link3&quot;</span>&gt;</span>Tillie<span class="tag">&lt;/<span class="name">a</span>&gt;</span>]</span><br><span class="line"></span><br><span class="line">soup.select(&quot;#link1&quot;)</span><br><span class="line"># [<span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">&quot;sister&quot;</span> <span class="attr">href</span>=<span class="string">&quot;http://example.com/elsie&quot;</span> <span class="attr">id</span>=<span class="string">&quot;link1&quot;</span>&gt;</span>Elsie<span class="tag">&lt;/<span class="name">a</span>&gt;</span>]</span><br><span class="line"></span><br><span class="line">soup.select(&quot;a#link2&quot;)</span><br><span class="line"># [<span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">&quot;sister&quot;</span> <span class="attr">href</span>=<span class="string">&quot;http://example.com/lacie&quot;</span> <span class="attr">id</span>=<span class="string">&quot;link2&quot;</span>&gt;</span>Lacie<span class="tag">&lt;/<span class="name">a</span>&gt;</span>]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">soup.select(&quot;#link1,#link2&quot;)</span><br><span class="line"># [<span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">&quot;sister&quot;</span> <span class="attr">href</span>=<span class="string">&quot;http://example.com/elsie&quot;</span> <span class="attr">id</span>=<span class="string">&quot;link1&quot;</span>&gt;</span>Elsie<span class="tag">&lt;/<span class="name">a</span>&gt;</span>,</span><br><span class="line">#  <span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">&quot;sister&quot;</span> <span class="attr">href</span>=<span class="string">&quot;http://example.com/lacie&quot;</span> <span class="attr">id</span>=<span class="string">&quot;link2&quot;</span>&gt;</span>Lacie<span class="tag">&lt;/<span class="name">a</span>&gt;</span>]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">soup.select(&#x27;a[href]&#x27;)</span><br><span class="line"># [<span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">&quot;sister&quot;</span> <span class="attr">href</span>=<span class="string">&quot;http://example.com/elsie&quot;</span> <span class="attr">id</span>=<span class="string">&quot;link1&quot;</span>&gt;</span>Elsie<span class="tag">&lt;/<span class="name">a</span>&gt;</span>,</span><br><span class="line">#  <span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">&quot;sister&quot;</span> <span class="attr">href</span>=<span class="string">&quot;http://example.com/lacie&quot;</span> <span class="attr">id</span>=<span class="string">&quot;link2&quot;</span>&gt;</span>Lacie<span class="tag">&lt;/<span class="name">a</span>&gt;</span>,</span><br><span class="line">#  <span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">&quot;sister&quot;</span> <span class="attr">href</span>=<span class="string">&quot;http://example.com/tillie&quot;</span> <span class="attr">id</span>=<span class="string">&quot;link3&quot;</span>&gt;</span>Tillie<span class="tag">&lt;/<span class="name">a</span>&gt;</span>]</span><br><span class="line"></span><br><span class="line">soup.select(&#x27;a[href=&quot;http://example.com/elsie&quot;]&#x27;)</span><br><span class="line"># [<span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">&quot;sister&quot;</span> <span class="attr">href</span>=<span class="string">&quot;http://example.com/elsie&quot;</span> <span class="attr">id</span>=<span class="string">&quot;link1&quot;</span>&gt;</span>Elsie<span class="tag">&lt;/<span class="name">a</span>&gt;</span>]</span><br><span class="line"></span><br><span class="line">soup.select(&#x27;a[href^=&quot;http://example.com/&quot;]&#x27;)</span><br><span class="line"># [<span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">&quot;sister&quot;</span> <span class="attr">href</span>=<span class="string">&quot;http://example.com/elsie&quot;</span> <span class="attr">id</span>=<span class="string">&quot;link1&quot;</span>&gt;</span>Elsie<span class="tag">&lt;/<span class="name">a</span>&gt;</span>,</span><br><span class="line">#  <span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">&quot;sister&quot;</span> <span class="attr">href</span>=<span class="string">&quot;http://example.com/lacie&quot;</span> <span class="attr">id</span>=<span class="string">&quot;link2&quot;</span>&gt;</span>Lacie<span class="tag">&lt;/<span class="name">a</span>&gt;</span>,</span><br><span class="line">#  <span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">&quot;sister&quot;</span> <span class="attr">href</span>=<span class="string">&quot;http://example.com/tillie&quot;</span> <span class="attr">id</span>=<span class="string">&quot;link3&quot;</span>&gt;</span>Tillie<span class="tag">&lt;/<span class="name">a</span>&gt;</span>]</span><br><span class="line"></span><br><span class="line">soup.select(&#x27;a[href$=&quot;tillie&quot;]&#x27;)</span><br><span class="line"># [<span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">&quot;sister&quot;</span> <span class="attr">href</span>=<span class="string">&quot;http://example.com/tillie&quot;</span> <span class="attr">id</span>=<span class="string">&quot;link3&quot;</span>&gt;</span>Tillie<span class="tag">&lt;/<span class="name">a</span>&gt;</span>]</span><br><span class="line"></span><br><span class="line">soup.select(&#x27;a[href*=&quot;.com/el&quot;]&#x27;)</span><br><span class="line"># [<span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">&quot;sister&quot;</span> <span class="attr">href</span>=<span class="string">&quot;http://example.com/elsie&quot;</span> <span class="attr">id</span>=<span class="string">&quot;link1&quot;</span>&gt;</span>Elsie<span class="tag">&lt;/<span class="name">a</span>&gt;</span>]</span><br><span class="line">multilingual_markup = &quot;&quot;&quot;</span><br><span class="line"> <span class="tag">&lt;<span class="name">p</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span>Hello<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">p</span> <span class="attr">lang</span>=<span class="string">&quot;en-us&quot;</span>&gt;</span>Howdy, y&#x27;all<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">p</span> <span class="attr">lang</span>=<span class="string">&quot;en-gb&quot;</span>&gt;</span>Pip-pip, old fruit<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">p</span> <span class="attr">lang</span>=<span class="string">&quot;fr&quot;</span>&gt;</span>Bonjour mes amis<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">&quot;&quot;&quot;</span><br><span class="line">multilingual_soup = BeautifulSoup(multilingual_markup)</span><br><span class="line">multilingual_soup.select(&#x27;p[lang|=en]&#x27;)</span><br><span class="line"># [<span class="tag">&lt;<span class="name">p</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span>Hello<span class="tag">&lt;/<span class="name">p</span>&gt;</span>,</span><br><span class="line">#  <span class="tag">&lt;<span class="name">p</span> <span class="attr">lang</span>=<span class="string">&quot;en-us&quot;</span>&gt;</span>Howdy, y&#x27;all<span class="tag">&lt;/<span class="name">p</span>&gt;</span>,</span><br><span class="line">#  <span class="tag">&lt;<span class="name">p</span> <span class="attr">lang</span>=<span class="string">&quot;en-gb&quot;</span>&gt;</span>Pip-pip, old fruit<span class="tag">&lt;/<span class="name">p</span>&gt;</span>]</span><br></pre></td></tr></table></figure><ul><li>select_one</li></ul><p><strong>返回查找到的元素的第一个</strong></p><ul><li>练习</li></ul><p>使用bs4爬取豆瓣电影排行榜信息</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> bs4 <span class="keyword">import</span> BeautifulSoup</span><br><span class="line">soup = BeautifulSoup(s, <span class="string">&#x27;html.parser&#x27;</span>)</span><br><span class="line"></span><br><span class="line">s=soup.find_all(class_=<span class="string">&quot;item&quot;</span>)</span><br><span class="line"><span class="keyword">for</span> item <span class="keyword">in</span> s:</span><br><span class="line">  <span class="built_in">print</span>(item.find(class_=<span class="string">&quot;pic&quot;</span>).a.get(<span class="string">&quot;href&quot;</span>))</span><br><span class="line">  <span class="built_in">print</span>(item.find(class_=<span class="string">&quot;pic&quot;</span>).em.string)</span><br><span class="line">  <span class="built_in">print</span>(item.find(class_=<span class="string">&quot;info&quot;</span>).contents[<span class="number">1</span>].a.span.string)</span><br><span class="line">        <span class="built_in">print</span>(item.find(class_=<span class="string">&quot;info&quot;</span>).contents[<span class="number">3</span>].contents[<span class="number">3</span>].contents[<span class="number">3</span>].string)</span><br><span class="line">        <span class="built_in">print</span>(item.find(class_=<span class="string">&quot;info&quot;</span>).contents[<span class="number">3</span>].contents[<span class="number">3</span>].contents[<span class="number">7</span>].string)</span><br></pre></td></tr></table></figure><h3 id="3-3、xpath"><a href="#3-3、xpath" class="headerlink" title="3.3、xpath"></a><strong>3.3、xpath</strong></h3><p>xpath在Python的爬虫学习中，起着举足轻重的地位，对比正则表达式 re两者可以完成同样的工作，实现的功能也差不多，但xpath明显比re具有优势，在网页分析上使re退居二线。</p><p>xpath 全称为<strong>XML Path Language</strong> 一种小型的<strong>查询语言</strong><br>xpath的优点： </p><ul><li>可在XML中查找信息 </li><li>支持HTML的查找 </li><li>通过元素和属性进行导航</li></ul><p><strong>python开发使用XPath条件：</strong> 由于XPath属于lxml库模块，所以首先要安装库lxml。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> lxml <span class="keyword">import</span> etree</span><br><span class="line">selector=etree.HTML(源码) <span class="comment">#将源码转化为能被XPath匹配的格式</span></span><br><span class="line">selector.xpath(表达式) <span class="comment">#返回为一列表</span></span><br></pre></td></tr></table></figure><h4 id="路径表达式"><a href="#路径表达式" class="headerlink" title="路径表达式"></a><strong>路径表达式</strong></h4><table><thead><tr><th align="left">表达式</th><th align="left">描述</th><th>实例</th><th>解析</th></tr></thead><tbody><tr><td align="left">/</td><td align="left">从根节点选取</td><td><code>/body/div[1]</code></td><td>选取根结点下的body下的第一个div标签</td></tr><tr><td align="left">//</td><td align="left">从匹配选择的当前节点选择文档中的节点，而不考虑它们的位置</td><td><code>//a</code></td><td>选取文档中所有的a标签</td></tr><tr><td align="left">./</td><td align="left">当前节点再次进行xpath</td><td><code>./a</code></td><td>选取当前节点下的所有a标签</td></tr><tr><td align="left">@</td><td align="left">选取属性</td><td><code>//@calss</code></td><td>选取所有的class属性</td></tr></tbody></table><h4 id="谓语（Predicates）"><a href="#谓语（Predicates）" class="headerlink" title="** 谓语（Predicates）**"></a>** 谓语（Predicates）**</h4><p>谓语用来查找某个特定的节点或者包含某个指定的值的节点。</p><p>谓语被嵌在方括号中。</p><p>在下面的表格中，我们列出了带有谓语的一些路径表达式，以及表达式的结果：</p><table><thead><tr><th align="left">路径表达式</th><th align="left">结果</th></tr></thead><tbody><tr><td align="left">/ul/li[1]</td><td align="left">选取属于 ul子元素的第一个 li元素。</td></tr><tr><td align="left">/ul/li[last()]</td><td align="left">选取属于 ul子元素的最后一个 li元素。</td></tr><tr><td align="left">/ul/li[last()-1]</td><td align="left">选取属于 ul子元素的倒数第二个 li元素。</td></tr><tr><td align="left">//ul/li[position()&lt;3]</td><td align="left">选取最前面的两个属于 ul元素的子元素的 li元素。</td></tr><tr><td align="left">//a[@title]</td><td align="left">选取所有拥有名为 title的属性的 a元素。</td></tr><tr><td align="left">//a[@title=’xx’]</td><td align="left">选取所有 a元素，且这些元素拥有值为 xx的 title属性。</td></tr><tr><td align="left">//a[@title&gt;10] <code>&gt; &lt; &gt;= &lt;= !=</code></td><td align="left">选取 a元素的所有 title元素，且其中的 title元素的值须大于 10。</td></tr><tr><td align="left">/body/div[@price&gt;35.00]</td><td align="left">选取body下price元素值大于35的div节点</td></tr></tbody></table><h4 id="选取未知节点"><a href="#选取未知节点" class="headerlink" title="选取未知节点"></a><strong>选取未知节点</strong></h4><p>XPath 通配符可用来选取未知的 XML 元素。</p><table><thead><tr><th align="left">通配符</th><th align="left">描述</th></tr></thead><tbody><tr><td align="left">*</td><td align="left">匹配任何元素节点。</td></tr><tr><td align="left">@*</td><td align="left">匹配任何属性节点。</td></tr><tr><td align="left">node()</td><td align="left">匹配任何类型的节点。</td></tr></tbody></table><p><strong>实例</strong></p><p>在下面的表格中，我们列出了一些路径表达式，以及这些表达式的结果：</p><table><thead><tr><th align="left">路径表达式</th><th align="left">结果</th></tr></thead><tbody><tr><td align="left">/ul/*</td><td align="left">选取 bookstore 元素的所有子元素。</td></tr><tr><td align="left">//*</td><td align="left">选取文档中的所有元素。</td></tr><tr><td align="left">//title[@*]</td><td align="left">选取所有带有属性的 title 元素。</td></tr><tr><td align="left">//node()</td><td align="left">获取所有节点</td></tr></tbody></table><h4 id="选取若干路径"><a href="#选取若干路径" class="headerlink" title="选取若干路径"></a><strong>选取若干路径</strong></h4><p>通过在路径表达式中使用“|”运算符，您可以选取若干个路径。</p><p><strong>实例</strong></p><p>在下面的表格中，我们列出了一些路径表达式，以及这些表达式的结果：</p><table><thead><tr><th align="left">路径表达式</th><th align="left">结果</th></tr></thead><tbody><tr><td align="left">//book/title | //book/price</td><td align="left">选取 book 元素的所有 title 和 price 元素。</td></tr><tr><td align="left">//title | //price</td><td align="left">选取文档中的所有 title 和 price 元素。</td></tr><tr><td align="left">/bookstore/book/title | //price</td><td align="left">选取属于 bookstore 元素的 book 元素的所有 title 元素，以及文档中所有的 price 元素。</td></tr></tbody></table><ul><li><p>逻辑运算</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">//div[@<span class="built_in">id</span>=<span class="string">&quot;head&quot;</span> <span class="keyword">and</span> @<span class="keyword">class</span>=<span class="string">&quot;s_down&quot;</span>] <span class="comment"># 查找所有id属性等于head并且class属性等于s_down的div标签</span></span><br><span class="line">//title | //price <span class="comment"># 选取文档中的所有 title 和 price 元素,“|”两边必须是完整的xpath路径</span></span><br></pre></td></tr></table></figure></li><li><p>属性查询</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">//div[@<span class="built_in">id</span>] <span class="comment"># 找所有包含id属性的div节点</span></span><br><span class="line">//div[@<span class="built_in">id</span>=<span class="string">&quot;maincontent&quot;</span>]  <span class="comment"># 查找所有id属性等于maincontent的div标签</span></span><br><span class="line">//@<span class="keyword">class</span></span><br><span class="line">//li[@name=<span class="string">&quot;xx&quot;</span>]//text()  <span class="comment"># 获取li标签name为xx的里面的文本内容</span></span><br></pre></td></tr></table></figure></li><li><p>获取第几个标签 索引从1开始</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">tree.xpath(<span class="string">&#x27;//li[1]/a/text()&#x27;</span>)  <span class="comment"># 获取第一个</span></span><br><span class="line">tree.xpath(<span class="string">&#x27;//li[last()]/a/text()&#x27;</span>)  <span class="comment"># 获取最后一个</span></span><br><span class="line">tree.xpath(<span class="string">&#x27;//li[last()-1]/a/text()&#x27;</span>)  <span class="comment"># 获取倒数第二个</span></span><br></pre></td></tr></table></figure></li><li><p>模糊查询</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">//div[contains(@<span class="built_in">id</span>, <span class="string">&quot;he&quot;</span>)]  <span class="comment"># 查询所有id属性中包含he的div标签</span></span><br><span class="line">//div[starts-<span class="keyword">with</span>(@<span class="built_in">id</span>, <span class="string">&quot;he&quot;</span>)] <span class="comment"># 查询所有id属性中包以he开头的div标签</span></span><br><span class="line">//div/h1/text()  <span class="comment"># 查找所有div标签下的直接子节点h1的内容</span></span><br><span class="line">//div/a/@href   <span class="comment"># 获取a里面的href属性值 </span></span><br><span class="line">//*  <span class="comment">#获取所有</span></span><br><span class="line">//*[@<span class="keyword">class</span>=<span class="string">&quot;xx&quot;</span>]  <span class="comment">#获取所有class为xx的标签</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 获取节点内容转换成字符串</span></span><br><span class="line">c = tree.xpath(<span class="string">&#x27;//li/a&#x27;</span>)[<span class="number">0</span>]</span><br><span class="line">result=etree.tostring(c, encoding=<span class="string">&#x27;utf-8&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(result.decode(<span class="string">&#x27;UTF-8&#x27;</span>))</span><br></pre></td></tr></table></figure></li></ul><h4 id="案例"><a href="#案例" class="headerlink" title="案例"></a>案例</h4><p>豆瓣Top250基于xpath解析：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">from</span> lxml <span class="keyword">import</span> etree</span><br><span class="line"></span><br><span class="line">url = <span class="string">&quot;https://movie.douban.com/top250?start=0&quot;</span></span><br><span class="line">headers = &#123;</span><br><span class="line">    <span class="string">&quot;User-Agent&quot;</span>: <span class="string">&quot;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/99.0.4844.82 Safari/537.36&quot;</span></span><br><span class="line">&#125;</span><br><span class="line">resp = requests.get(url, headers=headers)</span><br><span class="line"></span><br><span class="line">tree = etree.HTML(resp.text)  <span class="comment"># 加载页面源代码</span></span><br><span class="line"></span><br><span class="line">items = tree.xpath(<span class="string">&#x27;//li/div[@class=&quot;item&quot;]/div[@class=&quot;info&quot;]&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> item <span class="keyword">in</span> items:</span><br><span class="line">    title = item.xpath(<span class="string">&#x27;./div[@class=&quot;hd&quot;]/a/span[1]/text()&#x27;</span>)[<span class="number">0</span>]</span><br><span class="line">    rating_num = item.xpath(<span class="string">&#x27;./div[@class=&quot;bd&quot;]/div[@class=&quot;star&quot;]/span[@class=&quot;rating_num&quot;]/text()&#x27;</span>)[<span class="number">0</span>]</span><br><span class="line">    comment_num = item.xpath(<span class="string">&#x27;./div[@class=&quot;bd&quot;]/div[@class=&quot;star&quot;]/span[4]/text()&#x27;</span>)[<span class="number">0</span>]</span><br><span class="line">    <span class="built_in">print</span>(title, rating_num, comment_num)</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;爬虫是什么&quot;&gt;&lt;a href=&quot;#爬虫是什么&quot; class=&quot;headerlink&quot; title=&quot;爬虫是什么&quot;&gt;&lt;/a&gt;爬虫是什么&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;爬虫的本质：模拟浏览器打开网页，捕获网页中我们想要的那部分数据。&lt;/li&gt;
&lt;li&gt;入门：爬虫是一种自动</summary>
      
    
    
    
    <category term="Python篇" scheme="http://bkystop.github.io/categories/Python%E7%AF%87/"/>
    
    
    <category term="Python" scheme="http://bkystop.github.io/tags/Python/"/>
    
    <category term="Python爬虫" scheme="http://bkystop.github.io/tags/Python%E7%88%AC%E8%99%AB/"/>
    
  </entry>
  
  <entry>
    <title>Windows搭建DVWA靶场</title>
    <link href="http://bkystop.github.io/2022/11/07/Windows%E6%90%AD%E5%BB%BADVWA%E9%9D%B6%E5%9C%BA/"/>
    <id>http://bkystop.github.io/2022/11/07/Windows%E6%90%AD%E5%BB%BADVWA%E9%9D%B6%E5%9C%BA/</id>
    <published>2022-11-07T14:23:44.000Z</published>
    <updated>2023-04-09T09:11:30.389Z</updated>
    
    <content type="html"><![CDATA[<h2 id="DVWA靶场"><a href="#DVWA靶场" class="headerlink" title="DVWA靶场"></a>DVWA靶场</h2><h3 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h3><ul><li>DVWA（Damn Vulnerable Web Application）是一个用来进行安全脆弱性鉴定的PHP/MySQL Web应用，旨在为安全专业人员测试自己的专业技能和工具提供合法的环境，帮助web开发者更好的理解web应用安全防范的过程。 </li><li>模块<ul><li>暴力（破解）</li><li>命令行注入</li><li>跨站请求伪造</li><li>文件包含</li><li>文件上传</li><li>不安全的验证码</li><li>SQL注入</li><li>SQL盲注</li><li>弱会话ID</li><li>XSS漏洞（DOM型跨站脚本、反射型跨站脚本、 存储型跨站脚本） </li></ul></li></ul><h3 id="搭建"><a href="#搭建" class="headerlink" title="搭建"></a>搭建</h3><ul><li><p>官网下载<a href="http://www.dvwa.co.uk/">DVWA</a></p></li><li><p>下载、安装、启动<a href="https://www.xp.cn/">phpstudy</a> </p></li></ul><ul><li><p>将下载的DVWA解压到phpstudy网站根目录下</p></li><li><p>将 config.inc.php.dist 复制一份或重命令为 config.inc.php</p></li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">phpStudy\WWW\DVWA-master\config</span><br></pre></td></tr></table></figure><ul><li>修改 config.inc.php</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$</span><span class="language-bash">_DVWA[ <span class="string">&#x27;db_server&#x27;</span> ]  = <span class="string">&#x27;127.0.0.1&#x27;</span>; <span class="comment">#数据库地址</span></span> </span><br><span class="line"><span class="meta prompt_">$</span><span class="language-bash">_DVWA[ <span class="string">&#x27;db_database&#x27;</span> ] = <span class="string">&#x27;dvwa&#x27;</span>; <span class="comment">#数据库名称</span></span> </span><br><span class="line"><span class="meta prompt_">$</span><span class="language-bash">_DVWA[ <span class="string">&#x27;db_user&#x27;</span> ]   = <span class="string">&#x27;root&#x27;</span>; <span class="comment">#数据库用户名</span></span> </span><br><span class="line"><span class="meta prompt_">$</span><span class="language-bash">_DVWA[ <span class="string">&#x27;db_password&#x27;</span> ] = <span class="string">&#x27;root&#x27;</span>; <span class="comment">#数据库密码</span></span></span><br></pre></td></tr></table></figure><ul><li>编辑 dvwa/config/config.inc.php <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$</span><span class="language-bash">_DVWA[ <span class="string">&#x27;recaptcha_public_key&#x27;</span> ] = <span class="string">&#x27;&#x27;</span>;</span> </span><br><span class="line"><span class="meta prompt_">$</span><span class="language-bash">_DVWA[ <span class="string">&#x27;recaptcha_private_key&#x27;</span> ] = <span class="string">&#x27;&#x27;</span>;</span></span><br></pre></td></tr></table></figure></li></ul><ol><li>设置数据库</li></ol><ul><li>浏览器打开<a href="http://127.0.0.1/DVWA-master/setup.php">http://127.0.0.1/DVWA-master/setup.php</a> ,点击Setup/Reset DB，点击Create/Reset Database。会看到创建成功提示 </li></ul><ol><li>登录</li></ol><ul><li>浏览器打开<a href="http://127.0.0.1/DVWA-master/login.php">http://127.0.0.1/DVWA-master/login.php</a></li><li>默认用户名：admin，默认密码：password</li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;DVWA靶场&quot;&gt;&lt;a href=&quot;#DVWA靶场&quot; class=&quot;headerlink&quot; title=&quot;DVWA靶场&quot;&gt;&lt;/a&gt;DVWA靶场&lt;/h2&gt;&lt;h3 id=&quot;简介&quot;&gt;&lt;a href=&quot;#简介&quot; class=&quot;headerlink&quot; title=&quot;简介&quot;&gt;&lt;</summary>
      
    
    
    
    <category term="安全篇" scheme="http://bkystop.github.io/categories/%E5%AE%89%E5%85%A8%E7%AF%87/"/>
    
    
    <category term="Windows" scheme="http://bkystop.github.io/tags/Windows/"/>
    
  </entry>
  
  <entry>
    <title>Kail搭建vulhub靶场</title>
    <link href="http://bkystop.github.io/2022/11/02/Kali%E6%90%AD%E5%BB%BAvulhub%E9%9D%B6%E5%9C%BA/"/>
    <id>http://bkystop.github.io/2022/11/02/Kali%E6%90%AD%E5%BB%BAvulhub%E9%9D%B6%E5%9C%BA/</id>
    <published>2022-11-02T13:17:51.000Z</published>
    <updated>2023-04-09T09:08:58.634Z</updated>
    
    <content type="html"><![CDATA[<h2 id="vulhub靶场"><a href="#vulhub靶场" class="headerlink" title="vulhub靶场"></a>vulhub靶场</h2><h3 id="搭建靶场"><a href="#搭建靶场" class="headerlink" title="搭建靶场"></a>搭建靶场</h3><ul><li>kali下搭建vulhub靶场</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">apt-get update</span><br><span class="line">apt-get install -y apt-transport-https ca-certificates</span><br><span class="line"># 安装https，ca证书</span><br><span class="line">apt install docker.io # 安装docker</span><br><span class="line">docker -v </span><br><span class="line">systemctl start docker</span><br><span class="line">docker ps -a</span><br><span class="line">apt-get install python3-pip  # 安装pip</span><br><span class="line">pip3 install docker-compose  # 安装docker-compose</span><br><span class="line">docker-compose -v</span><br><span class="line">git clone https://github.com/vulhub/vulhub.git # 下载vulhub</span><br><span class="line">cd spring/CVE-2018-1273  # 任意进入一个目录，启动靶场</span><br><span class="line">docker-compose build   # 对靶场进行编译</span><br><span class="line">docker-compose up -d   # 启动环境（查看端口，http://localhost:8080/users）</span><br><span class="line">docker-compose down    # 移除环境</span><br><span class="line"></span><br></pre></td></tr></table></figure><ul><li><p>vulhub下载慢</p><ul><li><p>官网下载vulhub .zip<a href="https://vulhub.org/#/docs/download-vulhub/">https://vulhub.org/#/docs/download-vulhub/</a></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">unzip vulhub-master.zip # 解压</span><br></pre></td></tr></table></figure></li><li><p>使用gitee拉取</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git clone https://gitee.com/puier/vulhub.git</span><br><span class="line"></span><br></pre></td></tr></table></figure></li></ul></li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;vulhub靶场&quot;&gt;&lt;a href=&quot;#vulhub靶场&quot; class=&quot;headerlink&quot; title=&quot;vulhub靶场&quot;&gt;&lt;/a&gt;vulhub靶场&lt;/h2&gt;&lt;h3 id=&quot;搭建靶场&quot;&gt;&lt;a href=&quot;#搭建靶场&quot; class=&quot;headerlink&quot; </summary>
      
    
    
    
    <category term="安全篇" scheme="http://bkystop.github.io/categories/%E5%AE%89%E5%85%A8%E7%AF%87/"/>
    
    
    <category term="Linux" scheme="http://bkystop.github.io/tags/Linux/"/>
    
    <category term="kali" scheme="http://bkystop.github.io/tags/kali/"/>
    
  </entry>
  
  <entry>
    <title>Kail基础</title>
    <link href="http://bkystop.github.io/2022/10/30/Kali%E5%9F%BA%E7%A1%80/"/>
    <id>http://bkystop.github.io/2022/10/30/Kali%E5%9F%BA%E7%A1%80/</id>
    <published>2022-10-30T14:28:10.000Z</published>
    <updated>2023-04-09T09:09:17.735Z</updated>
    
    <content type="html"><![CDATA[<h2 id="kali的安装与介绍"><a href="#kali的安装与介绍" class="headerlink" title="kali的安装与介绍"></a>kali的安装与介绍</h2><h3 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h3><ul><li>VMware是运行虚拟机（虚拟机是指通过 软件 模拟的具有完整硬件系统功能的、运行在一个完全隔离环境中的完整计算机系统 ）的软件，通过VMware创建虚拟机，让我们在系统中安装系统。<ul><li>bridged（桥接模式）：同一网络环境下的两台电脑。</li><li>NAT（网络地址转换模式）：虚拟机通过主机进行联网。</li><li>Host-Only（主机）:主机将虚拟机与外网隔开，只能让虚拟机和虚拟机之间联网。</li></ul></li><li>系统镜像：文件版的光盘</li><li>kali：Kali Linux是专业的渗透测试系统，安装预装了许多渗透测试软件。</li><li>数据包：包(Packet)是TCP/IP协议通信传输中的数据单位，一般也称“数据包”。</li><li>端口：端口可分为虚拟端口和物理端口，其中虚拟端口指计算机内部或交换机路由器内的端口，不可见</li><li>抓包：抓取数据包</li><li>kali的源：源配置(软件源)概念：源就是来，。可以把他称为软件仓库。安装软件时，就是从仓库里面调取数据放在你的机器上。</li><li>更新源：相当于windows打补丁，软件更新。</li><li>Linux下载软件方式<ul><li>从源配置（软件源）所在服务器上通过特定命令获取JDK,Tomcat之类的软件包. </li><li>从源配置（软件源）所在服务器上通过特定命令获取JDK,Tomcat之类的软件包. </li></ul></li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">sudo dpkg --get-selections | more</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">查看当前系统中所有软件包的状态</span></span><br><span class="line">sudo apt-mark hold metasploit-framework </span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">metasploit-framework锁定当前版本不更新</span></span><br><span class="line">sudo dpkg --get-selections | grep hold</span><br><span class="line">查看当前已锁定的软件包</span><br><span class="line">sudo apt-mark unhold metasploit-framework </span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">取消当前已锁定软件</span></span><br></pre></td></tr></table></figure><ul><li><p>kali更新后出现问题</p><ul><li>进入/usr/share/metasploit-framework目录下</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">gem install bundler </span><br><span class="line">gem update --system </span><br></pre></td></tr></table></figure></li></ul><h3 id="配置kali系统源"><a href="#配置kali系统源" class="headerlink" title="配置kali系统源"></a>配置kali系统源</h3><ol><li><p>使用bianjiqi打开系统源文本</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/apt/sources.list</span><br></pre></td></tr></table></figure></li><li><p>填写成阿里源</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">阿里云<span class="comment">#</span></span></span><br><span class="line">deb http://mirrors.aliyun.com/kali kali-rolling main non-free contrib</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">deb-src http://mirrors.aliyun.com/kali kali-rolling main non-free contrib</span></span><br></pre></td></tr></table></figure></li><li><p>更新</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">软件版本更新 &amp;&amp; 进行一次升级 &amp;&amp; 软件源清单更新</span><br><span class="line">apt-get update &amp;&amp; apt-get upgrade -y &amp;&amp; apt-get dist-upgrade -y</span><br><span class="line">apt-get clean # 删除已经下载的安装包</span><br><span class="line">reboot  #重启</span><br></pre></td></tr></table></figure></li></ol><h3 id="ssh服务"><a href="#ssh服务" class="headerlink" title="ssh服务"></a>ssh服务</h3><ul><li><p>使用编辑器打开ssh配置</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/ssh/sshd_config</span><br></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">PasswordAuthentication <span class="built_in">yes</span> (去掉注释)</span></span><br><span class="line"><span class="meta prompt_"> #</span><span class="language-bash">PermitRootLogin prohibit-password (去掉注释后面的并删除改为<span class="built_in">yes</span>)</span> </span><br></pre></td></tr></table></figure></li><li><p>开启ssh服务</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">service ssh start </span><br></pre></td></tr></table></figure></li><li><p>kali下查看服务开启状态</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">service ssh status </span><br></pre></td></tr></table></figure></li><li><p>使用putty/xshell进行连接</p></li></ul><h3 id="用户组"><a href="#用户组" class="headerlink" title="用户组"></a>用户组</h3><ul><li>linux中，每个文件都是属于一个用户组。</li><li>在linux中，可以同时拥有N个用户，和用户组</li></ul><h4 id="用户信息"><a href="#用户信息" class="headerlink" title="用户信息"></a>用户信息</h4><ul><li><p>查看用户信息</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">cat /etc/passwd</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">用户名：密码（x）:UID:GID:用户名全称：用户的家目录所在的位置：用户所用的SHELL的类型</span></span><br><span class="line">useradd -m key # 自动在home文件下创建key目录</span><br><span class="line">useradd -g 组名 用户名  # 指定添加到某个组织里面</span><br><span class="line">passwd 用户名 # 修改key的新密码</span><br><span class="line">userdel -r 用户名 # 删除目录及用户名</span><br></pre></td></tr></table></figure></li><li><p>用户划分</p><ul><li>系统用户：root</li><li>普通用户：用户所创建的用户</li><li>虚拟用户：指软件所创建的虚拟用户</li></ul></li></ul><h4 id="用户组信息"><a href="#用户组信息" class="headerlink" title="用户组信息"></a>用户组信息</h4><ul><li><p>查看用户组信息</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">cat /etc/group # 查看用户组信息</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">组名：密码：UID：组成员，key（第二个组成员）</span></span><br><span class="line">id key # 查看组信息</span><br><span class="line">groups 用户名 # 查看用户组归属</span><br><span class="line">usermod -G 组名 用户名 # 直接添加组用户从原来组删除</span><br><span class="line">usermod -a -G 组名 用户名 # 追加到新的组</span><br><span class="line">groupdel 组名 # 删除组</span><br></pre></td></tr></table></figure></li><li><p>用户组划分</p><ul><li>文件所拥有者：文件创建者</li><li>用户所在组：当linux当前用户创建了一个文件后，这个文件所属于的的组</li><li>其他组：除了文件所有者以及所在组的用户外</li></ul></li></ul><h3 id="权限管理"><a href="#权限管理" class="headerlink" title="权限管理"></a>权限管理</h3><ul><li>权限划分<ul><li>r可读：4</li><li>w可写：2</li><li>x可执行：1</li></ul></li><li>当前目录下ls</li></ul><img src="/2022/10/30/Kali%E5%9F%BA%E7%A1%80/image-20230405222850722.png" class title="image-20230405222850722"><ul><li>设置权限</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">chmod 777 文件名 # 给当前文件设置777权限</span><br><span class="line">chmod -R 777 目录名 # 给当前目录递归设置777权限 </span><br></pre></td></tr></table></figure><h3 id="软件安装管理"><a href="#软件安装管理" class="headerlink" title="软件安装管理"></a>软件安装管理</h3><ul><li>dbkg是一个debian的命令行工具，可以用来安装，删除，构建和管理debian的软件包</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">dpkg -i xxx.deb #   安装软件</span><br><span class="line">dpkg -r xxx。deb # 删除软件包</span><br><span class="line">dpkg -r -purge xxx.deb # 连同配置文件一起删除</span><br></pre></td></tr></table></figure><ul><li>gdebi是一个轻量级的deb暗转工具，他替代吊臃肿的ubuntu软件中心安装deb</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get update </span><br><span class="line">sudo apt-get install gdebi # 安装gdebi</span><br><span class="line">sudo gdebi sougoupinyin.deb</span><br></pre></td></tr></table></figure><ul><li>linux下常用压缩文件格式</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">.zip</span><br><span class="line">.gz</span><br><span class="line">.bz2</span><br><span class="line">.tar.gz</span><br><span class="line">.tar.bz2</span><br></pre></td></tr></table></figure><ul><li>tar命令</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">tar -cvfz 打包后的文件名 源文件名 # 打包文件</span><br><span class="line">tar -xzfv # 解包命令</span><br></pre></td></tr></table></figure><ul><li>打包选项<ul><li>-c 打包</li><li>-v 打包时显示出详细信息</li><li>-f 指定文件名</li><li>-z 打包时同时进行压缩</li></ul></li><li>解包选项<ul><li>-x 解包</li><li>-v 解包时显示出详细信息</li><li>-f 指定文件名</li><li>-z 解包时同时进行解压</li></ul></li></ul><h3 id="查找命令"><a href="#查找命令" class="headerlink" title="查找命令"></a>查找命令</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">find ./kali/ -print # 指定目录查找并输出</span><br><span class="line">find ./kali/ -etc ls &#123;&#125; \: #  etc 指定目录以shell脚本运行并输出</span><br></pre></td></tr></table></figure><h2 id="kali的常用命令"><a href="#kali的常用命令" class="headerlink" title="kali的常用命令"></a>kali的常用命令</h2><h3 id="1-常用命令"><a href="#1-常用命令" class="headerlink" title="1.常用命令"></a>1.常用命令</h3><blockquote><p>passwd 修改密码</p><p>passwd root 修改root用户密码</p><p>date 显示系统日期</p><p>sudo 后面加命令 就可以调用管理权限</p><p>apt-get update 更新软件列表</p><p>这个命令，会访问源列表里的每个网址，并读取软件列表，然后保存在本地电脑。我们在新立得软件包管理器里看到的软件列表，都是通过update命令更新的。</p><p>apt-get upgrade 更新软件</p><p>这个命令，会把本地已安装的软件，与刚下载的软件列表里对应软件进行对比，如果发现已安装的软件版本太低，就会提示你更新。如果你的软件都是最新版本，会提示： 升级了 0 个软件包，新安装了 0 个软件包，要卸载 0 个软件包，有 0 个软件包未被升级。</p><p>apt-get dist-upgrade 更新软件  </p><p>apt-get upgrade 与 apt-get dist-upgrade 的区别</p><p>upgrade:系统将现有的Package升级,如果有相依性的问题,而此相依性需要安装其它新的Package或影响到其它Package的相依性时,此Package就不会被升级,会保留下来.</p><p>dist-upgrade:可以聪明的解决相依性的问题,如果有相依性问题,需要安装/移除新的Package,就会试着去安装/移除它.<br>(所以通常这个会被认为是有点风险的升级)</p><p>apt-get upgrade 和 apt-get dist-upgrade 本质上是没有什么不同的。</p><p>只不过，dist-upgrade<br>会识别出当依赖关系改变的情形并作出处理，而upgrade对此情形不处理。</p><p>例如软件包 a 原先依赖 b c d，但是在源里面可能已经升级了，现在是 a 依赖 b c e。这种情况下，dist-upgrade 会删除 d 安装 e，并把 a 软件包升级，而 upgrade 会认为依赖关系改变而拒绝升级 a<br>软件包。</p><p>clear 清屏</p><p>sudo gpedit 特权调用gpedit编辑器</p><p>reboot 重启</p><p>apt-get install XXXXX 安装缺少的依赖包，（XXX）里面输入缺少依赖包的名字</p><p>apt-get autoremove –purge 软件名 删除包及其依赖的软件包+配置文件等</p><p>apt-get install +模块名 这种方法也可以安装模块,或者apt-get install python-模块名</p><p>firefox 浏览器打开</p><p>shutdown -h now 关闭系统(1)</p><p>init 0 关闭系统(2)</p><p>telinit 0 关闭系统(3)</p><p>shutdown -h hours:minutes &amp; 按预定时间关闭系统</p><p>shutdown -c 取消按预定时间关闭系统</p><p>shutdown -r now 重启(1)</p><p>reboot 重启(2)</p><p>su -l 切换登陆用户</p><p>logout 注销用户登陆</p><p>pwd 当前路径</p></blockquote><h3 id="2-文件夹或文本操作"><a href="#2-文件夹或文本操作" class="headerlink" title="2.文件夹或文本操作"></a>2.文件夹或文本操作</h3><blockquote><p>cd .. 返回上一级目录</p><p>cd ../.. 返回上级两级目录</p><p>cd - 返回上次所在的目录</p><p>cd 文件夹名  进去文件夹</p><p>cd ~ 进去当前用户主目录</p><p>pwd 显示当前工作路径</p><p>touch 文件名  常见文件</p><p>cat 文件名 读取文档内容</p><p>mkdir 文件名 创建文件夹</p><p>mkdir -p 文件夹 递归创建文件夹</p><p>cp 复制命令</p><p>cp -r moon moons 复制moon 文件夹到当前 moons 如果有里面有文件 使用-r </p><p>mv 移动命令</p><p>mv moon moon 也可以说是改名</p><p>mkdir 文件名 文件名 创建多个文件夹</p><p>ls 显示文件和文件夹名</p><p>ls -a 显示所有的文件和文件夹 包含隐藏文件</p><p>ls -l 显示文件和目录的详细资料</p><p>删除</p><p>rm -f 文件  删除文件</p><p>rm 文件夹名 删除文件夹</p><p>rm -rf  文件/文件夹  删除文件夹 及其目录下的文件</p><p>压缩和解压<br>bzip2 file1 压缩一个叫做 ‘file1’ 的文件</p><p>gunzip file1.gz 解压一个叫做 ‘file1.gz’的文件</p><p>gzip file1 压缩一个叫做 ‘file1’的文件</p><p>gzip -9 file1 最大程度压缩</p><p>rar a file1.rar test_file 创建一个叫做 ‘file1.rar’ 的包</p><p>rar x file1.rar 解压rar包</p><p>unrar x file1.rar 解压rar包</p><p>DEB 包 (Debian, Ubuntu 以及类似系统)<br>dpkg -i package.deb 安装/更新一个 deb 包</p><p>dpkg -r package_name 从系统删除一个 deb 包</p><p>dpkg -l 显示系统中所有已经安装的 deb 包</p><p>dpkg -l | grep httpd 显示所有名称中包含 “httpd” 字样的deb包</p><p>dpkg -s package_name 获得已经安装在系统中一个特殊包的信息</p><p>dpkg -L package_name 显示系统中已经安装的一个deb包所提供的文件列表</p><p>dpkg –contents package.deb 显示尚未安装的一个包所提供的文件列表</p><p>tar zcvf +压缩文件名 压缩文件</p><p>tar zxvf +解压包名 解压文件</p><p>tar -jcvf renwolesshel.tar.bz2 打包</p><p>tar jxvf renwolesshel.tar.bz2 解压</p><p>压缩成zip格式</p><p>zip -q -r renwolesshel.zip renwolesshel/<br>解压zip格式的压缩包</p><p>unzip renwolesshel.zip</p><p>which 加软件名 可以查出软件目录在哪</p><p>./+文件名或者apt-get +文件名 安装文件</p></blockquote><h3 id="3-系统信息"><a href="#3-系统信息" class="headerlink" title="3.系统信息"></a>3.系统信息</h3><blockquote><p>arch 显示机器的处理器架构(1)</p><p>uname -m 显示机器的处理器架构(2)</p><p>uname -r 显示正在使用的内核版本</p><p>cat /proc/version 显示内核的版本</p><p>cat /proc/net/dev 显示网络适配器及统计</p><p>cat /proc/cpuinfo 显示CPU info的信息</p><p>cat /proc/mounts 显示已加载的文件系统</p></blockquote><h3 id="4-文件搜索"><a href="#4-文件搜索" class="headerlink" title="4.文件搜索"></a>4.文件搜索</h3><blockquote><p>find / -name file1 从 ‘/’ 开始进入根文件系统搜索文件和目录</p><p>find / -user user1 搜索属于用户 ‘user1’ 的文件和目录<br>find /home/user1 -name *.bin 在目录 ‘/ home/user1’ 中搜索带有’.bin’ 结尾的文件<br>find /usr/bin -type f -atime +100 搜索在过去100天内未被使用过的执行文件<br>find /usr/bin -type f -mtime -10 搜索在10天内被创建或者修改过的文件</p><p>find . -name ‘<em>.php’ -mmin -30  查找最近30分钟修改的当前目录下的.php文件<br>find . -name ‘</em>.php’ -mtime 0<br>查找最近24小时修改的当前目录下的.php文件</p><p>find . -name ‘*.inc’ -mtime 0 -ls<br>查找最近24小时修改的当前目录下的.php文件，并列出详细信息</p><p>find . -type f -mtime 1</p><p>查找当前目录下，最近24-48小时修改过的常规文件。<br>find . -type f -mtime +1<br>查找当前目录下，最近1天前修改过的常规文件。</p><p>-atime 文件访问时间</p><p>-ctime 文件常见时间</p><p>-mtime文件修改时间</p><p>-mtime n : n为数字，意思为在n天之前的“一天之内”被更改过内容的文件<br>-mtime +n : 列出在n天之前（不含n天本身）被更改过内容的文件名<br>-mtime -n : 列出在n天之内（含n天本身）被更改过内容的文件名</p><p>-type f 代表一个普通格式的文件 二进制文件</p><p>-type d 代表文件夹</p><p>find / -name *.rpm -exec chmod 755 ‘{}’ ; 搜索以 ‘.rpm’ 结尾的文件并定义其权限<br>find / -xdev -name *.rpm 搜索以 ‘.rpm’ 结尾的文件，忽略光驱、捷盘等可移动设备<br>locate *.ps 寻找以 ‘.ps’ 结尾的文件 - 先运行 ‘updatedb’ 命令<br>whereis halt 显示一个二进制文件、源码或man的位置<br>which halt 显示一个二进制文件或可执行文件的完整路径</p><p>grep kali /etc/passwd grep关键词搜索</p><p>find / -name moonsec 2&gt;/dev/null   搜索某个文件/文件夹 屏蔽出错信息</p></blockquote><h3 id="6-用户和群组"><a href="#6-用户和群组" class="headerlink" title="6.用户和群组"></a>6.用户和群组</h3><blockquote><p>groupadd group_name 创建一个新用户组<br>groupdel group_name 删除一个用户组</p><p>cat /etc/group | grep group_name </p><p>usermod -a -G moontea k1把用户k1附加其他用户组</p></blockquote><ul><li>创建目录</li></ul><blockquote><p>useradd 目录</p><p>passwd 目录</p></blockquote><ul><li>创建用户以及分配目录</li></ul><blockquote><p> useradd -r -m -s /bin/bash moonsec</p></blockquote><p>参数的意思：<br>-r 建立系统账号<br>-m 自动建立用户的登入目录<br>-s /bin/bash 指定用户登入后所使用的shell</p><ul><li>切换用户</li></ul><blockquote><p>su - root 切换到root用户</p><p>su 用户名 切换到普通用户</p></blockquote><h3 id="7-系统管理top-查看正在指向的程序信息"><a href="#7-系统管理top-查看正在指向的程序信息" class="headerlink" title="7.系统管理top # 查看正在指向的程序信息"></a>7.系统管理top # 查看正在指向的程序信息</h3><blockquote><p>top # 查看正在指向的程序信息</p><p>ps -ef 查看所有进程信息</p><p>ps -ef | grep tomcat 查找指定进程</p><p>kill -9 id 强制杀死进程</p><p>env 当前的变量</p><p>查看系统变量</p><p>echo $PATH</p><p>hostname 查看主机名</p><p>history 查看历史命令</p></blockquote><h3 id="8-查看磁盘信息"><a href="#8-查看磁盘信息" class="headerlink" title="8.查看磁盘信息"></a>8.查看磁盘信息</h3><blockquote><p>df   默认不带单位，挂载点、总容量、已用、可用</p><p>df  -h   友好显示（带单位），很多命令的友好显示都是-h</p></blockquote><h3 id="9-查看内存信息"><a href="#9-查看内存信息" class="headerlink" title="9.查看内存信息"></a>9.查看内存信息</h3><blockquote><p>free   默认以KB为单位，总容量、已用、可用、缓存大小</p><p>free  -m   默认以MB为单位</p><p>free  -h   上面2种都不带单位、只显示数值，这种是友好显示的，会带单位G、M等</p></blockquote><h3 id="10-查看环境变量"><a href="#10-查看环境变量" class="headerlink" title="10.查看环境变量"></a>10.查看环境变量</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">echo  $JAVA_HOME</span><br><span class="line">echo $PATH | grep jdk</span><br></pre></td></tr></table></figure><h3 id="11-linux常用网络命令"><a href="#11-linux常用网络命令" class="headerlink" title="11.linux常用网络命令"></a><strong>11.linux常用网络命令</strong></h3><p>网络和监控命令类似于这些： hostname, ping, ifconfig, iwconfig, netstat, nslookup, traceroute, finger, telnet, ethtool 用于查看 linux 服务器 ip 地址，管理服务器网络配置，通过 telnet 和 ethernet 建立与 linux 之间的网络链接，查看 linux 的服务器信息等。下面让我们看看在 Linux 下的网络和监控命令的使用。</p><blockquote><p>hostname 查看本机名</p><p>ping  一般用于测试网络是否通 内网icmp</p><p>ping <a href="http://www.baidu.com/">www.baidu.com</a> -c 3 执行3次</p><p>ifconfig 网卡信息</p><p>iwconfig 用于配置或获取无线网络设备信息</p></blockquote><ul><li>netstat </li></ul><blockquote><p>-a (all)显示所有选项，默认不显示LISTEN相关<br>-t (tcp)仅显示tcp相关选项<br>-u (udp)仅显示udp相关选项<br>-n 拒绝显示别名，能显示数字的全部转化成数字。<br>-l 仅列出有在 Listen (监听) 的服務状态</p><p>-p 显示建立相关链接的程序名<br>-r 显示路由信息，路由表<br>-e 显示扩展信息，例如uid等<br>-s 按各个协议进行统计<br>-c 每隔一个固定时间，执行该netstat命令。</p></blockquote><p>提示：LISTEN和LISTENING的状态只有用-a或者-l才能看到</p><p>常用命令</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">netstat -ano</span><br><span class="line"></span><br><span class="line">-an 查看当前所有已连接端口</span><br><span class="line">-nlpt 查看当前所有tcp端口</span><br><span class="line">-nlpu 查看当前所有udp端口</span><br><span class="line">-nlpt | grep 80 查看所有80端口使用情况</span><br><span class="line"></span><br><span class="line">netstat -lntup 查看所有的tcp和upd端口</span><br></pre></td></tr></table></figure><ul><li>nslookup 查询其他记录</li></ul><blockquote><p>直接查询返回的是A记录，我们可以指定参数，查询其他记录，比如AAAA、MX等。</p><p>nslookup -qt=type domain [dns-server]其中，type可以是以下这些类型：</p></blockquote><p>A 地址记录<br>AAAA 地址记录<br>AFSDB Andrew文件系统数据库服务器记录<br>ATMA ATM地址记录<br>CNAME 别名记录<br>HINFO 硬件配置记录，包括CPU、操作系统信息<br>ISDN 域名对应的ISDN号码<br>MB 存放指定邮箱的服务器<br>MG 邮件组记录<br>MINFO 邮件组和邮箱的信息记录<br>MR 改名的邮箱记录<br>MX 邮件服务器记录<br>NS 名字服务器记录<br>PTR 反向记录<br>RP 负责人记录<br>RT 路由穿透记录<br>SRV TCP服务器信息记录<br>TXT 域名对应的文本信息<br>X25 域名对应的X.25地址记录</p><ul><li><p>http协议</p></li><li><p>curl</p></li><li><p>wget</p></li><li><p>traceroute</p></li></ul><p>traceroute是用来检测发出数据包的主机到目标主机之间所经过的网关数量的工具。traceroute的原理是试图以最小的TTL（存活时间）发出探测包来跟踪数据包到达目标主机所经过的网关，然后监听一个来自网关ICMP的应答。发送数据包的大小默认为38个字节。</p><blockquote><p>-d 使用Socket层级的排错功能。<br>-f 设置第一个检测数据包的存活数值TTL的大小。<br>-F 设置勿离断位。<br>-g 设置来源路由网关，最多可设置8个。<br>-i 使用指定的网络界面送出数据包。<br>-I 使用ICMP回应取代UDP资料信息。<br>-m 设置检测数据包的最大存活数值TTL的大小。<br>-n 直接使用IP地址而非主机名称。<br>-p 设置UDP传输协议的通信端口。<br>-r 忽略普通的Routing Table，直接将数据包送到远端主机上。<br>-s 设置本地主机送出数据包的IP地址。<br>-t 设置检测数据包的TOS数值。<br>-v 详细显示指令的执行过程。<br>-w 设置等待远端主机回报的时间。</p><p>-x 开启或关闭数据包的正确性检验。</p></blockquote><ul><li>telnet</li></ul><p>Linux telnet命令用于远端登入。</p><p>执行telnet指令开启终端机阶段作业，并登入远端主机。</p><p>现在多数用于检测某个端口是否开放</p><h3 id="12-防火墙iptables"><a href="#12-防火墙iptables" class="headerlink" title="12.防火墙iptables"></a>12.防火墙iptables</h3><p>查看防火墙规则</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">iptalbes -L</span><br></pre></td></tr></table></figure><p>清除规则</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">iptables -F</span><br></pre></td></tr></table></figure><p>关闭防火墙 </p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">/etc/init.d/iptables stop</span><br><span class="line"></span><br><span class="line">service iptables stop</span><br></pre></td></tr></table></figure><blockquote><p>安装：apt-get install ufw</p><p>关闭：ufw disable # To disable the firewall</p><p>开启：ufw enable # To enable the firewall</p></blockquote>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;kali的安装与介绍&quot;&gt;&lt;a href=&quot;#kali的安装与介绍&quot; class=&quot;headerlink&quot; title=&quot;kali的安装与介绍&quot;&gt;&lt;/a&gt;kali的安装与介绍&lt;/h2&gt;&lt;h3 id=&quot;简介&quot;&gt;&lt;a href=&quot;#简介&quot; class=&quot;headerli</summary>
      
    
    
    
    <category term="安全篇" scheme="http://bkystop.github.io/categories/%E5%AE%89%E5%85%A8%E7%AF%87/"/>
    
    
    <category term="Linux" scheme="http://bkystop.github.io/tags/Linux/"/>
    
    <category term="kali" scheme="http://bkystop.github.io/tags/kali/"/>
    
  </entry>
  
  <entry>
    <title>渗透测试基础知识</title>
    <link href="http://bkystop.github.io/2022/10/08/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/"/>
    <id>http://bkystop.github.io/2022/10/08/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/</id>
    <published>2022-10-08T14:21:33.000Z</published>
    <updated>2023-04-09T13:30:24.580Z</updated>
    
    <content type="html"><![CDATA[<h1 id="渗透测试"><a href="#渗透测试" class="headerlink" title="渗透测试"></a>渗透测试</h1><h2 id="基础"><a href="#基础" class="headerlink" title="基础"></a>基础</h2><h3 id="基础名词解释"><a href="#基础名词解释" class="headerlink" title="基础名词解释"></a>基础名词解释</h3><ul><li>肉鸡：傀儡机（可以随意被我们控制），被远程控制的机器。</li><li>木马：表面伪装成了正常程序，运行后，可以获取系统控制权限。（灰鸽子，黑洞）<ul><li>网页木马：表面伪装成普通的网页文件，或者将自己的代码直接插入到正常的网页中去，网页被访问时，浏览器就会将木马自动下载。</li><li>一句话木马：一端很小的网页代码后门，对网站进行控制。一句话木马主要配合菜刀试用</li></ul></li><li>菜刀：文件管理，虚拟终端，数据库管理 </li><li>挂马：将木马放入网站文件，使浏览者中马。</li><li>大马：功能强大的网页后门，能执行命令，操作文件，连接数据库。</li><li>小马：功能比较单一的网页。上传保存文件，用小马上传大马。</li><li>黑页：入侵者对网页进行改写，公布自己的存在。</li><li>后门：成功攻击后，攻击者系统植入特定程序或修改某些配置，方便下次控制。</li><li>拖库：从数据库中导出数据。</li><li>社工库：黑客与大数据结合的产物，黑客将泄露的用户信息进行整合，集中归档。</li><li>撞库：黑客通过手机互联网已经泄露的用户和密码信息，生成对应字典表，尝试批量登录其他网站，得到一系列账号密码。 </li><li>提权：提升自己在服务器中的权限。</li><li>网络钓鱼：利用欺骗性的电子邮件或者web站点来进行诈骗，受骗者就会泄露自己的个人信息，账号密码。</li><li>社会工程学攻击：一种通过对被攻击者心理弱点，好奇心，信任，贪婪等心理陷阱所采取的诈骗。将人性弱点与黑客攻击进行结合。</li><li>rootkit：攻击者隐藏自己行踪，保留root权限的工具。达到长久控制的目的。</li><li>IPS$：共享“命令管道”的资源。</li><li>弱口令：强度不够，容易被猜解的密码。</li><li>shell：命令行运行环境。</li><li>webshell：以asp，php，jsp或cgi等网页文件形式存在的一个命令行运行环境，也可以称作为网页后门。</li><li>溢出：缓冲区溢出。程序对接受的输入数据没有执行有效的检测而导致错误，造成程序崩溃或者执行攻击者的命令。</li><li>注入：用户可以提交一段数据库查询代码，根据程序返回的结果，可以得知一些想要的数据。 </li><li>注入点：可以实行注入的地方，通常是一个访问数据库的连接。注入点运行用户的权限不同，获得的权限也不同。</li><li>旁站入侵：同一个服务器有多个站点，通过其中一个站点访问其他站点。</li><li>C段入侵：从一个网段拿下一个服务器，通过这台服务器嗅探目标服务器上传输的数据。</li><li>内网：局域网。</li><li>外网：互联网。</li><li>端口：一种数据传输的通道。</li><li>免杀：通过各种方式（加壳，加密，修改特征码，加花指令）绕过杀毒软件拦截<ul><li>加壳：利用特殊的算法，将exe可执行程序或dll动态连接数据库文件的编码进行改变（压缩，加密等），达到缩小文件体积或者加密程序编码，甚至躲过杀毒软件查杀。</li><li>花指令：几句汇编指令，让汇编语句进行一些跳转，使杀毒软件不能正常的判断病毒文件的构造。</li></ul></li><li>TCP/IP：网络通信协议，规范了网络上所有的通信设备。（主机之间数据来往的格式和传送方式，数据打包和寻址的标准方法）</li><li>路由器：路由选择，将ip数据包正确的送到目的地。</li><li>蜜罐：情报收集系统。故意让人攻击，引诱黑客来攻击，了解其攻击方法，所用工具，掌握其社交网络。</li><li>DOS：拒绝服务攻击，目的是是计算机或网络无法正常服务。</li><li>cc攻击：攻击者借助代理服务器生成指向受害主机的合法请求，实现DDOS和伪装。</li><li>脚本注入攻击：把sql命令插入到web表单的输入域或者页面请求的查询字符串，欺骗服务器。</li><li>加密技术：利用技术手段将数据变为乱码传送（加密），到达目的地后再用技术手段还原（解密）。</li><li>欺骗攻击：IP欺骗,ARP欺骗,DNS欺骗,WEB欺骗，电子邮件欺骗，路由欺骗（通过指定路由器，以假冒身份与其他主机进行合法通信或发送假报文，是攻击主机出现错误动作），地址欺骗。</li><li>嗅探：嗅探计算机网络的共享通讯隧道，共享以为着计算机能够接受到发送给其他计算机的信息，捕获在网络中传输的数据信息就称为嗅探。</li><li>跳板：一个具有辅助作用的及其，利用这个主机作为一个间接工具，控制其他主机，一般和肉鸡连用。</li><li>RARP反向地址解析协议：将硬件地址映射到网络地址</li><li>UDP用户数据报协议：无连接的传输层协议，提供面向事务的简单不可靠信息传输服务。</li><li>TCP协议：面向连接的，可靠的，基于字节流的传输层通信协议。</li><li>FTP文件传输协议：用于文件的增删改查。</li><li>SMTP简单邮件传输协议：传输电子邮件</li><li>TELNET终端协议：允许用户以终端方式远程访问主机。</li><li>HTTP超文本传输协议：简单的请求-响应协议，通常允许在TCP上。</li><li>HTTPS安全超文本传输协议：通过在安全套接字层（SSL）协议上允许http来将安全添加到万维网中。</li><li>TFTP：简单文件传输协议。</li><li>ICMP（inter控制消息协议）：用于在ip，主机，路由器之间传输控制消息。（ping）</li><li>DNS协议：将域名转换成IP地址的一种协议，也可以将ip地址转换成域名的一种协议。（nslookup）</li><li>EXP/Exploit：漏洞利用代码，允许之后对目标进行攻击。</li><li>POC/proof of Concept：漏洞验证代码，检测目标是否存在对应漏洞。</li><li>Payload：成功允许EXP后，真正在目标系统执行的命令或代码。</li><li>Shellcode：建立正向/反向shell而得名。</li><li>Lan：局域网</li><li>Peoxy：代理。一类程序或系统，接受来自客户机的浏览，并代表客户与服务器交互。代理能用于过滤应用级别的指定类型的浏览或缓存信息以提高性能。（过滤防火墙）</li><li>CMS：内容管理系统。</li><li>cve：漏洞披露。</li><li>CNVD：国家信息安全漏洞共享平台。</li><li>0day：负责应用程序的程序员或供应商所未知的软件缺陷。漏洞未知，没有可用的补丁程序。</li><li>1day：刚发布，但已被官方发布补丁网络但还大量存在。</li><li>Nday：已经被公布的0day。</li><li>APT攻击：高级可持续攻击。</li><li>渗透测试：黑盒测试，白盒测试，灰盒测试。</li></ul><h3 id="windows常用cmd命令"><a href="#windows常用cmd命令" class="headerlink" title="windows常用cmd命令"></a>windows常用cmd命令</h3><ul><li>echo </li><li>dir</li><li>d: 和 cd</li><li>tree</li><li>md 创建目录 </li><li>rd 删除目录</li><li>ipconfig</li><li>cls</li><li>copy 复制、拼接文件</li><li>move移动文件</li><li>ren重命名</li><li>del删除文件</li><li>ping</li><li>type显示文本文件的内容</li><li>reg</li></ul><h3 id="linux目录"><a href="#linux目录" class="headerlink" title="linux目录"></a>linux目录</h3><ul><li>/bin 二进制可执行命令</li><li>/etc 系统管理和配置文件</li><li>/etc/rc.d 启动的配置文件和脚本</li><li>/home 用户主目录的基点/lib 标准程序设计库，又叫动态链接共享库</li><li>/sbin 超级管理命令，这里存放的是系统管理员使用的管理程序</li><li>/tmp 公共的临时文件存储点</li><li>/root 系统管理员的主目录</li><li>/mnt 系统提供这个目录是让用户临时挂载其他的文件系统</li><li>/lost+found这个目录平时是空的，系统非正常关机而留下“无家可归”的文件就在这里</li><li>/proc 虚拟的目录，是系统内存的映射。可直接访问这个目录来获取系统信息。</li><li>/var 某些大文件的溢出区，比方说各种服务的日志文件</li><li>/usr 最庞大的目录，要用到的应用程序和文件几乎都在这个目录</li><li>/usr/bin 众多的应用程序/usr/sbin 超级用户的一些管理程序</li></ul><h3 id="网络基础"><a href="#网络基础" class="headerlink" title="网络基础"></a>网络基础</h3><ul><li><p>url</p><p>协议://域名:端口/虚拟目录/文件名?参数#锚点</p></li><li><p>http协议</p><p>HTTP协议是Hyper Text Transfer Protocol（超文本传输协议）的缩写,是用于从万维网（WWW:World Wide Web ）服务器传输超文本到本地浏览器的传送协议。</p></li><li><p>http协议请求方法</p><p>GET：向指定资源发出显示请求</p><p>HEAD：和GET一样，但是不传回所有资源内容</p><p>POST：向指定资源提交数据，数据被包含在请求中</p><p>PUT：向指定位置上传</p><p>DELETE：删除所标识的资源</p><p>OPTIONS：这个方法可使服务器传回该资源所支持的所有</p><p>HTTP请求方法。用’*’来代替资源名称，向Web服务器发送OPTIONS请求，可以测试服务器功能是否正常运作</p></li><li><p>请求信息</p><p>请求信息发出的请求信息（message request）包括</p><p>请求行（例如GET /images/logo.gif HTTP/1.1，表示从/images目录下请求logo.gif这个文件）</p><p>请求头（例如Accept-Language: en）</p><p>空行</p><p>其他消息体</p></li><li><p>合同谈判协议状态码</p><p>1xx：指示信息–表示请求已接收，继续处理</p><p>2xx：成功–表示请求已被成功接收、理解、接受</p><p>3xx：重定向–要完成请求必须进行更进一步的操作</p><p>4xx：客户端错误–请求有语法错误或请求无法实现</p><p>5xx：服务器端错误–服务器未能实现合法的请求</p><p>200 OK //客户端请求成功</p><p>400 Bad Request //客户端请求有语法错误，不能被服务器所理解 </p><p>401 Unauthorized //请求未经授权，这个状态代码必须和WWW-Authenticate报头域一起使用 </p><p>403 Forbidden //服务器收到请求，但是拒绝提供服务</p><p> 404 Not Found //请求资源不存在，eg：输入了错误的URL </p><p>500 Internal Server Error //服务器发生不可预期的错误</p><p>503 Server Unavailable //服务器当前不能处理客户端的请求，一段时间后可能恢复正常</p></li></ul><h2 id="渗透测试流程"><a href="#渗透测试流程" class="headerlink" title="渗透测试流程"></a>渗透测试流程</h2><h4 id="信息搜集"><a href="#信息搜集" class="headerlink" title="信息搜集"></a>信息搜集</h4><ol><li>域名信息whois（社工，弱口令）</li><li>ip，端口（nmap，msf）</li><li>找后台（弱口令）</li><li>子域名（旁站）</li><li>web服务器指纹（寻找相应漏洞）</li><li>信息泄露（phpinfo，物理路径 ）</li></ol><h4 id="漏洞挖掘"><a href="#漏洞挖掘" class="headerlink" title="漏洞挖掘"></a>漏洞挖掘</h4><p>Web应用层面</p><ul><li>文件包含</li><li>文件上传</li><li>文件下载</li><li>sql下载</li><li>xss</li><li>csrf</li><li>越权</li><li>弱口令</li><li>逻辑漏洞</li></ul><p>服务器</p><ul><li>弱口令</li><li>shift后门</li><li>msf </li></ul><h4 id="权限提升"><a href="#权限提升" class="headerlink" title="权限提升"></a>权限提升</h4><h4 id="权限维持"><a href="#权限维持" class="headerlink" title="权限维持"></a>权限维持</h4><ul><li>隐蔽杀软，周期查看，免杀，多种留后门</li></ul><h4 id="日志清扫"><a href="#日志清扫" class="headerlink" title="日志清扫"></a>日志清扫</h4><ul><li>严谨，伪装隐藏，避免机警</li></ul><h3 id="常见端口"><a href="#常见端口" class="headerlink" title="常见端口"></a>常见端口</h3><ul><li>21 ftp</li><li>23 telnet</li><li>80 web</li><li>445 SMB</li><li>1433 MSSQL</li><li>3306 MYSQL</li><li>3389 远程桌面</li><li>8080 tomcat</li><li>8888 宝塔</li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;渗透测试&quot;&gt;&lt;a href=&quot;#渗透测试&quot; class=&quot;headerlink&quot; title=&quot;渗透测试&quot;&gt;&lt;/a&gt;渗透测试&lt;/h1&gt;&lt;h2 id=&quot;基础&quot;&gt;&lt;a href=&quot;#基础&quot; class=&quot;headerlink&quot; title=&quot;基础&quot;&gt;&lt;/a&gt;基础&lt;/h</summary>
      
    
    
    
    <category term="安全篇" scheme="http://bkystop.github.io/categories/%E5%AE%89%E5%85%A8%E7%AF%87/"/>
    
    
    <category term="Windows" scheme="http://bkystop.github.io/tags/Windows/"/>
    
  </entry>
  
  <entry>
    <title>Centos+uwsgi部署Django</title>
    <link href="http://bkystop.github.io/2022/09/30/Centos-uwsgi%E9%83%A8%E7%BD%B2Django/"/>
    <id>http://bkystop.github.io/2022/09/30/Centos-uwsgi%E9%83%A8%E7%BD%B2Django/</id>
    <published>2022-09-30T10:42:49.000Z</published>
    <updated>2023-04-12T11:01:51.764Z</updated>
    
    <content type="html"><![CDATA[<h1 id="项目部署"><a href="#项目部署" class="headerlink" title="项目部署"></a>项目部署</h1><h2 id="本质"><a href="#本质" class="headerlink" title="本质"></a>本质</h2><p>三件事</p><blockquote><p>租个服务器（含公网ip）+配置环境</p><blockquote><p>电脑（服务器）+公网ip</p><p>自己电脑+拉专线（公网ip）</p></blockquote><p>代码放在服务上</p><p>将程序运行起来</p></blockquote><ol><li>服务器为什么使用centos</li></ol><ul><li>日常windows，收费+图形化界面慢</li><li>部署linux  免费+图形化界面/非图形化界面</li></ul><ol start="2"><li>公网ip：47.109.35.113</li></ol><ul><li><p>登录服务器（xshell）</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh root@47.109.35.113</span><br></pre></td></tr></table></figure></li></ul><ol start="3"><li>端口</li></ol><blockquote><p>22端口：SSH，远程链接</p><p>3306端口：Mysql</p><p>6379端口：Redis</p><p>80端口：http</p><p>443端口：https</p></blockquote><ol start="4"><li>安全组</li></ol><h2 id="git代码仓库，存代码"><a href="#git代码仓库，存代码" class="headerlink" title="git代码仓库，存代码"></a>git代码仓库，存代码</h2><ul><li><p>gitlab（公司自己的仓库）</p></li><li><p>github</p></li><li><p>githee(创建仓库)</p><ol><li>创建仓库</li></ol></li></ul><img src="/2022/09/30/Centos-uwsgi%E9%83%A8%E7%BD%B2Django/image-20230329194356370.png" class title="image-20230329194356370"><p>远程仓库地址：<a href="https://gitee.com/bkystop/nbiot.git">https://gitee.com/bkystop/nbiot.git</a></p><p>​    2. 在项目跟目录配置<code>.gitignore</code></p><img src="/2022/09/30/Centos-uwsgi%E9%83%A8%E7%BD%B2Django/image-20230329195512985.png" class title="image-20230329195512985"><p><code>.gitignore</code></p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Byte-compiled / optimized / DLL files</span></span><br><span class="line">__pycache__/</span><br><span class="line">*.py<span class="section">[cod]</span></span><br><span class="line">*$py.class</span><br><span class="line"></span><br><span class="line"><span class="comment"># C extensions</span></span><br><span class="line">*.so</span><br><span class="line"></span><br><span class="line"><span class="comment"># Distribution / packaging</span></span><br><span class="line">.Python</span><br><span class="line">build/</span><br><span class="line">develop-eggs/</span><br><span class="line">dist/</span><br><span class="line">downloads/</span><br><span class="line">eggs/</span><br><span class="line">.eggs/</span><br><span class="line">lib/</span><br><span class="line">lib64/</span><br><span class="line">parts/</span><br><span class="line">sdist/</span><br><span class="line">var/</span><br><span class="line">wheels/</span><br><span class="line">share/python-wheels/</span><br><span class="line">*.egg-info/</span><br><span class="line">.installed.cfg</span><br><span class="line">*.egg</span><br><span class="line">MANIFEST</span><br><span class="line"></span><br><span class="line"><span class="comment"># PyInstaller</span></span><br><span class="line"><span class="comment">#  Usually these files are written by a python script from a template</span></span><br><span class="line"><span class="comment">#  before PyInstaller builds the exe, so as to inject date/other infos into it.</span></span><br><span class="line">*.manifest</span><br><span class="line">*.spec</span><br><span class="line"></span><br><span class="line"><span class="comment"># Installer logs</span></span><br><span class="line">pip-log.txt</span><br><span class="line">pip-delete-this-directory.txt</span><br><span class="line"></span><br><span class="line"><span class="comment"># Unit test / coverage reports</span></span><br><span class="line">htmlcov/</span><br><span class="line">.tox/</span><br><span class="line">.nox/</span><br><span class="line">.coverage</span><br><span class="line">.coverage.*</span><br><span class="line">.cache</span><br><span class="line">nosetests.xml</span><br><span class="line">coverage.xml</span><br><span class="line">*.cover</span><br><span class="line">*.py,cover</span><br><span class="line">.hypothesis/</span><br><span class="line">.pytest_cache/</span><br><span class="line">cover/</span><br><span class="line"></span><br><span class="line"><span class="comment"># Translations</span></span><br><span class="line">*.mo</span><br><span class="line">*.pot</span><br><span class="line"></span><br><span class="line"><span class="comment"># Django stuff:</span></span><br><span class="line">*.log</span><br><span class="line">local_settings.py</span><br><span class="line">db.sqlite3</span><br><span class="line">db.sqlite3-journal</span><br><span class="line"></span><br><span class="line"><span class="comment"># Flask stuff:</span></span><br><span class="line">instance/</span><br><span class="line">.webassets-cache</span><br><span class="line"></span><br><span class="line"><span class="comment"># Scrapy stuff:</span></span><br><span class="line">.scrapy</span><br><span class="line"></span><br><span class="line"><span class="comment"># Sphinx documentation</span></span><br><span class="line">docs/_build/</span><br><span class="line"></span><br><span class="line"><span class="comment"># PyBuilder</span></span><br><span class="line">.pybuilder/</span><br><span class="line">target/</span><br><span class="line"></span><br><span class="line"><span class="comment"># Jupyter Notebook</span></span><br><span class="line">.ipynb_checkpoints</span><br><span class="line"></span><br><span class="line"><span class="comment"># IPython</span></span><br><span class="line">profile_default/</span><br><span class="line">ipython_config.py</span><br><span class="line"></span><br><span class="line"><span class="comment"># pyenv</span></span><br><span class="line"><span class="comment">#   For a library or package, you might want to ignore these files since the code is</span></span><br><span class="line"><span class="comment">#   intended to run in multiple environments; otherwise, check them in:</span></span><br><span class="line"><span class="comment"># .python-version</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># pipenv</span></span><br><span class="line"><span class="comment">#   According to pypa/pipenv#598, it is recommended to include Pipfile.lock in version control.</span></span><br><span class="line"><span class="comment">#   However, in case of collaboration, if having platform-specific dependencies or dependencies</span></span><br><span class="line"><span class="comment">#   having no cross-platform support, pipenv may install dependencies that don&#x27;t work, or not</span></span><br><span class="line"><span class="comment">#   install all needed dependencies.</span></span><br><span class="line"><span class="comment">#Pipfile.lock</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># PEP 582; used by e.g. github.com/David-OConnor/pyflow</span></span><br><span class="line">__pypackages__/</span><br><span class="line"></span><br><span class="line"><span class="comment"># Celery stuff</span></span><br><span class="line">celerybeat-schedule</span><br><span class="line">celerybeat.pid</span><br><span class="line"></span><br><span class="line"><span class="comment"># SageMath parsed files</span></span><br><span class="line">*.sage.py</span><br><span class="line"></span><br><span class="line"><span class="comment"># Environments</span></span><br><span class="line">.env</span><br><span class="line">.venv</span><br><span class="line">env/</span><br><span class="line">venv/</span><br><span class="line">ENV/</span><br><span class="line">env.bak/</span><br><span class="line">venv.bak/</span><br><span class="line"></span><br><span class="line"><span class="comment"># Spyder project settings</span></span><br><span class="line">.spyderproject</span><br><span class="line">.spyproject</span><br><span class="line"></span><br><span class="line"><span class="comment"># Rope project settings</span></span><br><span class="line">.ropeproject</span><br><span class="line"></span><br><span class="line"><span class="comment"># mkdocs documentation</span></span><br><span class="line">/site</span><br><span class="line"></span><br><span class="line"><span class="comment"># mypy</span></span><br><span class="line">.mypy_cache/</span><br><span class="line">.dmypy.json</span><br><span class="line">dmypy.json</span><br><span class="line"></span><br><span class="line"><span class="comment"># Pyre type checker</span></span><br><span class="line">.pyre/</span><br><span class="line"></span><br><span class="line"><span class="comment"># pytype static type analyzer</span></span><br><span class="line">.pytype/</span><br><span class="line"></span><br><span class="line"><span class="comment"># Cython debug symbols</span></span><br><span class="line">cython_debug/</span><br></pre></td></tr></table></figure><ol start="3"><li>进入，初始化，推送至代码仓库</li></ol><ul><li>第一次</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">cd 项目目录</span><br><span class="line">git init</span><br><span class="line">git remote add origin https://gitee.com/bkystop/nbiot.git</span><br></pre></td></tr></table></figure><ul><li>常用</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">git add .</span><br><span class="line">git commit -m &#x27;init&#x27;</span><br><span class="line">git push origin master</span><br></pre></td></tr></table></figure><h2 id="服务器，拉取代码"><a href="#服务器，拉取代码" class="headerlink" title="服务器，拉取代码"></a>服务器，拉取代码</h2><ol><li>安装git(/data/)</li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install git -y</span><br></pre></td></tr></table></figure><ul><li>第一次</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">cd /data/</span><br><span class="line">mkdir www</span><br><span class="line">cd /data/www/</span><br><span class="line"></span><br><span class="line">git clone https://gitee.com/bkystop/nbiot.git</span><br><span class="line"><span class="meta prompt_">&gt; </span><span class="language-bash">码云账号和密码</span></span><br></pre></td></tr></table></figure><ul><li>后续</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd /data/www/nbiot  # 项目目录</span><br><span class="line">git pull origin master</span><br></pre></td></tr></table></figure><blockquote><p>此时是https链接拉取，也可基于SSH配置gitee</p></blockquote><h2 id="环境配置"><a href="#环境配置" class="headerlink" title="环境配置"></a>环境配置</h2><ul><li>python3.9</li><li>虚拟环境</li><li>uwsgi</li><li>nginx</li></ul><h3 id="安装python3-9"><a href="#安装python3-9" class="headerlink" title="安装python3.9"></a>安装python3.9</h3><ol><li>安装gcc</li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install gcc -y # 安装gcc</span><br></pre></td></tr></table></figure><ol start="2"><li>安装python3相关依赖</li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">yum install zlib zlib-devel -y</span><br><span class="line">yum install bzip2 bzip2-devel -y</span><br><span class="line">yum install ncurses ncurses-devel-y</span><br><span class="line">yum install readline readline-devel  -y</span><br><span class="line">yum install openssl openssl-devel-y</span><br><span class="line">yum install xz lzma xz-devel -y</span><br><span class="line">yum install sqlite sqlite-devel-y</span><br><span class="line">yum install gdbm gdbm-devel-y</span><br><span class="line">yum install tk tk-devel -y</span><br><span class="line">yum install mysql-devel -y</span><br><span class="line">yum install python-devel -y</span><br><span class="line">yum install libffi-devel -y</span><br></pre></td></tr></table></figure><ol start="3"><li>下载python3.9源码 <a href="https://www.python.org/ftp/python/">https://www.python.org/ftp/python/</a>****</li></ol> <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd /data/</span><br><span class="line">wget https://www.python.org/ftp/python/3.9.5/Python-3.9.5.tgz</span><br></pre></td></tr></table></figure><blockquote><p>如果没有wget，先安装<code>yum install wget -y</code></p></blockquote><ol start="4"><li>解压&amp;编译&amp;安装</li></ol><ul><li>解压</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tar -xvf Python-3.9.5.tgz</span><br></pre></td></tr></table></figure><ul><li>进入目录并编译安装</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">cd Python-3.9.5</span><br><span class="line">ls</span><br><span class="line">./configure</span><br><span class="line">make all</span><br><span class="line">make install</span><br></pre></td></tr></table></figure><ul><li>测试</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">python3 --version</span><br><span class="line"></span><br><span class="line">/user/local/bin/python3</span><br><span class="line">/user/local/bin/pip3</span><br><span class="line">/user/local/bin/pip3.9</span><br></pre></td></tr></table></figure><blockquote><p>报错：WARNING: Running pip as root will break packages and permissions. You should install packages reliably by using venv: <a href="https://pip.pypa.io/warnings/venv">https://pip.pypa.io/warnings/venv</a></p><blockquote><p>python3 -m venv tutorial-env</p><p>source tutorial-env/bin/activate</p></blockquote></blockquote><ol start="5"><li>python解释器配置豆瓣yuan</li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip3.9 config set global.index-url https://pypi.douban.com/simple/</span><br></pre></td></tr></table></figure><h3 id="虚拟环境"><a href="#虚拟环境" class="headerlink" title="虚拟环境"></a>虚拟环境</h3><ol><li>安装virtualenv</li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip3.9 install virtualenv</span><br></pre></td></tr></table></figure><blockquote><p>pip install asgiref==3.5.2 -i <a href="http://pypi.douban.com/simple/">http://pypi.douban.com/simple/</a> –trusted-host pypi.douban.com</p></blockquote><p>​    2.创建虚拟环境（day28）</p><blockquote><p>代码：/data/www/nbiot</p><p>虚拟环境：可在任意位置，一般在 /envs/nb</p></blockquote><ul><li>创建</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mkdir /envs</span><br><span class="line">virtualenv /envs/nb --python=python3.9</span><br></pre></td></tr></table></figure><ol start="3"><li>激活虚拟环境</li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">source /envs/nb/bin/activate</span><br></pre></td></tr></table></figure><ol start="4"><li>安装uwsgi</li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install uwsgi</span><br></pre></td></tr></table></figure><blockquote><p>pip install uwsgi -i <a href="http://pypi.douban.com/simple/">http://pypi.douban.com/simple/</a> –trusted-host pypi.douban.com</p></blockquote><ul><li>命令运行</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">uwsgi --http :8080 --wsgi-file app.py --callable app</span><br></pre></td></tr></table></figure><ul><li>配置文件</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">[uwsgi]</span><br><span class="line">socket = 127.0.0.1:8001 #nginx模式</span><br><span class="line">http = 127.0.0.1:8000 # 二选一</span><br><span class="line">chdir = /data/www/nbiot/djangoProject1</span><br><span class="line">wsgi-file = /djangoProject1/wsgi.py</span><br><span class="line">processes = 2</span><br><span class="line">threads = 2</span><br><span class="line">pidfile = uwsgi.pid</span><br><span class="line">daemonize = uwsgi.log</span><br><span class="line">master = true</span><br><span class="line">virtualenv = /envs/nb/</span><br></pre></td></tr></table></figure><blockquote><p>settings,py中DEBUG=Ture该为DEBUG=False</p><p>settings,py中ALLOWED_HOSTS=[] 改为 ALLOWED_HOSTS=[“网站域名/服务监听的ip地址”] </p></blockquote><ul><li>运行</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">source /envs/nb/bin/activate # 先激活虚拟环境</span><br><span class="line">uwsgi --ini nb_uwsgi.ini  # 运行</span><br><span class="line">uwsgi --ini nb_uwsgi.ini &amp;  # 后台运行</span><br></pre></td></tr></table></figure><ul><li>停止后台运行</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ps -ef|grep nb_uwsgi</span><br><span class="line">kill -9 5735  # 根据进程号kill</span><br></pre></td></tr></table></figure><h3 id="nginx"><a href="#nginx" class="headerlink" title="nginx"></a>nginx</h3><ol><li>安装</li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install nginx -y</span><br></pre></td></tr></table></figure><ol start="2"><li>配置</li></ol><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">server</span> &#123;</span><br><span class="line">        <span class="attribute">listen</span>       <span class="number">80</span>;</span><br><span class="line">        <span class="attribute">server_name</span>  localhost;</span><br><span class="line">        <span class="attribute">charset</span>         UTF-<span class="number">8</span>;</span><br><span class="line">   </span><br><span class="line">        <span class="section">location</span> /static &#123;</span><br><span class="line">        <span class="attribute">alias</span> /data/www/nbiot/app01/static;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="section">location</span> / &#123; </span><br><span class="line">            <span class="attribute">include</span>  /etc/nginx/uwsgi_params;</span><br><span class="line">            <span class="attribute">uwsgi_pass</span>  <span class="number">127.0.0.1:8000</span>;  </span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd /etc/nginx</span><br><span class="line">vim nginx.conf</span><br></pre></td></tr></table></figure><ol start="4"><li>启动</li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">systemctl start nginx</span><br><span class="line">systemctl stop nginx</span><br><span class="line">systemctl restart nginx # 重启</span><br><span class="line">systemctl restart nginx # 开机启动</span><br></pre></td></tr></table></figure><ol start="4"><li>访问</li></ol>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;项目部署&quot;&gt;&lt;a href=&quot;#项目部署&quot; class=&quot;headerlink&quot; title=&quot;项目部署&quot;&gt;&lt;/a&gt;项目部署&lt;/h1&gt;&lt;h2 id=&quot;本质&quot;&gt;&lt;a href=&quot;#本质&quot; class=&quot;headerlink&quot; title=&quot;本质&quot;&gt;&lt;/a&gt;本质&lt;/h</summary>
      
    
    
    
    <category term="Linux篇" scheme="http://bkystop.github.io/categories/Linux%E7%AF%87/"/>
    
    
    <category term="Linux" scheme="http://bkystop.github.io/tags/Linux/"/>
    
    <category term="Python" scheme="http://bkystop.github.io/tags/Python/"/>
    
    <category term="Django" scheme="http://bkystop.github.io/tags/Django/"/>
    
  </entry>
  
  <entry>
    <title>基于Django的管理系统</title>
    <link href="http://bkystop.github.io/2022/09/19/%E5%9F%BA%E4%BA%8EDjango%E7%9A%84%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F/"/>
    <id>http://bkystop.github.io/2022/09/19/%E5%9F%BA%E4%BA%8EDjango%E7%9A%84%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F/</id>
    <published>2022-09-19T12:35:02.000Z</published>
    <updated>2023-04-09T13:24:19.842Z</updated>
    
    <content type="html"><![CDATA[<h2 id="案例：员工管理系统"><a href="#案例：员工管理系统" class="headerlink" title="案例：员工管理系统"></a>案例：员工管理系统</h2><h3 id="创建项目"><a href="#创建项目" class="headerlink" title="创建项目"></a>创建项目</h3><img src="/2022/09/19/%E5%9F%BA%E4%BA%8EDjango%E7%9A%84%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F/image-20230409203628386.png" class><ul><li>删除pycharm自动增加的</li></ul><img src="/2022/09/19/%E5%9F%BA%E4%BA%8EDjango%E7%9A%84%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F/image-20230409203642826.png" class><ul><li>删除templates文件</li></ul><img src="/2022/09/19/%E5%9F%BA%E4%BA%8EDjango%E7%9A%84%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F/image-20230409203653774.png" class><h3 id="创建app"><a href="#创建app" class="headerlink" title="创建app"></a>创建app</h3><p>两种方式创建app，可以在pycharm的终端输入，也可以先pycharm帮助执行一个manage.py</p><ol><li>终端输入<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python manage.py startapp app01</span><br></pre></td></tr></table></figure></li><li>使用pycharm</li></ol><img src="/2022/09/19/%E5%9F%BA%E4%BA%8EDjango%E7%9A%84%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F/image-20230409203708667.png" class><ul><li>相当于pycharm帮助执行了一个manage.py</li></ul><img src="/2022/09/19/%E5%9F%BA%E4%BA%8EDjango%E7%9A%84%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F/image-20230409203742679.png" class><ul><li>直接输入<code>startapp &lt;文件名&gt;</code>即可创建</li></ul><img src="/2022/09/19/%E5%9F%BA%E4%BA%8EDjango%E7%9A%84%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F/image-20230409203800524.png" class><h3 id="注册app"><a href="#注册app" class="headerlink" title="注册app"></a>注册app</h3><ul><li>在<code>settings.py</code>中注册app</li></ul><img src="/2022/09/19/%E5%9F%BA%E4%BA%8EDjango%E7%9A%84%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F/image-20230409203815085.png" class><h3 id="设计表结构"><a href="#设计表结构" class="headerlink" title="设计表结构"></a>设计表结构</h3><ul><li>新建用户表</li><li>新建部门表</li><li>将用户表和部门表进行关联<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> django.db <span class="keyword">import</span> models</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Department</span>(models.Model):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;部门表&quot;&quot;&quot;</span></span><br><span class="line">    <span class="comment"># id = models.BigAutoField(verbose_name=&quot;ID&quot;, primary_key=True)</span></span><br><span class="line">    title = models.CharField(verbose_name=<span class="string">&#x27;标题&#x27;</span>, max_length=<span class="number">32</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">UserInfo</span>(models.Model):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;员工表&quot;&quot;&quot;</span></span><br><span class="line">    name = models.CharField(verbose_name=<span class="string">&quot;姓名&quot;</span>, max_length=<span class="number">16</span>)</span><br><span class="line">    password = models.CharField(verbose_name=<span class="string">&quot;密码&quot;</span>, max_length=<span class="number">64</span>)</span><br><span class="line">    age = models.IntegerField(verbose_name=<span class="string">&quot;年龄&quot;</span>)</span><br><span class="line">    account = models.DecimalField(verbose_name=<span class="string">&quot;账户余额&quot;</span>, max_digits=<span class="number">10</span>, decimal_places=<span class="number">2</span>, default=<span class="number">0</span>)</span><br><span class="line">    create_time = models.DateTimeField(verbose_name=<span class="string">&quot;入职时间&quot;</span>)</span><br><span class="line">    <span class="comment"># 无约束</span></span><br><span class="line">    <span class="comment"># depart_id = models.BigIntegerField(verbose_name=&quot;部门ID&quot;)</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># 部门删除，部门id列置空</span></span><br><span class="line">    <span class="comment"># depart_id = models.ForeignKey(to=&quot;Department&quot;, to_fields=&quot;id&quot;,null=True, blank=True, on_delete=models.SET_NULL)</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># （对部门id进行约束） to 与那张表关联 to_fields 表中哪一列有关联, 级联删除此行</span></span><br><span class="line">    depart_id = models.ForeignKey(to=<span class="string">&quot;Department&quot;</span>, to_fields=<span class="string">&quot;id&quot;</span>, on_delete=models.CASCADE)</span><br><span class="line">    gender_choices = (</span><br><span class="line">        (<span class="number">1</span>, <span class="string">&quot;男&quot;</span>),</span><br><span class="line">        (<span class="number">2</span>, <span class="string">&quot;女&quot;</span>)</span><br><span class="line">    )</span><br><span class="line">    gender = models.SmallIntegerField(verbose_name=<span class="string">&quot;性别&quot;</span>,choices=gender_choices)</span><br></pre></td></tr></table></figure></li></ul><h3 id="在MySQL中生成表"><a href="#在MySQL中生成表" class="headerlink" title="在MySQL中生成表"></a>在MySQL中生成表</h3><ul><li>工具连接MySQL生成数据库<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> database djtest; </span><br></pre></td></tr></table></figure></li><li>修改<code>settings.py</code>数据库配置</li></ul><img src="/2022/09/19/%E5%9F%BA%E4%BA%8EDjango%E7%9A%84%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F/image-20230409203952477.png" class><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">DATABASES = &#123;</span><br><span class="line">    &#x27;default&#x27;: &#123;</span><br><span class="line">        &#x27;ENGINE&#x27;: &#x27;django.db.backends.mysql&#x27;,</span><br><span class="line">        &#x27;NAME&#x27;: &#x27;djtest&#x27;,</span><br><span class="line">        &#x27;USER&#x27;: &#x27;root&#x27;,</span><br><span class="line">        &#x27;PASSWORD&#x27;: &#x27;root&#x27;,</span><br><span class="line">        &#x27;HOST&#x27;: &#x27;127.0.0.1&#x27;,</span><br><span class="line">        &#x27;PORT&#x27;: 3306</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li><p>基于django命令生成数据库的表</p><ul><li>命令行执行</li></ul><img src="/2022/09/19/%E5%9F%BA%E4%BA%8EDjango%E7%9A%84%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F/image-20230409204018972.png" class></li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">python manage.py makemigrations</span><br><span class="line">python manage.py migrate</span><br></pre></td></tr></table></figure><p>​            manage.py中执行</p><img src="/2022/09/19/%E5%9F%BA%E4%BA%8EDjango%E7%9A%84%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F/image-20230409204104842.png" class><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">makemigrations</span><br><span class="line">migrate</span><br></pre></td></tr></table></figure><ul><li>进入数据库查看</li></ul><img src="/2022/09/19/%E5%9F%BA%E4%BA%8EDjango%E7%9A%84%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F/image-20230409204139303.png" class><h3 id="静态文件管理"><a href="#静态文件管理" class="headerlink" title="静态文件管理"></a>静态文件管理</h3><ul><li>放入文件</li></ul><img src="/2022/09/19/%E5%9F%BA%E4%BA%8EDjango%E7%9A%84%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F/image-20230409204156982.png" class><h3 id="列表页面布局"><a href="#列表页面布局" class="headerlink" title="列表页面布局"></a>列表页面布局</h3><ul><li><p><code>urls.py</code></p> <img src="/2022/09/19/%E5%9F%BA%E4%BA%8EDjango%E7%9A%84%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F/image-20230409204235873.png" class></li><li><p>```views.py``</p></li></ul><img src="/2022/09/19/%E5%9F%BA%E4%BA%8EDjango%E7%9A%84%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F/image-20230409204323421.png" class><ul><li><code>depart_list.html</code></li></ul><blockquote><p>略</p></blockquote><ul><li>页面效果</li></ul><img src="/2022/09/19/%E5%9F%BA%E4%BA%8EDjango%E7%9A%84%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F/image-20230409204425456.png" class><h4 id="从数据库获取数据"><a href="#从数据库获取数据" class="headerlink" title="从数据库获取数据"></a>从数据库获取数据</h4><img src="/2022/09/19/%E5%9F%BA%E4%BA%8EDjango%E7%9A%84%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F/image-20230409204452558.png" class><ul><li>如下（以下两个部门为数据库预先输入的）</li></ul><img src="/2022/09/19/%E5%9F%BA%E4%BA%8EDjango%E7%9A%84%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F/image-20230409204529416.png" class><h3 id="增删改页面布局设计"><a href="#增删改页面布局设计" class="headerlink" title="增删改页面布局设计"></a>增删改页面布局设计</h3><ul><li>修改<code>depart_list.html</code></li></ul><img src="/2022/09/19/%E5%9F%BA%E4%BA%8EDjango%E7%9A%84%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F/image-20230409204553542.png" class><ul><li>在<code>urls.py</code>中添加path和```views.py``中写入</li></ul><img src="/2022/09/19/%E5%9F%BA%E4%BA%8EDjango%E7%9A%84%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F/image-20230409204610368.png" class><ul><li><code>depart_add.html</code></li></ul><blockquote><p>略</p></blockquote><h4 id="添加部门"><a href="#添加部门" class="headerlink" title="添加部门"></a>添加部门</h4><img src="/2022/09/19/%E5%9F%BA%E4%BA%8EDjango%E7%9A%84%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F/image-20230409204641684.png" class><h4 id="删除部门"><a href="#删除部门" class="headerlink" title="删除部门"></a>删除部门</h4><img src="/2022/09/19/%E5%9F%BA%E4%BA%8EDjango%E7%9A%84%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F/image-20230409204657683.png" class><ul><li>列表页面删除按钮添加链接</li></ul><img src="/2022/09/19/%E5%9F%BA%E4%BA%8EDjango%E7%9A%84%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F/image-20230409204713096.png" class><h4 id="修改部门"><a href="#修改部门" class="headerlink" title="修改部门"></a>修改部门</h4><img src="/2022/09/19/%E5%9F%BA%E4%BA%8EDjango%E7%9A%84%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F/image-20230409204735174.png" class><img src="/2022/09/19/%E5%9F%BA%E4%BA%8EDjango%E7%9A%84%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F/image-20230409204807904.png" class><h3 id="模板的继承"><a href="#模板的继承" class="headerlink" title="模板的继承"></a>模板的继承</h3><ul><li>当我们每个页面都需要保留导航栏的时候，我们对每个HTML都写了一个导航栏，这样有些麻烦，修改时文件过多不易修改，因此我们可以选择模板。</li><li>模板的定义</li><li>将我们的插件写在模板中</li></ul><p><code>layout.html</code></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">href</span>=<span class="string">&quot;&#123;% static &#x27;plugins/bootstrap3/css/bootstrap.min.css&#x27; %&#125;&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span>标题<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">    &#123;% block content %&#125;&#123;% endblock %&#125;</span><br><span class="line">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span>结尾<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;&#123;% static &#x27;js/jquery-3.6.1.min.js&#x27; %&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;&#123;% static &#x27;plugins/bootstrap3/js/bootstrap.min.js&#x27; %&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li>继承模板</li></ul><blockquote><p>为了避免一个页面加载不必要的插件，可以多写几个模板，在需要的位置进行填充</p></blockquote><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;% extends &#x27;layoyt.html&#x27; %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% block content %&#125;</span><br><span class="line">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span>首页<span class="tag">&lt;<span class="name">h1</span>&gt;</span></span><br><span class="line">&#123;% endblock %&#125;</span><br></pre></td></tr></table></figure><h3 id="模板的继承-1"><a href="#模板的继承-1" class="headerlink" title="模板的继承"></a>模板的继承</h3><ul><li><p>当我们每个页面都需要保留导航栏的时候，我们对每个HTML都写了一个导航栏，这样白那些麻烦，修改时文件过多不易修改，因此我们可以选择模板。</p></li><li><p>模板的定义</p></li><li><p>将我们的插件写在模板中</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">href</span>=<span class="string">&quot;&#123;% static &#x27;plugins/bootstrap3/css/bootstrap.min.css&#x27; %&#125;&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span>标题<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">    &#123;% block content %&#125;&#123;% endblock %&#125;</span><br><span class="line">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span>结尾<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;&#123;% static &#x27;js/jquery-3.6.1.min.js&#x27; %&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;&#123;% static &#x27;plugins/bootstrap3/js/bootstrap.min.js&#x27; %&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>继承模板</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;% extends &#x27;layoyt.html&#x27; %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% block content %&#125;</span><br><span class="line">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span>首页<span class="tag">&lt;<span class="name">h1</span>&gt;</span></span><br><span class="line">&#123;% endblock %&#125;</span><br></pre></td></tr></table></figure></li><li><p>为了避免一个页面加载不必要的插件，可以多写几个模板，在需要的位置进行填充</p></li></ul><h3 id="案例：员工管理系统（部门管理）优化"><a href="#案例：员工管理系统（部门管理）优化" class="headerlink" title="案例：员工管理系统（部门管理）优化"></a>案例：员工管理系统（部门管理）优化</h3><p>将导航部分写入模板，列表，添加，编辑页面进行集成</p><ul><li><p><code>layoyt.html</code></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line">&#123;% load static %&#125;</span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">href</span>=<span class="string">&quot;&#123;% static &#x27;plugins/bootstrap3/css/bootstrap.min.css&#x27; %&#125;&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.navbar</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">border-radius</span>: <span class="number">0px</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">    </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">nav</span> <span class="attr">class</span>=<span class="string">&quot;navbar navbar-default&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;container-fluid&quot;</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- Brand and toggle get grouped for better mobile display --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;navbar-header&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">class</span>=<span class="string">&quot;navbar-toggle collapsed&quot;</span> <span class="attr">data-toggle</span>=<span class="string">&quot;collapse&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">data-target</span>=<span class="string">&quot;#bs-example-navbar-collapse-1&quot;</span> <span class="attr">aria-expanded</span>=<span class="string">&quot;false&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;sr-only&quot;</span>&gt;</span>Toggle navigation<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;icon-bar&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;icon-bar&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;icon-bar&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">&quot;navbar-brand&quot;</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>用户管理系统<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;collapse navbar-collapse&quot;</span> <span class="attr">id</span>=<span class="string">&quot;bs-example-navbar-collapse-1&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">ul</span> <span class="attr">class</span>=<span class="string">&quot;nav navbar-nav&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;/depart/list/&quot;</span>&gt;</span>部门管理<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>用户管理<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"></span><br><span class="line">            <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">ul</span> <span class="attr">class</span>=<span class="string">&quot;nav navbar-nav navbar-right&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>登录<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"></span><br><span class="line">                <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">&quot;dropdown&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span> <span class="attr">class</span>=<span class="string">&quot;dropdown-toggle&quot;</span> <span class="attr">data-toggle</span>=<span class="string">&quot;dropdown&quot;</span> <span class="attr">role</span>=<span class="string">&quot;button&quot;</span> <span class="attr">aria-haspopup</span>=<span class="string">&quot;true&quot;</span></span></span><br><span class="line"><span class="tag">                       <span class="attr">aria-expanded</span>=<span class="string">&quot;false&quot;</span>&gt;</span>我的 <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;caret&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">ul</span> <span class="attr">class</span>=<span class="string">&quot;dropdown-menu&quot;</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>个人资料<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>我的信息<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">li</span> <span class="attr">role</span>=<span class="string">&quot;separator&quot;</span> <span class="attr">class</span>=<span class="string">&quot;divider&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>注销<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">nav</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    &#123;% block content %&#125;&#123;% endblock %&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;&#123;% static &#x27;js/jquery-3.6.1.min.js&#x27; %&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;&#123;% static &#x27;plugins/bootstrap3/js/bootstrap.min.js&#x27; %&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p><code>depart_list.html</code></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line">&#123;% extends &#x27;layoyt.html&#x27; %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% block content %&#125;</span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;container&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;margin-bottom: 10px&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">&quot;btn btn-success&quot;</span> <span class="attr">href</span>=<span class="string">&quot;/depart/add/&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;glyphicon glyphicon-plus-sign&quot;</span> <span class="attr">aria-hidden</span>=<span class="string">&quot;true&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">                新建部门</span><br><span class="line">            <span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;panel panel-default&quot;</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- Default panel contents --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;panel-heading&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;glyphicon glyphicon-th-list&quot;</span> <span class="attr">aria-hidden</span>=<span class="string">&quot;true&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">                部门列表</span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">            <span class="comment">&lt;!-- Table --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">table</span> <span class="attr">class</span>=<span class="string">&quot;table table-bordered&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">thead</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">th</span>&gt;</span>ID<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">th</span>&gt;</span>名称<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">th</span>&gt;</span>操作<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">thead</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">tbody</span>&gt;</span></span><br><span class="line">                &#123;% for obj in querysite %&#125;</span><br><span class="line">                <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">th</span>&gt;</span>&#123;&#123; obj.id &#125;&#125;<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">td</span>&gt;</span>&#123;&#123; obj.title &#125;&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">td</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">&quot;btn btn-primary btn-xs&quot;</span> <span class="attr">href</span>=<span class="string">&quot;/depart/&#123;&#123; obj.id &#125;&#125;/edit/&quot;</span>&gt;</span>编辑<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">&quot;btn btn-danger btn-xs&quot;</span> <span class="attr">href</span>=<span class="string">&quot;/depart/delete/?nid=&#123;&#123; obj.id &#125;&#125;&quot;</span>&gt;</span>删除<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">                &#123;% endfor %&#125;</span><br><span class="line">                <span class="tag">&lt;/<span class="name">tbody</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">&#123;% endblock %&#125;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure></li><li><p><code>depart_add.html</code></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">&#123;% extends &#x27;layoyt.html&#x27; %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% block content %&#125;</span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;container&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;panel panel-default&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;panel-heading&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">h3</span> <span class="attr">class</span>=<span class="string">&quot;panel-title&quot;</span>&gt;</span>新建部门<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;panel-body&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">form</span> <span class="attr">method</span>=<span class="string">&quot;post&quot;</span>&gt;</span></span><br><span class="line">                    &#123;% csrf_token %&#125;</span><br><span class="line">                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;form-group&quot;</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">label</span>&gt;</span>标题<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">class</span>=<span class="string">&quot;form-control&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;标题&quot;</span> <span class="attr">name</span>=<span class="string">&quot;title&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">class</span>=<span class="string">&quot;btn btn-primary&quot;</span>&gt;</span>提 交<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">&#123;% endblock %&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure></li><li><p><code>depart_edit.html</code></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">&#123;% extends &#x27;layoyt.html&#x27; %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% block content %&#125;</span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;container&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;panel panel-default&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;panel-heading&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">h3</span> <span class="attr">class</span>=<span class="string">&quot;panel-title&quot;</span>&gt;</span>修改部门<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;panel-body&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">form</span> <span class="attr">method</span>=<span class="string">&quot;post&quot;</span>&gt;</span></span><br><span class="line">                    &#123;% csrf_token %&#125;</span><br><span class="line">                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;form-group&quot;</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">label</span>&gt;</span>标题<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">class</span>=<span class="string">&quot;form-control&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;标题&quot;</span> <span class="attr">name</span>=<span class="string">&quot;title&quot;</span> <span class="attr">value</span>=<span class="string">&quot;&#123;&#123; row_object.title &#125;&#125;&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">class</span>=<span class="string">&quot;btn btn-primary&quot;</span>&gt;</span>提 交<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">&#123;% endblock %&#125;</span><br></pre></td></tr></table></figure></li></ul><h2 id="用户管理"><a href="#用户管理" class="headerlink" title="用户管理"></a>用户管理</h2><ul><li>先手动输入一些数据<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span>  app01_userinfo(</span><br><span class="line">name,password,age,account,create_time,gender,depart_id) </span><br><span class="line"><span class="keyword">values</span>(&quot;zhang&quot;,&quot;123&quot;,<span class="number">20</span>,<span class="number">10000000</span>,&quot;2022-9-1&quot;,<span class="number">1</span>,<span class="number">1</span>);</span><br></pre></td></tr></table></figure></li></ul><h3 id="添加用户"><a href="#添加用户" class="headerlink" title="添加用户"></a>添加用户</h3><h4 id="原始方法"><a href="#原始方法" class="headerlink" title="原始方法"></a>原始方法</h4><blockquote><p>问题：<br>1.用户提交数据没有校验<br>2.页面输入错误应该有提示<br>3.错误后，页面每一个数据都需要重新写<br>4.关联的数据需要手动获取循环展示到页面</p></blockquote><img src="/2022/09/19/%E5%9F%BA%E4%BA%8EDjango%E7%9A%84%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F/image-20230409205253106.png" class><img src="/2022/09/19/%E5%9F%BA%E4%BA%8EDjango%E7%9A%84%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F/image-20230409205424817.png" class><ul><li>Django组件<ul><li>Form组件<br>可以帮助我们解决前三个问题</li><li>ModelForm组件 </li></ul></li></ul><h4 id="初识Form"><a href="#初识Form" class="headerlink" title="初识Form"></a>初识Form</h4><ol><li>view.py</li></ol><ul><li>自动生成input框<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">MyForm</span>(<span class="title class_ inherited__">Form</span>):</span><br><span class="line">user = forms.CharFiled(widght=forms.Input)</span><br><span class="line">pwd = forms.CharFiled(widght=forms.Input)</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">user_add</span>(<span class="params">request</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;添加用户(原始方法)&quot;&quot;&quot;</span></span><br><span class="line">    <span class="keyword">if</span> request.method == <span class="string">&quot;GET&quot;</span>:</span><br><span class="line">        <span class="keyword">return</span> render(request, <span class="string">&#x27;user_add.html&#x27;</span>,&#123;<span class="string">&quot;form&quot;</span>:form&#125;)</span><br></pre></td></tr></table></figure></li></ul><ol start="3"><li>user_add.html</li></ol><ul><li>循环写<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">method</span>=<span class="string">&quot;post&quot;</span>&gt;</span></span><br><span class="line">&#123;% for field in form %&#125;</span><br><span class="line">&#123;&#123; field &#125;&#125;</span><br><span class="line">&#123;% endfor %&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li>逐一写<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">method</span>=<span class="string">&quot;post&quot;</span>&gt;</span></span><br><span class="line">&#123;&#123; form.user &#125;&#125;</span><br><span class="line">&#123;&#123; form.pwd &#125;&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br></pre></td></tr></table></figure></li></ul><h4 id="ModelForm-推荐"><a href="#ModelForm-推荐" class="headerlink" title="ModelForm(推荐)"></a>ModelForm(推荐)</h4><ol><li>models.py<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">UserInfo</span>(models.Model):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;员工表&quot;&quot;&quot;</span></span><br><span class="line">    name = models.CharField(verbose_name=<span class="string">&quot;姓名&quot;</span>, max_length=<span class="number">16</span>)</span><br><span class="line">    password = models.CharField(verbose_name=<span class="string">&quot;密码&quot;</span>, max_length=<span class="number">64</span>)</span><br><span class="line">    age = models.IntegerField(verbose_name=<span class="string">&quot;年龄&quot;</span>)</span><br><span class="line">    account = models.DecimalField(verbose_name=<span class="string">&quot;账户余额&quot;</span>, max_digits=<span class="number">10</span>, decimal_places=<span class="number">2</span>, default=<span class="number">0</span>)</span><br><span class="line">    create_time = models.DateTimeField(verbose_name=<span class="string">&quot;入职时间&quot;</span>)</span><br><span class="line">    depart = models.ForeignKey(to=<span class="string">&quot;Department&quot;</span>, to_field=<span class="string">&quot;id&quot;</span>, on_delete=models.CASCADE)</span><br><span class="line">    gender_choices = (</span><br><span class="line">        (<span class="number">1</span>, <span class="string">&quot;男&quot;</span>),</span><br><span class="line">        (<span class="number">2</span>, <span class="string">&quot;女&quot;</span>)</span><br><span class="line">    )</span><br><span class="line">    gender = models.SmallIntegerField(verbose_name=<span class="string">&quot;性别&quot;</span>, choices=gender_choices)</span><br></pre></td></tr></table></figure></li><li>view.py</li></ol><ul><li><p>自动生成input框(可以自定义，也可以直接去拿)</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">MyForm</span>(<span class="title class_ inherited__">ModelForm</span>):</span><br><span class="line">user = forms.CharFiled(widght=forms.Input)</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Mete</span>:</span><br><span class="line">model = UserInfo</span><br><span class="line">field = [<span class="string">&quot;name&quot;</span>,<span class="string">&quot;user&quot;</span>,<span class="string">&quot;password&quot;</span>,<span class="string">&quot;age&quot;</span>]</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">user_add</span>(<span class="params">request</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;添加用户(原始方法)&quot;&quot;&quot;</span></span><br><span class="line">    <span class="keyword">if</span> request.method == <span class="string">&quot;GET&quot;</span>:</span><br><span class="line">        <span class="keyword">return</span> render(request, <span class="string">&#x27;user_add.html&#x27;</span>,&#123;<span class="string">&quot;form&quot;</span>:form&#125;)</span><br></pre></td></tr></table></figure></li><li><p>设置settings.py 将默认文字为中文</p></li></ul><img src="/2022/09/19/%E5%9F%BA%E4%BA%8EDjango%E7%9A%84%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F/image-20230409205630144.png" class><h4 id="员工管理系统（用户管理）"><a href="#员工管理系统（用户管理）" class="headerlink" title="员工管理系统（用户管理）"></a>员工管理系统（用户管理）</h4><ul><li><code>user_model_form_add.html</code></li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">&#123;% extends &#x27;layoyt.html&#x27; %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% block content %&#125;</span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;container&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;panel panel-default&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;panel-heading&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">h3</span> <span class="attr">class</span>=<span class="string">&quot;panel-title&quot;</span>&gt;</span>新建用户<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;panel-body&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">form</span> <span class="attr">method</span>=<span class="string">&quot;post&quot;</span> <span class="attr">novalidate</span>&gt;</span></span><br><span class="line">                    &#123;% csrf_token %&#125;</span><br><span class="line"></span><br><span class="line">                    &#123;% for field in form %&#125;</span><br><span class="line">                        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;form-group&quot;</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">label</span>&gt;</span>&#123;&#123; field.label &#125;&#125;<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">                        &#123;&#123; field &#125;&#125;</span><br><span class="line">                            <span class="tag">&lt;<span class="name">span</span> <span class="attr">style</span>=<span class="string">&quot;color: red&quot;</span>&gt;</span></span><br><span class="line">                                &#123;&#123; field.errors.0 &#125;&#125;</span><br><span class="line">                            <span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                    &#123;% endfor %&#125;</span><br><span class="line"></span><br><span class="line">                    <span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">class</span>=<span class="string">&quot;btn btn-primary&quot;</span>&gt;</span>提 交<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">&#123;% endblock %&#125;</span><br></pre></td></tr></table></figure><ul><li><code>views.py</code><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">user_model_form_add</span>(<span class="params">request</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;基于modelform的添加用户&quot;&quot;&quot;</span></span><br><span class="line">    <span class="keyword">if</span> request.method == <span class="string">&quot;GET&quot;</span>:</span><br><span class="line">        form = UserModelForm</span><br><span class="line">        <span class="keyword">return</span> render(request,<span class="string">&#x27;user_model_form_add.html&#x27;</span>, &#123;<span class="string">&quot;form&quot;</span>: form&#125;)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 用户POST提交数据，数据校验</span></span><br><span class="line">    form = UserModelForm(data=request.POST)</span><br><span class="line">    <span class="keyword">if</span> form.is_valid():</span><br><span class="line">        <span class="comment"># 数据合法，保存到数据库</span></span><br><span class="line">        <span class="comment"># models.UserInfo.objects.create()</span></span><br><span class="line">        form.save()</span><br><span class="line">        <span class="keyword">return</span> redirect(<span class="string">&quot;/user/list/&quot;</span>)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="keyword">return</span> render(request,<span class="string">&#x27;user_model_form_add.html&#x27;</span>, &#123;<span class="string">&quot;form&quot;</span>: form&#125;)</span><br></pre></td></tr></table></figure><h4 id="补充编辑删除以后的代码"><a href="#补充编辑删除以后的代码" class="headerlink" title="补充编辑删除以后的代码"></a>补充编辑删除以后的代码</h4></li><li>编辑用户<ul><li>点击编辑，跳转到编辑页面（将编辑行的id携带过去）</li><li>错误校验</li><li>数据库更新</li></ul></li><li>删除用户</li></ul><ol><li><code>views.py</code></li></ol><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">user_edit</span>(<span class="params">request, nid</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;编辑页面&quot;&quot;&quot;</span></span><br><span class="line">    <span class="keyword">if</span> request.method == <span class="string">&quot;GET&quot;</span>:</span><br><span class="line">        <span class="comment"># 根据id获取要编辑的那一行数据</span></span><br><span class="line">        row_object = models.UserInfo.objects.<span class="built_in">filter</span>(<span class="built_in">id</span>=nid).first()</span><br><span class="line">        form = UserModelForm(instance=row_object)</span><br><span class="line">        <span class="keyword">return</span> render(request, <span class="string">&#x27;user_edit.html&#x27;</span>, &#123;<span class="string">&#x27;form&#x27;</span>:form&#125;)</span><br><span class="line"></span><br><span class="line">    row_object = models.UserInfo.objects.<span class="built_in">filter</span>(<span class="built_in">id</span>=nid).first()</span><br><span class="line">    form = UserModelForm(data=request.POST, instance=row_object)</span><br><span class="line">    <span class="keyword">if</span> form.is_valid():</span><br><span class="line">        <span class="comment"># 默认保存的是用户输入的数据</span></span><br><span class="line">        form.save()</span><br><span class="line">        <span class="keyword">return</span> redirect(<span class="string">&#x27;/user/list/&#x27;</span>)</span><br><span class="line">    <span class="keyword">return</span> render(request, <span class="string">&#x27;user_edit.html&#x27;</span>, &#123;<span class="string">&quot;form&quot;</span>: form&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">user_delete</span>(<span class="params">request, nid</span>):</span><br><span class="line">    models.UserInfo.objects.<span class="built_in">filter</span>(<span class="built_in">id</span>=nid).first().delete()</span><br><span class="line">    <span class="keyword">return</span> redirect(<span class="string">&#x27;/user/list&#x27;</span>)</span><br></pre></td></tr></table></figure><ol start="2"><li><p><code>user_model_form_edit.html</code></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">&#123;% extends &#x27;layoyt.html&#x27; %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% block content %&#125;</span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;container&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;panel panel-default&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;panel-heading&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">h3</span> <span class="attr">class</span>=<span class="string">&quot;panel-title&quot;</span>&gt;</span>编辑用户<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;panel-body&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">form</span> <span class="attr">method</span>=<span class="string">&quot;post&quot;</span> <span class="attr">novalidate</span>&gt;</span></span><br><span class="line">                    &#123;% csrf_token %&#125;</span><br><span class="line"></span><br><span class="line">                    &#123;% for field in form %&#125;</span><br><span class="line">                        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;form-group&quot;</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">label</span>&gt;</span>&#123;&#123; field.label &#125;&#125;<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">                        &#123;&#123; field &#125;&#125;</span><br><span class="line">                            <span class="tag">&lt;<span class="name">span</span> <span class="attr">style</span>=<span class="string">&quot;color: red&quot;</span>&gt;</span></span><br><span class="line">                                &#123;&#123; field.errors.0 &#125;&#125;</span><br><span class="line">                            <span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                    &#123;% endfor %&#125;</span><br><span class="line"></span><br><span class="line">                    <span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">class</span>=<span class="string">&quot;btn btn-primary&quot;</span>&gt;</span>提 交<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">&#123;% endblock %&#125;</span><br></pre></td></tr></table></figure></li><li><p>其它修改</p></li></ol><img src="/2022/09/19/%E5%9F%BA%E4%BA%8EDjango%E7%9A%84%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F/image-20230409205927754.png" class><h2 id="号码管理"><a href="#号码管理" class="headerlink" title="号码管理"></a>号码管理</h2><h3 id="表结构"><a href="#表结构" class="headerlink" title="表结构"></a>表结构</h3><ul><li>设计表<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">PrettyNum</span>(models.Model):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;靓号表&quot;&quot;&quot;</span></span><br><span class="line">    mobile = models.CharField(verbose_name=<span class="string">&quot;手机号&quot;</span>, max_length=<span class="number">11</span>)</span><br><span class="line">    price = models.IntegerField(verbose_name=<span class="string">&quot;价格&quot;</span>, default=<span class="number">0</span>)</span><br><span class="line">    </span><br><span class="line">    level_choices = (</span><br><span class="line">        (<span class="number">1</span>, <span class="string">&quot;1级&quot;</span>),</span><br><span class="line">        (<span class="number">2</span>, <span class="string">&quot;2级&quot;</span>),</span><br><span class="line">        (<span class="number">3</span>, <span class="string">&quot;3级&quot;</span>),</span><br><span class="line">        (<span class="number">4</span>, <span class="string">&quot;4级&quot;</span>),</span><br><span class="line">    )</span><br><span class="line">    level = models.SmallIntegerField(verbose_name=<span class="string">&quot;级别&quot;</span>, choices=level_choices, default=<span class="number">1</span>)</span><br><span class="line">    </span><br><span class="line">    status_choices = (</span><br><span class="line">        (<span class="number">1</span>, <span class="string">&quot;已占用&quot;</span>),</span><br><span class="line">        (<span class="number">2</span>, <span class="string">&quot;未使用&quot;</span>),</span><br><span class="line">    )</span><br><span class="line">    status = models.SmallIntegerField(verbose_name=<span class="string">&quot;状态&quot;</span>, choices=status_choices, default=<span class="number">2</span>)</span><br></pre></td></tr></table></figure></li><li>命令创建表</li></ul><h3 id="号码列表"><a href="#号码列表" class="headerlink" title="号码列表"></a>号码列表</h3><ul><li>URL</li><li>函数<ul><li>获取所有的靓号</li><li>结合HTML+render将靓号罗列出来 </li></ul></li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">pretty_list</span>(<span class="params">request</span>):</span><br><span class="line">    queryset = models.PrettyNum.objects.<span class="built_in">all</span>().order_by(<span class="string">&quot;-level&quot;</span>)</span><br><span class="line">    <span class="keyword">return</span> render(request, <span class="string">&#x27;pretty_list.html&#x27;</span>, &#123;<span class="string">&quot;queryset&quot;</span>: queryset&#125;)</span><br></pre></td></tr></table></figure><ul><li><code>pretty_list.html</code><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line">&#123;% extends &#x27;layoyt.html&#x27; %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% block content %&#125;</span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;container&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;margin-bottom: 10px&quot;</span> <span class="attr">class</span>=<span class="string">&quot;clearfix&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">&quot;btn btn-success&quot;</span> <span class="attr">href</span>=<span class="string">&quot;/pretty/add/&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;glyphicon glyphicon-plus-sign&quot;</span> <span class="attr">aria-hidden</span>=<span class="string">&quot;true&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">                新建靓号</span><br><span class="line">            <span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;float: right; width: 300px;&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">form</span> <span class="attr">method</span>=<span class="string">&quot;get&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;input-group&quot;</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;q&quot;</span> <span class="attr">class</span>=<span class="string">&quot;form-control&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;Search for...&quot;</span></span></span><br><span class="line"><span class="tag">                               <span class="attr">value</span>=<span class="string">&quot;&#123;&#123; search_data &#125;&#125;&quot;</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;input-group-btn&quot;</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">button</span> <span class="attr">class</span>=<span class="string">&quot;btn btn-default&quot;</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;glyphicon glyphicon-search&quot;</span> <span class="attr">aria-hidden</span>=<span class="string">&quot;true&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">div</span>&gt;</span><span class="comment">&lt;!-- /input-group --&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;panel panel-default&quot;</span>&gt;</span></span><br><span class="line">                <span class="comment">&lt;!-- Default panel contents --&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;panel-heading&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;glyphicon glyphicon-th-list&quot;</span> <span class="attr">aria-hidden</span>=<span class="string">&quot;true&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">                    用户列表</span><br><span class="line">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">                <span class="comment">&lt;!-- Table --&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">table</span> <span class="attr">class</span>=<span class="string">&quot;table table-bordered&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">thead</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">th</span>&gt;</span>ID<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">th</span>&gt;</span>号码<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">th</span>&gt;</span>价格<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">th</span>&gt;</span>级别<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">th</span>&gt;</span>状态<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">thead</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">tbody</span>&gt;</span></span><br><span class="line">                    &#123;% for obj in queryset %&#125;</span><br><span class="line">                        <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">th</span>&gt;</span>&#123;&#123; obj.id &#125;&#125;<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">td</span>&gt;</span>&#123;&#123; obj.mobile &#125;&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">td</span>&gt;</span>&#123;&#123; obj.price &#125;&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">td</span>&gt;</span>&#123;&#123; obj.get_level_display &#125;&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">td</span>&gt;</span>&#123;&#123; obj.get_status_display &#125;&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">td</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">&quot;btn btn-primary btn-xs&quot;</span> <span class="attr">href</span>=<span class="string">&quot;/pretty/&#123;&#123; obj.id &#125;&#125;/edit/&quot;</span>&gt;</span>编辑<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">&quot;btn btn-danger btn-xs&quot;</span> <span class="attr">href</span>=<span class="string">&quot;/pretty/&#123;&#123; obj.id &#125;&#125;/delete/&quot;</span>&gt;</span>删除<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">                    &#123;% endfor %&#125;</span><br><span class="line">                    <span class="tag">&lt;/<span class="name">tbody</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">&#123;% endblock %&#125;</span><br></pre></td></tr></table></figure></li></ul><h3 id="新建号码"><a href="#新建号码" class="headerlink" title="新建号码"></a>新建号码</h3><ul><li>列表页面点击跳转：/pretty/add/</li><li>URL</li><li>函数</li><li>ModelForm的类</li><li>函数    <ul><li>实例化类的对象</li><li>通过render将对象传入HTML中</li><li>模板的循环展示所有的字段  </li></ul></li><li>点击提交<ul><li>数据校验</li><li>保存到数据库<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">PrettyModelForm</span>(forms.ModelForm):</span><br><span class="line">    <span class="comment"># 验证：方式一</span></span><br><span class="line">    <span class="comment"># 通过正则表达式规范校验手机号码</span></span><br><span class="line">    mobile = forms.CharField(</span><br><span class="line">        label=<span class="string">&quot;手机号&quot;</span>,</span><br><span class="line">        validators=[RegexValidator(<span class="string">r&#x27;^1\d&#123;8&#125;&#x27;</span>, <span class="string">&quot;号码格式错误&quot;</span>)]</span><br><span class="line">    )</span><br><span class="line"></span><br><span class="line">    <span class="keyword">class</span> <span class="title class_">Meta</span>:</span><br><span class="line">        model = models.PrettyNum</span><br><span class="line">        <span class="comment"># fields = &quot;__all__&quot;</span></span><br><span class="line">        fields = [<span class="string">&quot;mobile&quot;</span>, <span class="string">&quot;price&quot;</span>, <span class="string">&quot;level&quot;</span>, <span class="string">&quot;status&quot;</span>]</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, *args, **kwargs</span>):</span><br><span class="line">        <span class="built_in">super</span>().__init__(*args, **kwargs)</span><br><span class="line">        <span class="keyword">for</span> name, field <span class="keyword">in</span> self.fields.items():</span><br><span class="line">            field.widget.attrs = &#123;<span class="string">&quot;class&quot;</span>: <span class="string">&quot;form-control&quot;</span>&#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 验证：方式二</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">clean_mobile</span>(<span class="params">self</span>):</span><br><span class="line">        txt_mobile = self.cleaned_data[<span class="string">&quot;mobile&quot;</span>]</span><br><span class="line"></span><br><span class="line">        exits = models.PrettyNum.objects.<span class="built_in">filter</span>(mobile=txt_mobile).exists()</span><br><span class="line">        <span class="keyword">if</span> exits:</span><br><span class="line">            <span class="keyword">raise</span> ValidationError(<span class="string">&quot;手机号已存在&quot;</span>)</span><br><span class="line">        <span class="keyword">return</span> txt_mobile</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">pretty_add</span>(<span class="params">request</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;添加靓号&quot;&quot;&quot;</span></span><br><span class="line">    <span class="keyword">if</span> request.method == <span class="string">&quot;GET&quot;</span>:</span><br><span class="line">        form = PrettyModelForm()</span><br><span class="line">        <span class="keyword">return</span> render(request, <span class="string">&#x27;pretty_add.html&#x27;</span>, &#123;<span class="string">&quot;form&quot;</span>: form&#125;)</span><br><span class="line">    form = PrettyModelForm(data=request.POST)</span><br><span class="line">    <span class="keyword">if</span> form.is_valid():</span><br><span class="line">        form.save()</span><br><span class="line">        <span class="keyword">return</span> redirect(<span class="string">&quot;/pretty/list/&quot;</span>)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="keyword">return</span> render(request, <span class="string">&#x27;pretty_add.html&#x27;</span>, &#123;<span class="string">&quot;form&quot;</span>: form&#125;)</span><br></pre></td></tr></table></figure></li></ul></li><li><code>pretty_add.html</code><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">&#123;% extends &#x27;layoyt.html&#x27; %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% block content %&#125;</span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;container&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;panel panel-default&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;panel-heading&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">h3</span> <span class="attr">class</span>=<span class="string">&quot;panel-title&quot;</span>&gt;</span>新建靓号<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;panel-body&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">form</span> <span class="attr">method</span>=<span class="string">&quot;post&quot;</span> <span class="attr">novalidate</span>&gt;</span></span><br><span class="line">                    &#123;% csrf_token %&#125;</span><br><span class="line"></span><br><span class="line">                    &#123;% for field in form %&#125;</span><br><span class="line">                        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;form-group&quot;</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">label</span>&gt;</span>&#123;&#123; field.label &#125;&#125;<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">                        &#123;&#123; field &#125;&#125;</span><br><span class="line">                            <span class="tag">&lt;<span class="name">span</span> <span class="attr">style</span>=<span class="string">&quot;color: red&quot;</span>&gt;</span></span><br><span class="line">                                &#123;&#123; field.errors.0 &#125;&#125;</span><br><span class="line">                            <span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                    &#123;% endfor %&#125;</span><br><span class="line"></span><br><span class="line">                    <span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">class</span>=<span class="string">&quot;btn btn-primary&quot;</span>&gt;</span>提 交<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">&#123;% endblock %&#125;</span><br></pre></td></tr></table></figure><h3 id="编辑号码"><a href="#编辑号码" class="headerlink" title="编辑号码"></a>编辑号码</h3></li><li>列表页面点击跳转：/pretty/edit/</li><li>URL</li><li>函数<ul><li>根据id获取当前编辑的对象</li><li>ModelForm配合，默认显示数据</li><li>提交修改</li></ul></li></ul><p>不允许靓号重复</p><ul><li>添加（正则表达式）</li><li>编辑（正则表达式）</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">PrettyEditModelForm</span>(forms.ModelForm):</span><br><span class="line">    <span class="comment"># mobile = forms.CharField(disabled=True,label=&quot;手机号&quot;)</span></span><br><span class="line">    <span class="keyword">class</span> <span class="title class_">Meta</span>:</span><br><span class="line">        model = models.PrettyNum</span><br><span class="line">        <span class="comment"># fields = &quot;__all__&quot;</span></span><br><span class="line">        fields = [<span class="string">&quot;mobile&quot;</span>, <span class="string">&quot;price&quot;</span>, <span class="string">&quot;level&quot;</span>, <span class="string">&quot;status&quot;</span>]</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, *args, **kwargs</span>):</span><br><span class="line">        <span class="built_in">super</span>().__init__(*args, **kwargs)</span><br><span class="line">        <span class="keyword">for</span> name, field <span class="keyword">in</span> self.fields.items():</span><br><span class="line">            field.widget.attrs = &#123;<span class="string">&quot;class&quot;</span>: <span class="string">&quot;form-control&quot;</span>&#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">clean_mobile</span>(<span class="params">self</span>):</span><br><span class="line">        txt_mobile = self.cleaned_data[<span class="string">&quot;mobile&quot;</span>]</span><br><span class="line"></span><br><span class="line">        exits = models.PrettyNum.objects.exclude(<span class="built_in">id</span>=self.instance.pk).<span class="built_in">filter</span>(mobile=txt_mobile).exists()</span><br><span class="line">        <span class="keyword">if</span> exits:</span><br><span class="line">            <span class="keyword">raise</span> ValidationError(<span class="string">&quot;手机号已存在&quot;</span>)</span><br><span class="line">        <span class="keyword">return</span> txt_mobile</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">pretty_edit</span>(<span class="params">request, nid</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;编辑靓号&quot;&quot;&quot;</span></span><br><span class="line">    row_object = models.PrettyNum.objects.<span class="built_in">filter</span>(<span class="built_in">id</span>=nid).first()</span><br><span class="line">    <span class="keyword">if</span> request.method == <span class="string">&quot;GET&quot;</span>:</span><br><span class="line">        form = PrettyEditModelForm(instance=row_object)</span><br><span class="line">        <span class="keyword">return</span> render(request, <span class="string">&#x27;pretty_edit.html&#x27;</span>, &#123;<span class="string">&quot;form&quot;</span>: form&#125;)</span><br><span class="line">    form = PrettyEditModelForm(instance=row_object, data=request.POST)</span><br><span class="line">    <span class="keyword">if</span> form.is_valid():</span><br><span class="line">        form.save()</span><br><span class="line">        <span class="keyword">return</span> redirect(<span class="string">&quot;/pretty/list/&quot;</span>)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="keyword">return</span> render(request, <span class="string">&#x27;pretty_edit.html&#x27;</span>, &#123;<span class="string">&quot;form&quot;</span>: form&#125;)</span><br></pre></td></tr></table></figure><ul><li><code>pretty_edit.html</code><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">&#123;% extends &#x27;layoyt.html&#x27; %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% block content %&#125;</span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;container&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;panel panel-default&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;panel-heading&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">h3</span> <span class="attr">class</span>=<span class="string">&quot;panel-title&quot;</span>&gt;</span>编辑靓号<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;panel-body&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">form</span> <span class="attr">method</span>=<span class="string">&quot;post&quot;</span> <span class="attr">novalidate</span>&gt;</span></span><br><span class="line">                    &#123;% csrf_token %&#125;</span><br><span class="line"></span><br><span class="line">                    &#123;% for field in form %&#125;</span><br><span class="line">                        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;form-group&quot;</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">label</span>&gt;</span>&#123;&#123; field.label &#125;&#125;<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">                        &#123;&#123; field &#125;&#125;</span><br><span class="line">                            <span class="tag">&lt;<span class="name">span</span> <span class="attr">style</span>=<span class="string">&quot;color: red&quot;</span>&gt;</span></span><br><span class="line">                                &#123;&#123; field.errors.0 &#125;&#125;</span><br><span class="line">                            <span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                    &#123;% endfor %&#125;</span><br><span class="line"></span><br><span class="line">                    <span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">class</span>=<span class="string">&quot;btn btn-primary&quot;</span>&gt;</span>提 交<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">&#123;% endblock %&#125;</span><br></pre></td></tr></table></figure><h3 id="删除号码"><a href="#删除号码" class="headerlink" title="删除号码"></a>删除号码</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">pretty_delete</span>(<span class="params">request, nid</span>):</span><br><span class="line">    models.PrettyNum.objects.<span class="built_in">filter</span>(<span class="built_in">id</span>=nid).delete()</span><br><span class="line">    <span class="keyword">return</span> redirect(<span class="string">&#x27;/pretty/list&#x27;</span>)</span><br></pre></td></tr></table></figure></li></ul><h2 id="分页和分页组件"><a href="#分页和分页组件" class="headerlink" title="分页和分页组件"></a>分页和分页组件</h2><h3 id="分页-一般写法"><a href="#分页-一般写法" class="headerlink" title="分页(一般写法)"></a>分页(一般写法)</h3><ul><li><p><code>views.py</code></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">pretty_list</span>(<span class="params">request</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;靓号列表&quot;&quot;&quot;</span></span><br><span class="line">    data_dict = &#123;&#125;</span><br><span class="line">    search_data = request.GET.get(<span class="string">&#x27;q&#x27;</span>, <span class="string">&quot;&quot;</span>)</span><br><span class="line">    <span class="keyword">if</span> search_data:</span><br><span class="line">        data_dict[<span class="string">&#x27;mobile__contains&#x27;</span>] = search_data</span><br><span class="line"></span><br><span class="line">    page = <span class="built_in">int</span>(request.GET.get(<span class="string">&#x27;page&#x27;</span>, <span class="number">1</span>))</span><br><span class="line">    page_size = <span class="number">10</span></span><br><span class="line">    start = (page - <span class="number">1</span>) * page_size</span><br><span class="line">    end = page * page_size</span><br><span class="line">    <span class="comment"># 数据总条数</span></span><br><span class="line">    total_count = models.PrettyNum.objects.<span class="built_in">filter</span>(**data_dict).order_by(<span class="string">&quot;-level&quot;</span>).count()</span><br><span class="line">    queryset = models.PrettyNum.objects.<span class="built_in">filter</span>(**data_dict).order_by(<span class="string">&quot;-level&quot;</span>)[start:end]</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 总页码</span></span><br><span class="line">    total_page_count, div = <span class="built_in">divmod</span>(total_count, page_size)</span><br><span class="line">    <span class="keyword">if</span> div:</span><br><span class="line">        total_page_count += <span class="number">1</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># 计算出当前页得到前五页和后五页</span></span><br><span class="line">    plus = <span class="number">5</span></span><br><span class="line">    <span class="keyword">if</span> total_page_count &lt;= <span class="number">2</span> * plus + <span class="number">1</span>:</span><br><span class="line">        start_page = <span class="number">1</span></span><br><span class="line">        end_page = total_page_count + <span class="number">1</span></span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="comment"># 数据库数据比较多 &gt; 11 页</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> page &lt;= plus:</span><br><span class="line">            start_page = <span class="number">1</span></span><br><span class="line">            end_page = <span class="number">2</span> * plus + <span class="number">1</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="keyword">if</span> (page + plus) &gt; total_page_count:</span><br><span class="line">                start_page = total_page_count - <span class="number">2</span> * plus</span><br><span class="line">                end_page = total_page_count</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                start_page = page - plus</span><br><span class="line">                end_page = page + plus + <span class="number">1</span></span><br><span class="line">    <span class="comment"># 页码</span></span><br><span class="line">    page_str_list = []</span><br><span class="line"></span><br><span class="line">    page_str_list.append(<span class="string">&#x27;&lt;li&gt;&lt;a href=&quot;?page=&#123;&#125;&quot;&gt;首页&lt;/a&gt;&lt;/li&gt;&#x27;</span>.<span class="built_in">format</span>(<span class="number">1</span>))</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 上一页</span></span><br><span class="line">    <span class="keyword">if</span> page &gt; <span class="number">1</span>:</span><br><span class="line">        prev = <span class="string">&#x27;&lt;li&gt;&lt;a href=&quot;?page=&#123;&#125;&quot;&gt;上一页&lt;/a&gt;&lt;/li&gt;&#x27;</span>.<span class="built_in">format</span>(page - <span class="number">1</span>)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        prev = <span class="string">&#x27;&lt;li&gt;&lt;a href=&quot;?page=&#123;&#125;&quot;&gt;上一页&lt;/a&gt;&lt;/li&gt;&#x27;</span>.<span class="built_in">format</span>(<span class="number">1</span>)</span><br><span class="line">    page_str_list.append(prev)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(start_page, end_page):</span><br><span class="line">        <span class="keyword">if</span> i == page:</span><br><span class="line">            ele = <span class="string">&#x27;&lt;li class=&quot;active&quot;&gt;&lt;a href=&quot;?page=&#123;&#125;&quot;&gt;&#123;&#125;&lt;/a&gt;&lt;/li&gt;&#x27;</span>.<span class="built_in">format</span>(i, i)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            ele = <span class="string">&#x27;&lt;li&gt;&lt;a href=&quot;?page=&#123;&#125;&quot;&gt;&#123;&#125;&lt;/a&gt;&lt;/li&gt;&#x27;</span>.<span class="built_in">format</span>(i, i)</span><br><span class="line">        page_str_list.append(ele)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 下一页</span></span><br><span class="line">    <span class="keyword">if</span> page &lt; total_page_count:</span><br><span class="line">        prev = <span class="string">&#x27;&lt;li&gt;&lt;a href=&quot;?page=&#123;&#125;&quot;&gt;下一页&lt;/a&gt;&lt;/li&gt;&#x27;</span>.<span class="built_in">format</span>(page + <span class="number">1</span>)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        prev = <span class="string">&#x27;&lt;li&gt;&lt;a href=&quot;?page=&#123;&#125;&quot;&gt;下一页&lt;/a&gt;&lt;/li&gt;&#x27;</span>.<span class="built_in">format</span>(total_page_count)</span><br><span class="line">    page_str_list.append(prev)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 尾页</span></span><br><span class="line">    page_str_list.append(<span class="string">&#x27;&lt;li&gt;&lt;a href=&quot;?page=&#123;&#125;&quot;&gt;尾页&lt;/a&gt;&lt;/li&gt;&#x27;</span>.<span class="built_in">format</span>(total_page_count))</span><br><span class="line"></span><br><span class="line">    search_string = <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">            &lt;li&gt;</span></span><br><span class="line"><span class="string">            &lt;form style=&quot;float: left; margin-left: -1px&quot; method=&quot;get&quot;&gt;</span></span><br><span class="line"><span class="string">                &lt;div class=&quot;input-group&quot; style=&quot;width: 200px&quot; &gt;</span></span><br><span class="line"><span class="string">                    &lt;input type=&quot;text&quot; name=&quot;page&quot; class=&quot;form-control&quot; placeholder=&quot;页数&quot;&gt;</span></span><br><span class="line"><span class="string">                    &lt;span class=&quot;input-group-btn&quot;&gt;</span></span><br><span class="line"><span class="string">                        &lt;button class=&quot;btn btn-default&quot; type=&quot;submit&quot;&gt;跳转&lt;/button&gt;</span></span><br><span class="line"><span class="string">                    &lt;/span&gt;</span></span><br><span class="line"><span class="string">                &lt;/div&gt;</span></span><br><span class="line"><span class="string">            &lt;/form&gt;</span></span><br><span class="line"><span class="string">            &lt;/li&gt;</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    page_str_list.append(search_string)</span><br><span class="line"></span><br><span class="line">    page_string = mark_safe(<span class="string">&quot;&quot;</span>.join(page_str_list))</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> render(request, <span class="string">&#x27;pretty_list.html&#x27;</span>,</span><br><span class="line">                  &#123;<span class="string">&quot;queryset&quot;</span>: queryset, <span class="string">&quot;search_data&quot;</span>: search_data, <span class="string">&quot;page_string&quot;</span>: page_string&#125;, )</span><br></pre></td></tr></table></figure></li><li><p><code>pretty_list</code></p></li></ul><img src="/2022/09/19/%E5%9F%BA%E4%BA%8EDjango%E7%9A%84%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F/image-20230409210936049.png" class><ul><li>效果展示</li></ul><img src="/2022/09/19/%E5%9F%BA%E4%BA%8EDjango%E7%9A%84%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F/image-20230409210950066.png" class><h3 id="分页组件的封装"><a href="#分页组件的封装" class="headerlink" title="分页组件的封装"></a>分页组件的封装</h3><ul><li>新建文件</li></ul><img src="/2022/09/19/%E5%9F%BA%E4%BA%8EDjango%E7%9A%84%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F/image-20230409211005000.png" class><p>用<code>pagination</code>公共组件</p><ul><li><code>pagination</code></li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">自定义的分页组件，以后如果想要使用分页组件</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">在视图函数中</span></span><br><span class="line"><span class="string">def pretty_list(request):</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    # 根据自己的情况去筛选自己的数据</span></span><br><span class="line"><span class="string">    queryset = models.PrettyNum.objects.all()</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    # 实例化分页对象</span></span><br><span class="line"><span class="string">    page_object = Pagination(request, queryset)</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    context = &#123;</span></span><br><span class="line"><span class="string">        &quot;search_data&quot;: search_data,</span></span><br><span class="line"><span class="string">        &quot;queryset&quot;: page_object.page_queryset,   # 分完页的数据</span></span><br><span class="line"><span class="string">        &quot;page_string&quot;: page_object.html()    # 页码</span></span><br><span class="line"><span class="string">    &#125;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    return render(request, &#x27;pretty_list.html&#x27;, context)</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">在HTML页面中</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">        &#123;% for obj in queryset %&#125;</span></span><br><span class="line"><span class="string">            &#123;&#123; obj.xx &#125;&#125;</span></span><br><span class="line"><span class="string">        &#123;% endfor %&#125;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">        &lt;ul class=&quot;pagination&quot;&gt;</span></span><br><span class="line"><span class="string">            &#123;&#123; page_string &#125;&#125;</span></span><br><span class="line"><span class="string">        &lt;/ul&gt;</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> django.utils.safestring <span class="keyword">import</span> mark_safe</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Pagination</span>(<span class="title class_ inherited__">object</span>):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, request, queryset, page_size=<span class="number">10</span>, page_param=<span class="string">&quot;page&quot;</span>, plus=<span class="number">5</span></span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">        :param request: 请求的对象</span></span><br><span class="line"><span class="string">        :param queryset: 查询的符合条件的数据（根据这个数据进行处理）</span></span><br><span class="line"><span class="string">        :param page_size: 每页显示多少条数据</span></span><br><span class="line"><span class="string">        :param page_param: 在URL中传递的参数</span></span><br><span class="line"><span class="string">        :param plus: 显示当前页的前或后几页</span></span><br><span class="line"><span class="string">        &quot;&quot;&quot;</span></span><br><span class="line">        page = request.GET.get(page_param, <span class="string">&quot;1&quot;</span>)</span><br><span class="line">        <span class="keyword">if</span> page.isdecimal():</span><br><span class="line">            page = <span class="built_in">int</span>(page)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            page = <span class="number">1</span></span><br><span class="line"></span><br><span class="line">        self.page = page</span><br><span class="line">        self.page_size = page_size</span><br><span class="line"></span><br><span class="line">        self.start = (page - <span class="number">1</span>) * page_size</span><br><span class="line">        self.end = page * page_size</span><br><span class="line"></span><br><span class="line">        self.page_queryset = queryset[self.start:self.end]</span><br><span class="line"></span><br><span class="line">        total_count = queryset.count()</span><br><span class="line">        total_page_count, div = <span class="built_in">divmod</span>(total_count, page_size)</span><br><span class="line">        <span class="keyword">if</span> div:</span><br><span class="line">            total_page_count += <span class="number">1</span></span><br><span class="line">        self.total_page_count = total_page_count</span><br><span class="line">        self.plus = plus</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">html</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="comment"># 计算出当前页得到前五页和后五页</span></span><br><span class="line">        <span class="keyword">if</span> self.total_page_count &lt;= <span class="number">2</span> * self.plus + <span class="number">1</span>:</span><br><span class="line">            start_page = <span class="number">1</span></span><br><span class="line">            end_page = self.total_page_count + <span class="number">1</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="comment"># 数据库数据比较多 &gt; 11 页</span></span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> self.page &lt;= self.plus:</span><br><span class="line">                start_page = <span class="number">1</span></span><br><span class="line">                end_page = <span class="number">2</span> * self.plus + <span class="number">1</span></span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                <span class="keyword">if</span> (self.page + self.plus) &gt; self.total_page_count:</span><br><span class="line">                    start_page = self.total_page_count - <span class="number">2</span> * self.plus</span><br><span class="line">                    end_page = self.total_page_count</span><br><span class="line">                <span class="keyword">else</span>:</span><br><span class="line">                    start_page = self.page - self.plus</span><br><span class="line">                    end_page = self.page + self.plus + <span class="number">1</span></span><br><span class="line">        <span class="comment"># 页码</span></span><br><span class="line">        page_str_list = []</span><br><span class="line"></span><br><span class="line">        page_str_list.append(<span class="string">&#x27;&lt;li&gt;&lt;a href=&quot;?page=&#123;&#125;&quot;&gt;首页&lt;/a&gt;&lt;/li&gt;&#x27;</span>.<span class="built_in">format</span>(<span class="number">1</span>))</span><br><span class="line"></span><br><span class="line">        <span class="comment"># 上一页</span></span><br><span class="line">        <span class="keyword">if</span> self.page &gt; <span class="number">1</span>:</span><br><span class="line">            prev = <span class="string">&#x27;&lt;li&gt;&lt;a href=&quot;?page=&#123;&#125;&quot;&gt;上一页&lt;/a&gt;&lt;/li&gt;&#x27;</span>.<span class="built_in">format</span>(self.page - <span class="number">1</span>)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            prev = <span class="string">&#x27;&lt;li&gt;&lt;a href=&quot;?page=&#123;&#125;&quot;&gt;上一页&lt;/a&gt;&lt;/li&gt;&#x27;</span>.<span class="built_in">format</span>(<span class="number">1</span>)</span><br><span class="line">        page_str_list.append(prev)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(start_page, end_page):</span><br><span class="line">            <span class="keyword">if</span> i == self.page:</span><br><span class="line">                ele = <span class="string">&#x27;&lt;li class=&quot;active&quot;&gt;&lt;a href=&quot;?page=&#123;&#125;&quot;&gt;&#123;&#125;&lt;/a&gt;&lt;/li&gt;&#x27;</span>.<span class="built_in">format</span>(i, i)</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                ele = <span class="string">&#x27;&lt;li&gt;&lt;a href=&quot;?page=&#123;&#125;&quot;&gt;&#123;&#125;&lt;/a&gt;&lt;/li&gt;&#x27;</span>.<span class="built_in">format</span>(i, i)</span><br><span class="line">            page_str_list.append(ele)</span><br><span class="line"></span><br><span class="line">        <span class="comment"># 下一页</span></span><br><span class="line">        <span class="keyword">if</span> self.page &lt; self.total_page_count:</span><br><span class="line">            prev = <span class="string">&#x27;&lt;li&gt;&lt;a href=&quot;?page=&#123;&#125;&quot;&gt;下一页&lt;/a&gt;&lt;/li&gt;&#x27;</span>.<span class="built_in">format</span>(self.page + <span class="number">1</span>)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            prev = <span class="string">&#x27;&lt;li&gt;&lt;a href=&quot;?page=&#123;&#125;&quot;&gt;下一页&lt;/a&gt;&lt;/li&gt;&#x27;</span>.<span class="built_in">format</span>(self.total_page_count)</span><br><span class="line">        page_str_list.append(prev)</span><br><span class="line"></span><br><span class="line">        <span class="comment"># 尾页</span></span><br><span class="line">        page_str_list.append(<span class="string">&#x27;&lt;li&gt;&lt;a href=&quot;?page=&#123;&#125;&quot;&gt;尾页&lt;/a&gt;&lt;/li&gt;&#x27;</span>.<span class="built_in">format</span>(self.total_page_count))</span><br><span class="line"></span><br><span class="line">        search_string = <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">                    &lt;li&gt;</span></span><br><span class="line"><span class="string">                    &lt;form style=&quot;float: left; margin-left: -1px&quot; method=&quot;get&quot;&gt;</span></span><br><span class="line"><span class="string">                        &lt;div class=&quot;input-group&quot; style=&quot;width: 200px&quot; &gt;</span></span><br><span class="line"><span class="string">                            &lt;input type=&quot;text&quot; name=&quot;page&quot; class=&quot;form-control&quot; placeholder=&quot;页数&quot;&gt;</span></span><br><span class="line"><span class="string">                            &lt;span class=&quot;input-group-btn&quot;&gt;</span></span><br><span class="line"><span class="string">                                &lt;button class=&quot;btn btn-default&quot; type=&quot;submit&quot;&gt;跳转&lt;/button&gt;</span></span><br><span class="line"><span class="string">                            &lt;/span&gt;</span></span><br><span class="line"><span class="string">                        &lt;/div&gt;</span></span><br><span class="line"><span class="string">                    &lt;/form&gt;</span></span><br><span class="line"><span class="string">                    &lt;/li&gt;</span></span><br><span class="line"><span class="string">            &quot;&quot;&quot;</span></span><br><span class="line">        page_str_list.append(search_string)</span><br><span class="line"></span><br><span class="line">        page_string = mark_safe(<span class="string">&quot;&quot;</span>.join(page_str_list))</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> page_string</span><br></pre></td></tr></table></figure><h3 id="bug"><a href="#bug" class="headerlink" title="bug"></a>bug</h3><ul><li>在搜索下分页查询不保留搜索条件</li></ul><p>在分页的时候，保留搜索条件</p><ul><li><code>pagination.py</code><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">自定义的分页组件，以后如果想要使用分页组件</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">在视图函数中</span></span><br><span class="line"><span class="string">def pretty_list(request):</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    # 根据自己的情况去筛选自己的数据</span></span><br><span class="line"><span class="string">    queryset = models.PrettyNum.objects.all()</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    # 实例化分页对象</span></span><br><span class="line"><span class="string">    page_object = Pagination(request, queryset)</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    context = &#123;</span></span><br><span class="line"><span class="string">        &quot;search_data&quot;: search_data,</span></span><br><span class="line"><span class="string">        &quot;queryset&quot;: page_object.page_queryset,   # 分完页的数据</span></span><br><span class="line"><span class="string">        &quot;page_string&quot;: page_object.html()    # 页码</span></span><br><span class="line"><span class="string">    &#125;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    return render(request, &#x27;pretty_list.html&#x27;, context)</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">在HTML页面中</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">        &#123;% for obj in queryset %&#125;</span></span><br><span class="line"><span class="string">            &#123;&#123; obj.xx &#125;&#125;</span></span><br><span class="line"><span class="string">        &#123;% endfor %&#125;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">        &lt;ul class=&quot;pagination&quot;&gt;</span></span><br><span class="line"><span class="string">            &#123;&#123; page_string &#125;&#125;</span></span><br><span class="line"><span class="string">        &lt;/ul&gt;</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> django.utils.safestring <span class="keyword">import</span> mark_safe</span><br><span class="line"><span class="keyword">import</span> copy</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Pagination</span>(<span class="title class_ inherited__">object</span>):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, request, queryset, page_size=<span class="number">10</span>, page_param=<span class="string">&quot;page&quot;</span>, plus=<span class="number">5</span></span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">        :param request: 请求的对象</span></span><br><span class="line"><span class="string">        :param queryset: 查询的符合条件的数据（根据这个数据进行处理）</span></span><br><span class="line"><span class="string">        :param page_size: 每页显示多少条数据</span></span><br><span class="line"><span class="string">        :param page_param: 在URL中传递的参数</span></span><br><span class="line"><span class="string">        :param plus: 显示当前页的前或后几页</span></span><br><span class="line"><span class="string">        &quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line">        query_dict = copy.deepcopy(request.GET)</span><br><span class="line">        query_dict._mutable = <span class="literal">True</span></span><br><span class="line">        self.query_dict = query_dict</span><br><span class="line"></span><br><span class="line">        self.page_param = page_param</span><br><span class="line">        page = request.GET.get(page_param, <span class="string">&quot;1&quot;</span>)</span><br><span class="line">        <span class="keyword">if</span> page.isdecimal():</span><br><span class="line">            page = <span class="built_in">int</span>(page)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            page = <span class="number">1</span></span><br><span class="line"></span><br><span class="line">        self.page = page</span><br><span class="line">        self.page_size = page_size</span><br><span class="line"></span><br><span class="line">        self.start = (page - <span class="number">1</span>) * page_size</span><br><span class="line">        self.end = page * page_size</span><br><span class="line"></span><br><span class="line">        self.page_queryset = queryset[self.start:self.end]</span><br><span class="line"></span><br><span class="line">        total_count = queryset.count()</span><br><span class="line">        total_page_count, div = <span class="built_in">divmod</span>(total_count, page_size)</span><br><span class="line">        <span class="keyword">if</span> div:</span><br><span class="line">            total_page_count += <span class="number">1</span></span><br><span class="line">        self.total_page_count = total_page_count</span><br><span class="line">        self.plus = plus</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">html</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="comment"># 计算出当前页得到前五页和后五页</span></span><br><span class="line">        <span class="keyword">if</span> self.total_page_count &lt;= <span class="number">2</span> * self.plus + <span class="number">1</span>:</span><br><span class="line">            start_page = <span class="number">1</span></span><br><span class="line">            end_page = self.total_page_count + <span class="number">1</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="comment"># 数据库数据比较多 &gt; 11 页</span></span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> self.page &lt;= self.plus:</span><br><span class="line">                start_page = <span class="number">1</span></span><br><span class="line">                end_page = <span class="number">2</span> * self.plus + <span class="number">1</span></span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                <span class="keyword">if</span> (self.page + self.plus) &gt; self.total_page_count:</span><br><span class="line">                    start_page = self.total_page_count - <span class="number">2</span> * self.plus</span><br><span class="line">                    end_page = self.total_page_count</span><br><span class="line">                <span class="keyword">else</span>:</span><br><span class="line">                    start_page = self.page - self.plus</span><br><span class="line">                    end_page = self.page + self.plus + <span class="number">1</span></span><br><span class="line">        <span class="comment"># 页码</span></span><br><span class="line">        page_str_list = []</span><br><span class="line"></span><br><span class="line">        self.query_dict.setlist(self.page_param,[<span class="number">1</span>])</span><br><span class="line">        page_str_list.append(<span class="string">&#x27;&lt;li&gt;&lt;a href=&quot;?&#123;&#125;&quot;&gt;首页&lt;/a&gt;&lt;/li&gt;&#x27;</span>.<span class="built_in">format</span>(self.query_dict.urlencode()))</span><br><span class="line"></span><br><span class="line">        <span class="comment"># 上一页</span></span><br><span class="line">        <span class="keyword">if</span> self.page &gt; <span class="number">1</span>:</span><br><span class="line">            self.query_dict.setlist(self.page_param, [self.page - <span class="number">1</span>])</span><br><span class="line">            prev = <span class="string">&#x27;&lt;li&gt;&lt;a href=&quot;?&#123;&#125;&quot;&gt;上一页&lt;/a&gt;&lt;/li&gt;&#x27;</span>.<span class="built_in">format</span>(self.query_dict.urlencode())</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            self.query_dict.setlist(self.page_param, [<span class="number">1</span>])</span><br><span class="line">            prev = <span class="string">&#x27;&lt;li&gt;&lt;a href=&quot;?&#123;&#125;&quot;&gt;上一页&lt;/a&gt;&lt;/li&gt;&#x27;</span>.<span class="built_in">format</span>(self.query_dict.urlencode())</span><br><span class="line">        page_str_list.append(prev)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(start_page, end_page):</span><br><span class="line">            self.query_dict.setlist(self.page_param, [i])</span><br><span class="line">            <span class="keyword">if</span> i == self.page:</span><br><span class="line">                ele = <span class="string">&#x27;&lt;li class=&quot;active&quot;&gt;&lt;a href=&quot;?&#123;&#125;&quot;&gt;&#123;&#125;&lt;/a&gt;&lt;/li&gt;&#x27;</span>.<span class="built_in">format</span>(self.query_dict.urlencode(), i)</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                ele = <span class="string">&#x27;&lt;li&gt;&lt;a href=&quot;?&#123;&#125;&quot;&gt;&#123;&#125;&lt;/a&gt;&lt;/li&gt;&#x27;</span>.<span class="built_in">format</span>(self.query_dict.urlencode(), i)</span><br><span class="line">            page_str_list.append(ele)</span><br><span class="line"></span><br><span class="line">        <span class="comment"># 下一页</span></span><br><span class="line">        <span class="keyword">if</span> self.page &lt; self.total_page_count:</span><br><span class="line">            self.query_dict.setlist(self.page_param, [self.page + <span class="number">1</span>])</span><br><span class="line">            self.query_dict.urlencode()</span><br><span class="line">            prev = <span class="string">&#x27;&lt;li&gt;&lt;a href=&quot;?&#123;&#125;&quot;&gt;下一页&lt;/a&gt;&lt;/li&gt;&#x27;</span>.<span class="built_in">format</span>(self.query_dict.urlencode())</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            self.query_dict.setlist(self.page_param, [self.total_page_count])</span><br><span class="line">            prev = <span class="string">&#x27;&lt;li&gt;&lt;a href=&quot;?&#123;&#125;&quot;&gt;下一页&lt;/a&gt;&lt;/li&gt;&#x27;</span>.<span class="built_in">format</span>(self.query_dict.urlencode())</span><br><span class="line">        page_str_list.append(prev)</span><br><span class="line"></span><br><span class="line">        <span class="comment"># 尾页</span></span><br><span class="line">        self.query_dict.setlist(self.page_param, [self.total_page_count])</span><br><span class="line">        page_str_list.append(<span class="string">&#x27;&lt;li&gt;&lt;a href=&quot;?&#123;&#125;&quot;&gt;尾页&lt;/a&gt;&lt;/li&gt;&#x27;</span>.<span class="built_in">format</span>(self.query_dict.urlencode()))</span><br><span class="line"></span><br><span class="line">        search_string = <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">                    &lt;li&gt;</span></span><br><span class="line"><span class="string">                    &lt;form style=&quot;float: left; margin-left: -1px&quot; method=&quot;get&quot;&gt;</span></span><br><span class="line"><span class="string">                        &lt;div class=&quot;input-group&quot; style=&quot;width: 200px&quot; &gt;</span></span><br><span class="line"><span class="string">                            &lt;input type=&quot;text&quot; name=&quot;page&quot; class=&quot;form-control&quot; placeholder=&quot;页数&quot;&gt;</span></span><br><span class="line"><span class="string">                            &lt;span class=&quot;input-group-btn&quot;&gt;</span></span><br><span class="line"><span class="string">                                &lt;button class=&quot;btn btn-default&quot; type=&quot;submit&quot;&gt;跳转&lt;/button&gt;</span></span><br><span class="line"><span class="string">                            &lt;/span&gt;</span></span><br><span class="line"><span class="string">                        &lt;/div&gt;</span></span><br><span class="line"><span class="string">                    &lt;/form&gt;</span></span><br><span class="line"><span class="string">                    &lt;/li&gt;</span></span><br><span class="line"><span class="string">            &quot;&quot;&quot;</span></span><br><span class="line">        page_str_list.append(search_string)</span><br><span class="line"></span><br><span class="line">        page_string = mark_safe(<span class="string">&quot;&quot;</span>.join(page_str_list))</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> page_string</span><br></pre></td></tr></table></figure></li></ul><h3 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h3><ul><li>放在任意py文件中，在用的文件中进行导入</li></ul><img src="/2022/09/19/%E5%9F%BA%E4%BA%8EDjango%E7%9A%84%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F/image-20230409211128007.png" class><ul><li>具体操作说明</li></ul><img src="/2022/09/19/%E5%9F%BA%E4%BA%8EDjango%E7%9A%84%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F/image-20230409211212874.png" class><h2 id="管理员操作"><a href="#管理员操作" class="headerlink" title="管理员操作"></a>管理员操作</h2><h2 id="文件目录结构"><a href="#文件目录结构" class="headerlink" title="文件目录结构"></a>文件目录结构</h2><ul><li><code>urls.py</code></li></ul><img src="/2022/09/19/%E5%9F%BA%E4%BA%8EDjango%E7%9A%84%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F/image-20230409211248197.png" class><ul><li><p><code>admin.py</code></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> django.shortcuts <span class="keyword">import</span> render, redirect</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> app01 <span class="keyword">import</span> models</span><br><span class="line"><span class="keyword">from</span> app01.utils.pagiantion <span class="keyword">import</span> Pagination</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">admin_list</span>(<span class="params">request</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;管理员列表&quot;&quot;&quot;</span></span><br><span class="line">    <span class="comment"># 搜索</span></span><br><span class="line">    data_dict = &#123;&#125;</span><br><span class="line">    search_data = request.GET.get(<span class="string">&#x27;q&#x27;</span>, <span class="string">&quot;&quot;</span>)</span><br><span class="line">    <span class="keyword">if</span> search_data:</span><br><span class="line">        data_dict[<span class="string">&#x27;username__contains&#x27;</span>] = search_data</span><br><span class="line"></span><br><span class="line">    queryset = models.Admin.objects.<span class="built_in">filter</span>(**data_dict)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 分页</span></span><br><span class="line">    page_object = Pagination(request, queryset)</span><br><span class="line">    context = &#123;</span><br><span class="line">        <span class="string">&quot;queryset&quot;</span>: page_object.page_queryset,</span><br><span class="line">        <span class="string">&quot;page_string&quot;</span>: page_object.html(),</span><br><span class="line">        <span class="string">&quot;search_data&quot;</span>: search_data,</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> render(request, <span class="string">&quot;admin_list.html&quot;</span>, context)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> django <span class="keyword">import</span> forms</span><br><span class="line"><span class="keyword">from</span> django.core.exceptions <span class="keyword">import</span> ValidationError</span><br><span class="line"><span class="keyword">from</span> app01.utils.bootstrap <span class="keyword">import</span> BootStrapModelForm</span><br><span class="line"><span class="keyword">from</span> app01.utils.encrtpt <span class="keyword">import</span> md5</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">AdminModelForm</span>(<span class="title class_ inherited__">BootStrapModelForm</span>):</span><br><span class="line">    confirm_password = forms.CharField(</span><br><span class="line">        label=<span class="string">&quot;确认密码&quot;</span>,</span><br><span class="line">        widget=forms.PasswordInput(render_value=<span class="literal">True</span>)</span><br><span class="line">    )</span><br><span class="line"></span><br><span class="line">    <span class="keyword">class</span> <span class="title class_">Meta</span>:</span><br><span class="line">        model = models.Admin</span><br><span class="line">        fields = [<span class="string">&#x27;username&#x27;</span>, <span class="string">&#x27;password&#x27;</span>, <span class="string">&quot;confirm_password&quot;</span>]</span><br><span class="line">        widgets = &#123;</span><br><span class="line">            <span class="string">&quot;password&quot;</span>: forms.PasswordInput(render_value=<span class="literal">True</span>)</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">clean_password</span>(<span class="params">self</span>):</span><br><span class="line">        pwd = self.cleaned_data.get(<span class="string">&quot;password&quot;</span>)</span><br><span class="line">        <span class="keyword">return</span> md5(pwd)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">clean_confirm_password</span>(<span class="params">self</span>):</span><br><span class="line">        pwd = self.cleaned_data.get(<span class="string">&quot;password&quot;</span>)</span><br><span class="line">        confirm = md5(self.cleaned_data.get(<span class="string">&quot;confirm_password&quot;</span>))</span><br><span class="line">        <span class="keyword">if</span> confirm != pwd:</span><br><span class="line">            <span class="keyword">raise</span> ValidationError(<span class="string">&quot;密码不一致&quot;</span>)</span><br><span class="line">        <span class="keyword">return</span> confirm</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">AdminEditModelForm</span>(<span class="title class_ inherited__">BootStrapModelForm</span>):</span><br><span class="line">    <span class="keyword">class</span> <span class="title class_">Meta</span>:</span><br><span class="line">        model = models.Admin</span><br><span class="line">        fields = [<span class="string">&#x27;username&#x27;</span>]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">AdminResetModelForm</span>(<span class="title class_ inherited__">BootStrapModelForm</span>):</span><br><span class="line">    confirm_password = forms.CharField(</span><br><span class="line">        label=<span class="string">&quot;确认密码&quot;</span>,</span><br><span class="line">        widget=forms.PasswordInput(render_value=<span class="literal">True</span>)</span><br><span class="line">    )</span><br><span class="line"></span><br><span class="line">    <span class="keyword">class</span> <span class="title class_">Meta</span>:</span><br><span class="line">        model = models.Admin</span><br><span class="line">        fields = [<span class="string">&#x27;password&#x27;</span> , <span class="string">&#x27;confirm_password&#x27;</span>]</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">clean_password</span>(<span class="params">self</span>):</span><br><span class="line">        pwd = self.cleaned_data.get(<span class="string">&quot;password&quot;</span>)</span><br><span class="line">        md5_pwd = md5(pwd)</span><br><span class="line"></span><br><span class="line">        <span class="comment"># 去数据库校验当前密码和数据库是否一致</span></span><br><span class="line">        exists = models.Admin.objects.<span class="built_in">filter</span>(<span class="built_in">id</span>=self.instance.pk, password=md5_pwd).exists()</span><br><span class="line">        <span class="keyword">if</span> exists:</span><br><span class="line">            <span class="keyword">raise</span> ValidationError(<span class="string">&quot;密码不能与以前的相同&quot;</span>)</span><br><span class="line">        <span class="keyword">return</span> md5(pwd)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">clean_confirm_password</span>(<span class="params">self</span>):</span><br><span class="line">        pwd = self.cleaned_data.get(<span class="string">&quot;password&quot;</span>)</span><br><span class="line">        confirm = md5(self.cleaned_data.get(<span class="string">&quot;confirm_password&quot;</span>))</span><br><span class="line">        <span class="keyword">if</span> confirm != pwd:</span><br><span class="line">            <span class="keyword">raise</span> ValidationError(<span class="string">&quot;密码不一致&quot;</span>)</span><br><span class="line">        <span class="keyword">return</span> confirm</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">admin_add</span>(<span class="params">request</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;添加管理员&quot;&quot;&quot;</span></span><br><span class="line">    title = <span class="string">&quot;新建管理员&quot;</span></span><br><span class="line">    <span class="keyword">if</span> request.method == <span class="string">&quot;GET&quot;</span>:</span><br><span class="line">        form = AdminModelForm()</span><br><span class="line">        <span class="keyword">return</span> render(request, <span class="string">&#x27;change.html&#x27;</span>, &#123;<span class="string">&quot;form&quot;</span>: form, <span class="string">&quot;title&quot;</span>: title&#125;)</span><br><span class="line"></span><br><span class="line">    form = AdminModelForm(data=request.POST)</span><br><span class="line">    <span class="keyword">if</span> form.is_valid():</span><br><span class="line">        form.save()</span><br><span class="line">        <span class="keyword">return</span> redirect(<span class="string">&#x27;/admin/list&#x27;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> render(request, <span class="string">&#x27;change.html&#x27;</span>, &#123;<span class="string">&quot;form&quot;</span>: form, <span class="string">&quot;title&quot;</span>: title&#125;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">admin_edit</span>(<span class="params">request, nid</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;编辑管理员&quot;&quot;&quot;</span></span><br><span class="line">    row_object = models.Admin.objects.<span class="built_in">filter</span>(<span class="built_in">id</span>=nid).first()</span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> row_object:</span><br><span class="line">        <span class="comment"># return render(request, &#x27;error.html&#x27;, &#123;&quot;msg&quot;: &quot;数据不存在&quot;&#125;)</span></span><br><span class="line">        <span class="keyword">return</span> redirect(<span class="string">&#x27;/admin/list/&#x27;</span>)</span><br><span class="line"></span><br><span class="line">    title = <span class="string">&quot;编辑管理员&quot;</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> request.method == <span class="string">&quot;GET&quot;</span>:</span><br><span class="line">        form = AdminEditModelForm(instance=row_object)</span><br><span class="line">        <span class="keyword">return</span> render(request, <span class="string">&#x27;change.html&#x27;</span>, &#123;<span class="string">&quot;form&quot;</span>: form, <span class="string">&quot;title&quot;</span>: title&#125;)</span><br><span class="line"></span><br><span class="line">    form = AdminEditModelForm(data=request.POST, instance=row_object)</span><br><span class="line">    <span class="keyword">if</span> form.is_valid():</span><br><span class="line">        form.save()</span><br><span class="line">        <span class="keyword">return</span> redirect(<span class="string">&#x27;/admin/list/&#x27;</span>)</span><br><span class="line">    <span class="keyword">return</span> render(request, <span class="string">&#x27;change.html&#x27;</span>, &#123;<span class="string">&quot;form&quot;</span>: form, <span class="string">&quot;title&quot;</span>: title&#125;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">admin_delete</span>(<span class="params">request, nid</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;删除管理员&quot;&quot;&quot;</span></span><br><span class="line">    models.Admin.objects.<span class="built_in">filter</span>(<span class="built_in">id</span>=nid).delete()</span><br><span class="line">    <span class="keyword">return</span> redirect(<span class="string">&#x27;/admin/list/&#x27;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">admin_reset</span>(<span class="params">request, nid</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;重置密码&quot;&quot;&quot;</span></span><br><span class="line">    row_object = models.Admin.objects.<span class="built_in">filter</span>(<span class="built_in">id</span>=nid).first()</span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> row_object:</span><br><span class="line">        <span class="keyword">return</span> redirect(<span class="string">&#x27;/admin/list/&#x27;</span>)</span><br><span class="line"></span><br><span class="line">    title = <span class="string">&quot;重置密码-&#123;&#125;&quot;</span>.<span class="built_in">format</span>(row_object.username)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> request.method == <span class="string">&quot;GET&quot;</span>:</span><br><span class="line">        form = AdminResetModelForm()</span><br><span class="line">        <span class="keyword">return</span> render(request, <span class="string">&#x27;change.html&#x27;</span>, &#123;<span class="string">&quot;form&quot;</span>: form ,<span class="string">&quot;title&quot;</span>: title&#125;)</span><br><span class="line">    form = AdminResetModelForm(data=request.POST, instance=row_object)</span><br><span class="line">    <span class="keyword">if</span> form.is_valid():</span><br><span class="line">        form.save()</span><br><span class="line">        <span class="keyword">return</span> redirect(<span class="string">&#x27;/admin/list/&#x27;</span>)</span><br><span class="line">    <span class="keyword">return</span> render(request, <span class="string">&#x27;change.html&#x27;</span>, &#123;<span class="string">&quot;form&quot;</span>: form, <span class="string">&quot;title&quot;</span>: title&#125;)</span><br></pre></td></tr></table></figure></li><li><p><code>admin_list.html</code></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line">&#123;% extends &#x27;layoyt.html&#x27; %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% block content %&#125;</span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;container&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;margin-bottom: 10px&quot;</span> <span class="attr">class</span>=<span class="string">&quot;clearfix&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">&quot;btn btn-success&quot;</span> <span class="attr">href</span>=<span class="string">&quot;/admin/add/&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;glyphicon glyphicon-plus-sign&quot;</span> <span class="attr">aria-hidden</span>=<span class="string">&quot;true&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">                新建管理员</span><br><span class="line">            <span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;float: right; width: 300px;&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">form</span> <span class="attr">method</span>=<span class="string">&quot;get&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;input-group&quot;</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;q&quot;</span> <span class="attr">class</span>=<span class="string">&quot;form-control&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;关键字&quot;</span></span></span><br><span class="line"><span class="tag">                               <span class="attr">value</span>=<span class="string">&quot;&#123;&#123; search_data &#125;&#125;&quot;</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;input-group-btn&quot;</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">button</span> <span class="attr">class</span>=<span class="string">&quot;btn btn-default&quot;</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;glyphicon glyphicon-search&quot;</span> <span class="attr">aria-hidden</span>=<span class="string">&quot;true&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">div</span>&gt;</span><span class="comment">&lt;!-- /input-group --&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;panel panel-default&quot;</span>&gt;</span></span><br><span class="line">                <span class="comment">&lt;!-- Default panel contents --&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;panel-heading&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;glyphicon glyphicon-th-list&quot;</span> <span class="attr">aria-hidden</span>=<span class="string">&quot;true&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">                    管理员列表</span><br><span class="line">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">                <span class="comment">&lt;!-- Table --&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">table</span> <span class="attr">class</span>=<span class="string">&quot;table table-bordered&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">thead</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">th</span>&gt;</span>ID<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">th</span>&gt;</span>用户名<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">th</span>&gt;</span>密码<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">th</span>&gt;</span>重置密码<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">th</span>&gt;</span>操作<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">thead</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">tbody</span>&gt;</span></span><br><span class="line">                    &#123;% for obj in queryset %&#125;</span><br><span class="line">                        <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">th</span>&gt;</span>&#123;&#123; obj.id &#125;&#125;<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">td</span>&gt;</span>&#123;&#123; obj.username&#125;&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">td</span>&gt;</span>********<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">td</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;/admin/&#123;&#123; obj.id &#125;&#125;/reset/&quot;</span>&gt;</span>重置密码<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">td</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">&quot;btn btn-primary btn-xs&quot;</span> <span class="attr">href</span>=<span class="string">&quot;/admin/&#123;&#123; obj.id &#125;&#125;/edit/&quot;</span>&gt;</span>编辑<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">&quot;btn btn-danger btn-xs&quot;</span> <span class="attr">href</span>=<span class="string">&quot;/admin/&#123;&#123; obj.id &#125;&#125;/delete/&quot;</span>&gt;</span>删除<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">                    &#123;% endfor %&#125;</span><br><span class="line">                    <span class="tag">&lt;/<span class="name">tbody</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">ul</span> <span class="attr">class</span>=<span class="string">&quot;pagination&quot;</span>&gt;</span></span><br><span class="line">                &#123;&#123; page_string &#125;&#125;</span><br><span class="line">            <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">&#123;% endblock %&#125;</span><br></pre></td></tr></table></figure></li><li><p><code>change.html</code></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">&#123;% extends &#x27;layoyt.html&#x27; %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% block content %&#125;</span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;container&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;panel panel-default&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;panel-heading&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">h3</span> <span class="attr">class</span>=<span class="string">&quot;panel-title&quot;</span>&gt;</span>&#123;&#123; title &#125;&#125;<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;panel-body&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">form</span> <span class="attr">method</span>=<span class="string">&quot;post&quot;</span> <span class="attr">novalidate</span>&gt;</span></span><br><span class="line">                    &#123;% csrf_token %&#125;</span><br><span class="line"></span><br><span class="line">                    &#123;% for field in form %&#125;</span><br><span class="line">                        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;form-group&quot;</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">label</span>&gt;</span>&#123;&#123; field.label &#125;&#125;<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">                        &#123;&#123; field &#125;&#125;</span><br><span class="line">                            <span class="tag">&lt;<span class="name">span</span> <span class="attr">style</span>=<span class="string">&quot;color: red&quot;</span>&gt;</span></span><br><span class="line">                                &#123;&#123; field.errors.0 &#125;&#125;</span><br><span class="line">                            <span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                    &#123;% endfor %&#125;</span><br><span class="line"></span><br><span class="line">                    <span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">class</span>=<span class="string">&quot;btn btn-primary&quot;</span>&gt;</span>提 交<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">&#123;% endblock %&#125;</span><br></pre></td></tr></table></figure></li><li><p><code>error.html</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&#123;% extends &#x27;layoyt.html&#x27; %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% block content %&#125;</span><br><span class="line">    &lt;div class=&quot;container&quot;&gt;</span><br><span class="line">        &lt;div class=&quot;alert alert-danger&quot; role=&quot;alert&quot;&gt;&#123;&#123; msg &#125;&#125;&lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line"></span><br><span class="line">&#123;% endblock %&#125;</span><br></pre></td></tr></table></figure></li></ul><h2 id="用户登录"><a href="#用户登录" class="headerlink" title="用户登录"></a>用户登录</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">http://127.0.0.1:8000/user/list/</span><br><span class="line">https://127.0.0.1:8000/user/list/</span><br></pre></td></tr></table></figure><ul><li><p>无状态&amp;短链接<br>一次请求一次响应（每次默认为新请求，不携带以前的状态）</p></li><li><p>cookie和session<br>cookie：保存在浏览器上的键值对，发送请求时，自动携带<br>session：服务端存储我们信息的地方<br>发起请求后，网站可以在浏览器上写一个键值对，会给你一个响应体（页面），还有一个响应头（cookie），会生成一个专属的凭证。</p></li></ul><h3 id="登录界面"><a href="#登录界面" class="headerlink" title="登录界面"></a>登录界面</h3><ul><li><p><code>login.html</code></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line">&#123;% load static %&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>用户登录<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">href</span>=<span class="string">&quot;&#123;% static &#x27;plugins/bootstrap3/css/bootstrap.min.css&#x27; %&#125;&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.acount</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">width</span>: <span class="number">400px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">border</span>: <span class="number">1px</span> solid <span class="number">#ddd</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">box-shadow</span>: <span class="number">5px</span> <span class="number">5px</span> <span class="number">5px</span> <span class="number">#aaa</span>;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">            <span class="attribute">margin-left</span>: auto;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">margin-right</span>: auto;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">margin-top</span>: <span class="number">100px</span>;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">            <span class="attribute">padding</span>: <span class="number">20px</span> <span class="number">30px</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.acount</span> <span class="selector-tag">h1</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">text-align</span>: center;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">    </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;acount&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h2</span>&gt;</span>用户登录<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">form</span> <span class="attr">method</span>=<span class="string">&quot;post&quot;</span> <span class="attr">novalidate</span>&gt;</span></span><br><span class="line">        &#123;% csrf_token %&#125;</span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;form-group&quot;</span> &gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">label</span>&gt;</span>用户名<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">            &#123;&#123; form.username &#125;&#125;</span><br><span class="line">            <span class="tag">&lt;<span class="name">span</span> <span class="attr">style</span>=<span class="string">&quot;color: red&quot;</span>&gt;</span>&#123;&#123; form.username.errors.0 &#125;&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;form-group&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">label</span>&gt;</span>密码<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">            &#123;&#123; form.password &#125;&#125;</span><br><span class="line">            <span class="tag">&lt;<span class="name">span</span> <span class="attr">style</span>=<span class="string">&quot;color: red&quot;</span>&gt;</span>&#123;&#123; form.username.errors.0 &#125;&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">class</span>=<span class="string">&quot;btn btn-primary&quot;</span>&gt;</span>登录<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p><code>account.py</code></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> django.shortcuts <span class="keyword">import</span> render, redirect, HttpResponse</span><br><span class="line"><span class="keyword">from</span> django <span class="keyword">import</span> forms</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> app01 <span class="keyword">import</span> models</span><br><span class="line"><span class="keyword">from</span> app01.utils.bootstrap <span class="keyword">import</span> BootStrapForm</span><br><span class="line"><span class="keyword">from</span> app01.utils.encrtpt <span class="keyword">import</span> md5</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">LoginForm</span>(<span class="title class_ inherited__">BootStrapForm</span>):</span><br><span class="line">    username = forms.CharField(</span><br><span class="line">        label=<span class="string">&quot;用户名&quot;</span>,</span><br><span class="line">        widget=forms.TextInput,</span><br><span class="line">        required=<span class="literal">True</span></span><br><span class="line">    )</span><br><span class="line">    password = forms.CharField(</span><br><span class="line">        label=<span class="string">&quot;密码&quot;</span>,</span><br><span class="line">        widget=forms.TextInput,</span><br><span class="line">        required=<span class="literal">True</span></span><br><span class="line">    )</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">clean_password</span>(<span class="params">self</span>):</span><br><span class="line">        pwd = self.cleaned_data.get(<span class="string">&quot;password&quot;</span>)</span><br><span class="line">        <span class="keyword">return</span> md5(pwd)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">login</span>(<span class="params">request</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;登录&quot;&quot;&quot;</span></span><br><span class="line">    <span class="keyword">if</span> request.method == <span class="string">&quot;GET&quot;</span>:</span><br><span class="line">        form = LoginForm()</span><br><span class="line">        <span class="keyword">return</span> render(request, <span class="string">&#x27;login.html&#x27;</span>, &#123;<span class="string">&#x27;form&#x27;</span>: form&#125;)</span><br><span class="line"></span><br><span class="line">    form = LoginForm(data=request.POST)</span><br><span class="line">    <span class="keyword">if</span> form.is_valid():</span><br><span class="line">        <span class="comment"># 验证成功后，获取到的用户名和密码,去数据校验(前提字典的键值和数据库一致)</span></span><br><span class="line">        admin_object = models.Admin.objects.<span class="built_in">filter</span>(**form.cleaned_data).first()</span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> admin_object:</span><br><span class="line">            form.add_error(<span class="string">&quot;username&quot;</span>, <span class="string">&quot;用户名或密码错误&quot;</span>)</span><br><span class="line">            <span class="keyword">return</span> render(request, <span class="string">&#x27;login.html&#x27;</span>, &#123;<span class="string">&#x27;form&#x27;</span>: form&#125;)</span><br><span class="line">        <span class="comment"># 验证通过后</span></span><br><span class="line">        <span class="comment"># 网站生成随机字符串，写到用户浏览器的cookie中：再写入到session中</span></span><br><span class="line">        request.session[<span class="string">&quot;info&quot;</span>] = &#123;<span class="string">&#x27;id&#x27;</span>: admin_object.<span class="built_in">id</span>, <span class="string">&#x27;name&#x27;</span>: admin_object.username&#125;</span><br><span class="line">        <span class="keyword">return</span> redirect(<span class="string">&quot;/admin/list&quot;</span>)</span><br><span class="line">    <span class="keyword">return</span> render(request, <span class="string">&#x27;login.html&#x27;</span>, &#123;<span class="string">&#x27;form&#x27;</span>: form&#125;)</span><br></pre></td></tr></table></figure><h3 id="用户验证"><a href="#用户验证" class="headerlink" title="用户验证"></a>用户验证</h3><p>登录成功后：</p></li><li><p>cookie：随机字符串</p></li><li><p>session：用户信息<br>在其他需要登录才能访问的页面中都需要加入：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">admin_list</span>(<span class="params">request</span>):</span><br><span class="line">    <span class="comment"># 检查用户是否已经登录，已登录，继续，未登录，跳转至登录界面</span></span><br><span class="line">    <span class="comment"># 用户发来的请求，获取cookie随机字符串，拿着字符串看看session有没有</span></span><br><span class="line">    info = request.session.get(<span class="string">&quot;info&quot;</span>)</span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> info:</span><br><span class="line">        <span class="keyword">return</span> redirect(<span class="string">&#x27;/login/&#x27;</span>)</span><br></pre></td></tr></table></figure><p>需要在18个页面都加入，过于繁琐，此时可使用django的中间件</p><h4 id="中间件"><a href="#中间件" class="headerlink" title="中间件"></a>中间件</h4></li><li><p>请求进入网站会通过中间件，出去也会通过中间件（中间件其实就相当一个类）</p></li><li><p>当中间件阻拦请求后，就会从中间件返回，用户就无法访问到视图函数</p></li></ul><p>中间件的使用</p><ul><li>定义中间件<ul><li>写一个类</li></ul></li></ul><img src="/2022/09/19/%E5%9F%BA%E4%BA%8EDjango%E7%9A%84%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F/image-20230409211432200.png" class><ul><li>使用中间件<ul><li>settings.py中注册中间件</li></ul></li></ul><img src="/2022/09/19/%E5%9F%BA%E4%BA%8EDjango%E7%9A%84%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F/image-20230409211451885.png" class><blockquote><p>在中间件中没有返回值继续走，如果有返回值则继续向后走</p></blockquote><h2 id="注销"><a href="#注销" class="headerlink" title="注销"></a>注销</h2><img src="/2022/09/19/%E5%9F%BA%E4%BA%8EDjango%E7%9A%84%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F/image-20230409211519897.png" class><img src="/2022/09/19/%E5%9F%BA%E4%BA%8EDjango%E7%9A%84%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F/image-20230409211601689.png" class><img src="/2022/09/19/%E5%9F%BA%E4%BA%8EDjango%E7%9A%84%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F/image-20230409211621794.png" class><h2 id="Ajax请求"><a href="#Ajax请求" class="headerlink" title="Ajax请求"></a>Ajax请求</h2><p>浏览器向网站发送请求时候:URL和表单的形式提交</p><ul><li>GET</li><li>POST<br>特点：页面会刷新。<br>除此之外，也可以基于Ajax向后台发请求（页面不会做刷新）</li><li>依赖jQuery</li><li>编写Ajax代码</li></ul><h3 id="get请求"><a href="#get请求" class="headerlink" title="get请求"></a>get请求</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">$.<span class="title function_">ajax</span>(</span><br><span class="line"><span class="attr">url</span>:<span class="string">&quot;发送的地址&quot;</span>,</span><br><span class="line"><span class="attr">type</span>:<span class="string">&quot;get</span></span><br><span class="line"><span class="string">&quot;</span>,</span><br><span class="line"><span class="attr">data</span>:&#123;</span><br><span class="line"><span class="attr">n1</span>:<span class="number">123</span>,</span><br><span class="line"><span class="attr">n2</span>:<span class="number">456</span>,</span><br><span class="line">&#125;</span><br><span class="line"><span class="attr">sucess</span>:<span class="keyword">function</span>(<span class="params">res</span>)&#123;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(res);</span><br><span class="line">&#125;</span><br><span class="line">)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> django.shortcuts <span class="keyword">import</span> render, HttpResponse</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">task_ajak</span>(<span class="params">request</span>):</span><br><span class="line"><span class="built_in">print</span>(request.GET)</span><br><span class="line"><span class="keyword">return</span> HttpResponse(<span class="string">&quot;成功了&quot;</span>)</span><br></pre></td></tr></table></figure><h3 id="post请求"><a href="#post请求" class="headerlink" title="post请求"></a>post请求</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">$.<span class="title function_">ajax</span>(</span><br><span class="line"><span class="attr">url</span>:<span class="string">&quot;发送的地址&quot;</span>,</span><br><span class="line"><span class="attr">type</span>:<span class="string">&quot;post&quot;</span>,</span><br><span class="line"><span class="attr">data</span>:&#123;</span><br><span class="line"><span class="attr">n1</span>:<span class="number">123</span>,</span><br><span class="line"><span class="attr">n2</span>:<span class="number">456</span>,</span><br><span class="line">&#125;</span><br><span class="line"><span class="attr">sucess</span>:<span class="keyword">function</span>(<span class="params">res</span>)&#123;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(res);</span><br><span class="line">&#125;</span><br><span class="line">)</span><br></pre></td></tr></table></figure><p>对于post请求需要携带session，这个过程过于繁琐，可以采用免除csrf_token认证</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> django.shortcuts <span class="keyword">import</span> render, HttpResponse</span><br><span class="line"><span class="keyword">from</span> django.views.decorators.csrf <span class="keyword">import</span> csrf_exempt</span><br><span class="line"></span><br><span class="line"><span class="meta">@csrf_exempt</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">task_ajax</span>(<span class="params">request</span>):</span><br><span class="line"><span class="built_in">print</span>(request.GET)</span><br><span class="line"><span class="built_in">print</span>(request.POST)</span><br><span class="line"><span class="keyword">return</span> HttpResponse(<span class="string">&quot;成功了&quot;</span>)</span><br></pre></td></tr></table></figure><h3 id="关于绑定事件"><a href="#关于绑定事件" class="headerlink" title="关于绑定事件"></a>关于绑定事件</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">&#123;% extends &#x27;layoyt.html&#x27; %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% block content %&#125;</span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;container&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h1</span>&gt;</span>任务管理<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">h3</span>&gt;</span>示例1<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">id</span>=<span class="string">&quot;btn1&quot;</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">class</span>=<span class="string">&quot;btn btn-primary&quot;</span> <span class="attr">value</span>=<span class="string">&quot;点击&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">&#123;% endblock %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% block js %&#125;</span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    $(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">//页面加载完成之后代码自动执行</span></span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">bindBtn1Event</span>();</span></span><br><span class="line"><span class="language-javascript">    &#125;)</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">function</span> <span class="title function_">bindBtn1Event</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">         $(<span class="string">&quot;#btn1&quot;</span>).<span class="title function_">click</span>(<span class="keyword">function</span> (<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">            $.<span class="title function_">ajax</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">url</span>: <span class="string">&#x27;/task/ajax/&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">type</span>: <span class="string">&quot;post&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">data</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">n1</span>: <span class="number">123</span>,</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">n2</span>: <span class="number">456</span></span></span><br><span class="line"><span class="language-javascript">                &#125;,</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">success</span>: <span class="keyword">function</span> (<span class="params">res</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="variable language_">console</span>.<span class="title function_">log</span>(res)</span></span><br><span class="line"><span class="language-javascript">                &#125;</span></span><br><span class="line"><span class="language-javascript">            &#125;)</span></span><br><span class="line"><span class="language-javascript">        &#125;)</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">&#123;% endblock %&#125;</span><br></pre></td></tr></table></figure><h3 id="ajax请求的返回值"><a href="#ajax请求的返回值" class="headerlink" title="ajax请求的返回值"></a>ajax请求的返回值</h3><p>返回的是json格式</p><h4 id="案例：表单"><a href="#案例：表单" class="headerlink" title="案例：表单"></a>案例：表单</h4><img src="/2022/09/19/%E5%9F%BA%E4%BA%8EDjango%E7%9A%84%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F/5f2e0e6c400940d681c2e2fa52aaab12.png" class title="在这里插入图片描述"><ul><li><p><code>task_list.html</code></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line">&#123;% extends &#x27;layoyt.html&#x27; %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% block content %&#125;</span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;container&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;panel panel-default&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;panel-heading&quot;</span>&gt;</span>表单<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;panel-body&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">form</span> <span class="attr">id</span>=<span class="string">&quot;formAdd&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;clearfix&quot;</span>&gt;</span></span><br><span class="line">                    &#123;% for field in form %&#125;</span><br><span class="line">                        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;form-group col-xs-6&quot;</span> <span class="attr">style</span>=<span class="string">&quot;position: relative;margin-bottom: 20px&quot;</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">label</span>&gt;</span>&#123;&#123; field.label &#125;&#125;<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">                            &#123;&#123; field &#125;&#125;</span><br><span class="line">                            <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;error-msg&quot;</span> <span class="attr">style</span>=<span class="string">&quot;color: red;position: absolute&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                    &#123;% endfor %&#125;</span><br><span class="line">                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;col-xs-12&quot;</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">&quot;btnAdd&quot;</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">class</span>=<span class="string">&quot;btn btn-primary&quot;</span>&gt;</span>提 交<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">&#123;% endblock %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% block js %&#125;</span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        $(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">//页面加载完成之后代码自动执行</span></span></span><br><span class="line"><span class="language-javascript">            <span class="title function_">bindBtnAddEvent</span>();</span></span><br><span class="line"><span class="language-javascript">        &#125;)</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">function</span> <span class="title function_">bindBtnAddEvent</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            $(<span class="string">&quot;#btnAdd&quot;</span>).<span class="title function_">click</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                $(<span class="string">&quot;.error-msg&quot;</span>).<span class="title function_">empty</span>();</span></span><br><span class="line"><span class="language-javascript">                $.<span class="title function_">ajax</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">url</span>: <span class="string">&#x27;/task/add/&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">type</span>: <span class="string">&quot;post&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">data</span>: $(<span class="string">&quot;#formAdd&quot;</span>).<span class="title function_">serialize</span>(),</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">dataType</span>: <span class="string">&quot;JSON&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">success</span>: <span class="keyword">function</span> (<span class="params">res</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                        <span class="keyword">if</span>(res.<span class="property">status</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">                            <span class="title function_">alert</span>(<span class="string">&quot;添加成功&quot;</span>)</span></span><br><span class="line"><span class="language-javascript">                        &#125;<span class="keyword">else</span>&#123;</span></span><br><span class="line"><span class="language-javascript">                            $.<span class="title function_">each</span>(res.<span class="property">error</span>,<span class="keyword">function</span> (<span class="params">name,data</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">                                $(<span class="string">&quot;#id_&quot;</span> + name).<span class="title function_">next</span>().<span class="title function_">text</span>(data[<span class="number">0</span>]);</span></span><br><span class="line"><span class="language-javascript">                            &#125;)</span></span><br><span class="line"><span class="language-javascript">                        &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">                    &#125;</span></span><br><span class="line"><span class="language-javascript">                &#125;)</span></span><br><span class="line"><span class="language-javascript">            &#125;)</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">&#123;% endblock %&#125;</span><br></pre></td></tr></table></figure></li><li><p><code>task.py</code></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> json</span><br><span class="line"><span class="keyword">from</span> django <span class="keyword">import</span> forms</span><br><span class="line"><span class="keyword">from</span> django.shortcuts <span class="keyword">import</span> render, HttpResponse</span><br><span class="line"><span class="keyword">from</span> django.http <span class="keyword">import</span> JsonResponse</span><br><span class="line"><span class="keyword">from</span> django.views.decorators.csrf <span class="keyword">import</span> csrf_exempt</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> app01 <span class="keyword">import</span> models</span><br><span class="line"><span class="keyword">from</span> app01.utils.bootstrap <span class="keyword">import</span> BootStrapModelForm</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">TaskModeForm</span>(<span class="title class_ inherited__">BootStrapModelForm</span>):</span><br><span class="line">    <span class="keyword">class</span> <span class="title class_">Meta</span>:</span><br><span class="line">        model = models.Task</span><br><span class="line">        fields = <span class="string">&quot;__all__&quot;</span></span><br><span class="line">        widgets = &#123;</span><br><span class="line">            <span class="comment"># &quot;detail&quot;: forms.Textarea</span></span><br><span class="line">            <span class="string">&quot;detail&quot;</span>: forms.TextInput</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">task_list</span>(<span class="params">request</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;任务列表&quot;&quot;&quot;</span></span><br><span class="line">    form = TaskModeForm</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> render(request, <span class="string">&#x27;task_list.html&#x27;</span> , &#123;<span class="string">&quot;form&quot;</span>:form&#125;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@csrf_exempt</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">task_add</span>(<span class="params">request</span>):</span><br><span class="line">    <span class="built_in">print</span>(request.POST)</span><br><span class="line">    <span class="comment"># 1.用户发送过来的数据进行校验（）</span></span><br><span class="line">    form = TaskModeForm(data=request.POST)</span><br><span class="line">    <span class="keyword">if</span> form.is_valid():</span><br><span class="line">        form.save()</span><br><span class="line">        data_dict = &#123;<span class="string">&quot;status&quot;</span>: <span class="literal">True</span>&#125;</span><br><span class="line">        <span class="keyword">return</span> HttpResponse(json.dumps(data_dict))</span><br><span class="line">    data_dict = &#123;<span class="string">&quot;status&quot;</span>: <span class="literal">False</span>, <span class="string">&#x27;error&#x27;</span>: form.errors&#125;</span><br><span class="line">    <span class="keyword">return</span> HttpResponse(json.dumps(data_dict, ensure_ascii=<span class="literal">False</span>))</span><br></pre></td></tr></table></figure></li></ul><h2 id="基于Ajax的订单管理"><a href="#基于Ajax的订单管理" class="headerlink" title="基于Ajax的订单管理"></a>基于Ajax的订单管理</h2><h3 id="创建表结构"><a href="#创建表结构" class="headerlink" title="创建表结构"></a>创建表结构</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Order</span>(models.Model):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;工单&quot;&quot;&quot;</span></span><br><span class="line">    oid = models.CharField(verbose_name=<span class="string">&quot;订单号&quot;</span>, max_length=<span class="number">64</span>)</span><br><span class="line">    title = models.CharField(verbose_name=<span class="string">&quot;名称&quot;</span>, max_length=<span class="number">32</span>)</span><br><span class="line">    price = models.IntegerField(verbose_name=<span class="string">&quot;价格&quot;</span>)</span><br><span class="line"></span><br><span class="line">    status_choices = (</span><br><span class="line">        (<span class="number">1</span>, <span class="string">&quot;待支付&quot;</span>),</span><br><span class="line">        (<span class="number">2</span>, <span class="string">&quot;已支付&quot;</span>),</span><br><span class="line">    )</span><br><span class="line">    status = models.SmallIntegerField(verbose_name=<span class="string">&quot;状态&quot;</span>, choices=status_choices, default=<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">    admin = models.ForeignKey(verbose_name=<span class="string">&quot;管理员&quot;</span>, to=<span class="string">&quot;Admin&quot;</span>, on_delete=models.CASCADE)</span><br></pre></td></tr></table></figure><h3 id="前端页面"><a href="#前端页面" class="headerlink" title="前端页面"></a>前端页面</h3><ul><li><p><code>order_list.html</code></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br></pre></td><td class="code"><pre><span class="line">&#123;% extends &#x27;layoyt.html&#x27; %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% block content %&#125;</span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;container&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">input</span> <span class="attr">id</span>=<span class="string">&quot;btnAdd&quot;</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">value</span>=<span class="string">&quot;新建订单&quot;</span> <span class="attr">class</span>=<span class="string">&quot;btn btn-primary&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;panel panel-default&quot;</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- Default panel contents --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;panel-heading&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;glyphicon glyphicon-th-list&quot;</span> <span class="attr">aria-hidden</span>=<span class="string">&quot;true&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">                订单列表</span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- Table --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">table</span> <span class="attr">class</span>=<span class="string">&quot;table table-bordered&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">thead</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">th</span>&gt;</span>ID<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">th</span>&gt;</span>订单号<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">th</span>&gt;</span>名称<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">th</span>&gt;</span>价格<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">th</span>&gt;</span>状态<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">th</span>&gt;</span>管理员<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">th</span>&gt;</span>操作<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">thead</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">tbody</span>&gt;</span></span><br><span class="line">                &#123;% for obj in queryset %&#125;</span><br><span class="line">                    <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">th</span>&gt;</span>&#123;&#123; obj.id &#125;&#125;<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">td</span>&gt;</span>&#123;&#123; obj.oid &#125;&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">td</span>&gt;</span>&#123;&#123; obj.title &#125;&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">td</span>&gt;</span>&#123;&#123; obj.price &#125;&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">td</span>&gt;</span>&#123;&#123; obj.get_status_display &#125;&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">td</span>&gt;</span>&#123;&#123; obj.admin.username &#125;&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">td</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">input</span> <span class="attr">uid</span>=<span class="string">&quot;&#123;&#123; obj.id &#125;&#125;&quot;</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">class</span>=<span class="string">&quot;btn btn-primary btn-xs btn-edit&quot;</span> <span class="attr">value</span>=<span class="string">&quot;编辑&quot;</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">input</span> <span class="attr">uid</span>=<span class="string">&quot;&#123;&#123; obj.id &#125;&#125;&quot;</span> <span class="attr">class</span>=<span class="string">&quot;btn btn-danger btn-xs btn-delete&quot;</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">value</span>=<span class="string">&quot;删除&quot;</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">                &#123;% endfor %&#125;</span><br><span class="line">                <span class="tag">&lt;/<span class="name">tbody</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">ul</span> <span class="attr">class</span>=<span class="string">&quot;pagination&quot;</span>&gt;</span></span><br><span class="line">            &#123;&#123; page_string &#125;&#125;</span><br><span class="line">        <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- 新建/编辑 订单Modal --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;modal fade&quot;</span> <span class="attr">id</span>=<span class="string">&quot;myModal&quot;</span> <span class="attr">tabindex</span>=<span class="string">&quot;-1&quot;</span> <span class="attr">role</span>=<span class="string">&quot;dialog&quot;</span> <span class="attr">aria-labelledby</span>=<span class="string">&quot;myModalLabel&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;modal-dialog&quot;</span> <span class="attr">role</span>=<span class="string">&quot;document&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;modal-content&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;modal-header&quot;</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">class</span>=<span class="string">&quot;close&quot;</span> <span class="attr">data-dismiss</span>=<span class="string">&quot;modal&quot;</span> <span class="attr">aria-label</span>=<span class="string">&quot;Close&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">span</span></span></span><br><span class="line"><span class="tag">                                <span class="attr">aria-hidden</span>=<span class="string">&quot;true&quot;</span>&gt;</span><span class="symbol">&amp;times;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">h4</span> <span class="attr">class</span>=<span class="string">&quot;modal-title&quot;</span> <span class="attr">id</span>=<span class="string">&quot;myModalLabel&quot;</span>&gt;</span>新建<span class="tag">&lt;/<span class="name">h4</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;modal-body&quot;</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">form</span> <span class="attr">id</span>=<span class="string">&quot;formAdd&quot;</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;clearfix&quot;</span>&gt;</span></span><br><span class="line">                                &#123;% for field in form %&#125;</span><br><span class="line">                                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;form-group col-xs-6&quot;</span> <span class="attr">style</span>=<span class="string">&quot;position: relative;margin-bottom: 20px&quot;</span>&gt;</span></span><br><span class="line">                                        <span class="tag">&lt;<span class="name">label</span>&gt;</span>&#123;&#123; field.label &#125;&#125;<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">                                        &#123;&#123; field &#125;&#125;</span><br><span class="line">                                        <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;error-msg&quot;</span> <span class="attr">style</span>=<span class="string">&quot;color: red;position: absolute&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">                                    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                                &#123;% endfor %&#125;</span><br><span class="line">                            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;modal-footer&quot;</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">class</span>=<span class="string">&quot;btn btn-default&quot;</span> <span class="attr">data-dismiss</span>=<span class="string">&quot;modal&quot;</span>&gt;</span>取 消<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">&quot;btnSave&quot;</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">class</span>=<span class="string">&quot;btn btn-primary&quot;</span>&gt;</span>保 存<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- 删除Modal --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;modal fade&quot;</span> <span class="attr">id</span>=<span class="string">&quot;deleteModal&quot;</span> <span class="attr">tabindex</span>=<span class="string">&quot;-1&quot;</span> <span class="attr">role</span>=<span class="string">&quot;dialog&quot;</span> <span class="attr">aria-labelledby</span>=<span class="string">&quot;myModalLabel&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;modal-dialog&quot;</span> <span class="attr">role</span>=<span class="string">&quot;document&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;alert alert-danger alert-dismissible fade in&quot;</span> <span class="attr">role</span>=<span class="string">&quot;alert&quot;</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">h4</span>&gt;</span>是否确定删除<span class="tag">&lt;/<span class="name">h4</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">p</span>&gt;</span>删除后所有关联的相关数据都将会被删除。<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">p</span> <span class="attr">style</span>=<span class="string">&quot;text-align: right&quot;</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">&quot;btnConfirmDelete&quot;</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">class</span>=<span class="string">&quot;btn btn-danger&quot;</span>&gt;</span>确定<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">class</span>=<span class="string">&quot;btn btn-default&quot;</span> <span class="attr">data-dismiss</span>=<span class="string">&quot;modal&quot;</span>&gt;</span>取消<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">&#123;% endblock %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% block js %&#125;</span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">var</span> <span class="variable constant_">DELETE_ID</span>;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">var</span> <span class="variable constant_">EDIT_ID</span>;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        $(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="title function_">bindBtnAddEvent</span>();</span></span><br><span class="line"><span class="language-javascript">            <span class="title function_">bindBtnSaveEvent</span>();</span></span><br><span class="line"><span class="language-javascript">            <span class="title function_">bindBtnDeleteEvent</span>();</span></span><br><span class="line"><span class="language-javascript">            <span class="title function_">bindBtnConfirmDelete</span>();</span></span><br><span class="line"><span class="language-javascript">            <span class="title function_">bindBtnEditDelete</span>();</span></span><br><span class="line"><span class="language-javascript">        &#125;)</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">function</span> <span class="title function_">bindBtnAddEvent</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            $(<span class="string">&quot;#btnAdd&quot;</span>).<span class="title function_">click</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="comment">// 将当前的编辑置空</span></span></span><br><span class="line"><span class="language-javascript">                <span class="variable constant_">EDIT_ID</span> = <span class="literal">undefined</span>;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">                $(<span class="string">&quot;#formAdd&quot;</span>)[<span class="number">0</span>].<span class="title function_">reset</span>();</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">                $(<span class="string">&#x27;#myModalLabel&#x27;</span>).<span class="title function_">text</span>(<span class="string">&quot;新建&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">                <span class="comment">//点击新建按钮，显示订单</span></span></span><br><span class="line"><span class="language-javascript">                $(<span class="string">&#x27;#myModal&#x27;</span>).<span class="title function_">modal</span>(<span class="string">&#x27;show&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">            &#125;)</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">function</span> <span class="title function_">bindBtnSaveEvent</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            $(<span class="string">&quot;#btnSave&quot;</span>).<span class="title function_">click</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="comment">// 清除错误信息</span></span></span><br><span class="line"><span class="language-javascript">                $(<span class="string">&quot;.error-msg&quot;</span>).<span class="title function_">empty</span>();</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">if</span>(<span class="variable constant_">EDIT_ID</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="comment">// 编辑</span></span></span><br><span class="line"><span class="language-javascript">                    <span class="title function_">doEdit</span>();</span></span><br><span class="line"><span class="language-javascript">                &#125;<span class="keyword">else</span>&#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="comment">// 添加</span></span></span><br><span class="line"><span class="language-javascript">                    <span class="title function_">doAdd</span>();</span></span><br><span class="line"><span class="language-javascript">                &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">            &#125;)</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">function</span> <span class="title function_">doEdit</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="comment">// 向后台发送信息(添加的ajax请求)</span></span></span><br><span class="line"><span class="language-javascript">                $.<span class="title function_">ajax</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">url</span>: <span class="string">&quot;/order/edit/&quot;</span> + <span class="string">&quot;?uid=&quot;</span> + <span class="variable constant_">EDIT_ID</span>, <span class="comment">//编辑的id</span></span></span><br><span class="line"><span class="language-javascript">            <span class="attr">type</span>: <span class="string">&quot;post&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">data</span>: $(<span class="string">&quot;#formAdd&quot;</span>).<span class="title function_">serialize</span>(),</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">dataType</span>: <span class="string">&quot;JSON&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">success</span>: <span class="keyword">function</span> (<span class="params">res</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">if</span> (res.<span class="property">status</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="comment">// 清空表单</span></span></span><br><span class="line"><span class="language-javascript">                    $(<span class="string">&quot;#formAdd&quot;</span>)[<span class="number">0</span>].<span class="title function_">reset</span>();</span></span><br><span class="line"><span class="language-javascript">                    <span class="comment">// 关闭对话框</span></span></span><br><span class="line"><span class="language-javascript">                    $(<span class="string">&#x27;#myModal&#x27;</span>).<span class="title function_">modal</span>(<span class="string">&#x27;hide&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                    location.<span class="title function_">reload</span>();</span></span><br><span class="line"><span class="language-javascript">                &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">if</span> (res.<span class="property">tips</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                        <span class="title function_">alert</span>(res.<span class="property">tips</span>);</span></span><br><span class="line"><span class="language-javascript">                    &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                        $.<span class="title function_">each</span>(res.<span class="property">error</span>, <span class="keyword">function</span> (<span class="params">name, errorList</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                            $(<span class="string">&quot;#id_&quot;</span> + name).<span class="title function_">next</span>().<span class="title function_">text</span>(errorList[<span class="number">0</span>]);</span></span><br><span class="line"><span class="language-javascript">                        &#125;)</span></span><br><span class="line"><span class="language-javascript">                    &#125;</span></span><br><span class="line"><span class="language-javascript">                &#125;</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">        &#125;)</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">function</span> <span class="title function_">doAdd</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="comment">// 向后台发送信息(添加的ajax请求)</span></span></span><br><span class="line"><span class="language-javascript">                $.<span class="title function_">ajax</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">url</span>: <span class="string">&#x27;/order/add/&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">type</span>: <span class="string">&quot;post&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">data</span>: $(<span class="string">&quot;#formAdd&quot;</span>).<span class="title function_">serialize</span>(),</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">dataType</span>: <span class="string">&quot;JSON&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">success</span>: <span class="keyword">function</span> (<span class="params">res</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                        <span class="keyword">if</span> (res.<span class="property">status</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                            <span class="title function_">alert</span>(<span class="string">&quot;创建成功&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">                            $(<span class="string">&quot;#formAdd&quot;</span>)[<span class="number">0</span>].<span class="title function_">reset</span>();</span></span><br><span class="line"><span class="language-javascript">                            $(<span class="string">&#x27;#myModal&#x27;</span>).<span class="title function_">modal</span>(<span class="string">&#x27;hide&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                            location.<span class="title function_">reload</span>();</span></span><br><span class="line"><span class="language-javascript">                        &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                            $.<span class="title function_">each</span>(res.<span class="property">error</span>, <span class="keyword">function</span> (<span class="params">name, errorList</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                                $(<span class="string">&quot;#id_&quot;</span> + name).<span class="title function_">next</span>().<span class="title function_">text</span>(errorList[<span class="number">0</span>]);</span></span><br><span class="line"><span class="language-javascript">                            &#125;)</span></span><br><span class="line"><span class="language-javascript">                        &#125;</span></span><br><span class="line"><span class="language-javascript">                    &#125;</span></span><br><span class="line"><span class="language-javascript">                &#125;)</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">function</span> <span class="title function_">bindBtnDeleteEvent</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            $(<span class="string">&quot;.btn-delete&quot;</span>).<span class="title function_">click</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="comment">// alert(&quot;确认删除&quot;);</span></span></span><br><span class="line"><span class="language-javascript">                $(<span class="string">&#x27;#deleteModal&#x27;</span>).<span class="title function_">modal</span>(<span class="string">&#x27;show&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">                <span class="comment">// 获取uid赋值给全局变量</span></span></span><br><span class="line"><span class="language-javascript">                <span class="variable constant_">DELETE_ID</span> = $(<span class="variable language_">this</span>).<span class="title function_">attr</span>(<span class="string">&quot;uid&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">            &#125;);</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">function</span> <span class="title function_">bindBtnConfirmDelete</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            $(<span class="string">&quot;#btnConfirmDelete&quot;</span>).<span class="title function_">click</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="comment">// 点击确定删除，将DELETEID发送到后台</span></span></span><br><span class="line"><span class="language-javascript">                $.<span class="title function_">ajax</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">url</span>: <span class="string">&quot;/order/delete/&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">type</span>: <span class="string">&quot;GET&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">data</span>:&#123;</span></span><br><span class="line"><span class="language-javascript">                        <span class="attr">uid</span>: <span class="variable constant_">DELETE_ID</span></span></span><br><span class="line"><span class="language-javascript">                    &#125;,</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">dataType</span>: <span class="string">&quot;JSON&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">success</span>: <span class="keyword">function</span> (<span class="params">res</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">                        <span class="keyword">if</span> (res.<span class="property">status</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                            <span class="title function_">alert</span>(<span class="string">&quot;删除成功&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">                            location.<span class="title function_">reload</span>();</span></span><br><span class="line"><span class="language-javascript">                        &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                            <span class="title function_">alert</span>(res.<span class="property">error</span>);</span></span><br><span class="line"><span class="language-javascript">                        &#125;</span></span><br><span class="line"><span class="language-javascript">                    &#125;</span></span><br><span class="line"><span class="language-javascript">                &#125;)</span></span><br><span class="line"><span class="language-javascript">            &#125;)</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">function</span> <span class="title function_">bindBtnEditDelete</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">            $(<span class="string">&quot;.btn-edit&quot;</span>).<span class="title function_">click</span>(<span class="keyword">function</span> (<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">                $(<span class="string">&quot;#formAdd&quot;</span>)[<span class="number">0</span>].<span class="title function_">reset</span>();</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">var</span> uid = $(<span class="variable language_">this</span>).<span class="title function_">attr</span>(<span class="string">&quot;uid&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">                <span class="variable constant_">EDIT_ID</span> = uid;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">                <span class="comment">// 发送ajax请求去后台获取数据</span></span></span><br><span class="line"><span class="language-javascript">                $.<span class="title function_">ajax</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">url</span>: <span class="string">&quot;/order/detail/&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">type</span>: <span class="string">&quot;get&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">data</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">                        <span class="attr">uid</span>: uid</span></span><br><span class="line"><span class="language-javascript">                    &#125;,</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">success</span>: <span class="keyword">function</span> (<span class="params">res</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                        <span class="keyword">if</span> (res.<span class="property">status</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                            <span class="comment">// 将数据赋值</span></span></span><br><span class="line"><span class="language-javascript">                            $.<span class="title function_">each</span>(res.<span class="property">data</span>, <span class="keyword">function</span> (<span class="params">name,value</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">                                $(<span class="string">&quot;#id_&quot;</span> + name).<span class="title function_">val</span>(value);</span></span><br><span class="line"><span class="language-javascript">                            &#125;)</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">                            <span class="comment">// 修改对话框标题</span></span></span><br><span class="line"><span class="language-javascript">                            $(<span class="string">&#x27;#myModalLabel&#x27;</span>).<span class="title function_">text</span>(<span class="string">&quot;编辑&quot;</span>);</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">                            <span class="comment">//点击编辑，显示对话框</span></span></span><br><span class="line"><span class="language-javascript">                            $(<span class="string">&#x27;#myModal&#x27;</span>).<span class="title function_">modal</span>(<span class="string">&#x27;show&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                        &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                            <span class="title function_">alert</span>(res.<span class="property">error</span>);</span></span><br><span class="line"><span class="language-javascript">                        &#125;</span></span><br><span class="line"><span class="language-javascript">                    &#125;</span></span><br><span class="line"><span class="language-javascript">                &#125;)</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">                <span class="comment">// 在对话框中默认看到</span></span></span><br><span class="line"><span class="language-javascript">            &#125;)</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line">&#123;% endblock %&#125;</span><br></pre></td></tr></table></figure><h3 id="后台管理"><a href="#后台管理" class="headerlink" title="后台管理"></a>后台管理</h3></li><li><p><code>order.py</code></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> random</span><br><span class="line"><span class="keyword">from</span> datetime <span class="keyword">import</span> datetime</span><br><span class="line"><span class="keyword">from</span> django.shortcuts <span class="keyword">import</span> render</span><br><span class="line"><span class="keyword">from</span> django.http <span class="keyword">import</span> JsonResponse</span><br><span class="line"><span class="keyword">from</span> django.views.decorators.csrf <span class="keyword">import</span> csrf_exempt</span><br><span class="line"><span class="keyword">from</span> app01.utils.bootstrap <span class="keyword">import</span> BootStrapModelForm</span><br><span class="line"><span class="keyword">from</span> app01 <span class="keyword">import</span> models</span><br><span class="line"><span class="keyword">from</span> app01.utils.pagiantion <span class="keyword">import</span> Pagination</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">OrderModelForm</span>(<span class="title class_ inherited__">BootStrapModelForm</span>):</span><br><span class="line">    <span class="keyword">class</span> <span class="title class_">Meta</span>:</span><br><span class="line">        model = models.Order</span><br><span class="line">        <span class="comment"># fields = &quot;__all__&quot;</span></span><br><span class="line">        exclude = [<span class="string">&quot;oid&quot;</span>, <span class="string">&quot;admin&quot;</span>]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">order_list</span>(<span class="params">request</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;订单列表&quot;&quot;&quot;</span></span><br><span class="line">    queryset = models.Order.objects.<span class="built_in">all</span>().order_by(<span class="string">&#x27;-id&#x27;</span>)</span><br><span class="line">    page_object = Pagination(request, queryset)</span><br><span class="line"></span><br><span class="line">    form = OrderModelForm</span><br><span class="line"></span><br><span class="line">    context = &#123;</span><br><span class="line">        <span class="string">&quot;form&quot;</span>: form,</span><br><span class="line">        <span class="string">&quot;queryset&quot;</span>: page_object.page_queryset,</span><br><span class="line">        <span class="string">&quot;page_string&quot;</span>: page_object.html()</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> render(request, <span class="string">&#x27;order_list.html&#x27;</span>, context)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@csrf_exempt</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">order_add</span>(<span class="params">request</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;新建订单（ajax）&quot;&quot;&quot;</span></span><br><span class="line">    form = OrderModelForm(data=request.POST)</span><br><span class="line">    <span class="keyword">if</span> form.is_valid():</span><br><span class="line">        <span class="comment"># 生成订单号</span></span><br><span class="line">        form.instance.oid = datetime.now().strftime(<span class="string">&quot;%Y%m%d%H%M%S&quot;</span>) + <span class="built_in">str</span>(random.randint(<span class="number">1000</span>, <span class="number">9999</span>))</span><br><span class="line">        <span class="comment"># 固定设置管理员（当前登录系统的人的id）</span></span><br><span class="line">        form.instance.admin_id = request.session[<span class="string">&quot;info&quot;</span>][<span class="string">&quot;id&quot;</span>]</span><br><span class="line">        <span class="comment"># 保存到数据库</span></span><br><span class="line">        form.save()</span><br><span class="line">        <span class="keyword">return</span> JsonResponse(&#123;<span class="string">&quot;status&quot;</span>: <span class="literal">True</span>&#125;)</span><br><span class="line">    <span class="keyword">return</span> JsonResponse(&#123;<span class="string">&quot;status&quot;</span>: <span class="literal">False</span>, <span class="string">&quot;error&quot;</span>: form.errors&#125;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">order_delete</span>(<span class="params">requeset</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;删除订单&quot;&quot;&quot;</span></span><br><span class="line">    uid = requeset.GET.get(<span class="string">&quot;uid&quot;</span>)</span><br><span class="line">    exists = models.Order.objects.<span class="built_in">filter</span>(<span class="built_in">id</span>=uid).exists()</span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> exists:</span><br><span class="line">        <span class="keyword">return</span> JsonResponse(&#123;<span class="string">&quot;status&quot;</span>: <span class="literal">False</span>, <span class="string">&#x27;error&#x27;</span>:<span class="string">&quot;数据不存在&quot;</span>&#125;)</span><br><span class="line">    models.Order.objects.<span class="built_in">filter</span>(<span class="built_in">id</span>=uid).delete()</span><br><span class="line">    <span class="keyword">return</span> JsonResponse(&#123;<span class="string">&quot;status&quot;</span>: <span class="literal">True</span>&#125;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">order_detail</span>(<span class="params">requeset</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;根据id获取订单详情&quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># 方式一</span></span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    uid = requeset.GET.get(&quot;uid&quot;)</span></span><br><span class="line"><span class="string">    row_object = models.Order.objects.filter(id=uid).first()</span></span><br><span class="line"><span class="string">    if not row_object:</span></span><br><span class="line"><span class="string">        return JsonResponse(&#123;&quot;status&quot;: False, &#x27;error&#x27;: &quot;数据不存在&quot;&#125;)</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    # 从数据库中获取到一个对象 row_object</span></span><br><span class="line"><span class="string">    result = &#123;</span></span><br><span class="line"><span class="string">        &quot;status&quot;: True,</span></span><br><span class="line"><span class="string">        &quot;data&quot;: &#123;</span></span><br><span class="line"><span class="string">            &quot;title&quot;: row_object.title,</span></span><br><span class="line"><span class="string">            &quot;price&quot;: row_object.price,</span></span><br><span class="line"><span class="string">            &quot;status&quot;: row_object.status,</span></span><br><span class="line"><span class="string">        &#125;</span></span><br><span class="line"><span class="string">    &#125;0</span></span><br><span class="line"><span class="string">    return JsonResponse(&#123;&quot;status&quot;: True, &quot;data&quot;: result&#125;)</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># 方式二</span></span><br><span class="line">    uid = requeset.GET.get(<span class="string">&quot;uid&quot;</span>)</span><br><span class="line">    row_dict = models.Order.objects.<span class="built_in">filter</span>(<span class="built_in">id</span>=uid).values(<span class="string">&quot;title&quot;</span>,<span class="string">&quot;price&quot;</span>,<span class="string">&quot;status&quot;</span>).first()</span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> row_dict:</span><br><span class="line">        <span class="keyword">return</span> JsonResponse(&#123;<span class="string">&quot;status&quot;</span>: <span class="literal">False</span>, <span class="string">&#x27;error&#x27;</span>: <span class="string">&quot;数据不存在&quot;</span>&#125;)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 从数据库中获取到一个对象 row_object</span></span><br><span class="line">    result = &#123;</span><br><span class="line">        <span class="string">&quot;status&quot;</span>: <span class="literal">True</span>,</span><br><span class="line">        <span class="string">&quot;data&quot;</span>: row_dict,</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> JsonResponse(result)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@csrf_exempt</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">order_edit</span>(<span class="params">request</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;编辑订单&quot;&quot;&quot;</span></span><br><span class="line">    uid = request.GET.get(<span class="string">&quot;uid&quot;</span>)</span><br><span class="line">    row_object = models.Order.objects.<span class="built_in">filter</span>(<span class="built_in">id</span>=uid).first()</span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> row_object:</span><br><span class="line">        <span class="keyword">return</span> JsonResponse(&#123;<span class="string">&quot;status&quot;</span>: <span class="literal">False</span>, <span class="string">&#x27;tips&#x27;</span>: <span class="string">&quot;数据不存在&quot;</span>&#125;)</span><br><span class="line">    form = OrderModelForm(data=request.POST, instance=row_object)</span><br><span class="line">    <span class="keyword">if</span> form.is_valid():</span><br><span class="line">        form.save()</span><br><span class="line">        <span class="keyword">return</span> JsonResponse(&#123;<span class="string">&quot;status&quot;</span>: <span class="literal">True</span>&#125;)</span><br><span class="line">    <span class="keyword">return</span> JsonResponse(&#123;<span class="string">&quot;status&quot;</span>: <span class="literal">False</span>, <span class="string">&#x27;error&#x27;</span>: form.errors&#125;)</span><br></pre></td></tr></table></figure></li><li><p>路径</p></li></ul><img src="/2022/09/19/%E5%9F%BA%E4%BA%8EDjango%E7%9A%84%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F/image-20230409211818226.png" class>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;案例：员工管理系统&quot;&gt;&lt;a href=&quot;#案例：员工管理系统&quot; class=&quot;headerlink&quot; title=&quot;案例：员工管理系统&quot;&gt;&lt;/a&gt;案例：员工管理系统&lt;/h2&gt;&lt;h3 id=&quot;创建项目&quot;&gt;&lt;a href=&quot;#创建项目&quot; class=&quot;headerli</summary>
      
    
    
    
    <category term="Python篇" scheme="http://bkystop.github.io/categories/Python%E7%AF%87/"/>
    
    
    <category term="Python" scheme="http://bkystop.github.io/tags/Python/"/>
    
    <category term="Django" scheme="http://bkystop.github.io/tags/Django/"/>
    
  </entry>
  
  <entry>
    <title>Django框架</title>
    <link href="http://bkystop.github.io/2022/09/15/Django%E6%A1%86%E6%9E%B6/"/>
    <id>http://bkystop.github.io/2022/09/15/Django%E6%A1%86%E6%9E%B6/</id>
    <published>2022-09-15T12:02:40.000Z</published>
    <updated>2023-04-09T13:23:07.493Z</updated>
    
    <content type="html"><![CDATA[<h2 id="安装django"><a href="#安装django" class="headerlink" title="安装django"></a>安装django</h2><ul><li>终端执行并安装django<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install django</span><br></pre></td></tr></table></figure></li><li><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">c:\python3.9</span><br><span class="line">-python.exe</span><br><span class="line">-bin</span><br><span class="line">-script</span><br><span class="line">-pip.exe</span><br><span class="line">-django-admin.exe  (工具，帮助创建django项目)</span><br><span class="line"> -lib</span><br><span class="line">-内置模块</span><br><span class="line">-site-packages</span><br><span class="line">- openpyxl</span><br><span class="line">- flask</span><br><span class="line">- django （框架的源码）</span><br><span class="line"></span><br></pre></td></tr></table></figure></li></ul><h3 id="创建项目"><a href="#创建项目" class="headerlink" title="创建项目"></a>创建项目</h3><ul><li>打开pycharm进入创建django文件</li></ul><img src="/2022/09/15/Django%E6%A1%86%E6%9E%B6/image-20230409200716585.png" class><ul><li>出现类似目录即为创建成功（不同版本略有不同）</li></ul><p><strong>还有一种命令行创建的，命令行创建的是最标准的，不会有templates目录，pycharm会自动帮助我们创建templates目录</strong></p><p>我们学习的时候使用的最标准的templates目录</p><ul><li>删除templates目录</li><li>pycharm还在settings.py中自动生成了一句话</li></ul><img src="/2022/09/15/Django%E6%A1%86%E6%9E%B6/image-20230409200831041.png" class><ul><li>修改成如下（直接删除）</li></ul><img src="/2022/09/15/Django%E6%A1%86%E6%9E%B6/image-20230409200848298.png" class><h3 id="打开终端"><a href="#打开终端" class="headerlink" title="打开终端"></a>打开终端</h3><ul><li>默认已经进入我们的文件</li></ul><img src="/2022/09/15/Django%E6%A1%86%E6%9E%B6/image-20230409201022695.png" class><ul><li>输入命令即可完成创建<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python manage.py startapp app01</span><br></pre></td></tr></table></figure></li></ul><img src="/2022/09/15/Django%E6%A1%86%E6%9E%B6/image-20230409201103081.png" class><h2 id="djangoProject默认文件介绍"><a href="#djangoProject默认文件介绍" class="headerlink" title="djangoProject默认文件介绍"></a>djangoProject默认文件介绍</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">djangoProject</span><br><span class="line">- manage.py (项目的管理，启动项目，创建app，数据管理)（不需要修改）(常用)</span><br><span class="line">- djangoProject  （与项目同名）</span><br><span class="line">- _init_,py </span><br><span class="line">- settings.py (项目配置) （经常常修改）</span><br><span class="line">- urls.py（URL和python函数的对应关系）（经常修改）</span><br><span class="line">- asgi.py  （接收网络请求）（不需要修改）</span><br><span class="line">- wsgi.py （接收网络请求）（不需要修改）</span><br></pre></td></tr></table></figure><ul><li>app的项目目录</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">- 项目</span><br><span class="line">- app，用户管理 （表结构，函数，HTML模板，css）(各自独立，相互不影响)</span><br><span class="line">- app，订单管理   （表结构，函数，HTML模板，css）</span><br><span class="line">- app，后台管理    （表结构，函数，HTML模板，css）</span><br><span class="line">- app，网页</span><br><span class="line">- app，API </span><br></pre></td></tr></table></figure><ul><li>app01文件目录</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">- app01</span><br><span class="line">- _init_.py</span><br><span class="line">- admin.py (固定不用动)   django提供了默认的admin后台管理</span><br><span class="line">- apps.py (固定不用动) app启动类</span><br><span class="line">- migrations.py (固定不用动) 数据库变更记录</span><br><span class="line">-  _init_.py </span><br><span class="line">- models.py  （常用） 对数据库操作</span><br><span class="line">- tests.py  (固定不用动)  单元测试</span><br><span class="line">- views.py  （常用） 写函数</span><br></pre></td></tr></table></figure><ul><li><p>创建项目并注册</p><blockquote><p>安装django，在pycharm中创建项目文件夹，终端输入<code>python manage.py startapp app01</code> 完成创建</p><p>在settings.py中注册app，INSTALLED_APPS中的名字与app.py相对应</p></blockquote></li><li><p>页面创建</p><blockquote><p>编写url和视图函数的对应关系，urls.py中写页面网址入口，views中写视图函数</p><p>通过访问对应的url即可看到不同的返回</p><p>在templates中根据app的注册顺序，逐一在templates寻找他们html文件</p></blockquote></li><li><p>静态文件</p><blockquote><p>开发过程中一般将图片，css，js都当作静态文件处理放在static目录下并引用</p></blockquote></li><li><p>请求和响应</p><ul><li>GET</li><li>POST</li></ul></li><li><p>数据库操作</p><blockquote><p>Mysql数据库+pymysql</p><p>Django内部提供了ORM框架，ORM会帮我们将写下的代码翻译成sql语句，再去执行</p><p>安装第三方模块<code>pip install mysqlclient</code></p><p>Django连接数据库</p><blockquote><p>在setting.py中的DATABASES中配置数据库</p><p>django的models.py中创建表,创建好之后使用以下的命令进行书信</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt;python manage.py makemigrations</span><br><span class="line">&gt;python manage.py migrate</span><br></pre></td></tr></table></figure></blockquote></blockquote></li></ul><h2 id="快速上手"><a href="#快速上手" class="headerlink" title="快速上手"></a>快速上手</h2><h3 id="注册app"><a href="#注册app" class="headerlink" title="注册app"></a>注册app</h3><ul><li>这里的名字需要和app.py里的对应</li></ul><img src="/2022/09/15/Django%E6%A1%86%E6%9E%B6/image-20230409201151241.png" class><img src="/2022/09/15/Django%E6%A1%86%E6%9E%B6/image-20230409201205949.png" class><h3 id="编写url和视图函数的对应关系"><a href="#编写url和视图函数的对应关系" class="headerlink" title="编写url和视图函数的对应关系"></a>编写url和视图函数的对应关系</h3><ul><li>urls.py,导入views，修改对应关系</li></ul><img src="/2022/09/15/Django%E6%A1%86%E6%9E%B6/image-20230409201242288.png" class><ul><li>viwes.py,编写视图函数</li></ul><img src="/2022/09/15/Django%E6%A1%86%E6%9E%B6/image-20230409201301334.png" class><h3 id="启动django项目"><a href="#启动django项目" class="headerlink" title="启动django项目"></a>启动django项目</h3><ul><li>命令行启动<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python mange.py runserver</span><br></pre></td></tr></table></figure></li><li>pycharm启动</li></ul><img src="/2022/09/15/Django%E6%A1%86%E6%9E%B6/image-20230409201320325.png" class><ul><li>提示url不对</li></ul><img src="/2022/09/15/Django%E6%A1%86%E6%9E%B6/image-20230409201331284.png" class><ul><li>修改URL，完成启动</li></ul><img src="/2022/09/15/Django%E6%A1%86%E6%9E%B6/image-20230409201357055.png" class><blockquote><p>至此，我们已经创建并运行了一个最简单的django项目</p></blockquote><h2 id="页面创建"><a href="#页面创建" class="headerlink" title="页面创建"></a>页面创建</h2><ul><li><code>urls.py</code>中写页面路径，<code>views.py</code>中写页面函数</li></ul><img src="/2022/09/15/Django%E6%A1%86%E6%9E%B6/image-20230409201503981.png" class title="urls.py"><img src="/2022/09/15/Django%E6%A1%86%E6%9E%B6/image-20230409201544201.png" class title="views.py"><img src="/2022/09/15/Django%E6%A1%86%E6%9E%B6/image-20230409201614862.png" class><ul><li>分别访问这三个页面可以看到不同的返回</li></ul><img src="/2022/09/15/Django%E6%A1%86%E6%9E%B6/image-20230409201633895.png" class><h3 id="templates目录"><a href="#templates目录" class="headerlink" title="templates目录"></a>templates目录</h3><ul><li>默认在app的目录下的templates目录寻找user_list.html（根据app的注册表顺序，逐一去他们的templates的目录寻找）</li></ul><img src="/2022/09/15/Django%E6%A1%86%E6%9E%B6/image-20230409201653104.png" class><h3 id="静态文件"><a href="#静态文件" class="headerlink" title="静态文件"></a>静态文件</h3><ul><li>在开发过程中一般将：图片，css，js都当作静态文件处理。</li></ul><ol><li>static目录<br>在app目录下创建static文件夹</li></ol><img src="/2022/09/15/Django%E6%A1%86%E6%9E%B6/image-20230409201711618.png" class><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&#123;% load static %&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>用户列表<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">href</span>=<span class="string">&quot;&#123;% static &#x27;plugins/bootstrap3/css/bootstrap.css&#x27; %&#125;&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">href</span>=<span class="string">&quot;https://cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span>用户列表<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">class</span>=<span class="string">&quot;btn btn-primary&quot;</span> <span class="attr">value</span>=<span class="string">&quot;提交&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;&#123;% static &#x27;js/jquery-3.6.1.min.js&#x27; %&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;&#123;% static &#x27;plugins/bootstrap3/js/bootstrap.js&#x27; %&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="模板语法"><a href="#模板语法" class="headerlink" title="模板语法"></a>模板语法</h2><p>本质上：在HTML中写一些占位符，由后台返回的数据对这些占位符进行替换和处理。</p><ul><li><p>视图函数中的render内部</p><ul><li>读取含有模板语法的HTML文件</li><li>内部进行渲染，最终得到只包含HTML标签的字符串</li><li>最后将渲染完成的字符串返回给用户浏览器</li></ul></li><li><p>数据替换</p></li></ul><img src="/2022/09/15/Django%E6%A1%86%E6%9E%B6/image-20230409201927228.png" class><ul><li>if语法</li></ul><img src="/2022/09/15/Django%E6%A1%86%E6%9E%B6/image-20230409202118192.png" class><img src="/2022/09/15/Django%E6%A1%86%E6%9E%B6/image-20230409202145424.png" class><h2 id="请求和响应"><a href="#请求和响应" class="headerlink" title="请求和响应"></a>请求和响应</h2><h4 id="请求"><a href="#请求" class="headerlink" title="请求"></a>请求</h4><ul><li> 获取请求方式 GET/POST<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(request.method)</span><br></pre></td></tr></table></figure></li><li>在url上传递值<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(request.GET)</span><br></pre></td></tr></table></figure></li><li>在请求体中提交数据 <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(request.POST)</span><br></pre></td></tr></table></figure><h4 id="响应"><a href="#响应" class="headerlink" title="响应"></a>响应</h4></li><li>内容字符串返回给请求者</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">return</span> HttpResponse(<span class="string">&quot;返回&quot;</span>)</span><br></pre></td></tr></table></figure><ul><li><p>读取HTML的内容+渲染 ——&gt; 将字符串内容返回给用户浏览器</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">return</span> render(request, <span class="string">&#x27;something.html&#x27;</span>,&#123;<span class="string">&quot;title&quot;</span>: <span class="string">&quot;来了&quot;</span>&#125;)</span><br></pre></td></tr></table></figure></li><li><p>让浏览器重定向到其他页面</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">return</span> redirect(<span class="string">&quot;https://www.baidu.com&quot;</span>)</span><br></pre></td></tr></table></figure></li></ul><h4 id="案例：用户登录"><a href="#案例：用户登录" class="headerlink" title="案例：用户登录"></a>案例：用户登录</h4><ul><li>url对应关系</li></ul><img src="/2022/09/15/Django%E6%A1%86%E6%9E%B6/image-20230409202252058.png" class><ul><li><p><code>views.py</code></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">from</span> django.shortcuts <span class="keyword">import</span> render, HttpResponse, redirect</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">login</span>(<span class="params">request</span>):</span><br><span class="line">    <span class="keyword">if</span> request.method == <span class="string">&quot;GET&quot;</span>:</span><br><span class="line">        <span class="keyword">return</span> render(request, <span class="string">&quot;login.html&quot;</span>)</span><br><span class="line">    <span class="comment"># 如果是POST请求，获取用户提交的数据</span></span><br><span class="line">    <span class="comment"># print(request.POST)</span></span><br><span class="line">    username = request.POST.get(<span class="string">&quot;user&quot;</span>)</span><br><span class="line">    password = request.POST.get(<span class="string">&quot;pwd&quot;</span>)</span><br><span class="line">    <span class="keyword">if</span> username == <span class="string">&quot;root&quot;</span> <span class="keyword">and</span> password == <span class="string">&quot;123&quot;</span>:</span><br><span class="line">        <span class="keyword">return</span> HttpResponse(<span class="string">&quot;登录成功&quot;</span>)</span><br><span class="line">        <span class="comment"># return HttpResponse(&quot;登陆失败&quot;)</span></span><br><span class="line">    <span class="keyword">return</span> render(request, <span class="string">&#x27;login.html&#x27;</span>,&#123;<span class="string">&quot;error_msg&quot;</span>: <span class="string">&quot;用户名或密码错误&quot;</span>&#125;)</span><br></pre></td></tr></table></figure></li><li><p><code>login.html</code></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>用户登录<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">method</span>=<span class="string">&quot;post&quot;</span> <span class="attr">action</span>=<span class="string">&quot;/login/&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    &#123;% csrf_token %&#125;</span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;user&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;用户名&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;password&quot;</span> <span class="attr">name</span>=<span class="string">&quot;pwd&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;密码&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">value</span>=<span class="string">&quot;提交&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">span</span> <span class="attr">style</span>=<span class="string">&quot;color: red&quot;</span>&gt;</span>&#123;&#123; error_msg &#125;&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure></li><li><p>CSRF 相当于多了一层验证</p></li></ul><img src="/2022/09/15/Django%E6%A1%86%E6%9E%B6/image-20230409202338694.png" class><ul><li>在form表单中加上一句</li></ul><img src="/2022/09/15/Django%E6%A1%86%E6%9E%B6/image-20230409202350419.png" class><h2 id="数据库操作"><a href="#数据库操作" class="headerlink" title="数据库操作"></a>数据库操作</h2><ul><li><p>MySQL数据库+pymysql</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">import pymysql</span><br><span class="line"></span><br><span class="line"># 连接mysql</span><br><span class="line">conn <span class="operator">=</span> pymysql.connect(host<span class="operator">=</span>&quot;127.0.0.1&quot;, port<span class="operator">=</span><span class="number">3306</span>, <span class="keyword">user</span><span class="operator">=</span>&quot;root&quot;, password<span class="operator">=</span>&quot;root&quot;, charset<span class="operator">=</span><span class="string">&#x27;utf8&#x27;</span>, db<span class="operator">=</span><span class="string">&#x27;bkys&#x27;</span>)</span><br><span class="line"><span class="keyword">cursor</span> <span class="operator">=</span> conn.cursor(<span class="keyword">cursor</span><span class="operator">=</span>pymysql.cursors.DictCursor)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 发送指令(不要用字符串格式化做<span class="keyword">sql</span>的拼接，安全隐患<span class="keyword">sql</span>注入)</span><br><span class="line">cursor.execute(&quot;insert into admin(username,password,mobile) values(&#x27;bkys&#x27;,&#x27;adawd&#x27;,&#x27;2131153245&#x27;)&quot;)</span><br><span class="line">con.commit()</span><br><span class="line"></span><br><span class="line"># 关闭</span><br><span class="line">cursor.close()</span><br><span class="line">conn.close()</span><br></pre></td></tr></table></figure></li><li><p>在models中写如下类</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Department</span>(models.Model):</span><br><span class="line">    title = models.CharField(max_length=<span class="number">16</span>)</span><br></pre></td></tr></table></figure></li><li><p>执行命令</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">python manage.py makemigrations</span><br><span class="line">python manage.py migrate</span><br></pre></td></tr></table></figure></li></ul><h3 id="安装第三方模块"><a href="#安装第三方模块" class="headerlink" title="安装第三方模块"></a>安装第三方模块</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install mysqlclient</span><br></pre></td></tr></table></figure><ul><li>安装成功</li></ul><img src="/2022/09/15/Django%E6%A1%86%E6%9E%B6/image-20230409203029371.png" class><h3 id="ORM"><a href="#ORM" class="headerlink" title="ORM"></a>ORM</h3><p>ORM会帮我们将写下的代码翻译给sql语句，再去数据库执行</p><ul><li>创建，修改和删除数据库中的表。（无法创建数据库）</li><li>操作表中的数据（不用写SQL语句）</li></ul><ol><li>创建数据库</li></ol><ul><li>启动MySQL服务</li><li>创建数据库</li></ul><ol start="2"><li>django连接数据库<br>在 settings.py文件中配置</li></ol><ul><li>注释原来的</li></ul><img src="/2022/09/15/Django%E6%A1%86%E6%9E%B6/image-20230409203102082.png" class><h3 id="django操作表"><a href="#django操作表" class="headerlink" title="django操作表"></a>django操作表</h3><h4 id="创建表"><a href="#创建表" class="headerlink" title="创建表"></a>创建表</h4><ul><li>在models.py中</li></ul><img src="/2022/09/15/Django%E6%A1%86%E6%9E%B6/image-20230409203122465.png" class><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">UserInfo</span>(models.Model):</span><br><span class="line">    name = models.CharField(max_length=<span class="number">32</span>)</span><br><span class="line">    password = models.CharField(max_length=<span class="number">64</span>)</span><br><span class="line">    age = models.IntegerField()</span><br></pre></td></tr></table></figure><ul><li>这就相当于sql中的</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> app01_userinfo(</span><br><span class="line">    id <span class="type">bigint</span> auto_increment <span class="keyword">primary</span> key,</span><br><span class="line">    name <span class="type">varchar</span>(<span class="number">32</span>),</span><br><span class="line">    password <span class="type">varchar</span>(<span class="number">64</span>),</span><br><span class="line">    age <span class="type">int</span></span><br><span class="line">)</span><br></pre></td></tr></table></figure><ul><li>执行命令<br>前提：app已经注册<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">python manage.py makemigrations</span><br><span class="line">python manage.py migrate</span><br></pre></td></tr></table></figure>执行完命令出现如下字样即为成功</li></ul><img src="/2022/09/15/Django%E6%A1%86%E6%9E%B6/image-20230409203147985.png" class title="image-20230409203147985"><ul><li>此时查看数据库</li></ul><img src="/2022/09/15/Django%E6%A1%86%E6%9E%B6/image-20230409203207954.png" class><img src="/2022/09/15/Django%E6%A1%86%E6%9E%B6/image-20230409203223561.png" class><ul><li>新增表时，在models.py中新增类即可，然后执行命令</li><li>当需要在创建成功的表中修改时候<ul><li>删除：注释后执行命令</li><li>新增：由已存在列中可能由数据，所以需要指定新增对应的数据<ul><li>手动输入一个值</li><li>类中定义一个默认值<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">size = models.IntegerField(default=<span class="number">1</span>)</span><br></pre></td></tr></table></figure></li><li>允许可以为空  <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">size = models.IntegerField(null=<span class="literal">True</span>, blank=<span class="literal">True</span>)</span><br></pre></td></tr></table></figure></li></ul></li></ul></li></ul><h3 id="对表中的数据进行操作"><a href="#对表中的数据进行操作" class="headerlink" title="对表中的数据进行操作"></a>对表中的数据进行操作</h3><ul><li><p>新建</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Department.objects.create(title=<span class="string">&quot;qwe&quot;</span>)</span><br></pre></td></tr></table></figure></li><li><p>删除</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Department.objects.<span class="built_in">filter</span>(<span class="built_in">id</span>=<span class="number">1</span>).delete()  <span class="comment"># 删除id为1</span></span><br><span class="line">Department.objects.<span class="built_in">all</span>().delete()  <span class="comment"># 删除表中所有数据</span></span><br></pre></td></tr></table></figure></li><li><p>获取数据<br>data_list = [行（对象），行（对象），行（对象）]     QuerySet类型</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">data_list = Department.objects.<span class="built_in">all</span>()   <span class="comment"># 获取所有数据</span></span><br><span class="line"><span class="keyword">for</span> obj <span class="keyword">in</span> data_list:</span><br><span class="line">    <span class="built_in">print</span>(obj.<span class="built_in">id</span>, obj.title)</span><br></pre></td></tr></table></figure></li><li><p>更新数据</p></li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Department.objects.<span class="built_in">all</span>().update(title=<span class="string">&quot;aaa&quot;</span>)  <span class="comment"># 更新所有</span></span><br><span class="line">Department.objects.<span class="built_in">filter</span>(<span class="built_in">id</span>=<span class="string">&quot;1&quot;</span>).update(title=<span class="string">&quot;aaa&quot;</span>)  <span class="comment"># 更新某行</span></span><br></pre></td></tr></table></figure><h4 id="案例：用户管理"><a href="#案例：用户管理" class="headerlink" title="案例：用户管理"></a>案例：用户管理</h4><ol><li>展示用户列表</li></ol><ul><li>url</li><li>函数<ul><li>获取所有用户数据</li><li>HTML渲染</li></ul></li></ul><img src="/2022/09/15/Django%E6%A1%86%E6%9E%B6/image-20230409202510634.png" class title="url.py"><img src="/2022/09/15/Django%E6%A1%86%E6%9E%B6/image-20230409202537403.png" class title="view.py和html的代码"><ol start="2"><li>添加用户列表</li></ol><ul><li>url</li><li>函数<ul><li>GET，看到页面，输入内容</li><li>POST，提交，写入数据库 </li></ul></li></ul><img src="/2022/09/15/Django%E6%A1%86%E6%9E%B6/image-20230409202622739.png" class><img src="/2022/09/15/Django%E6%A1%86%E6%9E%B6/image-20230409202646474.png" class><ol start="3"><li>删除用户</li></ol><ul><li>url</li><li><code>views.py</code>函数</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">info_delete</span>(<span class="params">request</span>):</span><br><span class="line">    nid = request.GET.get(<span class="string">&#x27;nid&#x27;</span>)</span><br><span class="line">    UserInfo.objects.<span class="built_in">filter</span>(<span class="built_in">id</span>=nid).delete()</span><br><span class="line">    <span class="keyword">return</span> HttpResponse(<span class="string">&quot;删除成功&quot;</span>)</span><br></pre></td></tr></table></figure><h4 id="用户管理界面"><a href="#用户管理界面" class="headerlink" title="用户管理界面"></a>用户管理界面</h4><p>进行优化，使得添加和删除在一个页面</p><ul><li><code>models.py</code></li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> django.db <span class="keyword">import</span> models</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">UserInfo</span>(models.Model):</span><br><span class="line">    name = models.CharField(max_length=<span class="number">32</span>)</span><br><span class="line">    password = models.CharField(max_length=<span class="number">64</span>)</span><br><span class="line">    age = models.IntegerField()</span><br></pre></td></tr></table></figure><ul><li><code>views.py</code></li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> django.shortcuts <span class="keyword">import</span> render, HttpResponse, redirect, redirect</span><br><span class="line"><span class="keyword">from</span> requests <span class="keyword">import</span> request</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> app01.models <span class="keyword">import</span> UserInfo</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">info_list</span>(<span class="params">request</span>):</span><br><span class="line">    <span class="comment"># 创建数据</span></span><br><span class="line">    <span class="comment"># UserInfo.objects.create(name=&quot;bkys&quot;, password=&quot;123&quot;, age=&quot;20&quot;)</span></span><br><span class="line">    <span class="comment"># 获取数据库中的所有用户信息</span></span><br><span class="line">    data_list = UserInfo.objects.<span class="built_in">all</span>()</span><br><span class="line">    <span class="built_in">print</span>(data_list)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> render(request, <span class="string">&quot;info_list.html&quot;</span>, &#123;<span class="string">&quot;data_list&quot;</span>: data_list&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">info_add</span>(<span class="params">request</span>):</span><br><span class="line">    <span class="keyword">if</span> request.method == <span class="string">&quot;GET&quot;</span>:</span><br><span class="line">        <span class="keyword">return</span> render(request, <span class="string">&quot;info_add.html&quot;</span>)</span><br><span class="line">    user = request.POST.get(<span class="string">&quot;user&quot;</span>)</span><br><span class="line">    pwd = request.POST.get(<span class="string">&quot;pwd&quot;</span>)</span><br><span class="line">    age = request.POST.get(<span class="string">&quot;age&quot;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 添加到数据库</span></span><br><span class="line">    UserInfo.objects.create(name=user, password=pwd, age=age)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 自动跳转</span></span><br><span class="line">    <span class="keyword">return</span> redirect(<span class="string">&quot;/info/list/&quot;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">info_delete</span>(<span class="params">request</span>):</span><br><span class="line">    nid = request.GET.get(<span class="string">&#x27;nid&#x27;</span>)</span><br><span class="line">    UserInfo.objects.<span class="built_in">filter</span>(<span class="built_in">id</span>=nid).delete()</span><br><span class="line">    <span class="keyword">return</span> redirect(<span class="string">&quot;/info/list/&quot;</span>)</span><br></pre></td></tr></table></figure><ul><li><code>info_add.html</code></li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>添加用户<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">method</span>=<span class="string">&quot;post&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    &#123;% csrf_token %&#125;</span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;user&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;用户名&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;pwd&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;密码&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;age&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;年龄&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">value</span>=<span class="string">&quot;提交&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li><code>info_list.html</code></li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>用户列表<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;/info/add/&quot;</span>&gt;</span>添加<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">table</span> <span class="attr">border</span>=<span class="string">&quot;1&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">thead</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">th</span>&gt;</span>id<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">th</span>&gt;</span>name<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">th</span>&gt;</span>pwd<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">th</span>&gt;</span>age<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">th</span>&gt;</span>操作<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">thead</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tbody</span>&gt;</span></span><br><span class="line">    &#123;% for obj in data_list %&#125;</span><br><span class="line">        <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span>&gt;</span>&#123;&#123; obj.id &#125;&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span>&gt;</span>&#123;&#123; obj.name &#125;&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span>&gt;</span>&#123;&#123; obj.pwd &#125;&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span>&gt;</span>&#123;&#123; obj.age &#125;&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;/info/delete/?nid=&#123;&#123; obj.id &#125;&#125;&quot;</span>&gt;</span>删除<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">    &#123;% endfor %&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">tbody</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li>如下所示</li></ul><img src="/2022/09/15/Django%E6%A1%86%E6%9E%B6/image-20230409202806250.png" class>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;安装django&quot;&gt;&lt;a href=&quot;#安装django&quot; class=&quot;headerlink&quot; title=&quot;安装django&quot;&gt;&lt;/a&gt;安装django&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;终端执行并安装django&lt;figure class=&quot;highlight sh</summary>
      
    
    
    
    <category term="Python篇" scheme="http://bkystop.github.io/categories/Python%E7%AF%87/"/>
    
    
    <category term="Python" scheme="http://bkystop.github.io/tags/Python/"/>
    
    <category term="Django" scheme="http://bkystop.github.io/tags/Django/"/>
    
  </entry>
  
  <entry>
    <title>Flsak框架</title>
    <link href="http://bkystop.github.io/2022/09/07/Flask%E6%A1%86%E6%9E%B6/"/>
    <id>http://bkystop.github.io/2022/09/07/Flask%E6%A1%86%E6%9E%B6/</id>
    <published>2022-09-07T13:41:09.000Z</published>
    <updated>2023-04-14T09:14:53.001Z</updated>
    
    <content type="html"><![CDATA[<h2 id="Flask快速开发网站"><a href="#Flask快速开发网站" class="headerlink" title="Flask快速开发网站"></a>Flask快速开发网站</h2><ol><li>终端执行以下命令，安装flask<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip3 install flask</span><br></pre></td></tr></table></figure></li></ol><img src="/2022/09/07/Flask%E6%A1%86%E6%9E%B6/image-20230407214144304.png" class><img src="/2022/09/07/Flask%E6%A1%86%E6%9E%B6/image-20230407214201860.png" class><ol start="2"><li>创建python文件夹，并且创建文件（文件名不为flask），以下以<code>web.py</code>为例</li></ol><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> flask <span class="keyword">import</span> Flask  <span class="comment"># 导入flask</span></span><br><span class="line"></span><br><span class="line">app = Flask(__name__)  <span class="comment"># Flsak 是一个类</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建了网址 /show/info 和函数 index 的对应关系</span></span><br><span class="line"><span class="comment"># 用户在浏览器访问网址 /show/info，网站自动执行函数 index</span></span><br><span class="line"><span class="meta">@app.route(<span class="params"><span class="string">&quot;/show/info&quot;</span></span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">index</span>():</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;bkys&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    app.run()</span><br></pre></td></tr></table></figure><ul><li>运行（不同版本运行出来不完全一致，大致相同即可）</li></ul><img src="/2022/09/07/Flask%E6%A1%86%E6%9E%B6/image-20230407214232779.png" class><ul><li>打开蓝色链接（此时更改网址为）</li></ul><img src="/2022/09/07/Flask%E6%A1%86%E6%9E%B6/image-20230407214253000.png" class title="image-20230407214253000"><ul><li>即可出现一个网站</li></ul><img src="/2022/09/07/Flask%E6%A1%86%E6%9E%B6/image-20230407214304747.png" class><ul><li>运行后不会自动结束，此时需要结束的话点击运行窗口左边的红色方框。</li></ul><h2 id="网站优化"><a href="#网站优化" class="headerlink" title="网站优化"></a>网站优化</h2><ul><li>当我们发送一个请求时候，网站给用户返回的本质是字符串，我们可以用标签修改字符串的格式，所以我们需要学习浏览器所能解析的标签，此时就可以控制页面的外观。</li><li>Flask框架为了让写标签方便，我们就可以把标签及字符串写入文件中，它会读取这个文件夹并返回。</li><li>在当前项目目录的创建templates文件夹，并在文件夹中创建index.html文件</li></ul><ol><li>修改<code>web.py</code>中代码为</li></ol><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> flask <span class="keyword">import</span> Flask,render_template  <span class="comment"># 导入flask</span></span><br><span class="line"></span><br><span class="line">app = Flask(__name__)  <span class="comment"># Flsak 是一个类</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建了网址 /show/info 和函数 index 的对应关系</span></span><br><span class="line"><span class="comment"># 用户在浏览器访问网址 /show/info，网站自动执行函数 index</span></span><br><span class="line"><span class="meta">@app.route(<span class="params"><span class="string">&quot;/show/info&quot;</span></span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">index</span>():</span><br><span class="line">    <span class="comment"># Flask内部会自动打开这个文件，并读取内容，将内容返回给用户</span></span><br><span class="line">    <span class="comment"># 默认：去当前项目目录的templates文件夹找</span></span><br><span class="line">    <span class="keyword">return</span> render_template(<span class="string">&quot;index.html&quot;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    app.run()</span><br><span class="line"></span><br></pre></td></tr></table></figure><ol start="2"><li><code>index.html</code>中内容为</li></ol><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span>bkys<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><ol start="3"><li>重新运行web.py<br>此时<code>&lt;h1&gt;</code>标签已经生效</li></ol><img src="/2022/09/07/Flask%E6%A1%86%E6%9E%B6/image-20230407214428970.png" class><ol start="4"><li>为了让网站更好看，我们就需要学习更多的标签<br>html详解</li></ol><ul><li><p> 编码格式</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span> </span><br></pre></td></tr></table></figure></li><li><p>title标签（每次修改后重新运行）</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">title</span>&gt;</span>我用python搭建的第一个网站<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br></pre></td></tr></table></figure></li></ul><img src="/2022/09/07/Flask%E6%A1%86%E6%9E%B6/image-20230407214456566.png" class><h3 id="网站请求"><a href="#网站请求" class="headerlink" title="网站请求"></a>网站请求</h3><blockquote><p> 在浏览器的url中写入一个地址，点击回车，访问<br>浏览器会发送数据过去，本质上发送的是字符串<br>GET /info http.1.1\r\n…….<br>POST  /info http.1.1\r\n…….</p></blockquote><ul><li>浏览器向发送请求时<ul><li>GET请求（url访问，表单提交）<br>现象：GET请求，跳转，向后台传入数据会拼接在url上，与url用？拼接。</li><li>POST请求（只能通过表单提交）<br>现象：提交数据不体现在url中，而是在请求体中。</li></ul></li></ul><h2 id="案例：用户注册"><a href="#案例：用户注册" class="headerlink" title="案例：用户注册"></a>案例：用户注册</h2><ul><li>创建项目</li><li>创建Flask代码</li></ul><p>页面上的数据，想要提交到后台：</p><ul><li>form标签内包裹的提交数据的标签<ul><li>提交方式：<code>method=&quot;get&quot;</code></li><li>提交的地址：<code>action=&quot;/xxxx/xxx&quot;</code></li><li>在form标签里还需要一个<code>submbit</code>来提交表单</li></ul></li><li>在form内的一些标签<ul><li>一定要写name属性<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">用户名：<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;uu&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">  密码：<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;password&quot;</span> <span class="attr">name</span>=<span class="string">&quot;pp&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure></li></ul></li></ul><h3 id="GET提交"><a href="#GET提交" class="headerlink" title="GET提交"></a>GET提交</h3><p><code>web.py</code></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> flask <span class="keyword">import</span> Flask,render_template,request</span><br><span class="line"></span><br><span class="line">app = Flask(__name__)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@app.route(<span class="params"><span class="string">&#x27;/register&#x27;</span>, methods=[<span class="string">&#x27;GET&#x27;</span>]</span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">reguister</span>():</span><br><span class="line">    <span class="keyword">return</span> render_template(<span class="string">&#x27;register.html&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="meta">@app.route(<span class="params"><span class="string">&quot;/do/reg&quot;</span>, methods=[<span class="string">&#x27;GET&#x27;</span>]</span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">do_register</span>():</span><br><span class="line">    <span class="comment"># 接收到用户通过GET形式发送过来的</span></span><br><span class="line">    <span class="built_in">print</span>(request.args)</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;注册成功&quot;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    app.run()</span><br></pre></td></tr></table></figure><p><code>register.html</code></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>注册登录<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h3</span>&gt;</span>注册登录<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">form</span> <span class="attr">method</span>=<span class="string">&quot;get&quot;</span> <span class="attr">action</span>=<span class="string">&quot;/do/reg&quot;</span>&gt;</span></span><br><span class="line">        用户名：<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;user&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">        密码：<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;password&quot;</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">value</span>=<span class="string">&quot;submit&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li>submit</li></ul><img src="/2022/09/07/Flask%E6%A1%86%E6%9E%B6/image-20230407214703937.png" class><ul><li>submit之后的url</li></ul><img src="/2022/09/07/Flask%E6%A1%86%E6%9E%B6/image-20230407214716076.png" class><p>若<code>web.py</code>做出以下修改</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@app.route(<span class="params"><span class="string">&quot;/do/reg&quot;</span>, methods=[<span class="string">&#x27;GET&#x27;</span>]</span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">do_register</span>():</span><br><span class="line">    <span class="comment"># 接收到用户通过GET形式发送过来的</span></span><br><span class="line">    <span class="built_in">print</span>(request.args)</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;注册成功&quot;</span></span><br></pre></td></tr></table></figure><p>在页面提交后，终端则可输出输入的用户名和密码</p><img src="/2022/09/07/Flask%E6%A1%86%E6%9E%B6/image-20230407214821112.png" class title="image-20230407214821112"><h3 id="POST提交"><a href="#POST提交" class="headerlink" title="POST提交"></a>POST提交</h3><p>修改<code>web.py</code></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> flask <span class="keyword">import</span> Flask,render_template,request</span><br><span class="line"></span><br><span class="line">app = Flask(__name__)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@app.route(<span class="params"><span class="string">&#x27;/register&#x27;</span>, methods=[<span class="string">&#x27;GET&#x27;</span>]</span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">reguister</span>():</span><br><span class="line">    <span class="keyword">return</span> render_template(<span class="string">&#x27;register.html&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="meta">@app.route(<span class="params"><span class="string">&quot;/post/reg&quot;</span>, methods=[<span class="string">&#x27;POST&#x27;</span>]</span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">post_register</span>():</span><br><span class="line">    <span class="comment"># 接收到用户通过POST形式发送过来的</span></span><br><span class="line">    <span class="built_in">print</span>(request.form)</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;注册成功&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    app.run()</span><br></pre></td></tr></table></figure><p>修改 <code>register.html</code>中</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">method</span>=<span class="string">&quot;post&quot;</span> <span class="attr">action</span>=<span class="string">&quot;/post/reg&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li>submit之后的url</li></ul><img src="/2022/09/07/Flask%E6%A1%86%E6%9E%B6/image-20230407214846100.png" class title="image-20230407214846100"><ul><li>终端终端返回用户名和密码</li></ul><img src="/2022/09/07/Flask%E6%A1%86%E6%9E%B6/image-20230407214855834.png" class title="image-20230407214855834"><h2 id="css"><a href="#css" class="headerlink" title="css"></a>css</h2><p>CSS (Cascading Style Sheets，层叠样式表），css是专门用来美化“标签”。，是一种用来为结构化文档（如 HTML 文档）添加样式（字体、间距和颜色等）的计算机语言。</p><ul><li>学习目标一：学习基础css，可以写简单页面和看懂别人的并进行修改。</li><li>使用模块，调整和修改。</li></ul><h3 id="应用css的几种方式"><a href="#应用css的几种方式" class="headerlink" title="应用css的几种方式"></a>应用css的几种方式</h3><p><strong>其中主要使用的为2，3种应用较多</strong></p><ol><li>可以直接写在html标签上</li><li>也可以在html中的head标签上写style（样式）标签</li><li>写到文件中去，<code>comom.css</code>即为我们的样式文件</li></ol><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">href</span>=<span class="string">&quot;common.css&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="在flask中应用"><a href="#在flask中应用" class="headerlink" title="在flask中应用"></a>在flask中应用</h3><ul><li>在flask框架中开发不方便<ul><li>每次都需要重启</li><li>规定有些文件需要放在特定文件夹</li><li>新创建一个页面的时候就需要在python文件中添加函数和html文件</li></ul></li><li>解决方案：在pycharm中，为我们提供了一种非常便捷开发前端页面的工具，当我们写好之后再放入相应的位置，进行集成。</li><li>在html文件的右上角点击相应的浏览器即可查看效果。</li></ul><img src="/2022/09/07/Flask%E6%A1%86%E6%9E%B6/image-20230407215007905.png" class><h3 id="页面布局"><a href="#页面布局" class="headerlink" title="页面布局"></a>页面布局</h3><ul><li>对于初学者，页面布局是一个很大的问题，往往不知道怎么布局。此时就需要借鉴，查看，分析别人的样式。</li></ul><ol><li>在浏览中使用<code>&lt;F12&gt;</code>查看页面源代码</li><li>点击如图所示位置，此时可以用光标在页面选择自己需要看的部分(以chrome浏览器为例)</li></ol><img src="/2022/09/07/Flask%E6%A1%86%E6%9E%B6/image-20230407215045424.png" class><ol start="3"><li>光标点击后，源代码即展现在右侧框内</li><li>分析别人的布局，样式，进行划分</li></ol><h3 id="模板-CSS-构建页面"><a href="#模板-CSS-构建页面" class="headerlink" title="模板+CSS+构建页面"></a>模板+CSS+构建页面</h3><ul><li>HTML标签<blockquote><p>固定格式，记住不同标签的效果，熟练使用<br>h /div /span /a /img /ul /li /table /input /form</p></blockquote></li><li>CSS样式<blockquote><p>引用CSS，进行页面划分，再去填充样式<br>高度 /宽度 /块级 /行内 /浮动 /字体 /文字对齐方式 /内边距 /外边距</p></blockquote></li></ul><h4 id="小技巧"><a href="#小技巧" class="headerlink" title="小技巧"></a>小技巧</h4><ul><li>a标签是行内标签，行内标签的高度，内外边距，默认无效，要进行转换。</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">style</span>=<span class="string">&quot;margin-top:22px;display:inline-block&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li>垂直方向居中<ul><li>本文+line-height</li><li>图片+边距</li></ul></li><li>a标签链接后默认有下划线<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.a</span> &#123;</span><br><span class="line"><span class="attribute">text-decoration</span>:none;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li>鼠标放上去之后hover</li></ul><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.c1</span><span class="selector-pseudo">:hover</span>&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">a</span>:hovwe&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>设置透明度,数字可自由设置</li></ul><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">opacity</span>:<span class="number">0.5</span>;  </span><br></pre></td></tr></table></figure><ul><li>hover</li><li> after</li><li>position</li></ul><ol><li>fixed</li></ol><p>固定在窗口的某个位置。</p><ul><li><p>relative和absolute 一般是一起使用，相对的放在旁边</p></li><li><p>boder可以修改边框</p></li><li><p>background-color背景色</p></li></ul><h4 id="注意：以上不是所有css样式"><a href="#注意：以上不是所有css样式" class="headerlink" title="注意：以上不是所有css样式"></a>注意：以上不是所有css样式</h4><ul><li>我们大致了解了页面的样式和标签，具体的所有布局<a href="https://v3.bootcss.com/css/">全局 CSS 样式</a> 之后根据不同模板进行修改即可</li></ul><h4 id="BootStrap"><a href="#BootStrap" class="headerlink" title="BootStrap"></a>BootStrap</h4><ul><li>是别人帮我们已经写好的CSS样式，如果我们想要使用这个BootStrap </li></ul><ol><li>下载BootStrap<ul><li><a href="https://v3.bootcss.com/">BootStrap下载</a></li></ul></li></ol><img src="/2022/09/07/Flask%E6%A1%86%E6%9E%B6/image-20230407215205338.png" class><ol start="2"><li>使用<ul><li>在页面上引入BootStrap</li><li>编写HTML时候，按照BootStrap的规定编写+自定义</li><li>先创建一个目录结构，如下所示，并将插件的包解压缩后放入plugins中，解压缩后将目录改名称为bootstrap5，放在你的网站目录，例如static目录下，之所以改名是为了书写的时候简单。</li></ul></li></ol><img src="/2022/09/07/Flask%E6%A1%86%E6%9E%B6/image-20230407215223479.png" class><ul><li>代码如下</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--  引入开发版本  --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">href</span>=<span class="string">&quot;/static/plugins/bootstrap5/css/bootstrap.css&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">value</span>=<span class="string">&quot;提交&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">value</span>=<span class="string">&quot;提交&quot;</span> <span class="attr">class</span>=<span class="string">&quot;btn btn-primary&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">value</span>=<span class="string">&quot;提交&quot;</span> <span class="attr">class</span>=<span class="string">&quot;btn btn-success&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">value</span>=<span class="string">&quot;提交&quot;</span> <span class="attr">class</span>=<span class="string">&quot;btn btn-danger&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li>运行效果如下，此时我们就已经应用了BootStrap中的样式</li></ul><img src="/2022/09/07/Flask%E6%A1%86%E6%9E%B6/image-20230407215243540.png" class><h2 id="Bootstrap的使用及案例"><a href="#Bootstrap的使用及案例" class="headerlink" title="Bootstrap的使用及案例"></a>Bootstrap的使用及案例</h2><p><strong>注意这里我们使用的是Bootstrap3</strong><br>进入<a href="https://v3.bootcss.com/css/">Bootstrap3使用手册</a></p><ul><li>先将样式表导入</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">href</span>=<span class="string">&quot;/static/plugins/bootstrap3/css/bootstrap.css&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="导航条"><a href="#导航条" class="headerlink" title="导航条"></a>导航条</h3><ul><li>进入Bootstrap3使用手册,点击组件，然后右边找到导航条，复制这一串代码，粘贴到body标签内</li></ul><img src="/2022/09/07/Flask%E6%A1%86%E6%9E%B6/image-20230407215349579.png" class><ul><li>即可得到如下效果</li></ul><img src="/2022/09/07/Flask%E6%A1%86%E6%9E%B6/image-20230407215405436.png" class><h3 id="栅格系统"><a href="#栅格系统" class="headerlink" title="栅格系统"></a>栅格系统</h3><p><a href="https://v3.bootcss.com/css/#grid">https://v3.bootcss.com/css/#grid</a></p><ul><li>把整体划分了12格</li><li>分类</li></ul><ol><li>  非响应式<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;col-xs-6&quot;</span> <span class="attr">style</span>=<span class="string">&quot;background-color: red&quot;</span>&gt;</span>1<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;col-xs-6&quot;</span> <span class="attr">style</span>=<span class="string">&quot;background-color: green&quot;</span>&gt;</span>2<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure></li></ol><p>特点：无论如何修改页面大小，其相对不变</p><img src="/2022/09/07/Flask%E6%A1%86%E6%9E%B6/image-20230407215425910.png" class><ol start="2"><li>响应式</li></ol><p>后面三个为响应式 </p><img src="/2022/09/07/Flask%E6%A1%86%E6%9E%B6/image-20230407215437077.png" class><p>特点：当屏幕宽度不同，会做出不同的响应</p><img src="/2022/09/07/Flask%E6%A1%86%E6%9E%B6/image-20230407215448144.png" class><img src="/2022/09/07/Flask%E6%A1%86%E6%9E%B6/image-20230407215454601.png" class><ul><li>列偏移</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;col-sm-offset-2 col-lg-6&quot;</span> <span class="attr">style</span>=<span class="string">&quot;background-color: red&quot;</span>&gt;</span>1<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><img src="/2022/09/07/Flask%E6%A1%86%E6%9E%B6/image-20230407215509631.png" class><h3 id="container"><a href="#container" class="headerlink" title="container"></a>container</h3><ul><li>自己写网站的时候，前端页面的修改不可避免。无论用什么框架，都无法避免要用到container。在h5出现之前，我们用的最频繁的html标签是div，span等，可以看到目前主流的css框架，比如bootstrap，用到这样的语义化标识，container是为了分块，更好的设计。</li></ul><img src="/2022/09/07/Flask%E6%A1%86%E6%9E%B6/image-20230407215605393.png" class><ul><li><p>加上container会居中显示， container-fluid会平铺</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;container&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;col-lg-9&quot;</span>&gt;</span>left<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;col-lg-3&quot;</span>&gt;</span>right<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>效果如下</p></li></ul><img src="/2022/09/07/Flask%E6%A1%86%E6%9E%B6/image-20230407215643877.png" class><h3 id="面板"><a href="#面板" class="headerlink" title="面板"></a>面板</h3><ul><li>以下面板即用了Bootstrap的导航和栅格系统，面板，媒体对象，分页进行构建的</li></ul><img src="/2022/09/07/Flask%E6%A1%86%E6%9E%B6/image-20230407215655660.png" class><h3 id="案例"><a href="#案例" class="headerlink" title="案例"></a>案例</h3><ul><li>通过Bootstrap的组件和css进行实现，主要用使用有面板，表格，表单等。</li></ul><h3 id="登录"><a href="#登录" class="headerlink" title="登录"></a>登录</h3><img src="/2022/09/07/Flask%E6%A1%86%E6%9E%B6/image-20230407215743993.png" class><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>用户登录<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">href</span>=<span class="string">&quot;/static/plugins/bootstrap3/css/bootstrap.css&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.acount</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">width</span>: <span class="number">400px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">border</span>: <span class="number">1px</span> solid <span class="number">#ddd</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">box-shadow</span>: <span class="number">5px</span> <span class="number">5px</span> <span class="number">5px</span> <span class="number">#aaa</span>;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">            <span class="attribute">margin-left</span>: auto;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">margin-right</span>: auto;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">margin-top</span>: <span class="number">100px</span>;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">            <span class="attribute">padding</span>: <span class="number">20px</span> <span class="number">30px</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.acount</span> <span class="selector-tag">h1</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">text-align</span>: center;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">    </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;acount&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h2</span>&gt;</span>用户登录<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">form</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;form-group&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">&quot;exampleInputEmail1&quot;</span>&gt;</span>用户名<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;email&quot;</span> <span class="attr">class</span>=<span class="string">&quot;form-control&quot;</span> <span class="attr">id</span>=<span class="string">&quot;exampleInputEmail1&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;用户名&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;form-group&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">&quot;exampleInputPassword1&quot;</span>&gt;</span>密码<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;password&quot;</span> <span class="attr">class</span>=<span class="string">&quot;form-control&quot;</span> <span class="attr">id</span>=<span class="string">&quot;exampleInputPassword1&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;密码&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">class</span>=<span class="string">&quot;btn btn-primary&quot;</span>&gt;</span>登录<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="后台管理"><a href="#后台管理" class="headerlink" title="后台管理"></a>后台管理</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>后台管理<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">href</span>=<span class="string">&quot;/static/plugins/bootstrap3/css/bootstrap.css&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;navbar navbar-default&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;container&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;navbar-header&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">class</span>=<span class="string">&quot;navbar-toggle collapsed&quot;</span> <span class="attr">data-toggle</span>=<span class="string">&quot;collapse&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">data-target</span>=<span class="string">&quot;#bs-example-navbar-collapse-1&quot;</span> <span class="attr">aria-expanded</span>=<span class="string">&quot;false&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;sr-only&quot;</span>&gt;</span>Toggle navigation<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;icon-bar&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;icon-bar&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;icon-bar&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">&quot;navbar-brand&quot;</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>xxx系统<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;collapse navbar-collapse&quot;</span> <span class="attr">id</span>=<span class="string">&quot;bs-example-navbar-collapse-1&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">ul</span> <span class="attr">class</span>=<span class="string">&quot;nav navbar-nav&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>Link<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>Link<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"></span><br><span class="line">            <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">            <span class="tag">&lt;<span class="name">ul</span> <span class="attr">class</span>=<span class="string">&quot;nav navbar-nav navbar-right&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>登录<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>注册<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;container&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;panel panel-default&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;panel-heading&quot;</span>&gt;</span>表单区域<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;panel-body&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">form</span> <span class="attr">class</span>=<span class="string">&quot;form-inline&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;form-group&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">label</span> <span class="attr">class</span>=<span class="string">&quot;sr-only&quot;</span> <span class="attr">for</span>=<span class="string">&quot;exampleInputEmail3&quot;</span>&gt;</span>Email address<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;email&quot;</span> <span class="attr">class</span>=<span class="string">&quot;form-control&quot;</span> <span class="attr">id</span>=<span class="string">&quot;exampleInputEmail3&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;Email&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;form-group&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">label</span> <span class="attr">class</span>=<span class="string">&quot;sr-only&quot;</span> <span class="attr">for</span>=<span class="string">&quot;exampleInputPassword3&quot;</span>&gt;</span>Password<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;password&quot;</span> <span class="attr">class</span>=<span class="string">&quot;form-control&quot;</span> <span class="attr">id</span>=<span class="string">&quot;exampleInputPassword3&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;Password&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">class</span>=<span class="string">&quot;btn btn-success&quot;</span>&gt;</span>保存<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;panel panel-default&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;panel-heading&quot;</span>&gt;</span>数据列表<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;panel-body&quot;</span>&gt;</span></span><br><span class="line">            以下是数据</span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">table</span> <span class="attr">class</span>=<span class="string">&quot;table table-bordered table-hover&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">thead</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">th</span>&gt;</span>#<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">th</span>&gt;</span>First Name<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">th</span>&gt;</span>Last Name<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">th</span>&gt;</span>操作<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">thead</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">tbody</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">th</span> <span class="attr">scope</span>=<span class="string">&quot;row&quot;</span>&gt;</span>1<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">td</span>&gt;</span>Mark<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">td</span>&gt;</span>Otto<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">td</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">&quot;btn-primary btn-xs&quot;</span>&gt;</span>编辑<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">&quot;btn-danger btn-xs&quot;</span>&gt;</span>删除<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">th</span> <span class="attr">scope</span>=<span class="string">&quot;row&quot;</span>&gt;</span>2<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">td</span>&gt;</span>Jacob<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">td</span>&gt;</span>Thornton<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">td</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">&quot;btn-primary btn-xs&quot;</span>&gt;</span>编辑<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">&quot;btn-danger btn-xs&quot;</span>&gt;</span>删除<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">th</span> <span class="attr">scope</span>=<span class="string">&quot;row&quot;</span>&gt;</span>3<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">td</span>&gt;</span>Larry<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">td</span>&gt;</span>the Bird<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">td</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">&quot;btn-primary btn-xs&quot;</span>&gt;</span>编辑<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">&quot;btn-danger btn-xs&quot;</span>&gt;</span>删除<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">tbody</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">ul</span> <span class="attr">class</span>=<span class="string">&quot;pagination&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span> <span class="attr">aria-label</span>=<span class="string">&quot;Previous&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">span</span> <span class="attr">aria-hidden</span>=<span class="string">&quot;true&quot;</span>&gt;</span>«<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>1<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>2<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>3<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>4<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>5<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span> <span class="attr">aria-label</span>=<span class="string">&quot;Next&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">span</span> <span class="attr">aria-hidden</span>=<span class="string">&quot;true&quot;</span>&gt;</span>»<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="图标"><a href="#图标" class="headerlink" title="图标"></a>图标</h3><ul><li>我们使用<a href="http://www.fontawesome.com.cn/">fontawesome</a><ul><li>下载</li><li>引入</li><li>使用</li></ul></li></ul><h3 id="jQuery类库"><a href="#jQuery类库" class="headerlink" title="jQuery类库"></a>jQuery类库</h3><ul><li>html就像是骨架，而css进行点缀达到好看的效果，JavaScript就是动态，可以交互。</li><li>bootstrap依赖JavaScript的一个叫jQuery的类库</li></ul><p><a href="https://jquery.com/download/">jQuery</a> 下载文件</p><img src="/2022/09/07/Flask%E6%A1%86%E6%9E%B6/image-20230407215918571.png" class><ul><li>如图目录存放</li></ul><img src="/2022/09/07/Flask%E6%A1%86%E6%9E%B6/image-20230407215930896.png" class><ul><li>导入两个JavaScript文件,先导入jQuery，再导入bootstrap</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;static/js/jquery-3.6.1.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;static/plugins/bootstrap3/js/bootstrap.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><p>此时bootstrap中的动态效果即可使用</p><h2 id="JavaScript基础"><a href="#JavaScript基础" class="headerlink" title="JavaScript基础"></a>JavaScript基础</h2><ul><li>JavaScript 是一门编程语言。浏览器就是JavaScript语言的解释器。</li><li>DOM和BOM，相当于编程语言内置的一些模块。python中的re，random之类</li><li>jquery相当于编程语言的第三方模块。例如request是，openpyxl。</li></ul><ul><li>JavaScript就是让程序实现一些动态的效果。<ul><li>点击出现弹出<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.menus</span>&#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">width</span>: <span class="number">200px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">border</span>: <span class="number">1px</span> solid red;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.menus</span> <span class="selector-class">.header</span>&#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">background-color</span>: gold;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">padding</span>: <span class="number">20px</span> <span class="number">10px</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">    </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;menus&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;header&quot;</span> <span class="attr">onclick</span>=<span class="string">&quot;myFunc()&quot;</span>&gt;</span>大标题<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;item&quot;</span>&gt;</span>内容<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">function</span> <span class="title function_">myFunc</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">//alert(&quot;hello&quot;);</span></span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">confirm</span>(<span class="string">&quot;yes or no&quot;</span>)</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure></li></ul></li></ul><h3 id="代码位置"><a href="#代码位置" class="headerlink" title="代码位置"></a>代码位置</h3><ul><li>推荐放到位置2，HTML页面是从上到下逐一进行解析的，如果放在上面 它会先执行js，把JavaScript的执行完才能显示页面，如果JavaScript比较耗时，会长时间无法显示页面，写在后面则是先展示页面。</li></ul><img src="/2022/09/07/Flask%E6%A1%86%E6%9E%B6/image-20230407220210986.png" class><h3 id="js代码的存在形式"><a href="#js代码的存在形式" class="headerlink" title="js代码的存在形式"></a>js代码的存在形式</h3><ul><li>可以写在当前HTML文件中，也可以单独写在一个文件中进行导入。 </li><li>文件创建在static中，以<code>.js</code>为后缀,一般导入的位置也放在后面。</li></ul><h3 id="注释"><a href="#注释" class="headerlink" title="注释"></a>注释</h3><ul><li>HTML的注释<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 注释--&gt;</span></span><br></pre></td></tr></table></figure></li><li>css的注释，<code>style</code>代码块中<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/* 注释 */</span><br></pre></td></tr></table></figure></li><li>JavaScript的注释，<code>script</code>代码块中<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">// 注释</span><br><span class="line">/* 注释 */</span><br></pre></td></tr></table></figure></li></ul><h3 id="变量"><a href="#变量" class="headerlink" title="变量"></a>变量</h3><p>JavaScript也是一门编程语言，也有变量。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;script type=<span class="string">&quot;text/javascript&quot;</span>&gt;</span><br><span class="line">    <span class="keyword">var</span> name = <span class="string">&quot;bkys&quot;</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(name) <span class="comment">//打印</span></span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><h3 id="字符串类型"><a href="#字符串类型" class="headerlink" title="字符串类型"></a>字符串类型</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 声明</span></span><br><span class="line"><span class="keyword">var</span> name = <span class="string">&quot;bkys&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> name = <span class="string">&quot;bkys&quot;</span>;</span><br></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 常见功能</span></span><br><span class="line"><span class="keyword">var</span> name = <span class="string">&quot;bkys&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> v1 = name.<span class="property">lenth</span>;  <span class="comment">// 获取字符串长度</span></span><br><span class="line"><span class="keyword">var</span> v2 = name[<span class="number">0</span>]  <span class="comment">// 获取name字符串的第一个字</span></span><br><span class="line"><span class="keyword">var</span> v3 = name.<span class="title function_">trim</span>();  <span class="comment">//  去除空白</span></span><br><span class="line"><span class="keyword">var</span> v3 = name.<span class="title function_">substring</span>(<span class="number">2</span>);  <span class="comment">//前取后不取</span></span><br></pre></td></tr></table></figure><h4 id="案例：跑马灯"><a href="#案例：跑马灯" class="headerlink" title="案例：跑马灯"></a>案例：跑马灯</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>跑马灯<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">span</span> <span class="attr">id</span>=<span class="string">&quot;txt&quot;</span>&gt;</span>欢迎光临<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">function</span> <span class="title function_">show</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// 1.去HTML中找到标签并获取它的内容（DOM）</span></span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">var</span> tag = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;txt&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">var</span> dataString = tag.<span class="property">innerText</span>;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// 动态起来，把第一个放在最后面</span></span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">var</span> firstChar = dataString[<span class="number">0</span>];</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">var</span> otherString = dataString.<span class="title function_">substring</span>(<span class="number">1</span>, dataString.<span class="property">length</span>);</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">var</span> newText = otherString + firstChar;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// 在HTML中更新</span></span></span><br><span class="line"><span class="language-javascript">            tag.<span class="property">innerText</span> = newText;</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">//JavaScript中的定时器,每500ms执行一次</span></span></span><br><span class="line"><span class="language-javascript">        <span class="built_in">setInterval</span>(show,<span class="number">500</span>)</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="数组"><a href="#数组" class="headerlink" title="数组"></a>数组</h2><ul><li><p>定义</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> v1 = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>];</span><br><span class="line"><span class="keyword">var</span> v2 = <span class="title class_">Array</span>(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>);</span><br></pre></td></tr></table></figure></li><li><p>操作</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> v1 = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>];</span><br><span class="line"></span><br><span class="line">v1[<span class="number">1</span>]  </span><br><span class="line">v[<span class="number">0</span>] = <span class="string">&quot;2&quot;</span>;  <span class="comment">// 修改</span></span><br><span class="line">v1.<span class="title function_">push</span>(<span class="string">&quot;5&quot;</span>);  <span class="comment">// 尾部追加</span></span><br><span class="line">v1.<span class="title function_">unshift</span>(<span class="string">&quot;0&quot;</span>);  <span class="comment">// 前面追加</span></span><br><span class="line">v1.<span class="title function_">splice</span>(索引位置,<span class="number">0</span>,元素); <span class="comment">// 把元素放在索引的位置</span></span><br><span class="line"></span><br><span class="line">v1.<span class="title function_">pop</span>(); <span class="comment">// 尾部删除</span></span><br><span class="line">v1.<span class="title function_">shift</span>(); <span class="comment">//头部删除 </span></span><br><span class="line">v1.<span class="title function_">splice</span>(索引位置,<span class="number">1</span>);  <span class="comment">// 指定位置删除</span></span><br><span class="line"></span><br></pre></td></tr></table></figure></li><li><p>循环</p></li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> v1 = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>];</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> idx <span class="keyword">in</span> v1) &#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">var</span> i=<span class="number">0</span>; i&lt;v1.<span class="property">lenth</span>; i++) &#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>跳出循环<br>break和continue</li></ul><h4 id="案例：动态数据"><a href="#案例：动态数据" class="headerlink" title="案例：动态数据"></a>案例：动态数据</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>动态创建数据<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">ul</span> <span class="attr">id</span>=<span class="string">&quot;city&quot;</span>&gt;</span></span><br><span class="line">    </span><br><span class="line"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">//发送网络请求，获取数据，显示在页面上</span></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">var</span> cityList = [<span class="string">&quot; 北京&quot;</span>, <span class="string">&quot;上海&quot;</span>, <span class="string">&quot;深圳&quot;</span>];</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">for</span>(<span class="keyword">var</span> idx <span class="keyword">in</span> cityList)&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">var</span> text = cityList[idx];</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">//创建li标签</span></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">var</span> tag = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&quot;li&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 在li标签中写入内容</span></span></span><br><span class="line"><span class="language-javascript">        tag.<span class="property">innerText</span> = text;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">var</span> parentTag = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;city&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">        parentTag.<span class="title function_">append</span>(tag);</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">    </span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span> </span><br></pre></td></tr></table></figure><h3 id="对象"><a href="#对象" class="headerlink" title="对象"></a>对象</h3><ul><li>类似python中的字典</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">info = &#123;</span><br><span class="line"><span class="attr">name</span>:<span class="string">&quot;bkys&quot;</span>,</span><br><span class="line"><span class="attr">age</span>:<span class="number">18</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 操作值</span></span><br><span class="line">info.<span class="property">age</span></span><br><span class="line">info.<span class="property">name</span> = <span class="string">&quot;bkys&quot;</span></span><br><span class="line"></span><br><span class="line">info[<span class="string">&quot;age&quot;</span>]</span><br><span class="line">info[<span class="string">&quot;name&quot;</span>] = <span class="string">&quot;bkys&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">delete</span> info[<span class="string">&quot;age&quot;</span>] </span><br></pre></td></tr></table></figure><ul><li>循环</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">info = &#123;</span><br><span class="line"><span class="attr">name</span>:<span class="string">&quot;bkys&quot;</span>,</span><br><span class="line"><span class="attr">age</span>:<span class="number">18</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">var</span> key <span class="keyword">in</span> info)&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="动态表格"><a href="#动态表格" class="headerlink" title="动态表格"></a>动态表格</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line">&lt;!<span class="variable constant_">DOCTYPE</span> html&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>动态表格<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">table</span> <span class="attr">border</span>=<span class="string">&quot;1&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">thead</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">th</span>&gt;</span>id<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">th</span>&gt;</span>name<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">th</span>&gt;</span>age<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">thead</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">tbody</span> <span class="attr">id</span>=<span class="string">&quot;body&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">tbody</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">table</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="comment">//发送网络请求，获取数据，显示在页面上</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">var</span> datalist = [</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#123;<span class="attr">id</span>: <span class="number">1</span>, <span class="attr">name</span>: <span class="string">&quot;bkys&quot;</span>, <span class="attr">age</span>: <span class="number">19</span>&#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#123;<span class="attr">id</span>: <span class="number">1</span>, <span class="attr">name</span>: <span class="string">&quot;bkys&quot;</span>, <span class="attr">age</span>: <span class="number">19</span>&#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#123;<span class="attr">id</span>: <span class="number">1</span>, <span class="attr">name</span>: <span class="string">&quot;bkys&quot;</span>, <span class="attr">age</span>: <span class="number">19</span>&#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#123;<span class="attr">id</span>: <span class="number">1</span>, <span class="attr">name</span>: <span class="string">&quot;bkys&quot;</span>, <span class="attr">age</span>: <span class="number">19</span>&#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    ];</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">for</span> (<span class="keyword">var</span> idx <span class="keyword">in</span> datalist) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="keyword">var</span> info = datalist[idx];</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="keyword">var</span> tr = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&quot;tr&quot;</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="keyword">for</span> (<span class="keyword">var</span> key <span class="keyword">in</span> info) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="keyword">var</span> text = info[key];</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="keyword">var</span> td = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&#x27;td&#x27;</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            td.<span class="property">innerText</span> = text;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            tr.<span class="title function_">appendChild</span>(td);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="keyword">var</span> bodyTag = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;body&quot;</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        bodyTag.<span class="title function_">appendChild</span>(tr);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span></span><br></pre></td></tr></table></figure><h3 id="条件语句"><a href="#条件语句" class="headerlink" title="条件语句"></a>条件语句</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (条件) &#123;</span><br><span class="line"></span><br><span class="line">&#125; <span class="keyword">else</span>&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (条件) &#123;</span><br><span class="line"></span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span>&#123;</span><br><span class="line"></span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span>&#123;</span><br><span class="line"></span><br><span class="line">&#125;<span class="keyword">else</span>&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="函数"><a href="#函数" class="headerlink" title="函数"></a>函数</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">func</span>(<span class="params"></span>)&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">func</span>()</span><br></pre></td></tr></table></figure><h3 id="DOM"><a href="#DOM" class="headerlink" title="DOM"></a>DOM</h3><p>DOM，就是一个模块，基于这个模块，可以对HTML中的标签进行操作</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//根据id获取标签</span></span><br><span class="line"><span class="keyword">var</span> tag = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;xx&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 获取标签中的文本</span></span><br><span class="line">tag.<span class="property">innerText</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 修改标签中的文本</span></span><br><span class="line">tag.<span class="property">innerText</span> = <span class="string">&quot;bkys&quot;</span>;</span><br></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 创建标签</span></span><br><span class="line"><span class="keyword">var</span> tag = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&#x27;td&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 标签写内容</span></span><br><span class="line">tag.<span class="property">innerText</span> = <span class="string">&quot;bkys&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 将newtag写入tag</span></span><br><span class="line">tag.<span class="title function_">appendChild</span>(newtag);</span><br></pre></td></tr></table></figure><h4 id="事件的绑定"><a href="#事件的绑定" class="headerlink" title="事件的绑定"></a>事件的绑定</h4><ul><li>单击添加和双击添加</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>点击添加<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">value</span>=<span class="string">&quot;单击点击添加&quot;</span> <span class="attr">onclick</span>=<span class="string">&quot;addCityInfo()&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">value</span>=<span class="string">&quot;双击点击添加&quot;</span> <span class="attr">ondblclick</span>=<span class="string">&quot;addCityInfo()&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">ul</span> <span class="attr">id</span>=<span class="string">&quot;city&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">function</span>  <span class="title function_">addCityInfo</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">var</span> newtag = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&quot;li&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">        newtag.<span class="property">innerText</span> = <span class="string">&quot;bkys&quot;</span>;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">var</span> parentTag = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;city&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">        parentTag.<span class="title function_">appendChild</span>(newtag);</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="输入内容添加"><a href="#输入内容添加" class="headerlink" title="输入内容添加"></a>输入内容添加</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>动态表格<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;请输入内容&quot;</span> <span class="attr">id</span>=<span class="string">&quot;txt&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">value</span>=<span class="string">&quot;单击点击添加&quot;</span> <span class="attr">onclick</span>=<span class="string">&quot;addCityInfo()&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">ul</span> <span class="attr">id</span>=<span class="string">&quot;city&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">function</span> <span class="title function_">addCityInfo</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 先获取输入框用户输入的数据</span></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">var</span> txt = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;txt&quot;</span>);</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 读取标签的内容</span></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">var</span> newString = txt.<span class="property">value</span>;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 判断字符串是否为零</span></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">if</span>(newString.<span class="property">length</span> &gt; <span class="number">0</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// 创建标签</span></span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">var</span> newtag = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&quot;li&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">            newtag.<span class="property">innerText</span> = newString;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// 把标签添加到ul中</span></span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">var</span> parentTag = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;city&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">            parentTag.<span class="title function_">appendChild</span>(newtag);</span></span><br><span class="line"><span class="language-javascript">        &#125;<span class="keyword">else</span>&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="title function_">alert</span>(<span class="string">&quot;输入不能为空&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li><strong>注意：DOM中还有很多操做。但是比较繁琐，我们页面中的效果一般都是用jQuery，以后包括vue.js  / react.js</strong></li></ul><h2 id="jQuery类库-1"><a href="#jQuery类库-1" class="headerlink" title="jQuery类库"></a>jQuery类库</h2><p> jQuery是一个JavaScript第三方模块</p><ul><li>基于jQuery，自己开发一个功能。</li><li>现成的工具，依赖jQuery。例如：bootstrap动态效果。</li></ul><h3 id="快速上手"><a href="#快速上手" class="headerlink" title="快速上手"></a>快速上手</h3><ul><li><p>下载jQuery<br><a href="https://jquery.com/download/">jQuery下载</a> 文件</p></li><li><p>应用jQuery</p></li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">h1</span> <span class="attr">id</span>=<span class="string">&quot;txt&quot;</span>&gt;</span>中国联通<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;static/js/jquery-3.6.1.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">//利用jQuery实现某些功能</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">//找到id=txt的标签</span></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">//内容修改</span></span></span><br><span class="line"><span class="language-javascript">        $(<span class="string">&quot;#txt&quot;</span>).<span class="title function_">text</span>(<span class="string">&quot;广西联通&quot;</span>)</span></span><br><span class="line"><span class="language-javascript">        </span></span><br><span class="line"><span class="language-javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="寻找标签"><a href="#寻找标签" class="headerlink" title="寻找标签"></a>寻找标签</h3><p>直接寻找</p><ul><li>id<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">h1</span> <span class="attr">id</span>=<span class="string">&quot;txt&quot;</span>&gt;</span>bkys<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>bkys<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>bkys<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br></pre></td></tr></table></figure></li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">&quot;#txt&quot;</span>)</span><br></pre></td></tr></table></figure><ul><li>样式选择器<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">h1</span> <span class="attr">class</span>=<span class="string">&quot;c1&quot;</span>&gt;</span>bkys<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h1</span> <span class="attr">class</span>=<span class="string">&quot;c2&quot;</span>&gt;</span>bkys<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>bkys<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br></pre></td></tr></table></figure></li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">&quot;.c1&quot;</span>)</span><br></pre></td></tr></table></figure><ul><li>标签选择器</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">h1</span> <span class="attr">class</span>=<span class="string">&quot;c1&quot;</span>&gt;</span>bkys<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span>bkys<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>bkys<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">&quot;h1&quot;</span>)</span><br></pre></td></tr></table></figure><ul><li>层级选择器<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// c1下的c2中的a标签</span></span><br><span class="line">$(<span class="string">&quot;.c1 .c2 a&quot;</span>)</span><br></pre></td></tr></table></figure></li><li>多选择器<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">&quot;#c1, #c3, li&quot;</span>)</span><br></pre></td></tr></table></figure></li><li>属性选择器<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span>, <span class="attr">name</span>=<span class="string">&quot;n1&quot;</span>&gt;</span>    </span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span>, <span class="attr">name</span>=<span class="string">&quot;n1&quot;</span>&gt;</span>    </span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span>, <span class="attr">name</span>=<span class="string">&quot;n3&quot;</span>&gt;</span>   </span><br></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">&quot;input[name = &#x27;n1&#x27;]&quot;</span>)</span><br></pre></td></tr></table></figure></li></ul><p>间接寻找</p><ul><li>找兄弟<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span>1<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;c1&quot;</span>&gt;</span>2<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span>3<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span>4<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure></li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">&quot;#c1&quot;</span>).<span class="title function_">prev</span>()  <span class="comment">//上一个 找到1</span></span><br><span class="line">$(<span class="string">&quot;#c1&quot;</span>).<span class="title function_">next</span>()  <span class="comment">// 下一个 2</span></span><br><span class="line">$(<span class="string">&quot;#c1&quot;</span>).<span class="title function_">next</span>().<span class="title function_">next</span>() <span class="comment">// 下一个的下一个 3</span></span><br><span class="line">$(<span class="string">&quot;#c1&quot;</span>).<span class="title function_">siblings</span>()  <span class="comment">// 所有的兄弟</span></span><br></pre></td></tr></table></figure><ul><li>找父子</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">$(&quot;#c1&quot;).parent() // 父亲</span><br><span class="line">$(&quot;#c1&quot;).parent().parent() // 的父亲</span><br><span class="line"></span><br><span class="line">$(&quot;#c1&quot;).children()  // 所有的儿子</span><br><span class="line">$(&quot;#c1&quot;).children(&quot;.uu&quot;)  // 所有的儿子中寻找class=uu</span><br><span class="line"></span><br><span class="line">$(&quot;#c1&quot;).find(&quot;.uu&quot;)  // 所有的子孙中的uu</span><br><span class="line">$(&quot;#c1&quot;).find(&quot;div&quot;)  // 所有的子孙中的div</span><br></pre></td></tr></table></figure><h4 id="案例：菜单的切换"><a href="#案例：菜单的切换" class="headerlink" title="案例：菜单的切换"></a>案例：菜单的切换</h4><ul><li>点击展开，再点击隐藏</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.menus</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">width</span>: <span class="number">200px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">height</span>: <span class="number">800px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">border</span>: <span class="number">1px</span> solid red;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.menus</span>  <span class="selector-class">.header</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">background-color</span>: gold;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">padding</span>: <span class="number">10px</span> <span class="number">50px</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.menus</span> <span class="selector-class">.content</span> <span class="selector-tag">a</span>&#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">display</span>: block;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">padding</span>: <span class="number">5px</span> <span class="number">5px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">border-bottom</span>: <span class="number">1px</span> dotted gray;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.hide</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">display</span>: none;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">    </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;menus&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;item&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;header&quot;</span> <span class="attr">onclick</span>=<span class="string">&quot;clickMe(this);&quot;</span>&gt;</span>上海<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;content hide&quot;</span> &gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">a</span>&gt;</span>1区<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">a</span>&gt;</span>2区<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">a</span>&gt;</span>3区<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">a</span>&gt;</span>4区<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;item&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;header&quot;</span> <span class="attr">onclick</span>=<span class="string">&quot;clickMe(this);&quot;</span>&gt;</span>北京<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;content hide&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">a</span>&gt;</span>1区<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">a</span>&gt;</span>2区<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">a</span>&gt;</span>3区<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">a</span>&gt;</span>4区<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;static/js/jquery-3.6.1.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">function</span> <span class="title function_">clickMe</span>(<span class="params">self</span>) &#123;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">var</span> hasHide = $(self).<span class="title function_">next</span>().<span class="title function_">hasClass</span>(<span class="string">&quot;hide&quot;</span>);</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">if</span> (hasHide) &#123;</span></span><br><span class="line"><span class="language-javascript">            $(self).<span class="title function_">next</span>().<span class="title function_">removeClass</span>(<span class="string">&quot;hide&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">        &#125; <span class="keyword">else</span>&#123;</span></span><br><span class="line"><span class="language-javascript">            $(self).<span class="title function_">next</span>().<span class="title function_">addClass</span>(<span class="string">&quot;hide&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li>点击一个隐藏其他</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.menus</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">width</span>: <span class="number">200px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">height</span>: <span class="number">800px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">border</span>: <span class="number">1px</span> solid red;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.menus</span>  <span class="selector-class">.header</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">background-color</span>: gold;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">padding</span>: <span class="number">10px</span> <span class="number">50px</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.menus</span> <span class="selector-class">.content</span> <span class="selector-tag">a</span>&#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">display</span>: block;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">padding</span>: <span class="number">5px</span> <span class="number">5px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">border-bottom</span>: <span class="number">1px</span> dotted gray;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.hide</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">display</span>: none;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">    </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;menus&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;item&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;header&quot;</span> <span class="attr">onclick</span>=<span class="string">&quot;clickMe(this);&quot;</span>&gt;</span>上海<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;content hide&quot;</span> &gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">a</span>&gt;</span>1区<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">a</span>&gt;</span>2区<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">a</span>&gt;</span>3区<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">a</span>&gt;</span>4区<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;item&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;header&quot;</span> <span class="attr">onclick</span>=<span class="string">&quot;clickMe(this);&quot;</span>&gt;</span>北京<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;content hide&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">a</span>&gt;</span>1区<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">a</span>&gt;</span>2区<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">a</span>&gt;</span>3区<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">a</span>&gt;</span>4区<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;item&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;header&quot;</span> <span class="attr">onclick</span>=<span class="string">&quot;clickMe(this);&quot;</span>&gt;</span>西安<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;content hide&quot;</span> &gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">a</span>&gt;</span>1区<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">a</span>&gt;</span>2区<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">a</span>&gt;</span>3区<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">a</span>&gt;</span>4区<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;item&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;header&quot;</span> <span class="attr">onclick</span>=<span class="string">&quot;clickMe(this);&quot;</span>&gt;</span>深圳<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;content hide&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">a</span>&gt;</span>1区<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">a</span>&gt;</span>2区<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">a</span>&gt;</span>3区<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">a</span>&gt;</span>4区<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;static/js/jquery-3.6.1.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">function</span> <span class="title function_">clickMe</span>(<span class="params">self</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 将自己下面的因此起来</span></span></span><br><span class="line"><span class="language-javascript">        $(self).<span class="title function_">next</span>().<span class="title function_">removeClass</span>(<span class="string">&quot;hide&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 找父亲的所有兄弟的子孙中的class=content</span></span></span><br><span class="line"><span class="language-javascript">        $(self).<span class="title function_">parent</span>().<span class="title function_">siblings</span>().<span class="title function_">find</span>(<span class="string">&quot;.content&quot;</span>).<span class="title function_">addClass</span>(<span class="string">&quot;hide&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="操作样式"><a href="#操作样式" class="headerlink" title="操作样式"></a>操作样式</h3><ul><li>addClas</li><li>removeClass</li><li>hasClass</li></ul><h3 id="值的操作"><a href="#值的操作" class="headerlink" title="值的操作"></a>值的操作</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;c1&quot;</span>&gt;</span>内容<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">&quot;#c1&quot;</span>).<span class="title function_">text</span>()<span class="comment">// 设置文本内容</span></span><br><span class="line">$(<span class="string">&quot;#c1&quot;</span>).<span class="title function_">text</span>() <span class="comment">//设置文本内容</span></span><br></pre></td></tr></table></figure><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">id</span>=<span class="string">&quot;c2&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">&quot;#c2&quot;</span>).<span class="title function_">val</span>()  <span class="comment">//获取用户输入的值</span></span><br><span class="line">$(<span class="string">&quot;#c2&quot;</span>).<span class="title function_">val</span>(<span class="string">&quot;哈哈&quot;</span>)  <span class="comment">// 设置值</span></span><br></pre></td></tr></table></figure><h4 id="获取值并操作"><a href="#获取值并操作" class="headerlink" title="获取值并操作"></a>获取值并操作</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">id</span>=<span class="string">&quot;txtUser&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;用户名&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">id</span>=<span class="string">&quot;txtEmail&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;邮箱&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">value</span>=<span class="string">&quot;提交&quot;</span> <span class="attr">onclick</span>=<span class="string">&quot;getInfo()&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">ul</span> <span class="attr">id</span>=<span class="string">&quot;view&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;static/js/jquery-3.6.1.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">function</span> <span class="title function_">getInfo</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// 获取用户输入的用户名和密码</span></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">var</span> username = $(<span class="string">&quot;#txtUser&quot;</span>).<span class="title function_">val</span>();</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">var</span> email = $(<span class="string">&quot;#txtEmailt&quot;</span>).<span class="title function_">val</span>();</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">//创建li标签,给li的内部写入内容</span></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">var</span> newli = $(<span class="string">&quot;&lt;li&gt;&quot;</span>).<span class="title function_">text</span>(username);</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// 把新创建的li标签添加到ul里面</span></span></span><br><span class="line"><span class="language-javascript">    $(<span class="string">&quot;#view&quot;</span>).<span class="title function_">append</span>(newli);</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="事件"><a href="#事件" class="headerlink" title="事件"></a>事件</h3><ul><li>点击获取文本</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>1<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>2<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>3<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;static/js/jquery-3.6.1.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    $(<span class="string">&quot;li&quot;</span>).<span class="title function_">click</span>(<span class="keyword">function</span> (<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">var</span> text = $(<span class="variable language_">this</span>).<span class="title function_">text</span>();</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">console</span>.<span class="title function_">log</span>(text);</span></span><br><span class="line"><span class="language-javascript">        &#125;);</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li>删除标签</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>1<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>2<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>3<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;static/js/jquery-3.6.1.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    $(<span class="string">&quot;li&quot;</span>).<span class="title function_">click</span>(<span class="keyword">function</span> (<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">        $(<span class="variable language_">this</span>).<span class="title function_">remove</span>();</span></span><br><span class="line"><span class="language-javascript">        &#125;);</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li>当页面框架加载完成之后执行的代码<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>1<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>2<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>3<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;static/js/jquery-3.6.1.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    $(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">//当页面的框架加载完成之后，自动就执行</span></span></span><br><span class="line"><span class="language-javascript">        $(<span class="string">&quot;li&quot;</span>).<span class="title function_">click</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">var</span> text = $(<span class="variable language_">this</span>).<span class="title function_">remove</span>();</span></span><br><span class="line"><span class="language-javascript">        &#125;);</span></span><br><span class="line"><span class="language-javascript">    &#125;)</span></span><br><span class="line"><span class="language-javascript">    </span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure></li></ul><h4 id="案例：表格的操作"><a href="#案例：表格的操作" class="headerlink" title="案例：表格的操作"></a>案例：表格的操作</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">table</span> <span class="attr">border</span>=<span class="string">&quot;1&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">thead</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">th</span>&gt;</span>id<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">th</span>&gt;</span>name<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">th</span>&gt;</span>do<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">thead</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tbody</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span>1<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span>bkys<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">value</span>=<span class="string">&quot;删除&quot;</span> <span class="attr">class</span>=<span class="string">&quot;delete&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span>1<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span>bkys<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">value</span>=<span class="string">&quot;删除&quot;</span> <span class="attr">class</span>=<span class="string">&quot;delete&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span>1<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span>bkys<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">value</span>=<span class="string">&quot;删除&quot;</span> <span class="attr">class</span>=<span class="string">&quot;delete&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span>1<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span>bkys<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">value</span>=<span class="string">&quot;删除&quot;</span> <span class="attr">class</span>=<span class="string">&quot;delete&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;/<span class="name">tbody</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;static/js/jquery-3.6.1.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    $(<span class="keyword">function</span> (<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">        $(<span class="string">&quot;.delete&quot;</span>).<span class="title function_">click</span>(<span class="keyword">function</span> (<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">            $(<span class="variable language_">this</span>).<span class="title function_">parent</span>().<span class="title function_">parent</span>().<span class="title function_">remove</span>();</span></span><br><span class="line"><span class="language-javascript">        &#125;)</span></span><br><span class="line"><span class="language-javascript">    &#125;)</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="前端基础整合"><a href="#前端基础整合" class="headerlink" title="前端基础整合"></a>前端基础整合</h2><ul><li>HTML</li><li>CSS</li><li>JavaScript，jQuery</li><li>bootstrap（动态效果依赖jQuery）</li></ul><blockquote><p>本地无法使用的时候可以引入其CDN</p></blockquote><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">href</span>=<span class="string">&quot;https://cdn.bootcss.com/twitter-bootstrap/3.3.7/css/bootstrap.min.css&quot;</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">href</span>=<span class="string">&quot;https://cdn.bootcss.com/twitter-bootstrap/3.3.7/css/bootstrap-theme.min.css&quot;</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;http://cdn.bootcss.com/jquery/1.11.1/jquery.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;http://cdn.bootcss.com/bootstrap/3.3.7/js/bootstrap.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="先引入bootstrap和jQuery"><a href="#先引入bootstrap和jQuery" class="headerlink" title="先引入bootstrap和jQuery"></a>先引入bootstrap和jQuery</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">href</span>=<span class="string">&quot;static/plugins/bootstrap3/css/bootstrap.css&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">href</span>=<span class="string">&quot;https://cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;static/js/jquery-3.6.1.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;static/plugins/bootstrap3/js/bootstrap.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li>JavaScript组件的一些应用</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">href</span>=<span class="string">&quot;static/plugins/bootstrap3/css/bootstrap.css&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">href</span>=<span class="string">&quot;https://cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.navbar</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">border-radius</span>: <span class="number">0px</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">    </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">nav</span> <span class="attr">class</span>=<span class="string">&quot;navbar navbar-inverse&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;container-fluid&quot;</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- Brand and toggle get grouped for better mobile display --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;navbar-header&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">class</span>=<span class="string">&quot;navbar-toggle collapsed&quot;</span> <span class="attr">data-toggle</span>=<span class="string">&quot;collapse&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">data-target</span>=<span class="string">&quot;#bs-example-navbar-collapse-9&quot;</span> <span class="attr">aria-expanded</span>=<span class="string">&quot;false&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;sr-only&quot;</span>&gt;</span>Toggle navigation<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;icon-bar&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;icon-bar&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;icon-bar&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">&quot;navbar-brand&quot;</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>xx系统<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- Collect the nav links, forms, and other content for toggling --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;collapse navbar-collapse&quot;</span> <span class="attr">id</span>=<span class="string">&quot;bs-example-navbar-collapse-9&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">ul</span> <span class="attr">class</span>=<span class="string">&quot;nav navbar-nav&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">&quot;active&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>Home<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>Link<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>Link<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">&quot;dropdown&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span> <span class="attr">class</span>=<span class="string">&quot;dropdown-toggle&quot;</span> <span class="attr">data-toggle</span>=<span class="string">&quot;dropdown&quot;</span> <span class="attr">role</span>=<span class="string">&quot;button&quot;</span> <span class="attr">aria-haspopup</span>=<span class="string">&quot;true&quot;</span></span></span><br><span class="line"><span class="tag">                       <span class="attr">aria-expanded</span>=<span class="string">&quot;false&quot;</span>&gt;</span>Dropdown <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;caret&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">ul</span> <span class="attr">class</span>=<span class="string">&quot;dropdown-menu&quot;</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>Action<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>Another action<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>Something else here<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">li</span> <span class="attr">role</span>=<span class="string">&quot;separator&quot;</span> <span class="attr">class</span>=<span class="string">&quot;divider&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>Separated link<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">li</span> <span class="attr">role</span>=<span class="string">&quot;separator&quot;</span> <span class="attr">class</span>=<span class="string">&quot;divider&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>One more separated link<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">ul</span> <span class="attr">class</span>=<span class="string">&quot;nav navbar-nav navbar-right&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>登录<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>注册<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">&quot;dropdown&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span> <span class="attr">class</span>=<span class="string">&quot;dropdown-toggle&quot;</span> <span class="attr">data-toggle</span>=<span class="string">&quot;dropdown&quot;</span> <span class="attr">role</span>=<span class="string">&quot;button&quot;</span> <span class="attr">aria-haspopup</span>=<span class="string">&quot;true&quot;</span></span></span><br><span class="line"><span class="tag">                       <span class="attr">aria-expanded</span>=<span class="string">&quot;false&quot;</span>&gt;</span>librafree <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;caret&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">ul</span> <span class="attr">class</span>=<span class="string">&quot;dropdown-menu&quot;</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>个人资料<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>我的账户<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>修改密码<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">li</span> <span class="attr">role</span>=<span class="string">&quot;separator&quot;</span> <span class="attr">class</span>=<span class="string">&quot;divider&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>注销<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span><span class="comment">&lt;!-- /.navbar-collapse --&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span><span class="comment">&lt;!-- /.container-fluid --&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">nav</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- Button trigger modal --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">class</span>=<span class="string">&quot;btn btn-primary btn-lg&quot;</span> <span class="attr">data-toggle</span>=<span class="string">&quot;modal&quot;</span> <span class="attr">data-target</span>=<span class="string">&quot;#myModal&quot;</span>&gt;</span></span><br><span class="line">    Launch demo modal</span><br><span class="line"><span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- Modal --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;modal fade&quot;</span> <span class="attr">id</span>=<span class="string">&quot;myModal&quot;</span> <span class="attr">tabindex</span>=<span class="string">&quot;-1&quot;</span> <span class="attr">role</span>=<span class="string">&quot;dialog&quot;</span> <span class="attr">aria-labelledby</span>=<span class="string">&quot;myModalLabel&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;modal-dialog&quot;</span> <span class="attr">role</span>=<span class="string">&quot;document&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;modal-content&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;modal-header&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">class</span>=<span class="string">&quot;close&quot;</span> <span class="attr">data-dismiss</span>=<span class="string">&quot;modal&quot;</span> <span class="attr">aria-label</span>=<span class="string">&quot;Close&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">span</span> <span class="attr">aria-hidden</span>=<span class="string">&quot;true&quot;</span>&gt;</span><span class="symbol">&amp;times;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">h4</span> <span class="attr">class</span>=<span class="string">&quot;modal-title&quot;</span> <span class="attr">id</span>=<span class="string">&quot;myModalLabel&quot;</span>&gt;</span>Modal title<span class="tag">&lt;/<span class="name">h4</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;modal-body&quot;</span>&gt;</span></span><br><span class="line">                ...</span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;modal-footer&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">class</span>=<span class="string">&quot;btn btn-default&quot;</span> <span class="attr">data-dismiss</span>=<span class="string">&quot;modal&quot;</span>&gt;</span>Close<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">class</span>=<span class="string">&quot;btn btn-primary&quot;</span>&gt;</span>Save changes<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;bs-example-tooltips&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">class</span>=<span class="string">&quot;btn btn-default&quot;</span> <span class="attr">data-toggle</span>=<span class="string">&quot;tooltip&quot;</span> <span class="attr">data-placement</span>=<span class="string">&quot;left&quot;</span> <span class="attr">title</span>=<span class="string">&quot;&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">data-original-title</span>=<span class="string">&quot;Tooltip on left&quot;</span>&gt;</span>Tooltip on left</span><br><span class="line">    <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">class</span>=<span class="string">&quot;btn btn-default&quot;</span> <span class="attr">data-toggle</span>=<span class="string">&quot;tooltip&quot;</span> <span class="attr">data-placement</span>=<span class="string">&quot;top&quot;</span> <span class="attr">title</span>=<span class="string">&quot;&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">data-original-title</span>=<span class="string">&quot;Tooltip on top&quot;</span>&gt;</span>Tooltip on top</span><br><span class="line">    <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">class</span>=<span class="string">&quot;btn btn-default&quot;</span> <span class="attr">data-toggle</span>=<span class="string">&quot;tooltip&quot;</span> <span class="attr">data-placement</span>=<span class="string">&quot;bottom&quot;</span> <span class="attr">title</span>=<span class="string">&quot;&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">data-original-title</span>=<span class="string">&quot;Tooltip on bottom&quot;</span>&gt;</span>Tooltip on bottom</span><br><span class="line">    <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">class</span>=<span class="string">&quot;btn btn-default&quot;</span> <span class="attr">data-toggle</span>=<span class="string">&quot;tooltip&quot;</span> <span class="attr">data-placement</span>=<span class="string">&quot;right&quot;</span> <span class="attr">title</span>=<span class="string">&quot;&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">data-original-title</span>=<span class="string">&quot;Tooltip on right&quot;</span>&gt;</span>Tooltip on right</span><br><span class="line">    <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">&quot;element&quot;</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">class</span>=<span class="string">&quot;btn btn-lg btn-danger&quot;</span> <span class="attr">data-toggle</span>=<span class="string">&quot;popover&quot;</span> <span class="attr">title</span>=<span class="string">&quot;标题&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">data-content</span>=<span class="string">&quot;And here&#x27;s some amazing content. It&#x27;s very engaging. Right?&quot;</span>&gt;</span>内容</span><br><span class="line">    <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;width: 700px&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;carousel-example-captions&quot;</span> <span class="attr">class</span>=<span class="string">&quot;carousel slide&quot;</span> <span class="attr">data-ride</span>=<span class="string">&quot;carousel&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">ol</span> <span class="attr">class</span>=<span class="string">&quot;carousel-indicators&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span> <span class="attr">data-target</span>=<span class="string">&quot;#carousel-example-captions&quot;</span> <span class="attr">data-slide-to</span>=<span class="string">&quot;0&quot;</span> <span class="attr">class</span>=<span class="string">&quot;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span> <span class="attr">data-target</span>=<span class="string">&quot;#carousel-example-captions&quot;</span> <span class="attr">data-slide-to</span>=<span class="string">&quot;1&quot;</span> <span class="attr">class</span>=<span class="string">&quot;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span> <span class="attr">data-target</span>=<span class="string">&quot;#carousel-example-captions&quot;</span> <span class="attr">data-slide-to</span>=<span class="string">&quot;2&quot;</span> <span class="attr">class</span>=<span class="string">&quot;active&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">ol</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;carousel-inner&quot;</span> <span class="attr">role</span>=<span class="string">&quot;listbox&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;item&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">img</span> <span class="attr">data-src</span>=<span class="string">&quot;holder.js/900x500/auto/#777:#777&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;900x500&quot;</span></span></span><br><span class="line"><span class="tag">                     <span class="attr">src</span>=<span class="string">&quot;data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9InllcyI/PjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB3aWR0aD0iOTAwIiBoZWlnaHQ9IjUwMCIgdmlld0JveD0iMCAwIDkwMCA1MDAiIHByZXNlcnZlQXNwZWN0UmF0aW89Im5vbmUiPjwhLS0KU291cmNlIFVSTDogaG9sZGVyLmpzLzkwMHg1MDAvYXV0by8jNzc3OiM3NzcKQ3JlYXRlZCB3aXRoIEhvbGRlci5qcyAyLjYuMC4KTGVhcm4gbW9yZSBhdCBodHRwOi8vaG9sZGVyanMuY29tCihjKSAyMDEyLTIwMTUgSXZhbiBNYWxvcGluc2t5IC0gaHR0cDovL2ltc2t5LmNvCi0tPjxkZWZzPjxzdHlsZSB0eXBlPSJ0ZXh0L2NzcyI+PCFbQ0RBVEFbI2hvbGRlcl8xODM0ZmQ2OWFmMiB0ZXh0IHsgZmlsbDojNzc3O2ZvbnQtd2VpZ2h0OmJvbGQ7Zm9udC1mYW1pbHk6QXJpYWwsIEhlbHZldGljYSwgT3BlbiBTYW5zLCBzYW5zLXNlcmlmLCBtb25vc3BhY2U7Zm9udC1zaXplOjQ1cHQgfSBdXT48L3N0eWxlPjwvZGVmcz48ZyBpZD0iaG9sZGVyXzE4MzRmZDY5YWYyIj48cmVjdCB3aWR0aD0iOTAwIiBoZWlnaHQ9IjUwMCIgZmlsbD0iIzc3NyIvPjxnPjx0ZXh0IHg9IjMzMy4yMDYyNDU0MjIzNjMzIiB5PSIyNzAuMTYwMDAxMzczMjkxMDQiPjkwMHg1MDA8L3RleHQ+PC9nPjwvZz48L3N2Zz4=&quot;</span></span></span><br><span class="line"><span class="tag">                     <span class="attr">data-holder-rendered</span>=<span class="string">&quot;true&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;carousel-caption&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">h3</span>&gt;</span>First slide label<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">p</span>&gt;</span>Nulla vitae elit libero, a pharetra augue mollis interdum.<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;item&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">img</span> <span class="attr">data-src</span>=<span class="string">&quot;holder.js/900x500/auto/#666:#666&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;900x500&quot;</span></span></span><br><span class="line"><span class="tag">                     <span class="attr">src</span>=<span class="string">&quot;data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9InllcyI/PjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB3aWR0aD0iOTAwIiBoZWlnaHQ9IjUwMCIgdmlld0JveD0iMCAwIDkwMCA1MDAiIHByZXNlcnZlQXNwZWN0UmF0aW89Im5vbmUiPjwhLS0KU291cmNlIFVSTDogaG9sZGVyLmpzLzkwMHg1MDAvYXV0by8jNjY2OiM2NjYKQ3JlYXRlZCB3aXRoIEhvbGRlci5qcyAyLjYuMC4KTGVhcm4gbW9yZSBhdCBodHRwOi8vaG9sZGVyanMuY29tCihjKSAyMDEyLTIwMTUgSXZhbiBNYWxvcGluc2t5IC0gaHR0cDovL2ltc2t5LmNvCi0tPjxkZWZzPjxzdHlsZSB0eXBlPSJ0ZXh0L2NzcyI+PCFbQ0RBVEFbI2hvbGRlcl8xODM0ZmQ2ODU3YiB0ZXh0IHsgZmlsbDojNjY2O2ZvbnQtd2VpZ2h0OmJvbGQ7Zm9udC1mYW1pbHk6QXJpYWwsIEhlbHZldGljYSwgT3BlbiBTYW5zLCBzYW5zLXNlcmlmLCBtb25vc3BhY2U7Zm9udC1zaXplOjQ1cHQgfSBdXT48L3N0eWxlPjwvZGVmcz48ZyBpZD0iaG9sZGVyXzE4MzRmZDY4NTdiIj48cmVjdCB3aWR0aD0iOTAwIiBoZWlnaHQ9IjUwMCIgZmlsbD0iIzY2NiIvPjxnPjx0ZXh0IHg9IjMzMy4yMDYyNDU0MjIzNjMzIiB5PSIyNzAuMTYwMDAxMzczMjkxMDQiPjkwMHg1MDA8L3RleHQ+PC9nPjwvZz48L3N2Zz4=&quot;</span></span></span><br><span class="line"><span class="tag">                     <span class="attr">data-holder-rendered</span>=<span class="string">&quot;true&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;carousel-caption&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">h3</span>&gt;</span>Second slide label<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">p</span>&gt;</span>Lorem ipsum dolor sit amet, consectetur adipiscing elit.<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;item active&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">img</span> <span class="attr">data-src</span>=<span class="string">&quot;holder.js/900x500/auto/#555:#555&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;900x500&quot;</span></span></span><br><span class="line"><span class="tag">                     <span class="attr">src</span>=<span class="string">&quot;data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9InllcyI/PjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB3aWR0aD0iOTAwIiBoZWlnaHQ9IjUwMCIgdmlld0JveD0iMCAwIDkwMCA1MDAiIHByZXNlcnZlQXNwZWN0UmF0aW89Im5vbmUiPjwhLS0KU291cmNlIFVSTDogaG9sZGVyLmpzLzkwMHg1MDAvYXV0by8jNTU1OiM1NTUKQ3JlYXRlZCB3aXRoIEhvbGRlci5qcyAyLjYuMC4KTGVhcm4gbW9yZSBhdCBodHRwOi8vaG9sZGVyanMuY29tCihjKSAyMDEyLTIwMTUgSXZhbiBNYWxvcGluc2t5IC0gaHR0cDovL2ltc2t5LmNvCi0tPjxkZWZzPjxzdHlsZSB0eXBlPSJ0ZXh0L2NzcyI+PCFbQ0RBVEFbI2hvbGRlcl8xODM0ZmQ2YzUwYyB0ZXh0IHsgZmlsbDojNTU1O2ZvbnQtd2VpZ2h0OmJvbGQ7Zm9udC1mYW1pbHk6QXJpYWwsIEhlbHZldGljYSwgT3BlbiBTYW5zLCBzYW5zLXNlcmlmLCBtb25vc3BhY2U7Zm9udC1zaXplOjQ1cHQgfSBdXT48L3N0eWxlPjwvZGVmcz48ZyBpZD0iaG9sZGVyXzE4MzRmZDZjNTBjIj48cmVjdCB3aWR0aD0iOTAwIiBoZWlnaHQ9IjUwMCIgZmlsbD0iIzU1NSIvPjxnPjx0ZXh0IHg9IjMzMy4yMDYyNDU0MjIzNjMzIiB5PSIyNzAuMTYwMDAxMzczMjkxMDQiPjkwMHg1MDA8L3RleHQ+PC9nPjwvZz48L3N2Zz4=&quot;</span></span></span><br><span class="line"><span class="tag">                     <span class="attr">data-holder-rendered</span>=<span class="string">&quot;true&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;carousel-caption&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">h3</span>&gt;</span>Third slide label<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">p</span>&gt;</span>Praesent commodo cursus magna, vel scelerisque nisl consectetur.<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">&quot;left carousel-control&quot;</span> <span class="attr">href</span>=<span class="string">&quot;#carousel-example-captions&quot;</span> <span class="attr">role</span>=<span class="string">&quot;button&quot;</span> <span class="attr">data-slide</span>=<span class="string">&quot;prev&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;glyphicon glyphicon-chevron-left&quot;</span> <span class="attr">aria-hidden</span>=<span class="string">&quot;true&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;sr-only&quot;</span>&gt;</span>Previous<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">&quot;right carousel-control&quot;</span> <span class="attr">href</span>=<span class="string">&quot;#carousel-example-captions&quot;</span> <span class="attr">role</span>=<span class="string">&quot;button&quot;</span> <span class="attr">data-slide</span>=<span class="string">&quot;next&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;glyphicon glyphicon-chevron-right&quot;</span> <span class="attr">aria-hidden</span>=<span class="string">&quot;true&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;sr-only&quot;</span>&gt;</span>Next<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;static/js/jquery-3.6.1.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;static/plugins/bootstrap3/js/bootstrap.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    $(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        $(<span class="string">&#x27;[data-toggle=&quot;tooltip&quot;]&#x27;</span>).<span class="title function_">tooltip</span>()</span></span><br><span class="line"><span class="language-javascript">        $(<span class="string">&#x27;#element&#x27;</span>).<span class="title function_">popover</span>(&#123;<span class="attr">trigger</span>: <span class="string">&quot;click&quot;</span>, <span class="attr">placement</span>: <span class="string">&quot;bottom&quot;</span>&#125;)</span></span><br><span class="line"><span class="language-javascript">        $(<span class="string">&#x27;.carousel&#x27;</span>).<span class="title function_">carousel</span>()</span></span><br><span class="line"><span class="language-javascript">    &#125;)</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="案例：添加数据页面"><a href="#案例：添加数据页面" class="headerlink" title="案例：添加数据页面"></a>案例：添加数据页面</h3><p>人员录入系统，需要提供用户信息：</p><ul><li>用户名，年龄，薪资，部门，入职时间</li><li>对于时间的选择不能输入（插件） datetimepicker<ul><li>下载插件</li><li>应用插件</li><li>也可以设置input为date</li></ul></li></ul><img src="/2022/09/07/Flask%E6%A1%86%E6%9E%B6/image-20230407220938935.png" class><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">href</span>=<span class="string">&quot;static/plugins/bootstrap3/css/bootstrap.css&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">href</span>=<span class="string">&quot;https://cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;container&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">form</span> <span class="attr">class</span>=<span class="string">&quot;form-horizontal&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;row clearfix&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;col-xs-6&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;form-group&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">label</span> <span class="attr">class</span>=<span class="string">&quot;col-sm-2 control-label&quot;</span>&gt;</span>姓名<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;col-sm-10&quot;</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;email&quot;</span> <span class="attr">class</span>=<span class="string">&quot;form-control&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;姓名&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;col-xs-6&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;form-group&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">label</span> <span class="attr">class</span>=<span class="string">&quot;col-sm-2 control-label&quot;</span>&gt;</span>年龄<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;col-sm-10&quot;</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;email&quot;</span> <span class="attr">class</span>=<span class="string">&quot;form-control&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;年龄&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;row clearfix&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;col-xs-6&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;form-group&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">label</span> <span class="attr">class</span>=<span class="string">&quot;col-sm-2 control-label&quot;</span>&gt;</span>薪资<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;col-sm-10&quot;</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;email&quot;</span> <span class="attr">class</span>=<span class="string">&quot;form-control&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;薪资&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;col-xs-6&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;form-group&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">label</span> <span class="attr">class</span>=<span class="string">&quot;col-sm-2 control-label&quot;</span>&gt;</span>部门<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;col-sm-10&quot;</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">select</span> <span class="attr">class</span>=<span class="string">&quot;form-control&quot;</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">option</span>&gt;</span>IT<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">option</span>&gt;</span>销售<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">option</span>&gt;</span>运营<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;row clearfix&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;col-xs-6&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;form-group&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">label</span> <span class="attr">class</span>=<span class="string">&quot;col-sm-2 control-label&quot;</span>&gt;</span>入职日期<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;col-sm-10&quot;</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;date&quot;</span> <span class="attr">class</span>=<span class="string">&quot;form-control&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;入职日期&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;form-group&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;col-sm-offset-2 col-sm-10&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">class</span>=<span class="string">&quot;btn btn-primary&quot;</span>&gt;</span>提交<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            </span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span>   </span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;static/js/jquery-3.6.1.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;static/plugins/bootstrap3/js/bootstrap.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="MYSQL-Python案例"><a href="#MYSQL-Python案例" class="headerlink" title="MYSQL+Python案例"></a>MYSQL+Python案例</h2><h3 id="前提"><a href="#前提" class="headerlink" title="前提"></a>前提</h3><ul><li>python相关：基础，函数，数据类型，面向，模块</li><li>前端开发：HTML，CSS，JavaScript，jQuery。[静态页面]（任何编程语言都可以结合其进行开发，才能形成动态页面）</li><li>动态：需要用到web框架的功能</li></ul><p>txt文件和excel文件可以修改数据，读取数不方便<br>所以我们选择专业的软件：数据库管理系统.</p><blockquote><p>数据库管理系统:mysql/ oracle / sqlserver /db2 / access<br>下面以mysql为例</p></blockquote><p>我们平时开发系统时</p><ul><li>创建数据库</li><li>创建表结构<br>这些需要提前通过MySQL命令创建</li></ul><p>但是表中获得数据一般是通过程序实现增删改查的。</p><h3 id="案例：员工管理系统"><a href="#案例：员工管理系统" class="headerlink" title="案例：员工管理系统"></a>案例：员工管理系统</h3><h4 id="使用mysql创建表格"><a href="#使用mysql创建表格" class="headerlink" title="使用mysql创建表格"></a>使用mysql创建表格</h4><ul><li>使用MySQL内置工具（命令）<ul><li>创建数据表：unicom</li><li>数据表：admin<blockquote><p>表名：admin<br>列：</p><blockquote><p>id,整型，自增，主键<br>username 字符串 不为空<br>password 字符串 不为空<br>mobile  字符串 不为空</p></blockquote></blockquote></li></ul></li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> admin(</span><br><span class="line">id <span class="type">int</span> <span class="keyword">not</span> <span class="keyword">null</span> auto_increment <span class="keyword">primary</span> key,  </span><br><span class="line">username <span class="type">varchar</span>(<span class="number">16</span>) <span class="keyword">not</span> <span class="keyword">null</span>,</span><br><span class="line">password <span class="type">char</span>(<span class="number">64</span>) <span class="keyword">not</span> <span class="keyword">null</span>,</span><br><span class="line">mobile <span class="type">char</span>(<span class="number">11</span>) <span class="keyword">not</span> <span class="keyword">null</span></span><br><span class="line">)<span class="keyword">default</span> charset<span class="operator">=</span>utf8;</span><br></pre></td></tr></table></figure><h4 id="python操作mysql"><a href="#python操作mysql" class="headerlink" title="python操作mysql"></a>python操作mysql</h4><ul><li>python代码实现：<ul><li>添加用户</li><li>删除用户</li><li> 查看用户</li><li>更新用户信息</li></ul></li><li>用python操作mysql需要安装一个插件<ul><li>在pycharm命令行执行以下内容 <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip3 install pymysql</span><br></pre></td></tr></table></figure></li></ul></li></ul><h4 id="输入数据"><a href="#输入数据" class="headerlink" title="输入数据"></a>输入数据</h4><ul><li>程序输入</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pymysql</span><br><span class="line"></span><br><span class="line"><span class="comment"># 连接mysql</span></span><br><span class="line">conn = pymysql.connect(host=<span class="string">&quot;127.0.0.1&quot;</span>, port=<span class="number">3306</span>, user=<span class="string">&quot;root&quot;</span>, password=<span class="string">&quot;root&quot;</span>, charset=<span class="string">&#x27;utf8&#x27;</span>, db=<span class="string">&#x27;bkys&#x27;</span>)</span><br><span class="line">cursor = conn.cursor(cursor=pymysql.cursors.DictCursor)</span><br><span class="line"></span><br><span class="line"><span class="comment"># # 发送指令</span></span><br><span class="line"><span class="comment"># cursor.execute(&quot;insert into admin(username,password,mobile) values(&#x27;bkys&#x27;,&#x27;root123&#x27;,&#x27;55555555555&#x27;)&quot;)</span></span><br><span class="line"><span class="comment"># conn.commit()</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># # 发送指令(不要用字符串格式化做sql的拼接，安全隐患sql注入)</span></span><br><span class="line"><span class="comment"># sql = &quot;insert into admin(username,password,mobile) values(%s,%s,%s)&quot;</span></span><br><span class="line"><span class="comment"># cursor.execute(sql, [&quot;zhang&quot;, &quot;zhang123&quot;, &quot;99999999999&quot;])</span></span><br><span class="line"><span class="comment"># conn.commit()</span></span><br><span class="line"></span><br><span class="line">sql = <span class="string">&quot;insert into admin(username,password,mobile) values(%(n1)s,%(n2)s,%(n3)s)&quot;</span></span><br><span class="line">cursor.execute(sql, &#123;<span class="string">&quot;n1&quot;</span>: <span class="string">&quot;zh&quot;</span>, <span class="string">&quot;n2&quot;</span>: <span class="string">&quot;zhang123456&quot;</span>, <span class="string">&quot;n3&quot;</span>: <span class="string">&quot;99999999&quot;</span>&#125;)</span><br><span class="line">conn.commit()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 关闭</span></span><br><span class="line">cursor.close()</span><br><span class="line">conn.close()</span><br></pre></td></tr></table></figure><ul><li>终端动态输入</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pymysql</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">    user = <span class="built_in">input</span>(<span class="string">&quot;用户名：&quot;</span>)</span><br><span class="line">    <span class="keyword">if</span> user.upper() == <span class="string">&quot;EXIT&quot;</span>:</span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line">    pwd = <span class="built_in">input</span>(<span class="string">&quot;密码：&quot;</span>)</span><br><span class="line">    mobile = <span class="built_in">input</span>(<span class="string">&quot;手机号：&quot;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment"># 连接mysql</span></span><br><span class="line">    conn = pymysql.connect(host=<span class="string">&quot;127.0.0.1&quot;</span>, port=<span class="number">3306</span>, user=<span class="string">&quot;root&quot;</span>, password=<span class="string">&quot;root&quot;</span>, charset=<span class="string">&#x27;utf8&#x27;</span>, db=<span class="string">&#x27;bkys&#x27;</span>)</span><br><span class="line">    cursor = conn.cursor(cursor=pymysql.cursors.DictCursor)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment"># 发送指令(不要用字符串格式化做sql的拼接，安全隐患sql注入)</span></span><br><span class="line">    sql = <span class="string">&quot;insert into admin(username,password,mobile) values(%s,%s,%s)&quot;</span></span><br><span class="line">    cursor.execute(sql, [user, pwd, mobile])</span><br><span class="line">    conn.commit()</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 关闭</span></span><br><span class="line">    cursor.close()</span><br><span class="line">    conn.close()</span><br></pre></td></tr></table></figure><h4 id="查询数据"><a href="#查询数据" class="headerlink" title="查询数据"></a>查询数据</h4><ul><li>查询所有数据</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pymysql</span><br><span class="line"></span><br><span class="line"><span class="comment"># 连接mysql</span></span><br><span class="line">conn = pymysql.connect(host=<span class="string">&quot;127.0.0.1&quot;</span>, port=<span class="number">3306</span>, user=<span class="string">&quot;root&quot;</span>, password=<span class="string">&quot;root&quot;</span>, charset=<span class="string">&#x27;utf8&#x27;</span>, db=<span class="string">&#x27;bkys&#x27;</span>)</span><br><span class="line">cursor = conn.cursor(cursor=pymysql.cursors.DictCursor)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 发送指令(不要用字符串格式化做sql的拼接，安全隐患sql注入)</span></span><br><span class="line">cursor.execute(<span class="string">&quot;select * from admin&quot;</span>)</span><br><span class="line">data_list = cursor.fetchall()</span><br><span class="line"><span class="comment"># print(data_list)</span></span><br><span class="line"><span class="keyword">for</span> row_dict <span class="keyword">in</span> data_list:</span><br><span class="line">    <span class="built_in">print</span>(row_dict)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 关闭</span></span><br><span class="line">cursor.close()</span><br><span class="line">conn.close()</span><br></pre></td></tr></table></figure><ul><li>获取符合条件第一条数据</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pymysql</span><br><span class="line"></span><br><span class="line"><span class="comment"># 连接mysql</span></span><br><span class="line">conn = pymysql.connect(host=<span class="string">&quot;127.0.0.1&quot;</span>, port=<span class="number">3306</span>, user=<span class="string">&quot;root&quot;</span>, password=<span class="string">&quot;root&quot;</span>, charset=<span class="string">&#x27;utf8&#x27;</span>, db=<span class="string">&#x27;bkys&#x27;</span>)</span><br><span class="line">cursor = conn.cursor(cursor=pymysql.cursors.DictCursor)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 发送指令(不要用字符串格式化做sql的拼接，安全隐患sql注入)</span></span><br><span class="line">cursor.execute(<span class="string">&quot;select * from admin where id &gt; %s&quot;</span>, [<span class="number">2</span>, ])</span><br><span class="line">data_list = cursor.fetchone()</span><br><span class="line"><span class="built_in">print</span>(data_list)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 关闭</span></span><br><span class="line">cursor.close()</span><br><span class="line">conn.close()</span><br></pre></td></tr></table></figure><h4 id="删除数据"><a href="#删除数据" class="headerlink" title="删除数据"></a>删除数据</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pymysql</span><br><span class="line"></span><br><span class="line"><span class="comment"># 连接mysql</span></span><br><span class="line">conn = pymysql.connect(host=<span class="string">&quot;127.0.0.1&quot;</span>, port=<span class="number">3306</span>, user=<span class="string">&quot;root&quot;</span>, password=<span class="string">&quot;root&quot;</span>, charset=<span class="string">&#x27;utf8&#x27;</span>, db=<span class="string">&#x27;bkys&#x27;</span>)</span><br><span class="line">cursor = conn.cursor(cursor=pymysql.cursors.DictCursor)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 发送指令(不要用字符串格式化做sql的拼接，安全隐患sql注入)</span></span><br><span class="line">cursor.execute(<span class="string">&quot;delete from admin where  id = %s&quot;</span>, [<span class="number">3</span>])</span><br><span class="line">conn.commit()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 关闭</span></span><br><span class="line">cursor.close()</span><br><span class="line">conn.close()</span><br></pre></td></tr></table></figure><h4 id="修改数据"><a href="#修改数据" class="headerlink" title="修改数据"></a>修改数据</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pymysql</span><br><span class="line"></span><br><span class="line"><span class="comment"># 连接mysql</span></span><br><span class="line">conn = pymysql.connect(host=<span class="string">&quot;127.0.0.1&quot;</span>, port=<span class="number">3306</span>, user=<span class="string">&quot;root&quot;</span>, password=<span class="string">&quot;root&quot;</span>, charset=<span class="string">&#x27;utf8&#x27;</span>, db=<span class="string">&#x27;bkys&#x27;</span>)</span><br><span class="line">cursor = conn.cursor(cursor=pymysql.cursors.DictCursor)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 发送指令(不要用字符串格式化做sql的拼接，安全隐患sql注入)</span></span><br><span class="line">cursor.execute(<span class="string">&quot;update admin set mobile=%s where id = %s&quot;</span>, [<span class="string">&quot;15431&quot;</span>,<span class="number">4</span>, ])</span><br><span class="line">conn.commit()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 关闭</span></span><br><span class="line">cursor.close()</span><br><span class="line">conn.close()</span><br></pre></td></tr></table></figure><h4 id="注意"><a href="#注意" class="headerlink" title="注意"></a>注意</h4><ul><li>在进行新增，删除，修改的时候，一定记得commit，否则数据库没有数据。</li><li>在查询的时候，不需要commit，执行fetchall /fetchone</li><li>对于sql语句不要用python字符串格式化进行拼接，会被sql注入</li></ul><h2 id="前端-python-MYSQL案例"><a href="#前端-python-MYSQL案例" class="headerlink" title="前端+python+MYSQL案例"></a>前端+python+MYSQL案例</h2><h3 id="安装插件"><a href="#安装插件" class="headerlink" title="安装插件"></a>安装插件</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">pip3 install flask  </span><br><span class="line">pip install cryptography </span><br><span class="line">pip3 install pymysql </span><br></pre></td></tr></table></figure><h3 id="文件位置"><a href="#文件位置" class="headerlink" title="文件位置"></a>文件位置</h3><img src="/2022/09/07/Flask%E6%A1%86%E6%9E%B6/image-20230407221445470.png" class title="image-20230407221445470"><h3 id="新增用户"><a href="#新增用户" class="headerlink" title="新增用户"></a>新增用户</h3><ul><li><code>app.py</code><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> flask <span class="keyword">import</span> Flask,render_template, request</span><br><span class="line"><span class="keyword">import</span> pymysql</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">app = Flask(__name__)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@app.route(<span class="params"><span class="string">&#x27;/add/user&#x27;</span>, methods=[<span class="string">&quot;GET&quot;</span>,<span class="string">&quot;POST&quot;</span>]</span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">add</span>():</span><br><span class="line">    <span class="keyword">if</span> request.method == <span class="string">&quot;GET&quot;</span>:</span><br><span class="line">        <span class="keyword">return</span> render_template(<span class="string">&quot;add_user.html&quot;</span>)</span><br><span class="line"></span><br><span class="line">    username = request.form.get(<span class="string">&quot;user&quot;</span>)</span><br><span class="line">    pwd = request.form.get(<span class="string">&quot;pwd&quot;</span>)</span><br><span class="line">    mobile = request.form.get(<span class="string">&quot;mobile&quot;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 连接mysql</span></span><br><span class="line">    conn = pymysql.connect(host=<span class="string">&quot;127.0.0.1&quot;</span>, port=<span class="number">3306</span>, user=<span class="string">&quot;root&quot;</span>, password=<span class="string">&quot;root&quot;</span>, charset=<span class="string">&#x27;utf8&#x27;</span>, db=<span class="string">&#x27;bkys&#x27;</span>)</span><br><span class="line">    cursor = conn.cursor(cursor=pymysql.cursors.DictCursor)</span><br><span class="line"></span><br><span class="line">    sql = <span class="string">&quot;insert into admin(username,password,mobile) values(%s,%s,%s)&quot;</span></span><br><span class="line">    cursor.execute(sql, [username, pwd, mobile])</span><br><span class="line">    conn.commit()</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 关闭</span></span><br><span class="line">    cursor.close()</span><br><span class="line">    conn.close()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;添加成功&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    app.run()</span><br></pre></td></tr></table></figure></li></ul><ul><li><code>add_user.html</code></li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>添加用户<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>添加用户<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">method</span>=<span class="string">&quot;post&quot;</span> <span class="attr">action</span>=<span class="string">&quot;/add/user&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;user&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;用户名&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;pwd&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;密码&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;mobile&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;手机号&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">value</span>=<span class="string">&quot;提交&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="查询所有用户"><a href="#查询所有用户" class="headerlink" title="查询所有用户"></a>查询所有用户</h3><ul><li><code>app.py</code></li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line">from flask import Flask,render_template, request</span><br><span class="line">import pymysql</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">app = Flask(__name__)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">@app.route(&#x27;/add/user&#x27;, methods=[&quot;GET&quot;,&quot;POST&quot;])</span><br><span class="line">def add():</span><br><span class="line">    if request.method == &quot;GET&quot;:</span><br><span class="line">        return render_template(&quot;add_user.html&quot;)</span><br><span class="line"></span><br><span class="line">    username = request.form.get(&quot;user&quot;)</span><br><span class="line">    pwd = request.form.get(&quot;pwd&quot;)</span><br><span class="line">    mobile = request.form.get(&quot;mobile&quot;)</span><br><span class="line"></span><br><span class="line">    # 连接mysql</span><br><span class="line">    conn = pymysql.connect(host=&quot;127.0.0.1&quot;, port=3306, user=&quot;root&quot;, password=&quot;root&quot;, charset=&#x27;utf8&#x27;, db=&#x27;bkys&#x27;)</span><br><span class="line">    cursor = conn.cursor(cursor=pymysql.cursors.DictCursor)</span><br><span class="line"></span><br><span class="line">    sql = &quot;insert into admin(username,password,mobile) values(%s,%s,%s)&quot;</span><br><span class="line">    cursor.execute(sql, [username, pwd, mobile])</span><br><span class="line">    conn.commit()</span><br><span class="line"></span><br><span class="line">    # 关闭</span><br><span class="line">    cursor.close()</span><br><span class="line">    conn.close()</span><br><span class="line"></span><br><span class="line">    return &quot;添加成功&quot;</span><br><span class="line"></span><br><span class="line">@app.route(&quot;/show/user&quot;)</span><br><span class="line">def show_user():</span><br><span class="line">    # 连接mysql</span><br><span class="line">    conn = pymysql.connect(host=&quot;127.0.0.1&quot;, port=3306, user=&quot;root&quot;, password=&quot;root&quot;, charset=&#x27;utf8&#x27;, db=&#x27;bkys&#x27;)</span><br><span class="line">    cursor = conn.cursor(cursor=pymysql.cursors.DictCursor)</span><br><span class="line"></span><br><span class="line">    sql = &quot;select * from admin&quot;</span><br><span class="line">    cursor.execute(sql)</span><br><span class="line">    data_list = cursor.fetchall()</span><br><span class="line"></span><br><span class="line">    # 关闭</span><br><span class="line">    cursor.close()</span><br><span class="line">    conn.close()</span><br><span class="line"></span><br><span class="line">    print(data_list)</span><br><span class="line"></span><br><span class="line">    return render_template(&quot;show_user.html&quot;,data_list=data_list)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">if __name__ == &#x27;__main__&#x27;:</span><br><span class="line">    app.run()</span><br></pre></td></tr></table></figure><ul><li><code>show_user.html</code></li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>用户列表<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span>用户列表<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">table</span> <span class="attr">border</span>=<span class="string">&quot;1&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">thead</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">tr</span>&gt;</span>id<span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">tr</span>&gt;</span>name<span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">tr</span>&gt;</span>user<span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">tr</span>&gt;</span>mobile<span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">thead</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">tbody</span>&gt;</span></span><br><span class="line">        &#123;% for item in data_list %&#125;</span><br><span class="line">            <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">td</span>&gt;</span>&#123;&#123; item.id &#125;&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">td</span>&gt;</span>&#123;&#123; item.username &#125;&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">td</span>&gt;</span>&#123;&#123; item.password &#125;&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">td</span>&gt;</span>&#123;&#123; item.mobile &#125;&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">        &#123;% endfor %&#125;</span><br><span class="line">        <span class="tag">&lt;/<span class="name">tbody</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;Flask快速开发网站&quot;&gt;&lt;a href=&quot;#Flask快速开发网站&quot; class=&quot;headerlink&quot; title=&quot;Flask快速开发网站&quot;&gt;&lt;/a&gt;Flask快速开发网站&lt;/h2&gt;&lt;ol&gt;
&lt;li&gt;终端执行以下命令，安装flask&lt;figure clas</summary>
      
    
    
    
    <category term="Python篇" scheme="http://bkystop.github.io/categories/Python%E7%AF%87/"/>
    
    
    <category term="Python" scheme="http://bkystop.github.io/tags/Python/"/>
    
    <category term="Flask" scheme="http://bkystop.github.io/tags/Flask/"/>
    
  </entry>
  
</feed>
